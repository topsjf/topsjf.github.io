<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://topjf.github.io/linux/shell.html"><meta property="og:site_name" content="topjf"><meta property="og:title" content="Shell è„šæœ¬ç¼–ç¨‹"><meta property="og:description" content="åŸºç¡€è®¤è¯† ç»ˆç«¯ä»¿çœŸå™¨ GNOME Terminalï¼ˆä¸€èˆ¬ç³»ç»Ÿé»˜è®¤ï¼‰ https://help.gnome.org/users/gnome-terminal/stable Konsole Terminal http://konsole.kde.org Eterm http://www.eterm.org Final Term http://finalte..."><meta property="og:type" content="article"><meta property="og:image" content="https://topjf.github.io/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2022-12-16T06:02:03.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="Shell è„šæœ¬ç¼–ç¨‹"><meta property="article:tag" content="linux"><meta property="article:tag" content="Shell"><meta property="article:published_time" content="2022-09-12T00:00:00.000Z"><meta property="article:modified_time" content="2022-12-16T06:02:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Shell è„šæœ¬ç¼–ç¨‹","image":["https://topjf.github.io/"],"datePublished":"2022-09-12T00:00:00.000Z","dateModified":"2022-12-16T06:02:03.000Z","author":[]}</script><script type="text/javascript" src="/script/demo.js"></script><link rel="stylesheet" href="/iconfont/iconfont.css"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>Shell è„šæœ¬ç¼–ç¨‹ | topjf</title><meta name="description" content="åŸºç¡€è®¤è¯† ç»ˆç«¯ä»¿çœŸå™¨ GNOME Terminalï¼ˆä¸€èˆ¬ç³»ç»Ÿé»˜è®¤ï¼‰ https://help.gnome.org/users/gnome-terminal/stable Konsole Terminal http://konsole.kde.org Eterm http://www.eterm.org Final Term http://finalte...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-41a36a5c.css" as="style"><link rel="stylesheet" href="/assets/style-41a36a5c.css">
    <link rel="modulepreload" href="/assets/app-30d3d221.js"><link rel="modulepreload" href="/assets/framework-ed4f969a.js"><link rel="modulepreload" href="/assets/shell.html-76410360.js"><link rel="modulepreload" href="/assets/shell.html-94156e21.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="topjf"><!----><span class="site-name hide-in-pad">topjf</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="å¿«é€Ÿå¯¼èˆª"><span class="font-icon icon iconfont icon-arrow" style=""></span>å¿«é€Ÿå¯¼èˆª<!----></a></div><div class="nav-item hide-in-mobile"><a href="/all/all.html" class="nav-link" aria-label="é¢è¯•å®å…¸"><span class="font-icon icon iconfont icon-overflow" style=""></span>é¢è¯•å®å…¸<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä¸ªäººä¸­å¿ƒ"><span class="title"><span class="font-icon icon iconfont icon-anonymous" style=""></span>ä¸ªäººä¸­å¿ƒ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article" class="nav-link" aria-label="æ–‡ç« "><span class="font-icon icon iconfont icon-note" style=""></span>æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/category" class="nav-link" aria-label="åˆ†ç±»"><span class="font-icon icon iconfont icon-categoryselected" style=""></span>åˆ†ç±»<!----></a></li><li class="dropdown-item"><a href="/tag" class="nav-link" aria-label="æ ‡ç­¾"><span class="font-icon icon iconfont icon-list" style=""></span>æ ‡ç­¾<!----></a></li><li class="dropdown-item"><a href="/encrypted" class="nav-link" aria-label="åŠ å¯†æ–‡ç« "><span class="font-icon icon iconfont icon-command" style=""></span>åŠ å¯†æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/star" class="nav-link" aria-label="æ”¶è—æ–‡ç« "><span class="font-icon icon iconfont icon-like" style=""></span>æ”¶è—æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/timeline" class="nav-link" aria-label="æ—¶é—´çº¿"><span class="font-icon icon iconfont icon-time" style=""></span>æ—¶é—´çº¿<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç½‘ç«™ç›¸å…³"><span class="title"><span class="font-icon icon iconfont icon-info" style=""></span>ç½‘ç«™ç›¸å…³</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/about/about-this.html" class="nav-link" aria-label="å…³äºæœ¬ç«™"><span class="font-icon icon iconfont icon-people" style=""></span>å…³äºæœ¬ç«™<!----></a></li><li class="dropdown-item"><a href="/history/history.html" class="nav-link" aria-label="ç½‘ç«™å†å²"><span class="font-icon icon iconfont icon-time" style=""></span>ç½‘ç«™å†å²<!----></a></li><li class="dropdown-item"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress Theme Hope æ–‡æ¡£" class="nav-link"><span class="font-icon icon iconfont icon-creative" style=""></span>VuePress Theme Hope æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/topjf/topjf" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-object" style=""></span><span class="title">åŸºç¡€å‘½ä»¤</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/linux/basis/command.html" class="nav-link sidebar-link sidebar-page" aria-label="Linuxç¬”å‘½ä»¤å¤§å…¨"><span class="font-icon icon iconfont icon-linux" style=""></span>Linuxç¬”å‘½ä»¤å¤§å…¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/basis/basis.html" class="nav-link sidebar-link sidebar-page" aria-label="LinuxåŸºç¡€"><span class="font-icon icon iconfont icon-linux" style=""></span>LinuxåŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/linux/command-examples.html" class="nav-link sidebar-link sidebar-page" aria-label="Linuxå¸¸ç”¨å‘½ä»¤å®ä¾‹"><span class="font-icon icon iconfont icon-linux" style=""></span>Linuxå¸¸ç”¨å‘½ä»¤å®ä¾‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/exception-analysis.html" class="nav-link sidebar-link sidebar-page" aria-label="Linuxå¸¸è§å¼‚å¸¸åˆ†æ"><span class="font-icon icon iconfont icon-linux" style=""></span>Linuxå¸¸è§å¼‚å¸¸åˆ†æ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/network-setting.html" class="nav-link sidebar-link sidebar-page" aria-label="centosç½‘ç»œç½‘å¡é…ç½®"><span class="font-icon icon iconfont icon-linux" style=""></span>centosç½‘ç»œç½‘å¡é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/disk.html" class="nav-link sidebar-link sidebar-page" aria-label="ç£ç›˜ç›¸å…³çŸ¥è¯†"><span class="font-icon icon iconfont icon-linux" style=""></span>ç£ç›˜ç›¸å…³çŸ¥è¯†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/yum-repo.html" class="nav-link sidebar-link sidebar-page" aria-label="YUM æºé…ç½®"><span class="font-icon icon iconfont icon-linux" style=""></span>YUM æºé…ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/update-kernel.html" class="nav-link sidebar-link sidebar-page" aria-label="centos(kernel)å†…æ ¸å‡çº§"><span class="font-icon icon iconfont icon-linux" style=""></span>centos(kernel)å†…æ ¸å‡çº§<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/jenkins.html" class="nav-link sidebar-link sidebar-page" aria-label="Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²"><span class="font-icon icon iconfont icon-linux" style=""></span>Jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-tool" style=""></span><span class="title">è¿ç»´ç›‘æ§å·¥å…·</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/linux/monitoringtools/nagios.html" class="nav-link sidebar-link sidebar-page" aria-label="Nagiosç›‘æ§å¹³å°"><span class="font-icon icon iconfont icon-edit" style=""></span>Nagiosç›‘æ§å¹³å°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/monitoringtools/open-falcon.html" class="nav-link sidebar-link sidebar-page" aria-label="Open-Falconç›‘æ§å¹³å°"><span class="font-icon icon iconfont icon-edit" style=""></span>Open-Falconç›‘æ§å¹³å°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/monitoringtools/zabbix2.html" class="nav-link sidebar-link sidebar-page" aria-label="Zabbixæ¦‚è¿°ç¯‡"><span class="font-icon icon iconfont icon-edit" style=""></span>Zabbixæ¦‚è¿°ç¯‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/monitoringtools/zabbix.html" class="nav-link sidebar-link sidebar-page" aria-label="Zabbixç›‘æ§å¹³å°å®‰è£…ç¯‡"><span class="font-icon icon iconfont icon-edit" style=""></span>Zabbixç›‘æ§å¹³å°å®‰è£…ç¯‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-tool" style=""></span><span class="title">ansibleè¿ç»´ç®¡ç†å·¥å…·</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/linux/ansible/ansible.html" class="nav-link sidebar-link sidebar-page" aria-label="ansible AD-Hocå‘½ä»¤æ‰§è¡Œå·¥å…·"><span class="font-icon icon iconfont icon-linux" style=""></span>ansible AD-Hocå‘½ä»¤æ‰§è¡Œå·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-doc.html" class="nav-link sidebar-link sidebar-page" aria-label="ansible-docæ¨¡å—åŠŸèƒ½æŸ¥çœ‹å·¥å…·"><span class="font-icon icon iconfont icon-linux" style=""></span>ansible-docæ¨¡å—åŠŸèƒ½æŸ¥çœ‹å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-galaxy.html" class="nav-link sidebar-link sidebar-page" aria-label="ansible-galaxy"><span class="font-icon icon iconfont icon-linux" style=""></span>ansible-galaxy<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-playbook.html" class="nav-link sidebar-link sidebar-page" aria-label="ansible-playbookä»»åŠ¡ç¼–æ’å·¥å…·ï¼ˆå‰§æœ¬ï¼‰"><span class="font-icon icon iconfont icon-linux" style=""></span>ansible-playbookä»»åŠ¡ç¼–æ’å·¥å…·ï¼ˆå‰§æœ¬ï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-docker.html" class="nav-link sidebar-link sidebar-page" aria-label="ansibleå®‰è£…docker"><span class="font-icon icon iconfont icon-linux" style=""></span>ansibleå®‰è£…docker<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-jdk.html" class="nav-link sidebar-link sidebar-page" aria-label="ansibleå®‰è£…jdk"><span class="font-icon icon iconfont icon-linux" style=""></span>ansibleå®‰è£…jdk<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-mysql.html" class="nav-link sidebar-link sidebar-page" aria-label="ansibleå®‰è£…mysql"><span class="font-icon icon iconfont icon-linux" style=""></span>ansibleå®‰è£…mysql<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-nginx.html" class="nav-link sidebar-link sidebar-page" aria-label="ansibleå®‰è£…nginx"><span class="font-icon icon iconfont icon-linux" style=""></span>ansibleå®‰è£…nginx<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-redis.html" class="nav-link sidebar-link sidebar-page" aria-label="ansibleå®‰è£…Redis"><span class="font-icon icon iconfont icon-linux" style=""></span>ansibleå®‰è£…Redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/linux/ansible/ansible-basis.html" class="nav-link sidebar-link sidebar-page" aria-label="ansibleå®‰è£…ä¸åŸºç¡€æ¦‚å¿µ"><span class="font-icon icon iconfont icon-linux" style=""></span>ansibleå®‰è£…ä¸åŸºç¡€æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a aria-current="page" href="/linux/shell.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="Shell è„šæœ¬ç¼–ç¨‹"><span class="font-icon icon iconfont icon-linux" style=""></span>Shell è„šæœ¬ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#åŸºç¡€è®¤è¯†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åŸºç¡€è®¤è¯†"><!---->åŸºç¡€è®¤è¯†<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#ç»ˆç«¯ä»¿çœŸå™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç»ˆç«¯ä»¿çœŸå™¨"><!---->ç»ˆç«¯ä»¿çœŸå™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#shell-ç±»å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="shell ç±»å‹"><!---->shell ç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#shell-çš„çˆ¶å­å…³ç³»-bash" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="shell çš„çˆ¶å­å…³ç³»-bash"><!---->shell çš„çˆ¶å­å…³ç³»-bash<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#ç†è§£-shell-çš„å†…å»ºå‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç†è§£ shell çš„å†…å»ºå‘½ä»¤"><!---->ç†è§£ shell çš„å†…å»ºå‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#linux-ç¯å¢ƒå˜é‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="linux ç¯å¢ƒå˜é‡"><!---->linux ç¯å¢ƒå˜é‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#ç”¨æˆ·åŠç»„æƒé™" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç”¨æˆ·åŠç»„æƒé™"><!---->ç”¨æˆ·åŠç»„æƒé™<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#shell-è„šæœ¬ç¼–ç¨‹åŸºç¡€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="shell è„šæœ¬ç¼–ç¨‹åŸºç¡€"><!---->shell è„šæœ¬ç¼–ç¨‹åŸºç¡€<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#æ„å»ºåŸºæœ¬è„šæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ„å»ºåŸºæœ¬è„šæœ¬"><!---->æ„å»ºåŸºæœ¬è„šæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤"><!---->ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤"><!---->æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#å¤„ç†ç”¨æˆ·è¾“å…¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¤„ç†ç”¨æˆ·è¾“å…¥"><!---->å¤„ç†ç”¨æˆ·è¾“å…¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#å‘ˆç°æ•°æ®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å‘ˆç°æ•°æ®"><!---->å‘ˆç°æ•°æ®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#æ§åˆ¶è„šæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ§åˆ¶è„šæœ¬"><!---->æ§åˆ¶è„šæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#é«˜çº§-shell-è„šæœ¬ç¼–ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é«˜çº§ shell è„šæœ¬ç¼–ç¨‹"><!---->é«˜çº§ shell è„šæœ¬ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#åˆ›å»ºå‡½æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºå‡½æ•°"><!---->åˆ›å»ºå‡½æ•°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹"><!---->å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#æ­£åˆ™è¡¨è¾¾å¼" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­£åˆ™è¡¨è¾¾å¼"><!---->æ­£åˆ™è¡¨è¾¾å¼<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#sed" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="sed"><!---->sed<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#gawk" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="gawk"><!---->gawk<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#ä½¿ç”¨å…¶ä»–-shell" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä½¿ç”¨å…¶ä»– shell"><!---->ä½¿ç”¨å…¶ä»– shell<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#åˆ›å»ºå®ç”¨çš„è„šæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºå®ç”¨çš„è„šæœ¬"><!---->åˆ›å»ºå®ç”¨çš„è„šæœ¬<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·"><!---->ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/linux/shell.html#åˆ›å»ºä¸æ•°æ®åº“ã€webåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="åˆ›å»ºä¸æ•°æ®åº“ã€WebåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬"><!---->åˆ›å»ºä¸æ•°æ®åº“ã€WebåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-linux" style=""></span>Shell è„šæœ¬ç¼–ç¨‹</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/article" target="_blank" rel="noopener noreferrer">topjf</a></span><span property="author" content="topjf"></span></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category0 clickable" role="navigation">Linux</span><meta property="articleSection" content="Linux"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag6 clickable" role="navigation">linux</span><span class="page-tag-item tag7 clickable" role="navigation">Shell</span><meta property="keywords" content="linux,Shell"></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-09-12T00:00:00.000Z"></span><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 57447 å­—</span><meta property="wordCount" content="57447"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 191 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT191M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#åŸºç¡€è®¤è¯†" class="router-link-active router-link-exact-active toc-link level2">åŸºç¡€è®¤è¯†</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#ç»ˆç«¯ä»¿çœŸå™¨" class="router-link-active router-link-exact-active toc-link level3">ç»ˆç«¯ä»¿çœŸå™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#shell-ç±»å‹" class="router-link-active router-link-exact-active toc-link level3">shell ç±»å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#shell-çš„çˆ¶å­å…³ç³»-bash" class="router-link-active router-link-exact-active toc-link level3">shell çš„çˆ¶å­å…³ç³»-bash</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#ç†è§£-shell-çš„å†…å»ºå‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">ç†è§£ shell çš„å†…å»ºå‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#linux-ç¯å¢ƒå˜é‡" class="router-link-active router-link-exact-active toc-link level3">linux ç¯å¢ƒå˜é‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#ç”¨æˆ·åŠç»„æƒé™" class="router-link-active router-link-exact-active toc-link level3">ç”¨æˆ·åŠç»„æƒé™</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#shell-è„šæœ¬ç¼–ç¨‹åŸºç¡€" class="router-link-active router-link-exact-active toc-link level2">shell è„šæœ¬ç¼–ç¨‹åŸºç¡€</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#æ„å»ºåŸºæœ¬è„šæœ¬" class="router-link-active router-link-exact-active toc-link level3">æ„å»ºåŸºæœ¬è„šæœ¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#å¤„ç†ç”¨æˆ·è¾“å…¥" class="router-link-active router-link-exact-active toc-link level3">å¤„ç†ç”¨æˆ·è¾“å…¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#å‘ˆç°æ•°æ®" class="router-link-active router-link-exact-active toc-link level3">å‘ˆç°æ•°æ®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#æ§åˆ¶è„šæœ¬" class="router-link-active router-link-exact-active toc-link level3">æ§åˆ¶è„šæœ¬</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#é«˜çº§-shell-è„šæœ¬ç¼–ç¨‹" class="router-link-active router-link-exact-active toc-link level2">é«˜çº§ shell è„šæœ¬ç¼–ç¨‹</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#åˆ›å»ºå‡½æ•°" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºå‡½æ•°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹" class="router-link-active router-link-exact-active toc-link level3">å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#æ­£åˆ™è¡¨è¾¾å¼" class="router-link-active router-link-exact-active toc-link level3">æ­£åˆ™è¡¨è¾¾å¼</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#sed" class="router-link-active router-link-exact-active toc-link level3">sed</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#gawk" class="router-link-active router-link-exact-active toc-link level3">gawk</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#ä½¿ç”¨å…¶ä»–-shell" class="router-link-active router-link-exact-active toc-link level3">ä½¿ç”¨å…¶ä»– shell</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#åˆ›å»ºå®ç”¨çš„è„šæœ¬" class="router-link-active router-link-exact-active toc-link level2">åˆ›å»ºå®ç”¨çš„è„šæœ¬</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·" class="router-link-active router-link-exact-active toc-link level3">ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/linux/shell.html#åˆ›å»ºä¸æ•°æ®åº“ã€webåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬" class="router-link-active router-link-exact-active toc-link level3">åˆ›å»ºä¸æ•°æ®åº“ã€WebåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!-- more --><h1>Shell è„šæœ¬ç¼–ç¨‹</h1><h2 id="åŸºç¡€è®¤è¯†" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€è®¤è¯†" aria-hidden="true">#</a> åŸºç¡€è®¤è¯†</h2><h3 id="ç»ˆç«¯ä»¿çœŸå™¨" tabindex="-1"><a class="header-anchor" href="#ç»ˆç«¯ä»¿çœŸå™¨" aria-hidden="true">#</a> ç»ˆç«¯ä»¿çœŸå™¨</h3><p>GNOME Terminalï¼ˆä¸€èˆ¬ç³»ç»Ÿé»˜è®¤ï¼‰ <a href="https://help.gnome.org/users/gnome-terminal/stable" target="_blank" rel="noopener noreferrer">https://help.gnome.org/users/gnome-terminal/stable<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Konsole Terminal <a href="http://konsole.kde.org" target="_blank" rel="noopener noreferrer">http://konsole.kde.org<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Eterm <a href="http://www.eterm.org" target="_blank" rel="noopener noreferrer">http://www.eterm.org<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Final Term <a href="http://finalterm.org" target="_blank" rel="noopener noreferrer">http://finalterm.org<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Guake <a href="https://github.com/Guake/guake" target="_blank" rel="noopener noreferrer">https://github.com/Guake/guake<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>LillyTerm <a href="http://lilyterm.luna.com.tw/index.html" target="_blank" rel="noopener noreferrer">http://lilyterm.luna.com.tw/index.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>LXTerminal <a href="http://wiki.lxde.org/en/LXTerminal" target="_blank" rel="noopener noreferrer">http://wiki.lxde.org/en/LXTerminal<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>mrxvt <a href="https://code.google.com/p/mrxvt" target="_blank" rel="noopener noreferrer">https://code.google.com/p/mrxvt<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ROXTerm <a href="http://roxterm.sourceforge.net" target="_blank" rel="noopener noreferrer">http://roxterm.sourceforge.net<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Terminator <a href="https://launchpad.net/terminator" target="_blank" rel="noopener noreferrer">https://launchpad.net/terminator<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Terminology <a href="http://www.enlightenment.org/p.php?p=about/terminology" target="_blank" rel="noopener noreferrer">http://www.enlightenment.org/p.php?p=about/terminology<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>UXterm <a href="http://manpages.ubuntu.com/manpages/gutsy/man1/uxterm.1.html" target="_blank" rel="noopener noreferrer">http://manpages.ubuntu.com/manpages/gutsy/man1/uxterm.1.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Wterm <a href="http://sourceforge.net/projects/wterm" target="_blank" rel="noopener noreferrer">http://sourceforge.net/projects/wterm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>xterm <a href="http://invisible-island.net/xterm" target="_blank" rel="noopener noreferrer">http://invisible-island.net/xterm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="shell-ç±»å‹" tabindex="-1"><a class="header-anchor" href="#shell-ç±»å‹" aria-hidden="true">#</a> shell ç±»å‹</h3><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>/bin/bash	/bin/sh		/bin/tcsh
/bin/dash	/bin/csh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="shell-çš„çˆ¶å­å…³ç³»-bash" tabindex="-1"><a class="header-anchor" href="#shell-çš„çˆ¶å­å…³ç³»-bash" aria-hidden="true">#</a> shell çš„çˆ¶å­å…³ç³»-bash</h3><h4 id="_1ã€bashè¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#_1ã€bashè¿›ç¨‹" aria-hidden="true">#</a> 1ã€bashè¿›ç¨‹</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">12459</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment">#</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment">#</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">12590</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">12661</span>  <span class="token number">12590</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å…¥å‘½ä»¤ bash ä¹‹åï¼Œä¸€ä¸ªå­shellå°±å‡ºç°äº†ã€‚ç¬¬äºŒä¸ª ps -f æ˜¯åœ¨å­shellä¸­æ‰§è¡Œçš„ã€‚å¯ä»¥ä»æ˜¾ç¤ºç»“æœä¸­çœ‹åˆ°æœ‰ä¸¤ä¸ªbash shellç¨‹åºåœ¨è¿è¡Œã€‚ç¬¬ä¸€ä¸ªbash shellç¨‹åºï¼Œä¹Ÿå°±æ˜¯çˆ¶shellè¿›ç¨‹ï¼Œå…¶åŸå§‹è¿›ç¨‹IDæ˜¯ <em>1490</em> ã€‚ç¬¬äºŒä¸ªbash shellç¨‹åºï¼Œå³å­shellè¿›ç¨‹ï¼Œå…¶PIDæ˜¯ <em>12590</em>ã€‚æ³¨æ„ï¼Œå­shellçš„çˆ¶è¿›ç¨‹IDï¼ˆ<code>PPID</code>ï¼‰æ˜¯ <em>1490</em> ï¼ŒæŒ‡æ˜äº†è¿™ä¸ªçˆ¶shellè¿›ç¨‹å°±æ˜¯è¯¥å­shellçš„çˆ¶è¿›ç¨‹</p><p><img src="/assets/true-image-20220914104641154-9a416f26.png" alt=""></p><p>åœ¨ç”Ÿæˆå­shellè¿›ç¨‹æ—¶ï¼Œåªæœ‰éƒ¨åˆ†çˆ¶è¿›ç¨‹çš„ç¯å¢ƒè¢«å¤åˆ¶åˆ°å­shellç¯å¢ƒä¸­ã€‚è¿™ä¼šå¯¹åŒ…æ‹¬å˜é‡åœ¨å†…çš„ä¸€äº›ä¸œè¥¿é€ æˆå½±å“ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">12590</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">14253</span>  <span class="token number">12590</span>  <span class="token number">0</span> <span class="token number">10</span>:37 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment">#</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">12590</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18624</span>  <span class="token number">12590</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18655</span>  <span class="token number">18624</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18679</span>  <span class="token number">18655</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">19698</span>  <span class="token number">18679</span>  <span class="token number">0</span> <span class="token number">10</span>:50 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps --forest</span>
   PID TTY          TIME CMD
  <span class="token number">1490</span> pts/0    00:00:00 <span class="token function">bash</span>
 <span class="token number">12590</span> pts/0    00:00:00  <span class="token punctuation">\</span>_ <span class="token function">bash</span>
 <span class="token number">18624</span> pts/0    00:00:00      <span class="token punctuation">\</span>_ <span class="token function">bash</span>
 <span class="token number">18655</span> pts/0    00:00:00          <span class="token punctuation">\</span>_ <span class="token function">bash</span>
 <span class="token number">18679</span> pts/0    00:00:00              <span class="token punctuation">\</span>_ <span class="token function">bash</span>
 <span class="token number">18730</span> pts/0    00:00:00                  <span class="token punctuation">\</span>_ <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>bash å‘½ä»¤è¢«è¾“å…¥äº†ä¸‰æ¬¡ã€‚è¿™å®é™…ä¸Šåˆ›å»ºäº†ä¸‰ä¸ªå­shellã€‚ <code>ps -forest</code> å‘½ä»¤å±•ç¤ºäº†è¿™äº›å­shellé—´çš„åµŒå¥—ç»“æ„ã€‚</p><p><img src="/assets/true-image-20220914105143147-4af593d9.png" alt=""></p><p><strong>å‚æ•°</strong></p><p><img src="/assets/true-image-20220914105525933-49edb6b6.png" alt=""></p><h4 id="é€€å‡ºå­è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#é€€å‡ºå­è¿›ç¨‹" aria-hidden="true">#</a> é€€å‡ºå­è¿›ç¨‹</h4><p>exit</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">12590</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18624</span>  <span class="token number">12590</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18655</span>  <span class="token number">18624</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18679</span>  <span class="token number">18655</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">21975</span>  <span class="token number">18679</span>  <span class="token number">0</span> <span class="token number">10</span>:56 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">12590</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18624</span>  <span class="token number">12590</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">22071</span>  <span class="token number">18624</span>  <span class="token number">0</span> <span class="token number">10</span>:56 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ã€è¿›ç¨‹åˆ—è¡¨" tabindex="-1"><a class="header-anchor" href="#_2ã€è¿›ç¨‹åˆ—è¡¨" aria-hidden="true">#</a> 2ã€è¿›ç¨‹åˆ—è¡¨</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls</span>
/root
anaconda-ks.cfg  df.sh  first.sh
/etc
/root
anaconda-ks.cfg  df.sh  first.sh
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment">#</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># (pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls)</span>
/root
anaconda-ks.cfg  df.sh  first.sh
/etc
/root
anaconda-ks.cfg  df.sh  first.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä¸Šé¢çš„ç¬¬ä¸€ä¸ªä¾‹å­ä¸­ï¼Œæ‰€æœ‰çš„å‘½ä»¤ä¾æ¬¡æ‰§è¡Œï¼Œä¸å­˜åœ¨ä»»ä½•é—®é¢˜ã€‚ä¸è¿‡è¿™å¹¶ä¸æ˜¯è¿›ç¨‹åˆ—è¡¨ã€‚</p><p>å‘½ä»¤åˆ—è¡¨è¦æƒ³æˆä¸ºè¿›ç¨‹åˆ—è¡¨ï¼Œè¿™äº›å‘½ä»¤å¿…é¡»åŒ…å«åœ¨æ‹¬å·é‡Œã€‚æ‹¬å·çš„åŠ å…¥ä½¿å‘½ä»¤åˆ—è¡¨å˜æˆäº†è¿›ç¨‹åˆ—è¡¨ï¼Œç”Ÿæˆäº†ä¸€ä¸ªå­shellæ¥æ‰§è¡Œå¯¹åº”çš„å‘½ä»¤ã€‚</p><p>è¦æƒ³çŸ¥é“æ˜¯å¦ç”Ÿæˆäº†å­shellï¼Œå¾—å€ŸåŠ©ä¸€ä¸ªä½¿ç”¨äº†ç¯å¢ƒå˜é‡çš„å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤å°±æ˜¯ echo $BASH_SUBSHELLï¼›<strong>å¦‚æœè¯¥å‘½ä»¤è¿”å› 0 ï¼Œå°±è¡¨æ˜æ²¡æœ‰å­shellã€‚å¦‚æœè¿”å› 1 æˆ–è€…å…¶ä»–æ›´å¤§çš„æ•°å­—ï¼Œå°±è¡¨æ˜å­˜åœ¨å­shell</strong>ã€‚å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls ; echo $BASH_SUBSHELL</span>
/root
anaconda-ks.cfg  df.sh  first.sh
/etc
/root
anaconda-ks.cfg  df.sh  first.sh
<span class="token number">0</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># (pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls ; echo $BASH_SUBSHELL)</span>
/root
anaconda-ks.cfg  df.sh  first.sh
/etc
/root
anaconda-ks.cfg  df.sh  first.sh
<span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½ ç”šè‡³å¯ä»¥åœ¨å‘½ä»¤åˆ—è¡¨ä¸­åµŒå¥—æ‹¬å·æ¥åˆ›å»ºå­shellçš„å­shellã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># (pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls ; (echo $BASH_SUBSHELL))</span>
/root
anaconda-ks.cfg  df.sh  first.sh
/etc
/root
anaconda-ks.cfg  df.sh  first.sh
<span class="token number">2</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># (pwd ; ls ; cd /etc ; pwd ; cd ; pwd ; ls ; (echo $BASH_SUBSHELL))</span>
/root
anaconda-ks.cfg  df.sh  first.sh
/etc
/root
anaconda-ks.cfg  df.sh  first.sh
<span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€åå°æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#_3ã€åå°æ¨¡å¼" aria-hidden="true">#</a> 3ã€åå°æ¨¡å¼</h4><p><code>sleep</code> å‘½ä»¤ä¼šåœ¨åå°ï¼ˆ <code>&amp;</code> ï¼‰ç¡çœ 30ç§’ã€‚å½“å®ƒè¢«ç½®å…¥åå°ã€‚</p><p>ä½¿ç”¨ <code>jobs</code> å‘½ä»¤æ¥æ˜¾ç¤ºåå°ä½œä¸šä¿¡æ¯ã€‚ jobs å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå‡ºå½“å‰è¿è¡Œåœ¨åå°æ¨¡å¼ä¸­çš„æ‰€æœ‰ç”¨æˆ·çš„è¿›ç¨‹ï¼ˆä½œä¸šï¼‰ã€‚ä½¿ç”¨<code>-l</code> æ¥æ˜¾ç¤ºè¿›ç¨‹çš„ PIDã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment">#  sleep 30&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">35051</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">12590</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">10</span>:33 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">18624</span>  <span class="token number">12590</span>  <span class="token number">0</span> <span class="token number">10</span>:48 pts/0    00:00:00 <span class="token function">bash</span>
root      <span class="token number">35051</span>  <span class="token number">18624</span>  <span class="token number">0</span> <span class="token number">11</span>:28 pts/0    00:00:00 <span class="token function">sleep</span> <span class="token number">30</span>
root      <span class="token number">35093</span>  <span class="token number">18624</span>  <span class="token number">0</span> <span class="token number">11</span>:28 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># jobs</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+  è¿è¡Œä¸­               <span class="token function">sleep</span> <span class="token number">30</span> <span class="token operator">&amp;</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># jobs -l</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ <span class="token number">35051</span> è¿è¡Œä¸­               <span class="token function">sleep</span> <span class="token number">30</span> <span class="token operator">&amp;</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># jobs -l</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ <span class="token number">35051</span> å®Œæˆ                  <span class="token function">sleep</span> <span class="token number">30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>éœ€è¦æé†’çš„æ˜¯ï¼šåå°ä½œä¸šçš„ç»“æŸçŠ¶æ€å¯æœªå¿…ä¼šä¸€ç›´ç­‰å¾…åˆ°åˆé€‚çš„æ—¶å€™æ‰ç°èº«ã€‚å½“ä½œä¸šç»“æŸçŠ¶æ€çªç„¶å‡ºç°åœ¨å±å¹•ä¸Šçš„æ—¶å€™ï¼Œä½ å¯åˆ«åƒæƒŠå•Šã€‚</p></blockquote><h4 id="_4ã€å°†è¿›ç¨‹åˆ—è¡¨ç½®å…¥åå°" tabindex="-1"><a class="header-anchor" href="#_4ã€å°†è¿›ç¨‹åˆ—è¡¨ç½®å…¥åå°" aria-hidden="true">#</a> 4ã€å°†è¿›ç¨‹åˆ—è¡¨ç½®å…¥åå°</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># (sleep 2 ; echo $BASH_SUBSHELL ; sleep 2)</span>
<span class="token number">1</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># (sleep 2 ; echo $BASH_SUBSHELL ; sleep 2)&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">39128</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># 1		&lt;=== æŒ‰å›è½¦</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+  å®Œæˆ                  <span class="token punctuation">(</span> <span class="token function">sleep</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> <span class="token variable">$BASH_SUBSHELL</span><span class="token punctuation">;</span> <span class="token function">sleep</span> <span class="token number">2</span> <span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŠŠè¿›ç¨‹åˆ—è¡¨ç½®å…¥åå°ä¼šäº§ç”Ÿä¸€ä¸ªä½œä¸šå·å’Œè¿›ç¨‹IDï¼Œç„¶åè¿”å›åˆ°æç¤ºç¬¦ã€‚ä¸è¿‡å¥‡æ€ªçš„æ˜¯è¡¨æ˜å•ä¸€çº§å­shellçš„æ•°å­— 1 æ˜¾ç¤ºåœ¨äº†æç¤ºç¬¦çš„æ—è¾¹ï¼ä¸è¦ä¸çŸ¥æ‰€æªï¼Œåªéœ€è¦æŒ‰ä¸€ä¸‹å›è½¦é”®ï¼Œå°±ä¼šå¾—åˆ°å¦ä¸€ä¸ªæç¤ºç¬¦ã€‚</p><p>åœ¨CLIä¸­è¿ç”¨å­shellçš„åˆ›é€ æ€§æ–¹æ³•ä¹‹ä¸€å°±æ˜¯å°†è¿›ç¨‹åˆ—è¡¨ç½®å…¥åå°æ¨¡å¼ã€‚ä½ æ—¢å¯ä»¥åœ¨å­shellä¸­è¿›è¡Œç¹é‡çš„å¤„ç†å·¥ä½œï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šè®©å­shellçš„I/Oå—åˆ¶äºç»ˆç«¯ã€‚</p><p>å½“ç„¶äº†ï¼Œ sleep å’Œ echo å‘½ä»¤çš„è¿›ç¨‹åˆ—è¡¨åªæ˜¯ä½œä¸ºä¸€ä¸ªç¤ºä¾‹è€Œå·²ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># (tar -cf user1.tar /home/user1 ; tar -cf df.log.tar /home/df.log)&amp;</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token number">2423</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
anaconda-ks.cfg  df.log.tar user1.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5ã€åç¨‹-coproc" tabindex="-1"><a class="header-anchor" href="#_5ã€åç¨‹-coproc" aria-hidden="true">#</a> 5ã€åç¨‹ coproc</h4><p>åç¨‹å¯ä»¥åŒæ—¶åšä¸¤ä»¶äº‹ã€‚å®ƒåœ¨åå°ç”Ÿæˆä¸€ä¸ªå­shellï¼Œå¹¶åœ¨è¿™ä¸ªå­shellä¸­æ‰§è¡Œå‘½ä»¤ã€‚</p><p>é™¤äº†ä¼šåˆ›å»ºå­shellä¹‹å¤–ï¼Œ<strong>åç¨‹åŸºæœ¬ä¸Šå°±æ˜¯å°†å‘½ä»¤ç½®å…¥åå°æ¨¡å¼</strong>ã€‚å½“è¾“å…¥ coproc å‘½ä»¤åŠå…¶å‚æ•°ä¹‹åï¼Œä½ ä¼šå‘ç°å¯ç”¨äº†ä¸€ä¸ªåå°ä½œä¸šã€‚å±å¹•ä¸Šä¼šæ˜¾ç¤ºå‡ºåå°ä½œä¸šå·ï¼ˆ 1 ï¼‰ä»¥åŠè¿›ç¨‹IDï¼ˆ 43011ï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin home<span class="token punctuation">]</span><span class="token comment"># coproc sleep 10</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">43011</span>
<span class="token punctuation">[</span>root@admin home<span class="token punctuation">]</span><span class="token comment"># jobs</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+  è¿è¡Œä¸­               coproc COPROC <span class="token function">sleep</span> <span class="token number">10</span> <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨å‘½ä»¤çš„æ‰©å±•è¯­æ³•è‡ªå·±è®¾ç½®è¿™ä¸ªåå­—ã€‚</p><hr><p><strong>è¯´æ˜ï¼š</strong> åç¨‹èƒ½å¤Ÿè®©ä½ å°½æƒ…å‘æŒ¥æƒ³è±¡åŠ›ï¼Œå‘é€æˆ–æ¥æ”¶æ¥è‡ªå­shellä¸­è¿›ç¨‹çš„ä¿¡æ¯ã€‚åªæœ‰åœ¨æ‹¥æœ‰å¤šä¸ªåç¨‹çš„æ—¶å€™æ‰éœ€è¦å¯¹åç¨‹è¿›è¡Œå‘½åï¼Œå› ä¸ºä½ å¾—å’Œå®ƒä»¬è¿›è¡Œé€šä¿¡ã€‚å¦åˆ™çš„è¯ï¼Œè®© coproc å‘½ä»¤å°†å…¶è®¾ç½®æˆé»˜è®¤çš„åå­— COPROC å°±è¡Œäº†ã€‚</p><hr><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin home<span class="token punctuation">]</span><span class="token comment"># coproc My_Job { sleep 10; }</span>
bash: è­¦å‘Š:execute_coproc: coproc <span class="token punctuation">[</span><span class="token number">43011</span>:COPROC<span class="token punctuation">]</span> still exists
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">43087</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>   å®Œæˆ                  coproc COPROC <span class="token function">sleep</span> <span class="token number">10</span>
<span class="token punctuation">[</span>root@admin home<span class="token punctuation">]</span><span class="token comment"># jobs</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>+  å®Œæˆ                  coproc My_Job <span class="token punctuation">{</span> <span class="token function">sleep</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†åç¨‹ä¸è¿›ç¨‹åˆ—è¡¨ç»“åˆèµ·æ¥äº§ç”ŸåµŒå¥—çš„å­shellã€‚åªéœ€è¦è¾“å…¥è¿›ç¨‹åˆ—è¡¨ï¼Œç„¶åæŠŠå‘½ä»¤ coproc æ”¾åœ¨å‰é¢å°±è¡Œäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin home<span class="token punctuation">]</span><span class="token comment"># coproc ( sleep 10; sleep 2 )</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">43423</span>
<span class="token punctuation">[</span>root@admin home<span class="token punctuation">]</span><span class="token comment"># jobs</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+  è¿è¡Œä¸­               coproc COPROC <span class="token punctuation">(</span> <span class="token function">sleep</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token function">sleep</span> <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token operator">&amp;</span>
<span class="token punctuation">[</span>root@admin home<span class="token punctuation">]</span><span class="token comment"># ps --forest</span>
   PID TTY          TIME CMD
  <span class="token number">1490</span> pts/0    00:00:00 <span class="token function">bash</span>
 <span class="token number">12590</span> pts/0    00:00:00  <span class="token punctuation">\</span>_ <span class="token function">bash</span>
 <span class="token number">18624</span> pts/0    00:00:00      <span class="token punctuation">\</span>_ <span class="token function">bash</span>
 <span class="token number">43423</span> pts/0    00:00:00          <span class="token punctuation">\</span>_ <span class="token function">bash</span>
 <span class="token number">43424</span> pts/0    00:00:00          <span class="token operator">|</span>   <span class="token punctuation">\</span>_ <span class="token function">sleep</span>
 <span class="token number">43479</span> pts/0    00:00:00          <span class="token punctuation">\</span>_ <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>è®°ä½</strong>ï¼šç”Ÿæˆå­shellçš„æˆæœ¬ä¸ä½ï¼Œè€Œä¸”é€Ÿåº¦è¿˜æ…¢ã€‚åˆ›å»ºåµŒå¥—å­shellæ›´æ˜¯ç«ä¸Šæµ‡æ²¹ï¼ åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨å­shellèƒ½å¤Ÿè·å¾—çµæ´»æ€§å’Œä¾¿åˆ©ã€‚è¦æƒ³è·å¾—è¿™äº›ä¼˜åŠ¿ï¼Œé‡è¦çš„æ˜¯ç†è§£å­shellçš„è¡Œä¸ºæ–¹å¼ã€‚å¯¹äºå‘½ä»¤ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h3 id="ç†è§£-shell-çš„å†…å»ºå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ç†è§£-shell-çš„å†…å»ºå‘½ä»¤" aria-hidden="true">#</a> ç†è§£ shell çš„å†…å»ºå‘½ä»¤</h3><p>å†…å»ºå‘½ä»¤å’Œéå†…å»ºå‘½ä»¤çš„æ“ä½œæ–¹å¼å¤§ä¸ç›¸åŒã€‚</p><h4 id="_1ã€å¤–éƒ¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_1ã€å¤–éƒ¨å‘½ä»¤" aria-hidden="true">#</a> 1ã€å¤–éƒ¨å‘½ä»¤</h4><p>å¤–éƒ¨å‘½ä»¤ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä¸ºæ–‡ä»¶ç³»ç»Ÿå‘½ä»¤ï¼Œæ˜¯å­˜åœ¨äºbash shellä¹‹å¤–çš„ç¨‹åºã€‚å®ƒä»¬å¹¶ä¸æ˜¯shellç¨‹åºçš„ä¸€éƒ¨åˆ†ã€‚å¤–éƒ¨å‘½ä»¤ç¨‹åºé€šå¸¸ä½äº<code>/bin</code>ã€<code>/usr/bin</code>ã€<code>/sbin</code>æˆ–<code>/usr/sbin</code>ä¸­ã€‚</p><p>ps å°±æ˜¯ä¸€ä¸ªå¤–éƒ¨å‘½ä»¤ã€‚ä½ å¯ä»¥ä½¿ç”¨ which å’Œ type å‘½ä»¤æ‰¾åˆ°å®ƒ:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># which ps</span>
/usr/bin/ps
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># type -a ps</span>
<span class="token function">ps</span> æ˜¯ /usr/bin/ps
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ls -l /usr/bin/ps</span>
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">100112</span> <span class="token number">10</span>æœˆ  <span class="token number">1</span> <span class="token number">2020</span> /usr/bin/ps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“å¤–éƒ¨å‘½ä»¤æ‰§è¡Œæ—¶ï¼Œä¼šåˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ã€‚è¿™ç§æ“ä½œè¢«ç§°ä¸ºè¡ç”Ÿï¼ˆforkingï¼‰ã€‚å¤–éƒ¨å‘½ä»¤ ps å¾ˆæ–¹ä¾¿æ˜¾ç¤ºå‡ºå®ƒçš„çˆ¶è¿›ç¨‹ä»¥åŠè‡ªå·±æ‰€å¯¹åº”çš„è¡ç”Ÿå­è¿›ç¨‹ã€‚</p><p>ä½œä¸ºå¤–éƒ¨å‘½ä»¤ï¼Œ ps å‘½ä»¤æ‰§è¡Œæ—¶ä¼šåˆ›å»ºå‡ºä¸€ä¸ªå­è¿›ç¨‹ã€‚</p><p><img src="/assets/true-image-20220914120636967-e2434f64.png" alt=""></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">49716</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">12</span>:04 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">49723</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">12</span>:04 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ps -f</span>
<span class="token environment constant">UID</span>         PID   <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root       <span class="token number">1490</span>   <span class="token number">1479</span>  <span class="token number">0</span> <span class="token number">10</span>:06 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
root      <span class="token number">49731</span>   <span class="token number">1490</span>  <span class="token number">0</span> <span class="token number">12</span>:04 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“è¿›ç¨‹å¿…é¡»æ‰§è¡Œè¡ç”Ÿæ“ä½œæ—¶ï¼Œå®ƒéœ€è¦èŠ±è´¹æ—¶é—´å’Œç²¾åŠ›æ¥è®¾ç½®æ–°å­è¿›ç¨‹çš„ç¯å¢ƒã€‚æ‰€ä»¥è¯´ï¼Œå¤–éƒ¨å‘½ä»¤å¤šå°‘è¿˜æ˜¯æœ‰ä»£ä»·çš„ã€‚</p><hr><p><strong>è¯´æ˜</strong> å°±ç®—è¡ç”Ÿå‡ºå­è¿›ç¨‹æˆ–æ˜¯åˆ›å»ºäº†å­shellï¼Œä½ ä»ç„¶å¯ä»¥é€šè¿‡å‘é€ä¿¡å·ä¸å…¶æ²Ÿé€šï¼Œè¿™ä¸€ç‚¹æ— è®ºæ˜¯åœ¨å‘½ä»¤è¡Œè¿˜æ˜¯åœ¨è„šæœ¬ç¼–å†™ä¸­éƒ½æ˜¯æå…¶æœ‰ç”¨çš„ã€‚å‘é€ä¿¡å·ï¼ˆsignalingï¼‰ä½¿å¾—è¿›ç¨‹é—´å¯ä»¥é€šè¿‡ä¿¡å·è¿›è¡Œé€šä¿¡ã€‚</p><hr><h4 id="_2ã€å†…éƒ¨å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#_2ã€å†…éƒ¨å‘½ä»¤" aria-hidden="true">#</a> 2ã€å†…éƒ¨å‘½ä»¤</h4><p>å†…å»ºå‘½ä»¤ä¸éœ€è¦ä½¿ç”¨å­è¿›ç¨‹æ¥æ‰§è¡Œã€‚å®ƒä»¬å·²ç»å’Œshellç¼–è¯‘æˆäº†ä¸€ä½“ï¼Œä½œä¸ºshellå·¥å…·çš„ç»„æˆéƒ¨åˆ†å­˜åœ¨ã€‚ä¸éœ€è¦å€ŸåŠ©å¤–éƒ¨ç¨‹åºæ–‡ä»¶æ¥è¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># type cd</span>
<span class="token builtin class-name">cd</span> æ˜¯ shell å†…åµŒ
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># type exit</span>
<span class="token builtin class-name">exit</span> æ˜¯ shell å†…åµŒ
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># type -a echo</span>
<span class="token builtin class-name">echo</span> æ˜¯ shell å†…åµŒ
<span class="token builtin class-name">echo</span> æ˜¯ /usr/bin/echo
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment">#</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># type -a pwd</span>
<span class="token builtin class-name">pwd</span> æ˜¯ shell å†…åµŒ
<span class="token builtin class-name">pwd</span> æ˜¯ /usr/bin/pwd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ—¢ä¸éœ€è¦é€šè¿‡è¡ç”Ÿå‡ºå­è¿›ç¨‹æ¥æ‰§è¡Œï¼Œä¹Ÿä¸éœ€è¦æ‰“å¼€ç¨‹åºæ–‡ä»¶ï¼Œå†…å»ºå‘½ä»¤çš„<strong>æ‰§è¡Œé€Ÿåº¦è¦æ›´å¿«ï¼Œæ•ˆç‡ä¹Ÿæ›´é«˜</strong>ã€‚</p><h3 id="linux-ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#linux-ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> linux ç¯å¢ƒå˜é‡</h3><h4 id="_1ã€å…¨å±€ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_1ã€å…¨å±€ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> 1ã€å…¨å±€ç¯å¢ƒå˜é‡</h4><p>è¦æŸ¥çœ‹å…¨å±€å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ env æˆ– printenv å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># printenv</span>
<span class="token assign-left variable"><span class="token environment constant">XDG_SESSION_ID</span></span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span>admin
<span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span>xterm
<span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/bin/bash
<span class="token assign-left variable"><span class="token environment constant">HISTSIZE</span></span><span class="token operator">=</span><span class="token number">1000</span>
<span class="token assign-left variable">SSH_CLIENT</span><span class="token operator">=</span><span class="token number">192.168</span>.0.5 <span class="token number">9649</span> <span class="token number">22</span>
<span class="token assign-left variable">SSH_TTY</span><span class="token operator">=</span>/dev/pts/0

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># env</span>
<span class="token assign-left variable"><span class="token environment constant">XDG_SESSION_ID</span></span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span>admin
<span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span>xterm
<span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/bin/bash
<span class="token assign-left variable"><span class="token environment constant">HISTSIZE</span></span><span class="token operator">=</span><span class="token number">1000</span>
<span class="token assign-left variable">SSH_CLIENT</span><span class="token operator">=</span><span class="token number">192.168</span>.0.5 <span class="token number">9649</span> <span class="token number">22</span>
<span class="token assign-left variable">SSH_TTY</span><span class="token operator">=</span>/dev/pts/0
<span class="token assign-left variable"><span class="token environment constant">USER</span></span><span class="token operator">=</span>root

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦æ˜¾ç¤ºä¸ªåˆ«ç¯å¢ƒå˜é‡çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨ printenv å‘½ä»¤ï¼Œä½†æ˜¯ä¸è¦ç”¨ env å‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># printenv HOME</span>
/root
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># env HOME</span>
env: <span class="token environment constant">HOME</span><span class="token builtin class-name">:</span> æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $HOME</span>
/root
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># ls $HOME</span>
anaconda-ks.cfg  df.log.tar  df.sh  first.sh  user1.tar
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2ã€å±€éƒ¨ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_2ã€å±€éƒ¨ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> 2ã€å±€éƒ¨ç¯å¢ƒå˜é‡</h4><p>å±€éƒ¨ç¯å¢ƒå˜é‡åªèƒ½åœ¨å®šä¹‰å®ƒä»¬çš„è¿›ç¨‹ä¸­å¯è§ã€‚</p><p>æŸ¥çœ‹å±€éƒ¨ç¯å¢ƒå˜é‡çš„åˆ—è¡¨æœ‰ç‚¹å¤æ‚ã€‚é—æ†¾çš„æ˜¯ï¼Œåœ¨Linuxç³»ç»Ÿå¹¶æ²¡æœ‰ä¸€ä¸ªåªæ˜¾ç¤ºå±€éƒ¨ç¯å¢ƒå˜é‡çš„å‘½ä»¤ã€‚ set å‘½ä»¤ä¼šæ˜¾ç¤ºä¸ºæŸä¸ªç‰¹å®šè¿›ç¨‹è®¾ç½®çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ï¼ŒåŒ…æ‹¬å±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ä»¥åŠç”¨æˆ·å®šä¹‰å˜é‡ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># set</span>
<span class="token assign-left variable"><span class="token environment constant">BASH</span></span><span class="token operator">=</span>/bin/bash
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token assign-left variable"><span class="token environment constant">BASH_VERSINFO</span></span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;4&quot;</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;2&quot;</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;46&quot;</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;2&quot;</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;release&quot;</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;x86_64-redhat-linux-gnu&quot;</span><span class="token punctuation">)</span>
<span class="token assign-left variable"><span class="token environment constant">BASH_VERSION</span></span><span class="token operator">=</span><span class="token string">&#39;4.2.46(2)-release&#39;</span>
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
<span class="token assign-left variable"><span class="token environment constant">HISTFILE</span></span><span class="token operator">=</span>/root/.bash_history
<span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/root
<span class="token assign-left variable"><span class="token environment constant">HOSTNAME</span></span><span class="token operator">=</span>admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>è¯´æ˜</strong> å‘½ä»¤ <code>env</code> ã€ <code>printenv</code> å’Œ <code>set</code> ä¹‹é—´çš„å·®å¼‚å¾ˆç»†å¾®ã€‚ <strong>set</strong> å‘½ä»¤ä¼šæ˜¾ç¤ºå‡ºå…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ä»¥åŠç”¨æˆ·å®šä¹‰å˜é‡ã€‚å®ƒè¿˜ä¼šæŒ‰ç…§å­—æ¯é¡ºåºå¯¹ç»“æœè¿›è¡Œæ’åºã€‚ <strong>env</strong> å’Œ <strong>printenv</strong> å‘½ä»¤åŒ set å‘½ä»¤çš„åŒºåˆ«åœ¨äºå‰ä¸¤ä¸ªå‘½ä»¤ä¸ä¼šå¯¹å˜é‡æ’åºï¼Œä¹Ÿä¸ä¼šè¾“å‡ºå±€éƒ¨å˜é‡å’Œç”¨æˆ·å®šä¹‰å˜é‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ env å’Œ printenv çš„è¾“å‡ºæ˜¯é‡å¤çš„ã€‚ä¸è¿‡ env å‘½ä»¤æœ‰ä¸€ä¸ª printenv æ²¡æœ‰çš„åŠŸèƒ½ï¼Œè¿™ä½¿å¾—å®ƒè¦æ›´æœ‰ç”¨ä¸€äº›ã€‚</p><hr><h4 id="_3ã€è®¾ç½®ç”¨æˆ·å®šä¹‰å˜é‡" tabindex="-1"><a class="header-anchor" href="#_3ã€è®¾ç½®ç”¨æˆ·å®šä¹‰å˜é‡" aria-hidden="true">#</a> 3ã€è®¾ç½®ç”¨æˆ·å®šä¹‰å˜é‡</h4><p>å¯ä»¥é€šè¿‡ç­‰å·ç»™ç¯å¢ƒå˜é‡èµ‹å€¼ï¼Œå€¼å¯ä»¥æ˜¯æ•°å€¼æˆ–å­—ç¬¦ä¸²ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># my_variable=Hello</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>
Hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>éå¸¸ç®€å•ï¼ç°åœ¨æ¯æ¬¡å¼•ç”¨ my_variable ç¯å¢ƒå˜é‡çš„å€¼ï¼Œåªè¦é€šè¿‡ $my_variable å¼•ç”¨å³å¯ã€‚ å¦‚æœè¦ç»™å˜é‡èµ‹ä¸€ä¸ªå«æœ‰ç©ºæ ¼çš„å­—ç¬¦ä¸²å€¼ï¼Œå¿…é¡»ç”¨å•å¼•å·æ¥ç•Œå®šå­—ç¬¦ä¸²çš„é¦–å’Œå°¾ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># my_variable=Hello World</span>
-bash: World: æœªæ‰¾åˆ°å‘½ä»¤
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># my_variable=&quot;Hello World&quot;</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>
Hello World
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ²¡æœ‰å•å¼•å·çš„è¯ï¼Œbash shellä¼šä»¥ä¸ºä¸‹ä¸€ä¸ªè¯æ˜¯å¦ä¸€ä¸ªè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚æ³¨æ„ï¼Œä½ å®šä¹‰çš„å±€éƒ¨ç¯å¢ƒå˜é‡ç”¨çš„æ˜¯å°å†™å­—æ¯ï¼Œè€Œåˆ°ç›®å‰ä¸ºæ­¢ä½ æ‰€çœ‹åˆ°çš„ç³»ç»Ÿç¯å¢ƒå˜é‡éƒ½æ˜¯å¤§å†™å­—æ¯ã€‚</p><hr><p><strong>æ³¨æ„ï¼š</strong> æ‰€æœ‰çš„ç¯å¢ƒå˜é‡åå‡ä½¿ç”¨å¤§å†™å­—æ¯ï¼Œè¿™æ˜¯bash shellçš„æ ‡å‡†æƒ¯ä¾‹ã€‚å¦‚æœæ˜¯ä½ è‡ªå·±åˆ›å»ºçš„å±€éƒ¨å˜é‡æˆ–æ˜¯shellè„šæœ¬ï¼Œè¯·ä½¿ç”¨å°å†™å­—æ¯ã€‚å˜é‡ååŒºåˆ†å¤§å°å†™ã€‚åœ¨æ¶‰åŠç”¨æˆ·å®šä¹‰çš„å±€éƒ¨å˜é‡æ—¶åšæŒä½¿ç”¨å°å†™å­—æ¯ï¼Œè¿™èƒ½å¤Ÿé¿å…é‡æ–°å®šä¹‰ç³»ç»Ÿç¯å¢ƒå˜é‡å¯èƒ½å¸¦æ¥çš„ç¾éš¾ã€‚</p><hr><p>è®¾ç½®äº†å±€éƒ¨ç¯å¢ƒå˜é‡åï¼Œå°±èƒ½åœ¨shellè¿›ç¨‹çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒäº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœç”Ÿæˆäº†å¦å¤–ä¸€ä¸ªshellï¼Œå®ƒåœ¨å­shellä¸­å°±ä¸å¯ç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>
Hello World
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç±»ä¼¼åœ°ï¼Œå¦‚æœä½ åœ¨å­è¿›ç¨‹ä¸­è®¾ç½®äº†ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆä¸€æ—¦ä½ é€€å‡ºäº†å­è¿›ç¨‹ï¼Œé‚£ä¸ªå±€éƒ¨ç¯å¢ƒå˜é‡å°±ä¸å¯ç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># my_0=&quot;1112323&quot;</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_0</span>
<span class="token number">1112323</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4ã€è®¾ç½®å…¨å±€ç¯å¢ƒå˜é‡-export" tabindex="-1"><a class="header-anchor" href="#_4ã€è®¾ç½®å…¨å±€ç¯å¢ƒå˜é‡-export" aria-hidden="true">#</a> 4ã€è®¾ç½®å…¨å±€ç¯å¢ƒå˜é‡ export</h4><p>åˆ›å»ºå…¨å±€ç¯å¢ƒå˜é‡çš„æ–¹æ³•æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªå±€éƒ¨ç¯å¢ƒå˜é‡ï¼Œç„¶åå†æŠŠå®ƒå¯¼å‡ºåˆ°å…¨å±€ç¯å¢ƒä¸­ï¼ˆ<code>export</code>ï¼‰ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># vmy_variable=&quot;I am Global now&quot;</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># export vmy_variable</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å®šä¹‰å¹¶å¯¼å‡ºå±€éƒ¨ç¯å¢ƒå˜é‡ my_variable åï¼Œ bash å‘½ä»¤å¯åŠ¨äº†ä¸€ä¸ªå­shellã€‚åœ¨è¿™ä¸ªå­shellä¸­èƒ½å¤Ÿæ­£ç¡®çš„æ˜¾ç¤ºå‡ºå˜é‡ my_variable çš„å€¼ã€‚è¯¥å˜é‡èƒ½å¤Ÿä¿ç•™ä½å®ƒçš„å€¼æ˜¯å› ä¸º export å‘½ä»¤ä½¿å…¶å˜æˆäº†å…¨å±€ç¯å¢ƒå˜é‡ã€‚</p><p>ä¿®æ”¹å­shellä¸­å…¨å±€ç¯å¢ƒå˜é‡å¹¶ä¸ä¼šå½±å“åˆ°çˆ¶shellä¸­è¯¥å˜é‡çš„å€¼ã€‚è¿™ç§æ”¹å˜åªæ˜¯åœ¨å­è¿›ç¨‹ä¸­æœ‰æ•ˆï¼Œå¹¶ä¸ä¼šè¢«åæ˜ åˆ°çˆ¶shellä¸­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># vmy_variable=&quot;I am Global now 66666&quot;</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now <span class="token number">66666</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5ã€åˆ é™¤ç¯å¢ƒå˜é‡-unset" tabindex="-1"><a class="header-anchor" href="#_5ã€åˆ é™¤ç¯å¢ƒå˜é‡-unset" aria-hidden="true">#</a> 5ã€åˆ é™¤ç¯å¢ƒå˜é‡ unset</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># unset my_variable</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ æ˜¯åœ¨å­è¿›ç¨‹ä¸­åˆ é™¤äº†ä¸€ä¸ªå…¨å±€ç¯å¢ƒå˜é‡ï¼Œè¿™åªå¯¹å­è¿›ç¨‹æœ‰æ•ˆã€‚è¯¥å…¨å±€ç¯å¢ƒå˜é‡åœ¨çˆ¶è¿›ç¨‹ä¸­ä¾ç„¶å¯ç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># bash</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># unset my_variable</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $my_variable</span>

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $vmy_variable</span>
I am Global now
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>çªé—¨</strong> å¦‚æœè¦ç”¨åˆ°å˜é‡ï¼Œä½¿ç”¨ $ ï¼›å¦‚æœè¦æ“ä½œå˜é‡ï¼Œä¸ä½¿ç”¨ $ ã€‚è¿™æ¡è§„åˆ™çš„ä¸€ ä¸ªä¾‹å¤–å°±æ˜¯ä½¿ç”¨ printenv æ˜¾ç¤ºæŸä¸ªå˜é‡çš„å€¼ã€‚</p><hr><h4 id="_6ã€é»˜è®¤çš„-shell-ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_6ã€é»˜è®¤çš„-shell-ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> 6ã€é»˜è®¤çš„ shell ç¯å¢ƒå˜é‡</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œbash shellä¼šç”¨ä¸€äº›ç‰¹å®šçš„ç¯å¢ƒå˜é‡æ¥å®šä¹‰ç³»ç»Ÿç¯å¢ƒã€‚è¿™äº›å˜é‡åœ¨ä½ çš„Linuxç³»ç»Ÿä¸Šéƒ½å·²ç»è®¾ç½®å¥½äº†ï¼Œåªç®¡æ”¾å¿ƒä½¿ç”¨ã€‚bash shellæºè‡ªå½“åˆçš„Unix Bourne shellï¼Œå› æ­¤ä¹Ÿä¿ç•™äº†Unix Bourne shellé‡Œå®šä¹‰çš„é‚£äº›ç¯å¢ƒå˜é‡ã€‚</p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>$å˜é‡ 			 æè¿°
CDPATH		å†’å·åˆ†éš”çš„ç›®å½•åˆ—è¡¨ï¼Œä½œä¸º cd å‘½ä»¤çš„æœç´¢è·¯å¾„
HOME		å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•
IFS			shellç”¨æ¥å°†æ–‡æœ¬å­—ç¬¦ä¸²åˆ†å‰²æˆå­—æ®µçš„ä¸€ç³»åˆ—å­—ç¬¦
MAIL		å½“å‰ç”¨æˆ·æ”¶ä»¶ç®±çš„æ–‡ä»¶åï¼ˆbash shellä¼šæ£€æŸ¥è¿™ä¸ªæ–‡ä»¶ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æ–°é‚®ä»¶ï¼‰
MAILPATH	å†’å·åˆ†éš”çš„å½“å‰ç”¨æˆ·æ”¶ä»¶ç®±çš„æ–‡ä»¶ååˆ—è¡¨ï¼ˆbash shellä¼šæ£€æŸ¥åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ–‡ä»¶ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æ–°é‚®ä»¶ï¼‰
OPTARG		getopts å‘½ä»¤å¤„ç†çš„æœ€åä¸€ä¸ªé€‰é¡¹å‚æ•°å€¼
OPTIND		getopts å‘½ä»¤å¤„ç†çš„æœ€åä¸€ä¸ªé€‰é¡¹å‚æ•°çš„ç´¢å¼•å·
PATH		shellæŸ¥æ‰¾å‘½ä»¤çš„ç›®å½•åˆ—è¡¨ï¼Œç”±å†’å·åˆ†éš”
PS1			shellå‘½ä»¤è¡Œç•Œé¢çš„ä¸»æç¤ºç¬¦
PS2			shellå‘½ä»¤è¡Œç•Œé¢çš„æ¬¡æç¤º
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº†é»˜è®¤çš„Bourneçš„ç¯å¢ƒå˜é‡ï¼Œbash shellè¿˜æä¾›ä¸€äº›è‡ªæœ‰çš„å˜é‡</p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>$å˜é‡ 			 æè¿°
BASH			å½“å‰shellå®ä¾‹çš„å…¨è·¯å¾„å
BASH_ALIASES	å«æœ‰å½“å‰å·²è®¾ç½®åˆ«åçš„å…³è”æ•°ç»„
BASH_ARGC		å«æœ‰ä¼ å…¥å­å‡½æ•°æˆ–shellè„šæœ¬çš„å‚æ•°æ€»æ•°çš„æ•°ç»„å˜é‡
BASH_ARCV		å«æœ‰ä¼ å…¥å­å‡½æ•°æˆ–shellè„šæœ¬çš„å‚æ•°çš„æ•°ç»„å˜é‡
BASH_CMDS		å…³è”æ•°ç»„ï¼ŒåŒ…å«shellæ‰§è¡Œè¿‡çš„å‘½ä»¤çš„æ‰€åœ¨ä½ç½®
BASH_COMMAND	shellæ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤æˆ–é©¬ä¸Šå°±æ‰§è¡Œçš„å‘½ä»¤
BASH_ENV		è®¾ç½®äº†çš„è¯ï¼Œæ¯ä¸ªbashè„šæœ¬ä¼šåœ¨è¿è¡Œå‰å…ˆå°è¯•è¿è¡Œè¯¥å˜é‡å®šä¹‰çš„å¯åŠ¨æ–‡ä»¶
BASH_EXECUTION_STRING	ä½¿ç”¨ bash -c é€‰é¡¹ä¼ é€’è¿‡æ¥çš„å‘½ä»¤
BASH_LINENO		å«æœ‰å½“å‰æ‰§è¡Œçš„shellå‡½æ•°çš„æºä»£ç è¡Œå·çš„æ•°ç»„å˜é‡
BASH_REMATCH	åªè¯»æ•°ç»„ï¼Œåœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ¯”è¾ƒè¿ç®—ç¬¦=~è¿›è¡Œè‚¯å®šåŒ¹é…ï¼ˆpositive matchï¼‰æ—¶ï¼ŒåŒ…å«äº†åŒ¹é…åˆ°çš„æ¨¡å¼å’Œå­æ¨¡å¼
BASH_SOURCE		å«æœ‰å½“å‰æ­£åœ¨æ‰§è¡Œçš„shellå‡½æ•°æ‰€åœ¨æºæ–‡ä»¶åçš„æ•°ç»„å˜é‡
BASH_SUBSHELL	å½“å‰å­shellç¯å¢ƒçš„åµŒå¥—çº§åˆ«ï¼ˆåˆå§‹å€¼æ˜¯0ï¼‰
BASH_VERSINFO	å«æœ‰å½“å‰è¿è¡Œçš„bash shellçš„ä¸»ç‰ˆæœ¬å·å’Œæ¬¡ç‰ˆæœ¬å·çš„æ•°ç»„å˜é‡
BASH_VERSION	å½“å‰è¿è¡Œçš„bash shellçš„ç‰ˆæœ¬å·
BASH_XTRACEFD	è‹¥è®¾ç½®æˆäº†æœ‰æ•ˆçš„æ–‡ä»¶æè¿°ç¬¦ï¼ˆ 0 ã€ 1 ã€ 2 ï¼‰ï¼Œåˆ™ &#39;set -x&#39; è°ƒè¯•é€‰é¡¹ç”Ÿæˆçš„è·Ÿè¸ªè¾“å‡ºå¯è¢«é‡å®šå‘ã€‚é€šå¸¸ç”¨æ¥å°†è·Ÿè¸ªè¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­
BASHOPTS		å½“å‰å¯ç”¨çš„bash shellé€‰é¡¹çš„åˆ—è¡¨
BASHPID			å½“å‰bashè¿›ç¨‹çš„PID
COLUMNS			å½“å‰bash shellå®ä¾‹æ‰€ç”¨ç»ˆç«¯çš„å®½åº¦
COMP_CWORD		COMP_WORDS å˜é‡çš„ç´¢å¼•å€¼ï¼Œåè€…å«æœ‰å½“å‰å…‰æ ‡çš„ä½ç½®
COMP_LINE		å½“å‰å‘½ä»¤è¡Œ
COMP_POINT		å½“å‰å…‰æ ‡ä½ç½®ç›¸å¯¹äºå½“å‰å‘½ä»¤èµ·å§‹çš„ç´¢å¼•
COMP_KEY		ç”¨æ¥è°ƒç”¨shellå‡½æ•°è¡¥å…¨åŠŸèƒ½çš„æœ€åä¸€ä¸ªé”®
COMP_TYPE		ä¸€ä¸ªæ•´æ•°å€¼ï¼Œè¡¨ç¤ºæ‰€å°è¯•çš„è¡¥å…¨ç±»å‹ï¼Œç”¨ä»¥å®Œæˆshellå‡½æ•°è¡¥å…¨
COMP_WORDBREAKS		Readlineåº“ä¸­ç”¨äºå•è¯è¡¥å…¨çš„è¯åˆ†éš”å­—ç¬¦
COMP_WORDS		å«æœ‰å½“å‰å‘½ä»¤è¡Œæ‰€æœ‰å•è¯çš„æ•°ç»„å˜é‡
COMPREPLY		å«æœ‰ç”±shellå‡½æ•°ç”Ÿæˆçš„å¯èƒ½å¡«å……ä»£ç çš„æ•°ç»„å˜é‡
COPROC			å ç”¨æœªå‘½åçš„åè¿›ç¨‹çš„I/Oæ–‡ä»¶æè¿°ç¬¦çš„æ•°ç»„å˜é‡
DIRSTACK		å«æœ‰ç›®å½•æ ˆå½“å‰å†…å®¹çš„æ•°ç»„å˜é‡
EMACS			è®¾ç½®ä¸º &#39;t&#39; æ—¶ï¼Œè¡¨æ˜emacs shellç¼“å†²åŒºæ­£åœ¨å·¥ä½œï¼Œè€Œè¡Œç¼–è¾‘åŠŸèƒ½è¢«ç¦æ­¢
ENV				å¦‚æœè®¾ç½®äº†è¯¥ç¯å¢ƒå˜é‡ï¼Œåœ¨bash shellè„šæœ¬è¿è¡Œä¹‹å‰ä¼šå…ˆæ‰§è¡Œå·²å®šä¹‰çš„å¯åŠ¨æ–‡ä»¶ï¼ˆä»…ç”¨äºå½“bash shellä»¥POSIXæ¨¡å¼è¢«è°ƒç”¨æ—¶ï¼‰
EUID			å½“å‰ç”¨æˆ·çš„æœ‰æ•ˆç”¨æˆ·IDï¼ˆæ•°å­—å½¢å¼ï¼‰
FCEDIT			ä¾› fc å‘½ä»¤ä½¿ç”¨çš„é»˜è®¤ç¼–è¾‘å™¨
FIGNORE			åœ¨è¿›è¡Œæ–‡ä»¶åè¡¥å…¨æ—¶å¯ä»¥å¿½ç•¥åç¼€ååˆ—è¡¨ï¼Œç”±å†’å·åˆ†éš”
FUNCNAME		å½“å‰æ‰§è¡Œçš„shellå‡½æ•°çš„åç§°
FUNCNEST		å½“è®¾ç½®æˆéé›¶å€¼æ—¶ï¼Œè¡¨ç¤ºæ‰€å…è®¸çš„æœ€å¤§å‡½æ•°åµŒå¥—çº§æ•°ï¼ˆä¸€æ—¦è¶…å‡ºï¼Œå½“å‰å‘½ä»¤å³è¢«ç»ˆæ­¢ï¼‰
GLOBIGNORE		å†’å·åˆ†éš”çš„æ¨¡å¼åˆ—è¡¨ï¼Œå®šä¹‰äº†åœ¨è¿›è¡Œæ–‡ä»¶åæ‰©å±•æ—¶å¯ä»¥å¿½ç•¥çš„ä¸€ç»„æ–‡ä»¶å
GROUPS			å«æœ‰å½“å‰ç”¨æˆ·å±ç»„åˆ—è¡¨çš„æ•°ç»„å˜é‡
histchars		æ§åˆ¶å†å²è®°å½•æ‰©å±•ï¼Œæœ€å¤šå¯æœ‰3ä¸ªå­—ç¬¦
HISTCMD			å½“å‰å‘½ä»¤åœ¨å†å²è®°å½•ä¸­çš„ç¼–å·
HISTCONTROL		æ§åˆ¶å“ªäº›å‘½ä»¤ç•™åœ¨å†å²è®°å½•åˆ—è¡¨ä¸­
HISTFILE		ä¿å­˜shellå†å²è®°å½•åˆ—è¡¨çš„æ–‡ä»¶åï¼ˆé»˜è®¤æ˜¯.bash_historyï¼‰
HISTFILESIZE	æœ€å¤šåœ¨å†å²æ–‡ä»¶ä¸­å­˜å¤šå°‘è¡Œ
HISTTIMEFORMAT	å¦‚æœè®¾ç½®äº†ä¸”éç©ºï¼Œå°±ç”¨ä½œæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œä»¥æ˜¾ç¤ºbashå†å²ä¸­æ¯æ¡å‘½ä»¤çš„æ—¶é—´æˆ³
HISTIGNORE		ç”±å†’å·åˆ†éš”çš„æ¨¡å¼åˆ—è¡¨ï¼Œç”¨æ¥å†³å®šå†å²æ–‡ä»¶ä¸­å“ªäº›å‘½ä»¤ä¼šè¢«å¿½ç•¥
HISTSIZE		æœ€å¤šåœ¨å†å²æ–‡ä»¶ä¸­å­˜å¤šå°‘æ¡å‘½ä»¤
HOSTFILE		shellåœ¨è¡¥å…¨ä¸»æœºåæ—¶è¯»å–çš„æ–‡ä»¶åç§°
HOSTNAME		å½“å‰ä¸»æœºçš„åç§°
HOSTTYPE		å½“å‰è¿è¡Œbash shellçš„æœºå™¨
IGNOREEOF		shellåœ¨é€€å‡ºå‰å¿…é¡»æ”¶åˆ°è¿ç»­çš„ EOF å­—ç¬¦çš„æ•°é‡ï¼ˆå¦‚æœè¿™ä¸ªå€¼ä¸å­˜åœ¨ï¼Œé»˜è®¤æ˜¯ 1 ï¼‰
INPUTRC			Readlineåˆå§‹åŒ–æ–‡ä»¶åï¼ˆé»˜è®¤æ˜¯.inputrcï¼‰
LANG			shellçš„è¯­è¨€ç¯å¢ƒç±»åˆ«
LC_ALL			å®šä¹‰äº†ä¸€ä¸ªè¯­è¨€ç¯å¢ƒç±»åˆ«ï¼Œèƒ½å¤Ÿè¦†ç›– LANG å˜é‡
LC_COLLATE		è®¾ç½®å¯¹å­—ç¬¦ä¸²æ’åºæ—¶ç”¨çš„æ’åºè§„åˆ™
LC_CTYPE		å†³å®šå¦‚ä½•è§£é‡Šå‡ºç°åœ¨æ–‡ä»¶åæ‰©å±•å’Œæ¨¡å¼åŒ¹é…ä¸­çš„å­—ç¬¦
LC_MESSAGES		åœ¨è§£é‡Šå‰é¢å¸¦æœ‰ <span class="token function selector">\$</span> çš„åŒå¼•å·å­—ç¬¦ä¸²æ—¶ï¼Œè¯¥ç¯å¢ƒå˜é‡å†³å®šäº†æ‰€é‡‡ç”¨çš„è¯­è¨€ç¯å¢ƒè®¾ç½®
LC_NUMERIC		å†³å®šç€æ ¼å¼åŒ–æ•°å­—æ—¶é‡‡ç”¨çš„è¯­è¨€ç¯å¢ƒè®¾ç½®
LINENO			å½“å‰æ‰§è¡Œçš„è„šæœ¬çš„è¡Œå·
LINES			å®šä¹‰äº†ç»ˆç«¯ä¸Šå¯è§çš„è¡Œæ•°
MACHTYPE		ç”¨â€œCPU ï€­ å…¬å¸ ï€­ ç³»ç»Ÿâ€ï¼ˆCPU-company-systemï¼‰æ ¼å¼å®šä¹‰çš„ç³»ç»Ÿç±»å‹
MAPFILE			ä¸€ä¸ªæ•°ç»„å˜é‡ï¼Œå½“ mapfile å‘½ä»¤æœªæŒ‡å®šæ•°ç»„å˜é‡ä½œä¸ºå‚æ•°æ—¶ï¼Œå®ƒå­˜å‚¨äº† mapfile æ‰€è¯»å…¥çš„æ–‡æœ¬
MAILCHECK		shellæŸ¥çœ‹æ–°é‚®ä»¶çš„é¢‘ç‡ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼Œé»˜è®¤å€¼æ˜¯ 60 ï¼‰
OLDPWD			shellä¹‹å‰çš„å·¥ä½œç›®å½•
OPTERR			è®¾ç½®ä¸º1æ—¶ï¼Œbash shellä¼šæ˜¾ç¤º getopts å‘½ä»¤äº§ç”Ÿçš„é”™è¯¯
OSTYPE			å®šä¹‰äº†shellæ‰€åœ¨çš„æ“ä½œç³»ç»Ÿ
PIPESTATUS		å«æœ‰å‰å°è¿›ç¨‹çš„é€€å‡ºçŠ¶æ€åˆ—è¡¨çš„æ•°ç»„å˜é‡
POSIXLY_CORRECT		è®¾ç½®äº†çš„è¯ï¼Œbashä¼šä»¥POSIXæ¨¡å¼å¯åŠ¨
PPID			bash shellçˆ¶è¿›ç¨‹çš„PID
PROMPT_COMMAND		è®¾ç½®äº†çš„è¯ï¼Œåœ¨å‘½ä»¤è¡Œä¸»æç¤ºç¬¦æ˜¾ç¤ºä¹‹å‰ä¼šæ‰§è¡Œè¿™æ¡å‘½ä»¤
PROMPT_DIRTRIM		ç”¨æ¥å®šä¹‰å½“å¯ç”¨äº† <span class="token function selector">\w</span> æˆ– <span class="token function selector">\W</span> æç¤ºç¬¦å­—ç¬¦ä¸²è½¬ä¹‰æ—¶æ˜¾ç¤ºçš„å°¾éƒ¨ç›®å½•åçš„æ•°é‡ã€‚è¢«åˆ é™¤çš„ç›®å½•åä¼šç”¨ä¸€ç»„è‹±æ–‡å¥ç‚¹æ›¿æ¢
PS3				select å‘½ä»¤çš„æç¤ºç¬¦
PS4				å¦‚æœä½¿ç”¨äº†bashçš„ -x é€‰é¡¹ï¼Œåœ¨å‘½ä»¤è¡Œä¹‹å‰æ˜¾ç¤ºçš„æç¤ºä¿¡æ¯
PWD				å½“å‰å·¥ä½œç›®å½•
RANDOM			è¿”å›ä¸€ä¸ª0ï½32767çš„éšæœºæ•°ï¼ˆå¯¹å…¶çš„èµ‹å€¼å¯ä½œä¸ºéšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­ï¼‰
READLINE_LINE		å½“ä½¿ç”¨ bind â€“x å‘½ä»¤æ—¶ï¼Œå­˜å‚¨Readlineç¼“å†²åŒºçš„å†…å®¹
READLINE_POINT		å½“ä½¿ç”¨ bind â€“x å‘½ä»¤æ—¶ï¼Œè¡¨ç¤ºReadlineç¼“å†²åŒºå†…å®¹æ’å…¥ç‚¹çš„å½“å‰ä½ç½®
REPLY			readå‘½ä»¤çš„é»˜è®¤å˜é‡
SECONDS			è‡ªä»shellå¯åŠ¨åˆ°ç°åœ¨çš„ç§’æ•°ï¼ˆå¯¹å…¶èµ‹å€¼å°†ä¼šé‡ç½®è®¡æ•°å™¨ï¼‰
SHELL			bash shellçš„å…¨è·¯å¾„å
SHELLOPTS		å·²å¯ç”¨bash shellé€‰é¡¹åˆ—è¡¨ï¼Œåˆ—è¡¨é¡¹ä¹‹é—´ä»¥å†’å·åˆ†éš”
SHLVL			shellçš„å±‚çº§ï¼›æ¯æ¬¡å¯åŠ¨ä¸€ä¸ªæ–°bash shellï¼Œè¯¥å€¼å¢åŠ 1
TIMEFORMAT		æŒ‡å®šäº†shellçš„æ—¶é—´æ˜¾ç¤ºæ ¼å¼
TMOUT			select å’Œ read å‘½ä»¤åœ¨æ²¡è¾“å…¥çš„æƒ…å†µä¸‹ç­‰å¾…å¤šä¹…ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼‰ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºæ— é™é•¿
TMPDIR			ç›®å½•åï¼Œä¿å­˜bash shellåˆ›å»ºçš„ä¸´æ—¶æ–‡ä»¶
UID				å½“å‰ç”¨æˆ·çš„çœŸå®ç”¨æˆ·IDï¼ˆæ•°å­—å½¢å¼ï¼‰
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7ã€è®¾ç½®-path-ç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_7ã€è®¾ç½®-path-ç¯å¢ƒå˜é‡" aria-hidden="true">#</a> 7ã€è®¾ç½® PATH ç¯å¢ƒå˜é‡</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $PATH</span>
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># PATH=$PATH:/home/user1</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $PATH</span>
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/home/user1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>çªé—¨</strong> å¦‚æœå¸Œæœ›å­shellä¹Ÿèƒ½æ‰¾åˆ°ä½ çš„ç¨‹åºçš„ä½ç½®ï¼Œä¸€å®šè¦è®°å¾—æŠŠä¿®æ”¹åçš„ PATH ç¯å¢ƒå˜é‡å¯¼å‡ºã€‚</p><hr><h4 id="_8ã€å®šä½ç³»ç»Ÿç¯å¢ƒå˜é‡" tabindex="-1"><a class="header-anchor" href="#_8ã€å®šä½ç³»ç»Ÿç¯å¢ƒå˜é‡" aria-hidden="true">#</a> 8ã€å®šä½ç³»ç»Ÿç¯å¢ƒå˜é‡</h4><p><strong>ç™»å½• shell</strong></p><p>å½“ä½ ç™»å½•Linuxç³»ç»Ÿæ—¶ï¼Œbash shellä¼šä½œä¸ºç™»å½•shellå¯åŠ¨ã€‚ç™»å½•shellä¼šä»5ä¸ªä¸åŒçš„å¯åŠ¨æ–‡ä»¶é‡Œ è¯»å–å‘½ä»¤ï¼š</p><ul><li>/etc/profile</li><li>$HOME/.bash_profile</li><li>$HOME/.bashrc</li><li>$HOME/.bash_login</li><li>$HOME/.profile</li></ul><p>etc/profileæ–‡ä»¶æ˜¯ç³»ç»Ÿä¸Šé»˜è®¤çš„bash shellçš„ä¸»å¯åŠ¨æ–‡ä»¶ã€‚ç³»ç»Ÿä¸Šçš„æ¯ä¸ªç”¨æˆ·ç™»å½•æ—¶éƒ½ä¼šæ‰§è¡Œ è¿™ä¸ªå¯åŠ¨æ–‡ä»¶ã€‚</p><p>HOMEï¼šæä¾›ä¸€ä¸ªç”¨æˆ·ä¸“å±çš„å¯åŠ¨æ–‡ä»¶æ¥å®šä¹‰è¯¥ç”¨æˆ·æ‰€ç”¨åˆ°çš„ç¯å¢ƒå˜é‡ã€‚</p><p>shellä¼šæŒ‰ç…§æŒ‰ç…§ä¸‹åˆ—é¡ºåºï¼Œè¿è¡Œç¬¬ä¸€ä¸ªè¢«æ‰¾åˆ°çš„æ–‡ä»¶ï¼Œä½™ä¸‹çš„åˆ™è¢«å¿½ç•¥ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$HOME/.bash_profile
$HOME/.bash_login
$HOME/.profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œè¿™ä¸ªåˆ—è¡¨ä¸­å¹¶æ²¡æœ‰$HOME/.bashrcæ–‡ä»¶ã€‚è¿™æ˜¯å› ä¸ºè¯¥æ–‡ä»¶é€šå¸¸é€šè¿‡å…¶ä»–æ–‡ä»¶è¿è¡Œçš„ã€‚</p><h4 id="_9ã€äº¤äº’å¼-shell-è¿›ç¨‹" tabindex="-1"><a class="header-anchor" href="#_9ã€äº¤äº’å¼-shell-è¿›ç¨‹" aria-hidden="true">#</a> 9ã€äº¤äº’å¼ shell è¿›ç¨‹</h4><p>å¦‚æœbashæ˜¯ä½œä¸ºäº¤äº’å¼shellå¯åŠ¨çš„ï¼Œå®ƒå°±ä¸ä¼šè®¿é—®/etc/profileæ–‡ä»¶ï¼Œåªä¼šæ£€æŸ¥ç”¨æˆ·HOMEç›®å½•ä¸­çš„.bashrcæ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin ~]# cat .bashrc
# .bashrc

# User specific aliases and functions

alias rm=&#39;rm -i&#39;
alias cp=&#39;cp -i&#39;
alias mv=&#39;mv -i&#39;

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
f
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_10ã€éäº¤äº’å¼shell" tabindex="-1"><a class="header-anchor" href="#_10ã€éäº¤äº’å¼shell" aria-hidden="true">#</a> 10ã€éäº¤äº’å¼shell</h4><p>æœ€åä¸€ç§shellæ˜¯éäº¤äº’å¼shellã€‚ç³»ç»Ÿæ‰§è¡Œshellè„šæœ¬æ—¶ç”¨çš„å°±æ˜¯è¿™ç§shellã€‚ä¸åŒçš„åœ°æ–¹åœ¨äºå®ƒæ²¡æœ‰å‘½ä»¤è¡Œæç¤ºç¬¦ã€‚ä½†æ˜¯å½“ä½ åœ¨ç³»ç»Ÿä¸Šè¿è¡Œè„šæœ¬æ—¶ï¼Œä¹Ÿè®¸å¸Œæœ›èƒ½å¤Ÿè¿è¡Œä¸€äº›ç‰¹å®šå¯åŠ¨çš„å‘½ä»¤ã€‚</p><hr><p>çªé—¨ è„šæœ¬èƒ½ä»¥ä¸åŒçš„æ–¹å¼æ‰§è¡Œã€‚åªæœ‰å…¶ä¸­çš„æŸä¸€äº›æ–¹å¼èƒ½å¤Ÿå¯åŠ¨å­shell</p><hr><p>ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µï¼Œbash shellæä¾›äº† BASH_ENV ç¯å¢ƒå˜é‡ã€‚å½“shellå¯åŠ¨ä¸€ä¸ªéäº¤äº’å¼shellè¿›ç¨‹æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥è¿™ä¸ªç¯å¢ƒå˜é‡æ¥æŸ¥çœ‹è¦æ‰§è¡Œçš„å¯åŠ¨æ–‡ä»¶ã€‚å¦‚æœæœ‰æŒ‡å®šçš„æ–‡ä»¶ï¼Œshellä¼šæ‰§è¡Œè¯¥æ–‡ä»¶é‡Œçš„å‘½ä»¤ï¼Œè¿™é€šå¸¸åŒ…æ‹¬shellè„šæœ¬å˜é‡è®¾ç½®ã€‚</p><p>åœ¨CentOS Linuxå‘è¡Œç‰ˆä¸­ï¼Œè¿™ä¸ªç¯å¢ƒå˜é‡åœ¨é»˜è®¤æƒ…å†µä¸‹å¹¶æœªè®¾ç½®ã€‚å¦‚æœå˜é‡æœªè®¾ç½®ï¼Œ printenv å‘½ä»¤åªä¼šè¿”å›CLIæç¤ºç¬¦ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">printenv</span> BASH_ENV
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨Ubuntuå‘è¡Œç‰ˆä¸­ï¼Œå˜é‡ BASH_ENV ä¹Ÿæ²¡æœ‰è¢«è®¾ç½®ã€‚è®°ä½ï¼Œå¦‚æœå˜é‡æœªè®¾ç½®ï¼Œ echo å‘½ä»¤ä¼šæ˜¾ç¤ºä¸€ä¸ªç©ºè¡Œï¼Œç„¶åè¿”å›CLIæç¤ºç¬¦ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token builtin class-name">echo</span> <span class="token variable">$BASH_ENV</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>é‚£å¦‚æœ BASH_ENV å˜é‡æ²¡æœ‰è®¾ç½®ï¼Œshellè„šæœ¬åˆ°å“ªé‡Œå»è·å¾—å®ƒä»¬çš„ç¯å¢ƒå˜é‡å‘¢ï¼Ÿåˆ«å¿˜äº†æœ‰äº›shellè„šæœ¬æ˜¯é€šè¿‡å¯åŠ¨ä¸€ä¸ªå­shellæ¥æ‰§è¡Œçš„ï¼ˆå‚è§ç¬¬5ç« ï¼‰ã€‚å­shellå¯ä»¥ç»§æ‰¿çˆ¶shellå¯¼å‡ºè¿‡çš„å˜é‡ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœçˆ¶shellæ˜¯ç™»å½•shellï¼Œåœ¨/etc/profileã€/etc/profile.d/ * .shå’Œ$HOME/.bashrcæ–‡ä»¶ä¸­è®¾ç½®å¹¶å¯¼å‡ºäº†å˜é‡ï¼Œç”¨äºæ‰§è¡Œè„šæœ¬çš„å­shellå°±èƒ½å¤Ÿç»§æ‰¿è¿™äº›å˜é‡ã€‚</p><p>è¦è®°ä½ï¼Œç”±çˆ¶shellè®¾ç½®ä½†å¹¶æœªå¯¼å‡ºçš„å˜é‡éƒ½æ˜¯å±€éƒ¨å˜é‡ã€‚å­shellæ— æ³•ç»§æ‰¿å±€éƒ¨å˜é‡ã€‚</p><p>å¯¹äºé‚£äº›ä¸å¯åŠ¨å­shellçš„è„šæœ¬ï¼Œå˜é‡å·²ç»å­˜åœ¨äºå½“å‰shellä¸­äº†ã€‚æ‰€ä»¥å°±ç®—æ²¡æœ‰è®¾ç½® BASH_ENV ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å½“å‰shellçš„å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡</p><h4 id="_11ã€ç¯å¢ƒå˜é‡æŒä¹…åŒ–" tabindex="-1"><a class="header-anchor" href="#_11ã€ç¯å¢ƒå˜é‡æŒä¹…åŒ–" aria-hidden="true">#</a> 11ã€ç¯å¢ƒå˜é‡æŒä¹…åŒ–</h4><p>å¯¹å…¨å±€ç¯å¢ƒå˜é‡æ¥è¯´ï¼ˆLinuxç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·éƒ½éœ€è¦ä½¿ç”¨çš„å˜é‡ï¼‰ï¼Œå¯èƒ½æ›´å€¾å‘äºå°†æ–°çš„æˆ–ä¿®æ”¹è¿‡çš„å˜é‡è®¾ç½®æ”¾åœ¨<code>/etc/profile</code>æ–‡ä»¶ä¸­ï¼Œä½†è¿™å¯ä¸æ˜¯ä»€ä¹ˆå¥½ä¸»æ„ã€‚å¦‚æœä½ å‡çº§äº†æ‰€ç”¨çš„å‘è¡Œç‰ˆï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿä¼šè·Ÿç€æ›´æ–°ï¼Œé‚£ä½ æ‰€æœ‰å®šåˆ¶è¿‡çš„å˜é‡è®¾ç½®å¯å°±éƒ½æ²¡æœ‰äº†ã€‚</p><p>æœ€å¥½æ˜¯åœ¨/etc/profile.dç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªä»¥.shç»“å°¾çš„æ–‡ä»¶ã€‚æŠŠæ‰€æœ‰æ–°çš„æˆ–ä¿®æ”¹è¿‡çš„å…¨å±€ç¯å¢ƒå˜é‡è®¾ç½®æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚</p><p>åœ¨å¤§å¤šæ•°å‘è¡Œç‰ˆä¸­ï¼Œå­˜å‚¨ä¸ªäººç”¨æˆ·æ°¸ä¹…æ€§bash shellå˜é‡çš„åœ°æ–¹æ˜¯ HOME/.bashrcæ–‡ä»¶ã€‚è¿™ä¸€ç‚¹é€‚ç”¨äºæ‰€æœ‰ç±»å‹çš„shellè¿›ç¨‹ã€‚ä½†å¦‚æœè®¾ç½®äº† BASH_ENV å˜é‡ï¼Œé‚£ä¹ˆè®°ä½ï¼Œé™¤éå®ƒæŒ‡å‘çš„æ˜¯ HOME/.bashrcï¼Œå¦åˆ™ä½ åº”è¯¥å°†éäº¤äº’å¼shellçš„ç”¨æˆ·å˜é‡æ”¾åœ¨åˆ«çš„åœ°æ–¹ã€‚</p><h4 id="_12ã€æ•°ç»„å˜é‡" tabindex="-1"><a class="header-anchor" href="#_12ã€æ•°ç»„å˜é‡" aria-hidden="true">#</a> 12ã€æ•°ç»„å˜é‡</h4><p>è¦ç»™æŸä¸ªç¯å¢ƒå˜é‡è®¾ç½®å¤šä¸ªå€¼ï¼Œå¯ä»¥æŠŠå€¼æ”¾åœ¨æ‹¬å·é‡Œï¼Œå€¼ä¸å€¼ä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># mytest=(one two three four five)</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $mytestecho $mytest</span>
one
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo $mytest</span>
one
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo ${mytest[2]}</span>
three
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo ${mytest[*]}</span>
one two three four five
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># mytest[2]=seven</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo ${mytest[*]}</span>
one two seven four five
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># unset mytest[2]</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo ${mytest[*]}</span>
one two four five
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo ${mytest[2]}</span>

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># echo ${mytest[3]}</span>
four
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç”¨æˆ·åŠç»„æƒé™" tabindex="-1"><a class="header-anchor" href="#ç”¨æˆ·åŠç»„æƒé™" aria-hidden="true">#</a> ç”¨æˆ·åŠç»„æƒé™</h3><h4 id="etc-passwd" tabindex="-1"><a class="header-anchor" href="#etc-passwd" aria-hidden="true">#</a> /etc/passwd</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/passwd</span>
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">]</span>
nginx:x:385:385:Nginx web server:/var/lib/nginx:/sbin/nologin
mysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/false
user1:x:1001:1001::/home/user1:/bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç™»å½•ç”¨æˆ·å</li><li>ç”¨æˆ·å¯†</li><li>ç”¨æˆ·è´¦æˆ·çš„UIDï¼ˆæ•°å­—å½¢å¼ï¼‰</li><li>ç”¨æˆ·è´¦æˆ·çš„ç»„IDï¼ˆGIDï¼‰ï¼ˆæ•°å­—å½¢å¼ï¼‰</li><li>ç”¨æˆ·è´¦æˆ·çš„æ–‡æœ¬æè¿°ï¼ˆç§°ä¸ºå¤‡æ³¨å­—æ®µï¼‰</li><li>ç”¨æˆ·HOMEç›®å½•çš„ä½ç½®</li><li>ç”¨æˆ·çš„é»˜è®¤shell</li></ul><h4 id="etc-shadow" tabindex="-1"><a class="header-anchor" href="#etc-shadow" aria-hidden="true">#</a> /etc/shadow</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/shadow</span>
root:<span class="token variable">$6</span><span class="token variable">$IuU9ujIkCecQ7kzi</span><span class="token variable">$TCClr5k7U9Zj8yJBxmqg0jpJOGTuJX0bci2YWVl70pRBrGWVSgZ529BI8BFZvhWgJCd0GbPSk4BtgFS6WL0jq</span>.::0:99999:7:::
bin:*:18353:0:99999:7:::
daemon:*:18353:0:99999:7:::
<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä¸/etc/passwdæ–‡ä»¶ä¸­çš„ç™»å½•åå­—æ®µå¯¹åº”çš„ç™»å½•å</li><li>åŠ å¯†åçš„å¯†ç </li><li>è‡ªä¸Šæ¬¡ä¿®æ”¹å¯†ç åè¿‡å»çš„å¤©æ•°å¯†ç ï¼ˆè‡ª1970å¹´1æœˆ1æ—¥å¼€å§‹è®¡ç®—ï¼‰</li><li>å¤šå°‘å¤©åæ‰èƒ½æ›´æ”¹å¯†ç </li><li>å¤šå°‘å¤©åå¿…é¡»æ›´æ”¹å¯†ç </li><li>å¯†ç è¿‡æœŸå‰æå‰å¤šå°‘å¤©æé†’ç”¨æˆ·æ›´æ”¹å¯†ç </li><li>å¯†ç è¿‡æœŸåå¤šå°‘å¤©ç¦ç”¨ç”¨æˆ·è´¦æˆ·</li><li>ç”¨æˆ·è´¦æˆ·è¢«ç¦ç”¨çš„æ—¥æœŸï¼ˆç”¨è‡ª1970å¹´1æœˆ1æ—¥åˆ°å½“å¤©çš„å¤©æ•°è¡¨ç¤ºï¼‰</li><li>é¢„ç•™å­—æ®µç»™å°†æ¥ä½¿ç”¨</li></ul><h4 id="etc-group" tabindex="-1"><a class="header-anchor" href="#etc-group" aria-hidden="true">#</a> /etc/group</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/group</span>
root:x:0:
bin:x:1:
daemon:x:2:
sys:x:3:
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
nginx:x:385:
docker:x:384:
mysql:x:27:
user1:x:1001:
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»„å</li><li>ç»„å¯†ç </li><li>GID</li><li>å±äºè¯¥ç»„çš„ç”¨æˆ·åˆ—è¡¨</li></ul><p><strong>åƒä¸‡ä¸èƒ½é€šè¿‡ç›´æ¥ä¿®æ”¹/etc/groupæ–‡ä»¶æ¥æ·»åŠ ç”¨æˆ·åˆ°ä¸€ä¸ªç»„ï¼Œè¦ç”¨ usermod å‘½ä»¤</strong></p><p>éœ€è¦å‚è€ƒåŸºç¡€çŸ¥è¯†ï¼š</p><ul><li><a href="/linux/basis/basis.html#%E7%94%A8%E6%88%B7%E5%8F%8A%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86" class="">å‚è€ƒï¼šç”¨æˆ·åŠæƒé™ç®¡ç†</a></li><li><a href="/linux/basis/basis.html#%E7%9B%AE%E5%BD%95%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86" class="">å‚è€ƒï¼šç›®å½•æ–‡ä»¶ç®¡ç†</a></li><li><a href="/linux/basis/basis.html#%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86" class="">å‚è€ƒï¼šç£ç›˜ç®¡ç†</a></li><li>ç­‰ç­‰</li></ul><h2 id="shell-è„šæœ¬ç¼–ç¨‹åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#shell-è„šæœ¬ç¼–ç¨‹åŸºç¡€" aria-hidden="true">#</a> shell è„šæœ¬ç¼–ç¨‹åŸºç¡€</h2><h3 id="æ„å»ºåŸºæœ¬è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#æ„å»ºåŸºæœ¬è„šæœ¬" aria-hidden="true">#</a> æ„å»ºåŸºæœ¬è„šæœ¬</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin//bash</span>
<span class="token comment"># æ„å»ºåŸºæœ¬è„šæœ¬</span>

<span class="token assign-left variable">name</span><span class="token operator">=</span>demo
<span class="token assign-left variable">testing</span><span class="token operator">=</span><span class="token string">&#39;date&#39;</span>

<span class="token builtin class-name">echo</span> <span class="token number">666666</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Let&#39;s see who&#39;s logged&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&#39;Rich says &quot;scripting is easy&quot;.&#39;</span>
<span class="token builtin class-name">echo</span> ä½¿ç”¨ç³»ç»Ÿå˜é‡ï¼š<span class="token environment constant">$HOME</span> + <span class="token environment constant">$LANG</span>
<span class="token builtin class-name">echo</span> ä½¿ç”¨ç”¨æˆ·å˜é‡ï¼š<span class="token variable">$name</span> + <span class="token variable">$testing</span>
<span class="token assign-left variable">testing</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> æ›´æ”¹ç”¨æˆ·å˜é‡ï¼š<span class="token variable">$testing</span>
<span class="token builtin class-name">echo</span> é‡å®šå‘è¾“å‡º <span class="token operator">&gt;</span> demo.log
<span class="token builtin class-name">echo</span> é‡å®šå‘è¾“å‡ºè¿½åŠ  <span class="token operator">&gt;&gt;</span> demo.log

<span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;&gt;</span>./demo2.log</span>
é‡å®šå‘è¾“å…¥è¿½åŠ 1
é‡å®šå‘è¾“å…¥è¿½åŠ 2
é‡å®šå‘è¾“å…¥è¿½åŠ 3
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="expr-å‘½ä»¤æ“ä½œç¬¦" tabindex="-1"><a class="header-anchor" href="#expr-å‘½ä»¤æ“ä½œç¬¦" aria-hidden="true">#</a> expr å‘½ä»¤æ“ä½œç¬¦</h4><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ARG1 | ARG2		å¦‚æœ ARG1 æ—¢ä¸æ˜¯nullä¹Ÿä¸æ˜¯é›¶å€¼ï¼Œè¿”å› ARG1 ï¼›å¦åˆ™è¿”å› ARG2
ARG1 &amp; ARG2		å¦‚æœæ²¡æœ‰å‚æ•°æ˜¯nullæˆ–é›¶å€¼ï¼Œè¿”å› ARG1 ï¼›å¦åˆ™è¿”å› 0
ARG1 &lt; ARG2		å¦‚æœ ARG1 å°äº ARG2 ï¼Œè¿”å› 1 ï¼›å¦åˆ™è¿”å› 0
ARG1 &lt;= ARG2	å¦‚æœ ARG1 å°äºæˆ–ç­‰äº ARG2 ï¼Œè¿”å› 1 ï¼›å¦åˆ™è¿”å› 0
ARG1 = ARG2		å¦‚æœ ARG1 ç­‰äº ARG2 ï¼Œè¿”å› 1 ï¼›å¦åˆ™è¿”å› 0
ARG1 != ARG2	å¦‚æœ ARG1 ä¸ç­‰äº ARG2 ï¼Œè¿”å› 1 ï¼›å¦åˆ™è¿”å› 0
ARG1 &gt;= ARG2	å¦‚æœ ARG1 å¤§äºæˆ–ç­‰äº ARG2 ï¼Œè¿”å› 1 ï¼›å¦åˆ™è¿”å› 0
ARG1 &gt; ARG2		å¦‚æœ ARG1 å¤§äº ARG2 ï¼Œè¿”å› 1 ï¼›å¦åˆ™è¿”å› 0
ARG1 + ARG2		è¿”å› ARG1 å’Œ ARG2 çš„ç®—æœ¯è¿ç®—å’Œ
ARG1 - ARG2		è¿”å› ARG1 å’Œ ARG2 çš„ç®—æœ¯è¿ç®—å·®
ARG1 * ARG2		è¿”å› ARG1 å’Œ ARG2 çš„ç®—æœ¯ä¹˜ç§¯
ARG1 / ARG2		è¿”å› ARG1 è¢« ARG2 é™¤çš„ç®—æœ¯å•†
ARG1 % ARG2		è¿”å› ARG1 è¢« ARG2 é™¤çš„ç®—æœ¯ä½™æ•°
STRING : REGEXP		å¦‚æœ REGEXP åŒ¹é…åˆ°äº† STRING ä¸­çš„æŸä¸ªæ¨¡å¼ï¼Œè¿”å›è¯¥æ¨¡å¼åŒ¹é…
match STRING REGEXP		å¦‚æœ REGEXP åŒ¹é…åˆ°äº† STRING ä¸­çš„æŸä¸ªæ¨¡å¼ï¼Œè¿”å›è¯¥æ¨¡å¼åŒ¹é…
substr STRING POS LENGTH	è¿”å›èµ·å§‹ä½ç½®ä¸º POS ï¼ˆä» 1 å¼€å§‹è®¡æ•°ï¼‰ã€é•¿åº¦ä¸º LENGTH ä¸ªå­—ç¬¦çš„å­å­—ç¬¦ä¸²
index STRING CHARS		è¿”å›åœ¨ STRING ä¸­æ‰¾åˆ° CHARS å­—ç¬¦ä¸²çš„ä½ç½®ï¼›å¦åˆ™ï¼Œè¿”å› 0
length STRING		è¿”å›å­—ç¬¦ä¸² STRING çš„æ•°å€¼é•¿åº¦
+ TOKEN			å°† TOKEN è§£é‡Šæˆå­—ç¬¦ä¸²ï¼Œå³ä½¿æ˜¯ä¸ªå…³é”®å­—
(EXPRESSION)	è¿”å› EXPRESSION çš„å€¼
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin//bash</span>

<span class="token builtin class-name">echo</span> ä½¿ç”¨exprï¼š
<span class="token function">expr</span> <span class="token number">12</span> + <span class="token number">22</span>
<span class="token function">expr</span> <span class="token number">12</span> <span class="token punctuation">\</span>* <span class="token number">22</span>
<span class="token function">expr</span> <span class="token number">66</span> / <span class="token number">1</span>
<span class="token assign-left variable">var1</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token assign-left variable">var2</span><span class="token operator">=</span><span class="token number">20</span>
<span class="token assign-left variable">var3</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">expr</span> $var2 / $var1<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> The result is <span class="token variable">$var3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨æ–¹æ‹¬å·" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ–¹æ‹¬å·" aria-hidden="true">#</a> ä½¿ç”¨æ–¹æ‹¬å·</h4><p>å¯ä»¥ç”¨ç¾å…ƒç¬¦å’Œæ–¹æ‹¬å·ï¼ˆ $[ operation ] ï¼‰å°†æ•°å­¦è¡¨è¾¾å¼å›´èµ·æ¥ï¼›</p><p>ç”¨æ–¹æ‹¬å·æ‰§è¡Œshellæ•°å­¦è¿ç®—æ¯”ç”¨ expr å‘½ä»¤æ–¹ä¾¿å¾ˆå¤šã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin//bash</span>

<span class="token builtin class-name">echo</span> ä½¿ç”¨æ–¹æ‹¬å·ï¼š
<span class="token assign-left variable">var3</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token number">1</span> + <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$var3</span>
<span class="token assign-left variable">var4</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$var3</span> * <span class="token number">2</span><span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$var4</span>
<span class="token assign-left variable">var5</span><span class="token operator">=</span>$<span class="token punctuation">[</span><span class="token variable">$var4</span> * <span class="token number">2</span> + <span class="token punctuation">(</span> <span class="token number">12</span> + <span class="token number">2</span> <span class="token punctuation">)</span> <span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$var5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æµ®ç‚¹è§£å†³æ–¹æ¡ˆ" tabindex="-1"><a class="header-anchor" href="#æµ®ç‚¹è§£å†³æ–¹æ¡ˆ" aria-hidden="true">#</a> æµ®ç‚¹è§£å†³æ–¹æ¡ˆ</h4><p>æ ¼å¼ï¼švariable=$(echo &quot;options; expression&quot; | bc)</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin//bash</span>

<span class="token builtin class-name">echo</span> æµ®ç‚¹è§£å†³æ–¹æ¡ˆ:
<span class="token assign-left variable">var6</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=4; 3.44 / 5&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> The answer is <span class="token variable">$var6</span>
<span class="token assign-left variable">var7</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token assign-left variable">var8</span><span class="token operator">=</span><span class="token number">45</span>
<span class="token assign-left variable">var9</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=4; <span class="token variable">$var7</span> / <span class="token variable">$var8</span>&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> The answer <span class="token keyword">for</span> this is <span class="token variable">$var9</span>
<span class="token assign-left variable">v1</span><span class="token operator">=</span><span class="token number">10.46</span>
<span class="token assign-left variable">v2</span><span class="token operator">=</span><span class="token number">43.67</span>
<span class="token assign-left variable">v3</span><span class="token operator">=</span><span class="token number">33.2</span>
<span class="token assign-left variable">v4</span><span class="token operator">=</span><span class="token number">71</span>
<span class="token assign-left variable">v5</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">bc</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
scale = 4
a1 = ( <span class="token variable">$v1</span> * <span class="token variable">$v2</span>)
b1 = (<span class="token variable">$v3</span> * <span class="token variable">$v4</span>)
a1 + b1
EOF</span>
<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> The final answer <span class="token keyword">for</span> this mess is <span class="token variable">$v5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é€€å‡ºè„šæœ¬" tabindex="-1"><a class="header-anchor" href="#é€€å‡ºè„šæœ¬" aria-hidden="true">#</a> é€€å‡ºè„šæœ¬</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">exit</span> status

æŸ¥çœ‹é€€å‡ºçŠ¶æ€ç 
<span class="token builtin class-name">echo</span> <span class="token variable">$?</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Linuxé€€å‡ºçŠ¶æ€ç </p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>0		å‘½ä»¤æˆåŠŸç»“æŸ
1		ä¸€èˆ¬æ€§æœªçŸ¥é”™è¯¯
2		ä¸é€‚åˆçš„shellå‘½ä»¤
126		å‘½ä»¤ä¸å¯æ‰§è¡Œ
127		æ²¡æ‰¾åˆ°å‘½ä»¤
128		æ— æ•ˆçš„é€€å‡ºå‚æ•°
128+x	ä¸Linuxä¿¡å·xç›¸å…³çš„ä¸¥é‡é”™è¯¯
130		é€šè¿‡Ctrl+Cç»ˆæ­¢çš„å‘½ä»¤
255		æ­£å¸¸èŒƒå›´ä¹‹å¤–çš„é€€å‡ºçŠ¶æ€ç 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥æ”¹å˜è¿™ç§é»˜è®¤è¡Œä¸ºï¼Œè¿”å›è‡ªå·±çš„é€€å‡ºçŠ¶æ€ç ã€‚ exit å‘½ä»¤å…è®¸ä½ åœ¨è„šæœ¬ç»“æŸæ—¶æŒ‡å®šä¸€ä¸ªé€€å‡ºçŠ¶æ€ç ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin//bash</span>

<span class="token builtin class-name">exit</span> <span class="token number">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤" aria-hidden="true">#</a> ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤</h3><h4 id="ä½¿ç”¨-if-then-è¯­å¥å’Œ-else" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨-if-then-è¯­å¥å’Œ-else" aria-hidden="true">#</a> ä½¿ç”¨ if-then è¯­å¥å’Œ else</h4><p>æ ¼å¼</p><blockquote><p>if command then commands fi</p><p>if command; then commands else commands fi</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">if</span> <span class="token builtin class-name">pwd</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;It worked&quot;</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> IamNotaCommand<span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;It worked&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;It worked2&quot;</span>  
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;We are outside the if statement&quot;</span>

<span class="token assign-left variable">testuser</span><span class="token operator">=</span>user1
<span class="token keyword">if</span> <span class="token function">grep</span> <span class="token variable">$testuser</span> /etc/passwd<span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;This is my first command&quot;</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token builtin class-name">pwd</span><span class="token punctuation">;</span>	<span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> okokokok
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> nononono
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åµŒå¥—-if-è¯­å¥" tabindex="-1"><a class="header-anchor" href="#åµŒå¥—-if-è¯­å¥" aria-hidden="true">#</a> åµŒå¥— if è¯­å¥</h4><blockquote><p>if command1; then</p><p>â€‹ commands</p><p>elif command2; then</p><p>â€‹ more commands</p><p>elif command3; then</p><p>â€‹ more commands</p><p>[....]</p><p>fi</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">if</span> <span class="token builtin class-name">pwd</span><span class="token punctuation">;</span>	<span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token function">ls</span> <span class="token parameter variable">-d</span> /home/user1/<span class="token punctuation">;</span> <span class="token keyword">then</span>
	  <span class="token builtin class-name">echo</span> okokokok
  <span class="token keyword">fi</span>   
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> nononono
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token builtin class-name">pwd</span><span class="token punctuation">;</span>	<span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> ok-5555
<span class="token keyword">elif</span> <span class="token function">ls</span> <span class="token parameter variable">-d</span> /home/user1/<span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> ok-6666
<span class="token keyword">elif</span> <span class="token function">ls</span> <span class="token parameter variable">-d</span> /home/user2/<span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> ok-8888	
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="test-å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#test-å‘½ä»¤" aria-hidden="true">#</a> test å‘½ä»¤</h4><blockquote><p>if test condition; then</p><p>â€‹ commands</p><p>fi</p></blockquote><p>å¦‚æœä¸å†™ test å‘½ä»¤çš„ condition éƒ¨åˆ†ï¼Œå®ƒä¼šä»¥éé›¶çš„é€€å‡ºçŠ¶æ€ç é€€å‡ºï¼Œå¹¶æ‰§è¡Œ else è¯­å¥å—ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">pwd</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;No expression returns a True&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;No expression returns a False&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>bash shellæä¾›äº†å¦ä¸€ç§æ¡ä»¶æµ‹è¯•æ–¹æ³•ï¼Œæ— éœ€åœ¨ if-then è¯­å¥ä¸­å£°æ˜ test å‘½ä»¤:</p><blockquote><p>if [ condition ] ; then</p><p>â€‹ commands</p><p>fi</p></blockquote><p>test å‘½ä»¤å¯ä»¥åˆ¤æ–­ä¸‰ç±»æ¡ä»¶ï¼š</p><ul><li><ul><li>æ•°å€¼æ¯”è¾ƒ</li></ul></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>n1 <span class="token parameter variable">-eq</span> n2		æ£€æŸ¥ n1 æ˜¯å¦ä¸ n2 ç›¸ç­‰
n1 <span class="token parameter variable">-ge</span> n2		æ£€æŸ¥ n1 æ˜¯å¦å¤§äºæˆ–ç­‰äº n2
n1 <span class="token parameter variable">-gt</span> n2		æ£€æŸ¥ n1 æ˜¯å¦å¤§äº n2
n1 <span class="token parameter variable">-le</span> n2		æ£€æŸ¥ n1 æ˜¯å¦å°äºæˆ–ç­‰äº n2
n1 <span class="token parameter variable">-lt</span> n2		æ£€æŸ¥ n1 æ˜¯å¦å°äº n2
n1 <span class="token parameter variable">-ne</span> n2		æ£€æŸ¥ n1 æ˜¯å¦ä¸ç­‰äº n2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">value1</span><span class="token operator">=</span><span class="token number">13</span>
<span class="token assign-left variable">value2</span><span class="token operator">=</span><span class="token number">11</span>
<span class="token assign-left variable">value3</span><span class="token operator">=</span><span class="token number">11</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$value1</span> <span class="token parameter variable">-gt</span> <span class="token variable">$value2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$value1</span> å¤§äº <span class="token variable">$value2</span>&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$value2</span> <span class="token parameter variable">-eq</span> <span class="token variable">$value3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$value2</span> ç­‰äº <span class="token variable">$value3</span>&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$value2</span> ä¸ç­‰äº <span class="token variable">$value3</span>&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><ul><li>å­—ç¬¦ä¸²æ¯”è¾ƒ</li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>str1 = str2		æ£€æŸ¥ str1 æ˜¯å¦å’Œ str2 ç›¸åŒ
str1 != str2	æ£€æŸ¥ str1 æ˜¯å¦å’Œ str2 ä¸åŒ
str1 &lt; str2		æ£€æŸ¥ str1 æ˜¯å¦æ¯” str2 å°
str1 &gt; str2		æ£€æŸ¥ str1 æ˜¯å¦æ¯” str2 å¤§
-n str1			æ£€æŸ¥ str1 çš„é•¿åº¦æ˜¯å¦é0
-z str1			æ£€æŸ¥ str1 çš„é•¿åº¦æ˜¯å¦ä¸º0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">username</span><span class="token operator">=</span>root
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token environment constant">$USER</span> <span class="token operator">=</span> <span class="token variable">$username</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Welcome <span class="token variable">$username</span>&quot;</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">vs1</span><span class="token operator">=</span>baseball
<span class="token assign-left variable">vs2</span><span class="token operator">=</span>hockey
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$vs1</span> <span class="token punctuation">\</span><span class="token operator">&gt;</span> <span class="token variable">$vs2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$vs1</span> &gt; <span class="token variable">$vs2</span>&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$vs1</span> <span class="token punctuation">\</span><span class="token operator">&lt;</span> <span class="token variable">$vs2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$vs1</span> &lt; <span class="token variable">$vs2</span>&quot;</span>
<span class="token keyword">else</span> 
  <span class="token builtin class-name">echo</span>   <span class="token string">&quot;<span class="token variable">$vs1</span> !&lt; !&gt; <span class="token variable">$vs2</span>&quot;</span>
<span class="token keyword">fi</span>

<span class="token assign-left variable">vs3</span><span class="token operator">=</span>gfstes
<span class="token assign-left variable">vs4</span><span class="token operator">=</span><span class="token string">&#39;&#39;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token variable">$vs3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The string &#39;<span class="token variable">$vs3</span>&#39; is not empty&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The string &#39;<span class="token variable">$vs3</span>&#39; is empty&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token variable">$vs4</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The string &#39;<span class="token variable">$vs4</span>&#39; is empty&quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The string &#39;<span class="token variable">$vs4</span>&#39; is not empty&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><ul><li>æ–‡ä»¶æ¯”è¾ƒ</li></ul></li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>-d file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªç›®å½•
-e file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨
-f file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªæ–‡ä»¶
-r file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶å¯è¯»
-s file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶éç©º
-w file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶å¯å†™
-x file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶å¯æ‰§è¡Œ
-O file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶å±å½“å‰ç”¨æˆ·æ‰€æœ‰
-G file				æ£€æŸ¥ file æ˜¯å¦å­˜åœ¨å¹¶ä¸”é»˜è®¤ç»„ä¸å½“å‰ç”¨æˆ·ç›¸åŒ
file1 -nt file2		æ£€æŸ¥ file1 æ˜¯å¦æ¯” file2 æ–°
file1 -ot file2		æ£€æŸ¥ file1 æ˜¯å¦æ¯” file2 æ—§
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">jump_directory</span><span class="token operator">=</span>/home/shell
<span class="token assign-left variable">jump_directory2</span><span class="token operator">=</span>/home/shell/demo.sh
<span class="token comment">#</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$jump_directory</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The <span class="token variable">$jump_directory</span> directory exists&quot;</span>
  <span class="token builtin class-name">cd</span> <span class="token variable">$jump_directory</span>
  <span class="token function">ls</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The <span class="token variable">$jump_directory</span> directory does not exist&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">$jump_directory2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;å­˜åœ¨ <span class="token variable">$jump_directory2</span> æ–‡ä»¶&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> <span class="token variable">$jump_directory2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$jump_directory2</span> ä¸æ˜¯ç©ºæ–‡ä»¶&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-w</span> <span class="token variable">$jump_directory2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$jump_directory2</span> æ–‡ä»¶å¯å†™&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token variable">$jump_directory2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$jump_directory2</span> æ–‡ä»¶å¯æ‰§è¡Œ&quot;</span>
  <span class="token keyword">fi</span>   
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token variable">$jump_directory2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$jump_directory2</span> æ–‡ä»¶å¯æ‰§è¡Œ&quot;</span>
  <span class="token keyword">fi</span> 
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><ul><li>å¤åˆæ¡ä»¶æµ‹è¯•</li></ul><p>if-then è¯­å¥å…è®¸ä½ ä½¿ç”¨å¸ƒå°”é€»è¾‘æ¥ç»„åˆæµ‹è¯•ã€‚æœ‰ä¸¤ç§å¸ƒå°”è¿ç®—ç¬¦å¯ç”¨ï¼š</p><ul><li>[ condition1 ] &amp;&amp; [ condition2 ]</li><li>[ condition1 ] || [ condition2 ]</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token environment constant">$HOME</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token parameter variable">-w</span> <span class="token environment constant">$HOME</span>/testing <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;The file exists and you can write to it&quot;</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;I cannot write to the file&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><ul><li>ä½¿ç”¨åŒæ–¹æ‹¬å·å’ŒåŒæ‹¬å·</li></ul><p><strong>åŒæ‹¬å·</strong>å‘½ä»¤å…è®¸ä½ åœ¨æ¯”è¾ƒè¿‡ç¨‹ä¸­ä½¿ç”¨é«˜çº§æ•°å­¦è¡¨è¾¾å¼ã€‚ test å‘½ä»¤åªèƒ½åœ¨æ¯”è¾ƒä¸­ä½¿ç”¨ç®€å•çš„ç®—æœ¯æ“ä½œã€‚åŒæ‹¬å·å‘½ä»¤æä¾›äº†æ›´å¤šçš„æ•°å­¦ç¬¦å·ï¼Œè¿™äº›ç¬¦å·å¯¹äºç”¨è¿‡å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ç¨‹åºå‘˜è€Œè¨€å¹¶ä¸é™Œç”Ÿã€‚</p><p><code>(( expression ))</code></p><p>expression å¯ä»¥æ˜¯ä»»æ„çš„æ•°å­¦èµ‹å€¼æˆ–æ¯”è¾ƒè¡¨è¾¾å¼ã€‚é™¤äº† test å‘½ä»¤ä½¿ç”¨çš„æ ‡å‡†æ•°å­¦è¿ç®—ç¬¦</p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>val++		åå¢
val--		åå‡
++val		å…ˆå¢
--val		å…ˆå‡
!			é€»è¾‘æ±‚å
~			ä½æ±‚å
**			å¹‚è¿ç®—
&lt;&lt;			å·¦ä½ç§»
&gt;&gt;			å³ä½ç§»
<span class="token punctuation">&amp;</span>			ä½å¸ƒå°”å’Œ
|			ä½å¸ƒå°”æˆ–
<span class="token punctuation">&amp;</span><span class="token punctuation">&amp;</span>			é€»è¾‘å’Œ
||			é€»è¾‘æˆ–
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŒæ–¹æ‹¬å·</strong>å‘½ä»¤æä¾›äº†é’ˆå¯¹å­—ç¬¦ä¸²æ¯”è¾ƒçš„é«˜çº§ç‰¹æ€§ã€‚åŒæ–¹æ‹¬å·å‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><p>[[ expression ]]</p><hr><p><strong>è¯´æ˜</strong> åŒæ–¹æ‹¬å·åœ¨bash shellä¸­å·¥ä½œè‰¯å¥½ã€‚ä¸è¿‡è¦å°å¿ƒï¼Œä¸æ˜¯æ‰€æœ‰çš„shelléƒ½æ”¯æŒåŒæ–¹æ‹¬å·</p><hr><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">val12</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token comment">#</span>
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span> $val12 <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">&gt;</span> <span class="token number">90</span> <span class="token punctuation">))</span></span>
<span class="token keyword">then</span>
<span class="token variable"><span class="token punctuation">((</span> val13 <span class="token operator">=</span> $val12 <span class="token operator">**</span> <span class="token number">2</span> <span class="token punctuation">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The square of <span class="token variable">$val12</span> is <span class="token variable">$val13</span>&quot;</span>
<span class="token keyword">fi</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token environment constant">$USER</span> <span class="token operator">==</span> r* <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello <span class="token environment constant">$USER</span>&quot;</span>
<span class="token keyword">else</span> 
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Sorry, I do not know you&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><ul><li>case å‘½ä»¤</li></ul><p>åœ¨æ¨¡å¼åŒ¹é…ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å­—ç¬¦ä¸²å€¼</p><blockquote><p>case variable in</p><p>pattern1 | pattern2 )</p><p>â€‹ commands1 ;;</p><p>pattern3 )</p><p>â€‹ commands2 ;;</p><p>*) default commands ;;</p><p>esac</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
  <span class="token function">install</span><span class="token punctuation">)</span>
     <span class="token builtin class-name">echo</span> <span class="token string">&quot;å®‰è£…ok&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  -h<span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;sh <span class="token variable">$0</span> { *é»˜è®¤æ‰§è¡Œ | install | start | stop | disable | -h }&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
  *<span class="token punctuation">)</span>
     <span class="token builtin class-name">echo</span> â€œæ‰§è¡Œé»˜è®¤æ–¹æ³•â€ <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤" aria-hidden="true">#</a> æ›´å¤šçš„ç»“æ„åŒ–å‘½ä»¤</h3><h4 id="for" tabindex="-1"><a class="header-anchor" href="#for" aria-hidden="true">#</a> for</h4><blockquote><p>for var in list do commands done</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#è¯»å–åˆ—è¡¨ä¸­çš„å€¼</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">test</span> <span class="token keyword">in</span> Alabama Alaska Arizona Arkansas California Colorado
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> The next state is <span class="token variable">$test</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The last state we visited was <span class="token variable">$test</span>&quot;</span>
<span class="token assign-left variable">test</span><span class="token operator">=</span>Connecticut
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Wait, now we&#39;re visiting <span class="token variable">$test</span>&quot;</span>

<span class="token comment">#è¯»å–åˆ—è¡¨ä¸­çš„å¤æ‚å€¼</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">test2</span> <span class="token keyword">in</span> I don<span class="token punctuation">\</span>&#39;t know <span class="token keyword">if</span> this<span class="token punctuation">\</span>&#39;ll work
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;word:<span class="token variable">$test2</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">test3</span> <span class="token keyword">in</span> Nevada <span class="token string">&quot;New Hampshire&quot;</span> <span class="token string">&quot;New Mexico&quot;</span> <span class="token string">&quot;New York&quot;</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Now going to <span class="token variable">$test3</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token comment">#ä»å˜é‡è¯»å–åˆ—è¡¨</span>
<span class="token assign-left variable">list</span><span class="token operator">=</span><span class="token string">&quot;Alabama Alaska Arizona Arkansas Colorado&quot;</span>
<span class="token assign-left variable">list</span><span class="token operator">=</span><span class="token variable">$list</span><span class="token string">&quot; Connecticut&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">state</span> <span class="token keyword">in</span> <span class="token variable">$list</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Have you ever visited <span class="token variable">$state</span>?&quot;</span>
<span class="token keyword">done</span>

<span class="token comment">#ä»å‘½ä»¤è¯»å–å€¼</span>
<span class="token assign-left variable">file</span><span class="token operator">=</span><span class="token string">&quot;states&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">state</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> $file<span class="token variable">)</span></span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Visit beautiful <span class="token variable">$state</span>&quot;</span>
<span class="token keyword">done</span>
$ <span class="token function">cat</span> states
Alabama
Alaska
Arizona
Arkansas
Colorado
Connecticut
Delaware
Florida
Georgia

<span class="token comment">#æ›´æ”¹å­—æ®µåˆ†éš”ç¬¦ï¼šç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦</span>
<span class="token comment">#IFS=$&#39;\n&#39;  å°†è¿™ä¸ªè¯­å¥åŠ å…¥åˆ°è„šæœ¬ä¸­ï¼Œå‘Šè¯‰bash shellåœ¨æ•°æ®å€¼ä¸­å¿½ç•¥ç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦</span>
<span class="token comment">#IFS=$&#39;\n&#39;:;&quot; è¿™ä¸ªèµ‹å€¼ä¼šå°†æ¢è¡Œç¬¦ã€å†’å·ã€åˆ†å·å’ŒåŒå¼•å·ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦ã€‚å¦‚ä½•ä½¿ç”¨ IFS å­—ç¬¦è§£ææ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚</span>
<span class="token assign-left variable">file</span><span class="token operator">=</span><span class="token string">&quot;states&quot;</span>
<span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">$&#39;<span class="token entity" title="\n">\n</span>&#39;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">state</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> $file<span class="token variable">)</span></span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Visit beautiful <span class="token variable">$state</span>&quot;</span>
<span class="token keyword">done</span>

<span class="token comment">#ç”¨é€šé…ç¬¦è¯»å–ç›®å½•</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> /home/demo/test/*
<span class="token keyword">do</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$file</span> is a directory&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$file</span> is a file&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> /home/demo/.b* /home/demo/badtest
<span class="token keyword">do</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$file</span> is a directory&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$file</span> is a file&quot;</span>
<span class="token keyword">else</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$file</span> doesn&#39;t exist&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">done</span>

<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> b <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">;</span> b<span class="token operator">++</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot; Inside loop: <span class="token variable">$b</span>&quot;</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="while" tabindex="-1"><a class="header-anchor" href="#while" aria-hidden="true">#</a> while</h4><blockquote><p>while test command do other commands done</p></blockquote><p>while å‘½ä»¤ä¸­å®šä¹‰çš„ test command å’Œ if-then è¯­å¥ä¸­çš„æ ¼å¼ä¸€æ¨¡ä¸€æ ·ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">var1</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">$var1</span>
	<span class="token assign-left variable">var1</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var1</span> - <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>

<span class="token comment">#ä½¿ç”¨å¤šä¸ªæµ‹è¯•å‘½ä»¤</span>
<span class="token comment">#åªæœ‰æœ€åä¸€ä¸ªæµ‹è¯•å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ä¼šè¢«ç”¨æ¥å†³å®šä»€ä¹ˆæ—¶å€™ç»“æŸå¾ªç¯ã€‚</span>
<span class="token assign-left variable">var2</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token keyword">while</span> <span class="token builtin class-name">echo</span> <span class="token variable">$var2</span> 
	<span class="token punctuation">[</span> <span class="token variable">$var2</span> <span class="token parameter variable">-ge</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is inside the loop&quot;</span>
	<span class="token assign-left variable">var2</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var2</span> - <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token comment">#ã€...ã€‘</span>

This is inside the loop
<span class="token number">1</span>
This is inside the loop
<span class="token number">0</span>
This is inside the loop
<span class="token parameter variable">-1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>while å¾ªç¯ä¼šåœ¨ var1 å˜é‡ç­‰äº 0 æ—¶æ‰§è¡Œ echo è¯­å¥ï¼Œç„¶åå°† var1 å˜é‡çš„å€¼å‡ä¸€ã€‚æ¥ä¸‹æ¥å†æ¬¡æ‰§è¡Œæµ‹è¯•å‘½ä»¤ï¼Œç”¨äºä¸‹ä¸€æ¬¡è¿­ä»£ã€‚ echo æµ‹è¯•å‘½ä»¤è¢«æ‰§è¡Œå¹¶æ˜¾ç¤ºäº† var å˜é‡çš„å€¼ï¼ˆç°åœ¨å°äº 0 äº†ï¼‰ã€‚ç›´åˆ°shellæ‰§è¡Œ test æµ‹è¯•å‘½ä»¤ï¼Œ whle å¾ªç¯æ‰ä¼šåœæ­¢ã€‚</p><p>è¿™è¯´æ˜åœ¨å«æœ‰å¤šä¸ªå‘½ä»¤çš„ while è¯­å¥ä¸­ï¼Œåœ¨æ¯æ¬¡è¿­ä»£ä¸­æ‰€æœ‰çš„æµ‹è¯•å‘½ä»¤éƒ½ä¼šè¢«æ‰§è¡Œï¼ŒåŒ…æ‹¬æµ‹è¯•å‘½ä»¤å¤±è´¥çš„æœ€åä¸€æ¬¡è¿­ä»£ã€‚è¦ç•™å¿ƒè¿™ç§ç”¨æ³•ã€‚å¦ä¸€å¤„è¦ç•™æ„çš„æ˜¯è¯¥å¦‚ä½•æŒ‡å®šå¤šä¸ªæµ‹è¯•å‘½ä»¤ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šæ¯ä¸ªæµ‹è¯•å‘½ä»¤éƒ½å‡ºç°åœ¨å•ç‹¬çš„ä¸€è¡Œä¸Šã€‚</p><h4 id="until" tabindex="-1"><a class="header-anchor" href="#until" aria-hidden="true">#</a> until</h4><p>until å‘½ä»¤å’Œ while å‘½ä»¤å·¥ä½œçš„æ–¹å¼å®Œå…¨ç›¸åã€‚ until å‘½ä»¤è¦æ±‚ä½ æŒ‡å®šä¸€ä¸ªé€šå¸¸è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç çš„æµ‹è¯•å‘½ä»¤ã€‚åªæœ‰æµ‹è¯•å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ä¸ä¸º 0 ï¼Œbash shellæ‰ä¼šæ‰§è¡Œå¾ªç¯ä¸­åˆ—å‡ºçš„å‘½ä»¤ã€‚ä¸€æ—¦æµ‹è¯•å‘½ä»¤è¿”å›äº†é€€å‡ºçŠ¶æ€ç  0 ï¼Œå¾ªç¯å°±ç»“æŸäº†ã€‚</p><blockquote><p>until test commands do</p><p>â€‹ other commands done</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">var1</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token variable">$var1</span>
	<span class="token assign-left variable">var1</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var1</span> - <span class="token number">25</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
$ ./test12
<span class="token number">100</span>
<span class="token number">75</span>
<span class="token number">50</span>
<span class="token number">25</span>

<span class="token assign-left variable">var2</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token keyword">until</span> <span class="token builtin class-name">echo</span> <span class="token variable">$var2</span> <span class="token punctuation">[</span> <span class="token variable">$var2</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> Inside the loop: <span class="token variable">$var2</span>
	<span class="token assign-left variable">var2</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var2</span> - <span class="token number">25</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
$ ./test13
<span class="token number">100</span>
Inside the loop: <span class="token number">100</span>
<span class="token number">75</span>
Inside the loop: <span class="token number">75</span>
<span class="token number">50</span>
Inside the loop: <span class="token number">50</span>
<span class="token number">25</span>
Inside the loop: <span class="token number">25</span>
<span class="token number">0</span>

<span class="token assign-left variable">var1</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token keyword">until</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Outer loop: <span class="token variable">$var1</span>&quot;</span>
    <span class="token assign-left variable">var2</span><span class="token operator">=</span><span class="token number">1</span>
    <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$var2</span> <span class="token parameter variable">-lt</span> <span class="token number">5</span> <span class="token punctuation">]</span>
    <span class="token keyword">do</span>
        <span class="token assign-left variable">var3</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;scale=4; <span class="token variable">$var1</span> / <span class="token variable">$var2</span>&quot;</span> <span class="token operator">|</span> <span class="token function">bc</span><span class="token variable">)</span></span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot; Inner loop: <span class="token variable">$var1</span> / <span class="token variable">$var2</span> = <span class="token variable">$var3</span>&quot;</span>
        <span class="token assign-left variable">var2</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var2</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
    <span class="token keyword">done</span>
    <span class="token assign-left variable">var1</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var1</span> - <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
$ ./test16
Outer loop: <span class="token number">3</span>
Inner loop: <span class="token number">3</span> / <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3.0000</span>
Inner loop: <span class="token number">3</span> / <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1.5000</span>
Inner loop: <span class="token number">3</span> / <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">1.0000</span>
Inner loop: <span class="token number">3</span> / <span class="token number">4</span> <span class="token operator">=</span> .7500
Outer loop: <span class="token number">2</span>
Inner loop: <span class="token number">2</span> / <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2.0000</span>
Inner loop: <span class="token number">2</span> / <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">1.0000</span>
Inner loop: <span class="token number">2</span> / <span class="token number">3</span> <span class="token operator">=</span> .6666
Inner loop: <span class="token number">2</span> / <span class="token number">4</span> <span class="token operator">=</span> .5000
Outer loop: <span class="token number">1</span>
Inner loop: <span class="token number">1</span> / <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1.0000</span>
Inner loop: <span class="token number">1</span> / <span class="token number">2</span> <span class="token operator">=</span> .5000
Inner loop: <span class="token number">1</span> / <span class="token number">3</span> <span class="token operator">=</span> .3333
Inner loop: <span class="token number">1</span> / <span class="token number">4</span> <span class="token operator">=</span> .2500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åµŒå¥—å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#åµŒå¥—å¾ªç¯" aria-hidden="true">#</a> åµŒå¥—å¾ªç¯</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">var1</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-ge</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	<span class="token builtin class-name">echo</span> <span class="token string">&quot;Outer loop: <span class="token variable">$var1</span>&quot;</span>
	<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> var2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> $var2 <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> var2<span class="token operator">++</span> <span class="token punctuation">))</span></span>
	<span class="token keyword">do</span>
		<span class="token assign-left variable">var3</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var1</span> * <span class="token variable">$var2</span> <span class="token punctuation">]</span>
		<span class="token builtin class-name">echo</span> <span class="token string">&quot; Inner loop: <span class="token variable">$var1</span> * <span class="token variable">$var2</span> = <span class="token variable">$var3</span>&quot;</span>
	<span class="token keyword">done</span>
	<span class="token assign-left variable">var1</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var1</span> - <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
$ ./test15
Outer loop: <span class="token number">5</span>
Inner loop: <span class="token number">5</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">5</span>
Inner loop: <span class="token number">5</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">10</span>
Outer loop: <span class="token number">4</span>
Inner loop: <span class="token number">4</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">4</span>
Inner loop: <span class="token number">4</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">8</span>
Outer loop: <span class="token number">3</span>
Inner loop: <span class="token number">3</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span>
Inner loop: <span class="token number">3</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">6</span>
Outer loop: <span class="token number">2</span>
Inner loop: <span class="token number">2</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span>
Inner loop: <span class="token number">2</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">4</span>
Outer loop: <span class="token number">1</span>
Inner loop: <span class="token number">1</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
Inner loop: <span class="token number">1</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">2</span>
Outer loop: <span class="token number">0</span>
Inner loop: <span class="token number">0</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">0</span>
Inner loop: <span class="token number">0</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¾ªç¯å¤„ç†æ–‡ä»¶æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å¾ªç¯å¤„ç†æ–‡ä»¶æ•°æ®" aria-hidden="true">#</a> å¾ªç¯å¤„ç†æ–‡ä»¶æ•°æ®</h4><p>é€šå¸¸å¿…é¡»éå†å­˜å‚¨åœ¨æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚è¿™è¦æ±‚ç»“åˆå·²ç»è®²è¿‡çš„ä¸¤ç§æŠ€æœ¯ï¼š</p><ul><li>ä½¿ç”¨åµŒå¥—å¾ªç¯</li><li>ä¿®æ”¹ IFS ç¯å¢ƒå˜é‡</li></ul><p>é€šè¿‡ä¿®æ”¹ IFS ç¯å¢ƒå˜é‡ï¼Œå°±èƒ½å¼ºåˆ¶ for å‘½ä»¤å°†æ–‡ä»¶ä¸­çš„æ¯è¡Œéƒ½å½“æˆå•ç‹¬çš„ä¸€ä¸ªæ¡ç›®æ¥å¤„ç†ï¼Œå³ä¾¿æ•°æ®ä¸­æœ‰ç©ºæ ¼ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€æ—¦ä»æ–‡ä»¶ä¸­æå–å‡ºäº†å•ç‹¬çš„è¡Œï¼Œå¯èƒ½éœ€è¦å†æ¬¡åˆ©ç”¨å¾ªç¯æ¥æå–è¡Œä¸­çš„æ•°æ®ã€‚</p><p>å…¸å‹çš„ä¾‹å­æ˜¯å¤„ç†/etc/passwdæ–‡ä»¶ä¸­çš„æ•°æ®ã€‚è¿™è¦æ±‚ä½ é€è¡Œéå†/etc/passwdæ–‡ä»¶ï¼Œå¹¶å°† IFSå˜é‡çš„å€¼æ”¹æˆå†’å·ï¼Œè¿™æ ·å°±èƒ½åˆ†éš”å¼€æ¯è¡Œä¸­çš„å„ä¸ªæ•°æ®æ®µäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable"><span class="token environment constant">IFS</span>.OLD</span><span class="token operator">=</span><span class="token environment constant">$IFS</span>
<span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">$&#39;<span class="token entity" title="\n">\n</span>&#39;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">entry</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /etc/passwd<span class="token variable">)</span></span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Values in <span class="token variable">$entry</span> â€“&quot;</span>
    <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>:
    <span class="token keyword">for</span> <span class="token for-or-select variable">value</span> <span class="token keyword">in</span> <span class="token variable">$entry</span>
    <span class="token keyword">do</span>
    	<span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">$value</span>&quot;</span>
    <span class="token keyword">done</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè„šæœ¬ä½¿ç”¨äº†ä¸¤ä¸ªä¸åŒçš„ IFS å€¼æ¥è§£ææ•°æ®ã€‚ç¬¬ä¸€ä¸ª IFS å€¼è§£æå‡º/etc/passwdæ–‡ä»¶ä¸­çš„å•ç‹¬çš„è¡Œã€‚å†…éƒ¨ for å¾ªç¯æ¥ç€å°† IFS çš„å€¼ä¿®æ”¹ä¸ºå†’å·ï¼Œå…è®¸ä½ ä»/etc/passwdçš„è¡Œä¸­è§£æå‡ºå•ç‹¬çš„å€¼ã€‚</p><p>åœ¨è¿è¡Œè¿™ä¸ªè„šæœ¬æ—¶ï¼Œä½ ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh demo2.sh
demo2.sh:è¡Œ3: IFS.OLD=: æœªæ‰¾åˆ°å‘½ä»¤
Values in root:x:0:0:root:/root:/bin/bash â€“
 root
 x
 0
 0
 root
 /root
 /bin/bash
Values in bin:x:1:1:bin:/bin:/sbin/nologin -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†…éƒ¨å¾ªç¯ä¼šè§£æå‡º/etc/passwdæ¯è¡Œä¸­çš„å„ä¸ªå€¼ã€‚è¿™ç§æ–¹æ³•åœ¨å¤„ç†å¤–éƒ¨å¯¼å…¥ç”µå­è¡¨æ ¼æ‰€é‡‡ç”¨çš„é€—å·åˆ†éš”çš„æ•°æ®æ—¶ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚</p><h4 id="æ§åˆ¶å¾ªç¯" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶å¾ªç¯" aria-hidden="true">#</a> æ§åˆ¶å¾ªç¯</h4><ul><li><p>break é€€å‡ºä»»æ„ç±»å‹çš„å¾ªç¯ï¼ŒåŒ…æ‹¬ <code>while</code> å’Œ <code>until</code> å¾ªç¯</p></li><li><ul><li>è·³å‡ºå•ä¸ªå¾ªç¯</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">for</span> <span class="token for-or-select variable">var1</span> <span class="token keyword">in</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span>
<span class="token keyword">do</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-eq</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">break</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Iteration number: <span class="token variable">$var1</span>&quot;</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The for loop is completed&quot;</span>
------------
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo3.sh</span>
Iteration number: <span class="token number">1</span>
Iteration number: <span class="token number">2</span>
Iteration number: <span class="token number">3</span>
Iteration number: <span class="token number">4</span>
The <span class="token keyword">for</span> loop is completed
------------

<span class="token assign-left variable">var2</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$var2</span> <span class="token parameter variable">-lt</span> <span class="token number">8</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$var2</span> <span class="token parameter variable">-eq</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token builtin class-name">break</span>
<span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Iteration: <span class="token variable">$var2</span>&quot;</span>
    <span class="token assign-left variable">var2</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var2</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The while loop is completed&quot;</span>
------------
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo3.sh</span>
Iteration: <span class="token number">1</span>
Iteration: <span class="token number">2</span>
Iteration: <span class="token number">3</span>
Iteration: <span class="token number">4</span>
The <span class="token keyword">while</span> loop is completed
------------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è·³å‡ºå†…éƒ¨å¾ªç¯</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> a<span class="token operator">++</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Outer loop: <span class="token variable">$a</span>&quot;</span>
    <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> b <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> b<span class="token operator">++</span> <span class="token punctuation">))</span></span>
    <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$b</span> <span class="token parameter variable">-eq</span> <span class="token number">5</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">break</span>
        <span class="token keyword">fi</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot; Inner loop: <span class="token variable">$b</span>&quot;</span>
    <span class="token keyword">done</span>
<span class="token keyword">done</span>
----------
Outer loop: <span class="token number">1</span>
 Inner loop: <span class="token number">1</span>
 Inner loop: <span class="token number">2</span>
 Inner loop: <span class="token number">3</span>
 Inner loop: <span class="token number">4</span>
Outer loop: <span class="token number">2</span>
 Inner loop: <span class="token number">1</span>
 Inner loop: <span class="token number">2</span>
 Inner loop: <span class="token number">3</span>
 Inner loop: <span class="token number">4</span>
Outer loop: <span class="token number">3</span>
 Inner loop: <span class="token number">1</span>
 Inner loop: <span class="token number">2</span>
 Inner loop: <span class="token number">3</span>
 Inner loop: <span class="token number">4</span>
----------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è·³å‡ºå¤–éƒ¨å¾ªç¯ break n</li></ul><p>å…¶ä¸­ n æŒ‡å®šäº†è¦è·³å‡ºçš„å¾ªç¯å±‚çº§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ n ä¸º 1 ï¼Œè¡¨æ˜è·³å‡ºçš„æ˜¯å½“å‰çš„å¾ªç¯ã€‚å¦‚æœä½ å°†n è®¾ä¸º 2 ï¼Œ break å‘½ä»¤å°±ä¼šåœæ­¢ä¸‹ä¸€çº§çš„å¤–éƒ¨å¾ªç¯ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> a<span class="token operator">++</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Outer loop: <span class="token variable">$a</span>&quot;</span>
    <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> b <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> b<span class="token operator">++</span> <span class="token punctuation">))</span></span>
    <span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$b</span> <span class="token parameter variable">-gt</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">break</span> <span class="token number">2</span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; Inner loop: <span class="token variable">$b</span>&quot;</span>
    <span class="token keyword">done</span>
<span class="token keyword">done</span>
---------
Outer loop: <span class="token number">1</span>
 Inner loop: <span class="token number">1</span>
 Inner loop: <span class="token number">2</span>
 Inner loop: <span class="token number">3</span>
 Inner loop: <span class="token number">4</span>
---------

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>continue</p></li></ul><p>å¯ä»¥æå‰ä¸­æ­¢æŸæ¬¡å¾ªç¯ä¸­çš„å‘½ä»¤ï¼Œä½†å¹¶ä¸ä¼šå®Œå…¨ç»ˆæ­¢æ•´ä¸ªå¾ªç¯ã€‚å¯ä»¥åœ¨å¾ªç¯å†…éƒ¨è®¾ç½®shellä¸æ‰§è¡Œå‘½ä»¤çš„æ¡ä»¶ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> var1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> var1 <span class="token operator">&lt;</span> <span class="token number">15</span><span class="token punctuation">;</span> var1<span class="token operator">++</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-gt</span> <span class="token number">5</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-lt</span> <span class="token number">10</span> <span class="token punctuation">]</span>
    <span class="token keyword">then</span>
        <span class="token builtin class-name">continue</span>
    <span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Iteration number: <span class="token variable">$var1</span>&quot;</span>
<span class="token keyword">done</span>
-----------
Iteration number: <span class="token number">1</span>
Iteration number: <span class="token number">2</span>
Iteration number: <span class="token number">3</span>
Iteration number: <span class="token number">4</span>
Iteration number: <span class="token number">5</span>
Iteration number: <span class="token number">10</span>
Iteration number: <span class="token number">11</span>
Iteration number: <span class="token number">12</span>
Iteration number: <span class="token number">13</span>
Iteration number: <span class="token number">14</span>
-----------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“ if-then è¯­å¥çš„æ¡ä»¶è¢«æ»¡è¶³æ—¶ï¼ˆå€¼å¤§äº5ä¸”å°äº10ï¼‰ï¼Œshellä¼šæ‰§è¡Œ continue å‘½ä»¤ï¼Œè·³è¿‡æ­¤æ¬¡å¾ªç¯ä¸­å‰©ä½™çš„å‘½ä»¤ï¼Œä½†æ•´ä¸ªå¾ªç¯è¿˜ä¼šç»§ç»­ã€‚å½“ if-then çš„æ¡ä»¶ä¸å†è¢«æ»¡è¶³æ—¶ï¼Œä¸€åˆ‡åˆå›åˆ°æ­£è½¨ã€‚</p><p>ä¹Ÿå¯ä»¥åœ¨ while å’Œ until å¾ªç¯ä¸­ä½¿ç”¨ continue å‘½ä»¤ï¼Œä½†è¦ç‰¹åˆ«å°å¿ƒã€‚å½“shellæ‰§è¡Œ continue å‘½ä»¤æ—¶ï¼Œå®ƒä¼šè·³è¿‡å‰©ä½™çš„å‘½ä»¤ã€‚å¦‚æœä½ åœ¨å…¶ä¸­æŸä¸ªæ¡ä»¶é‡Œå¯¹æµ‹è¯•æ¡ä»¶å˜é‡è¿›è¡Œå¢å€¼ï¼Œé—®é¢˜å°±ä¼šå‡ºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">var1</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">while</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;while iteration: <span class="token variable">$var1</span>&quot;</span>
    <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-lt</span> <span class="token number">15</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
	<span class="token function">sleep</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-gt</span> <span class="token number">5</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">$var1</span> <span class="token parameter variable">-lt</span> <span class="token number">10</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">continue</span>
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; Inside iteration number: <span class="token variable">$var1</span>&quot;</span>
    <span class="token assign-left variable">var1</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$var1</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
-----------
<span class="token keyword">while</span> iteration: <span class="token number">0</span>
 Inside iteration number: <span class="token number">0</span>
<span class="token keyword">while</span> iteration: <span class="token number">1</span>
 Inside iteration number: <span class="token number">1</span>
<span class="token keyword">while</span> iteration: <span class="token number">2</span>
 Inside iteration number: <span class="token number">2</span>
<span class="token keyword">while</span> iteration: <span class="token number">3</span>
 Inside iteration number: <span class="token number">3</span>
<span class="token keyword">while</span> iteration: <span class="token number">4</span>
 Inside iteration number: <span class="token number">4</span>
<span class="token keyword">while</span> iteration: <span class="token number">5</span>
 Inside iteration number: <span class="token number">5</span>
<span class="token keyword">while</span> iteration: <span class="token number">6</span>
<span class="token keyword">while</span> iteration: <span class="token number">6</span>
<span class="token keyword">while</span> iteration: <span class="token number">6</span>
<span class="token keyword">while</span> iteration: <span class="token number">6</span>
------------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ if-then çš„æ¡ä»¶æˆç«‹ä¹‹å‰ï¼Œæ‰€æœ‰ä¸€åˆ‡çœ‹èµ·æ¥éƒ½å¾ˆæ­£å¸¸ï¼Œç„¶åshellæ‰§è¡Œäº† continue å‘½ä»¤ã€‚å½“shellæ‰§è¡Œ continue å‘½ä»¤æ—¶ï¼Œå®ƒè·³è¿‡äº† while å¾ªç¯ä¸­ä½™ä¸‹çš„å‘½ä»¤ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¢«è·³è¿‡çš„éƒ¨åˆ†æ­£æ˜¯ $var1 è®¡æ•°å˜é‡å¢å€¼çš„åœ°æ–¹ï¼Œè€Œè¿™ä¸ªå˜é‡åˆè¢«ç”¨äº while æµ‹è¯•å‘½ä»¤ä¸­ã€‚è¿™æ„å‘³ç€è¿™ä¸ªå˜é‡çš„å€¼ä¸ä¼šå†å˜åŒ–äº†ï¼Œä»å‰é¢è¿ç»­çš„è¾“å‡ºæ˜¾ç¤ºä¸­ä½ ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ã€‚</p><p>å’Œ break å‘½ä»¤ä¸€æ ·ï¼Œ continue å‘½ä»¤ä¹Ÿå…è®¸é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šè¦ç»§ç»­æ‰§è¡Œå“ªä¸€çº§å¾ªç¯ï¼š</p><p>continue n</p><p>å…¶ä¸­ n å®šä¹‰äº†è¦ç»§ç»­çš„å¾ªç¯å±‚çº§ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> a <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> a<span class="token operator">++</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Iteration <span class="token variable">$a</span>:&quot;</span>
    <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> b <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> b<span class="token operator">++</span> <span class="token punctuation">))</span></span>
    <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-gt</span> <span class="token number">2</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-lt</span> <span class="token number">4</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">continue</span> <span class="token number">2</span>
        <span class="token keyword">fi</span>
        <span class="token assign-left variable">var3</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$a</span> * <span class="token variable">$b</span> <span class="token punctuation">]</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot; The result of <span class="token variable">$a</span> * <span class="token variable">$b</span> = <span class="token variable">$var3</span>&quot;</span>
    <span class="token keyword">done</span>
<span class="token keyword">done</span>
----------
Iteration <span class="token number">1</span>:
 The result of <span class="token number">1</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">1</span>
 The result of <span class="token number">1</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">2</span>
Iteration <span class="token number">2</span>:
 The result of <span class="token number">2</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span>
 The result of <span class="token number">2</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">4</span>
Iteration <span class="token number">3</span>:
Iteration <span class="token number">4</span>:
 The result of <span class="token number">4</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">4</span>
 The result of <span class="token number">4</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">8</span>
Iteration <span class="token number">5</span>:
 The result of <span class="token number">5</span> * <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">5</span>
 The result of <span class="token number">5</span> * <span class="token number">2</span> <span class="token operator">=</span> <span class="token number">10</span>
-----------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤å¤„ç”¨ continue å‘½ä»¤æ¥åœæ­¢å¤„ç†å¾ªç¯å†…çš„å‘½ä»¤ï¼Œä½†ä¼šç»§ç»­å¤„ç†å¤–éƒ¨å¾ªç¯ã€‚æ³¨æ„ï¼Œå€¼ä¸º 3 çš„é‚£æ¬¡è¿­ä»£å¹¶æ²¡æœ‰å¤„ç†ä»»ä½•å†…éƒ¨å¾ªç¯è¯­å¥ï¼Œå› ä¸ºå°½ç®¡ continue å‘½ä»¤åœæ­¢äº†å¤„ç†è¿‡ç¨‹ï¼Œä½†å¤–éƒ¨å¾ªç¯ä¾ç„¶ä¼šç»§ç»­ã€‚</p><h4 id="é‡å®šå‘å¾ªç¯çš„è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#é‡å®šå‘å¾ªç¯çš„è¾“å‡º" aria-hidden="true">#</a> é‡å®šå‘å¾ªç¯çš„è¾“å‡º</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> /home/shell/*
<span class="token keyword">do</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">&quot;<span class="token variable">$file</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$file</span> is a directory&quot;</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$file</span> is a file&quot;</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span> <span class="token operator">&gt;</span> output.txt

<span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> a<span class="token operator">++</span> <span class="token punctuation">))</span></span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;The number is <span class="token variable">$a</span>&quot;</span>
<span class="token keyword">done</span> <span class="token operator">&gt;&gt;</span> output.txt
---------
/home/shell/demo6.sh is a <span class="token function">file</span>
/home/shell/demo7.sh is a <span class="token function">file</span>
/home/shell/demo.sh is a <span class="token function">file</span>
/home/shell/output.txt is a <span class="token function">file</span>
The number is <span class="token number">1</span>
The number is <span class="token number">2</span>
The number is <span class="token number">3</span>
The number is <span class="token number">4</span>
The number is <span class="token number">5</span>
The number is <span class="token number">6</span>
The number is <span class="token number">7</span>
The number is <span class="token number">8</span>
The number is <span class="token number">9</span>
-----------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†å¾ªç¯çš„ç»“æœç®¡æ¥ç»™å¦ä¸€ä¸ªå‘½ä»¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">state</span> <span class="token keyword">in</span> <span class="token string">&quot;North Dakota&quot;</span> Connecticut Illinois Alabama Tennessee
<span class="token keyword">do</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$state</span> is the next place to go&quot;</span>
<span class="token keyword">done</span> <span class="token operator">|</span> <span class="token function">sort</span>
------------
Alabama is the next place to go
Connecticut is the next place to go
Illinois is the next place to go
North Dakota is the next place to go
Tennessee is the next place to go
----------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç»¼åˆå®ä¾‹" tabindex="-1"><a class="header-anchor" href="#ç»¼åˆå®ä¾‹" aria-hidden="true">#</a> ç»¼åˆå®ä¾‹</h4><ul><li>æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶</li></ul><p>é¦–å…ˆæ˜¯åˆ›å»ºä¸€ä¸ª for å¾ªç¯ï¼Œå¯¹ç¯å¢ƒå˜é‡ PATH ä¸­çš„ç›®å½•è¿›è¡Œè¿­ä»£ã€‚å¤„ç†çš„æ—¶å€™åˆ«å¿˜äº†è®¾ç½® IFS åˆ†éš”ç¬¦ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>:
<span class="token keyword">for</span> <span class="token for-or-select variable">folder</span> <span class="token keyword">in</span> <span class="token environment constant">$PATH</span>
<span class="token keyword">do</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ä½ å·²ç»å°†å„ä¸ªç›®å½•å­˜æ”¾åœ¨äº†å˜é‡ $folder ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ª for å¾ªç¯æ¥è¿­ä»£ç‰¹å®šç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">$folder</span>/*
<span class="token keyword">do</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ€åä¸€æ­¥æ˜¯æ£€æŸ¥å„ä¸ªæ–‡ä»¶æ˜¯å¦å…·æœ‰å¯æ‰§è¡Œæƒé™ï¼Œä½ å¯ä»¥ä½¿ç”¨ if-then æµ‹è¯•åŠŸèƒ½æ¥å®ç°ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token variable">$file</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">$file</span>&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¥½äº†ï¼Œæå®šäº†ï¼å°†è¿™äº›ä»£ç ç‰‡æ®µç»„åˆæˆè„šæœ¬å°±è¡Œäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span>:
<span class="token keyword">for</span> <span class="token for-or-select variable">folder</span> <span class="token keyword">in</span> <span class="token environment constant">$PATH</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$folder</span>:&quot;</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">file</span> <span class="token keyword">in</span> <span class="token variable">$folder</span>/*
    <span class="token keyword">do</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-x</span> <span class="token variable">$file</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot; <span class="token variable">$file</span>&quot;</span>
        <span class="token keyword">fi</span>
    <span class="token keyword">done</span>
<span class="token keyword">done</span> <span class="token operator">|</span> <span class="token function">more</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨çš„å¯æ‰§è¡Œæ–‡ä»¶çš„åˆ—è¡¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/usr/local/sbin:
/usr/local/bin:
/usr/sbin:
 /usr/sbin/abrt-auto-reporting
 /usr/sbin/abrt-configuration
 /usr/sbin/abrtd
<span class="token punctuation">..</span><span class="token punctuation">..</span>. 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åˆ›å»ºå¤šä¸ªç”¨æˆ·è´¦æˆ·</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">input</span><span class="token operator">=</span><span class="token string">&quot;users.csv&quot;</span>
<span class="token keyword">while</span> <span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">&#39;,&#39;</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-r</span> userid name
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;adding <span class="token variable">$userid</span>&quot;</span>
    <span class="token function">useradd</span> <span class="token parameter variable">-c</span> <span class="token string">&quot;<span class="token variable">$name</span>&quot;</span> <span class="token parameter variable">-m</span> <span class="token variable">$userid</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token string">&quot;<span class="token variable">$input</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">tail</span> <span class="token parameter variable">-3</span> /etc/passwd<span class="token variable">)</span></span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>christine,Christine Bresnahan
barbara,Barbara Blum
tim,Timothy Bresnahan
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh user.sh
adding christine
adding barbara
adding tim
christine:x:1002:1002:Christine Bresnahan:/home/christine:/bin/bash
barbara:x:1003:1003:Barbara Blum:/home/barbara:/bin/bash
tim:x:1004:1004:Timothy Bresnahan:/home/tim:/bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å¤„ç†ç”¨æˆ·è¾“å…¥" tabindex="-1"><a class="header-anchor" href="#å¤„ç†ç”¨æˆ·è¾“å…¥" aria-hidden="true">#</a> å¤„ç†ç”¨æˆ·è¾“å…¥</h3><h4 id="ä¼ é€’ä¸è¯»å–å‚æ•°-n" tabindex="-1"><a class="header-anchor" href="#ä¼ é€’ä¸è¯»å–å‚æ•°-n" aria-hidden="true">#</a> ä¼ é€’ä¸è¯»å–å‚æ•° $n</h4><p>sh <a href="http://demo.sh" target="_blank" rel="noopener noreferrer">demo.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> xiaoyu 20</p><p>åœ¨è„šæœ¬å†…é€šè¿‡ `$n` æ¥è·å–å‚æ•°ï¼ˆ $0 æ˜¯ç¨‹åºåï¼Œ$1 æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ $2 æ˜¯ç¬¬äºŒä¸ªå‚æ•°ï¼Œä¾æ¬¡ç±»æ¨ï¼Œç›´åˆ°ç¬¬ä¹ä¸ªå‚æ•° $9 ï¼‰ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> ç¨‹åºåç§°ï¼š <span class="token variable">$0</span>
<span class="token builtin class-name">echo</span> å‚æ•°1 <span class="token variable">$1</span>
<span class="token builtin class-name">echo</span> å‚æ•°2 <span class="token variable">$2</span>

-------
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo4.sh 123 3</span>
ç¨‹åºåç§°ï¼š demo4.sh
å‚æ•°1 <span class="token number">123</span>
å‚æ•°2 <span class="token number">3</span>
-------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p 10="">å¦‚æœè„šæœ¬éœ€è¦çš„å‘½ä»¤è¡Œå‚æ•°ä¸æ­¢9ä¸ªï¼Œä½ ä»ç„¶å¯ä»¥å¤„ç†ï¼Œä½†æ˜¯éœ€è¦ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å˜é‡åã€‚åœ¨ç¬¬9ä¸ªå˜é‡ä¹‹åï¼Œä½ å¿…é¡»åœ¨å˜é‡æ•°å­—å‘¨å›´åŠ ä¸ŠèŠ±æ‹¬å·ï¼Œæ¯”å¦‚ $</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> ç¨‹åºåç§°ï¼š <span class="token variable">$0</span>
<span class="token builtin class-name">echo</span> å‚11 <span class="token variable">$11</span>
<span class="token builtin class-name">echo</span> å‚11 <span class="token variable">${11}</span>
<span class="token builtin class-name">echo</span> å‚12 <span class="token variable">${12}</span>

-------
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo4.sh 1 2 3 4 5 6 7 8 9 10 &quot;sdfw6513wer&quot; 12 13</span>
ç¨‹åºåç§°ï¼š demo4.sh
å‚11 <span class="token number">11</span>
å‚11 sdfw6513wer
å‚12 <span class="token number">12</span>
-------
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†æ˜¯è¿™ç§å†™æ³•æ˜¯ä¸å¯å–çš„</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> Hello <span class="token variable">$1</span>, glad to meet you.
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Sorry, you did not identify yourself. &quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è·Ÿè¸ªå‚æ•°" tabindex="-1"><a class="header-anchor" href="#è·Ÿè¸ªå‚æ•°" aria-hidden="true">#</a> è·Ÿè¸ªå‚æ•° $# $* $@</h4><h5>å‚æ•°ç»Ÿè®¡</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">2</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> Usage: <span class="token variable">$0</span> a b
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span>
<span class="token keyword">fi</span>

<span class="token builtin class-name">echo</span> The last parameter is <span class="token variable">${<span class="token operator">!</span><span class="token operator">#</span>}</span>
<span class="token builtin class-name">echo</span> The last parameter is <span class="token variable">$#</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æŠ“å–æ‰€æœ‰çš„æ•°æ®</h5><p>$* å’Œ $@ å˜é‡å¯ä»¥ç”¨æ¥è½»æ¾è®¿é—®æ‰€æœ‰çš„å‚æ•°ã€‚</p><p>$* æ‰€æœ‰å‚æ•°å½“ä½œä¸€ä¸ªå•è¯ä¿å­˜</p><p>$@ æ‰€æœ‰å‚æ•°å½“ä½œåŒä¸€å­—ç¬¦ä¸²ä¸­çš„å¤šä¸ªç‹¬ç«‹çš„å•è¯ï¼Œé€šå¸¸é€šè¿‡ for å‘½ä»¤å¾—åˆ°æ¯ä¸ªå‚æ•°</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> parameter <span class="token punctuation">\</span><span class="token variable">$*</span><span class="token builtin class-name">:</span> <span class="token variable">$*</span>
<span class="token builtin class-name">echo</span> parameter <span class="token punctuation">\</span><span class="token variable">$@</span><span class="token builtin class-name">:</span> <span class="token variable">$@</span>

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token comment">#</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">param</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$*</span>&quot;</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$*</span> Parameter #<span class="token variable">$count</span> = <span class="token variable">$param</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token assign-left variable">count2</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">param</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;\<span class="token variable">$@</span> Parameter #<span class="token variable">$count2</span> = <span class="token variable">$param</span>&quot;</span>
    <span class="token assign-left variable">count2</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count2</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$* Parameter #10 = 1 2 3 4 5 6 7 8 9 10 sdfw6513wer 12 13
$@ Parameter #100 = 1
$@ Parameter #101 = 2
$@ Parameter #102 = 3
$@ Parameter #103 = 4
$@ Parameter #104 = 5
$@ Parameter #105 = 6
$@ Parameter #106 = 7
$@ Parameter #107 = 8
$@ Parameter #108 = 9
$@ Parameter #109 = 10
$@ Parameter #110 = sdfw6513wer
$@ Parameter #111 = 12
$@ Parameter #112 = 13
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é€šè¿‡ä½¿ç”¨ for å‘½ä»¤éå†è¿™ä¸¤ä¸ªç‰¹æ®Šå˜é‡ï¼Œä½ èƒ½çœ‹åˆ°å®ƒä»¬æ˜¯å¦‚ä½•ä¸åŒåœ°å¤„ç†å‘½ä»¤è¡Œå‚æ•°çš„ã€‚ $* å˜é‡ä¼šå°†æ‰€æœ‰å‚æ•°å½“æˆå•ä¸ªå‚æ•°ï¼Œè€Œ $@ å˜é‡ä¼šå•ç‹¬å¤„ç†æ¯ä¸ªå‚æ•°ã€‚è¿™æ˜¯éå†å‘½ä»¤è¡Œå‚æ•°çš„ä¸€ä¸ªç»å¦™æ–¹æ³•ã€‚</p><h4 id="ç§»åŠ¨å˜é‡" tabindex="-1"><a class="header-anchor" href="#ç§»åŠ¨å˜é‡" aria-hidden="true">#</a> ç§»åŠ¨å˜é‡</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment">#count=1</span>
<span class="token comment">#while [ -n &quot;$1&quot; ]</span>
<span class="token comment">#do</span>
<span class="token comment">#    echo &quot;Parameter #$count = $1&quot;</span>
<span class="token comment">#    count=$[ $count + 1 ]</span>
<span class="token comment">#    shift</span>
<span class="token comment">#done</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The original parameters: <span class="token variable">$*</span>&quot;</span>
<span class="token builtin class-name">shift</span> <span class="token number">2</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Here&#39;s the new first parameter: <span class="token variable">$1</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh shift.sh 1 2 3 4 5 6 7 8 9 10

The original parameters: 1 2 3 4 5 6 7 8 9 10
Here&#39;s the new first parameter: 3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè„šæœ¬é€šè¿‡æµ‹è¯•ç¬¬ä¸€ä¸ªå‚æ•°å€¼çš„é•¿åº¦æ‰§è¡Œäº†ä¸€ä¸ª while å¾ªç¯ã€‚å½“ç¬¬ä¸€ä¸ªå‚æ•°çš„é•¿åº¦ä¸ºé›¶æ—¶ï¼Œå¾ªç¯ç»“æŸã€‚æµ‹è¯•å®Œç¬¬ä¸€ä¸ªå‚æ•°åï¼Œ shift å‘½ä»¤ä¼šå°†æ‰€æœ‰å‚æ•°çš„ä½ç½®ç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚</p><hr><p><strong>çªé—¨</strong> ä½¿ç”¨ shift å‘½ä»¤çš„æ—¶å€™è¦å°å¿ƒã€‚å¦‚æœæŸä¸ªå‚æ•°è¢«ç§»å‡ºï¼Œå®ƒçš„å€¼å°±è¢«ä¸¢å¼ƒäº†ï¼Œæ— æ³•å†æ¢å¤ã€‚</p><hr><h4 id="å¤„ç†é€‰é¡¹" tabindex="-1"><a class="header-anchor" href="#å¤„ç†é€‰é¡¹" aria-hidden="true">#</a> å¤„ç†é€‰é¡¹</h4><h5>å¤„ç†ç®€å•é€‰é¡¹</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token keyword">in</span>
    -a<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -a option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
    -b<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -b option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
    -c<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -c option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
    *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$1</span> is not an option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    <span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>

$ ./test15.sh <span class="token parameter variable">-a</span> <span class="token parameter variable">-b</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-d</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-b</span> option
Found the <span class="token parameter variable">-c</span> option
<span class="token parameter variable">-d</span> is not an option
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ†ç¦»å‚æ•°å’Œé€‰é¡¹</h5><p>å¯¹Linuxæ¥è¯´ï¼Œè¿™ä¸ªç‰¹æ®Šå­—ç¬¦æ˜¯åŒç ´æŠ˜çº¿ï¼ˆ -- ï¼‰ã€‚shellä¼šç”¨åŒç ´æŠ˜çº¿æ¥è¡¨æ˜é€‰é¡¹åˆ—è¡¨ç»“æŸã€‚åœ¨åŒç ´æŠ˜çº¿ä¹‹åï¼Œè„šæœ¬å°±å¯ä»¥æ”¾å¿ƒåœ°å°†å‰©ä¸‹çš„å‘½ä»¤è¡Œå‚æ•°å½“ä½œå‚æ•°ï¼Œè€Œä¸æ˜¯é€‰é¡¹æ¥å¤„ç†äº†ã€‚</p><p>è¦æ£€æŸ¥åŒç ´æŠ˜çº¿ï¼Œåªè¦åœ¨ case è¯­å¥ä¸­åŠ ä¸€é¡¹å°±è¡Œäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token keyword">in</span>
        -a<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -a option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        -b<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -b option&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        -c<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -c option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        --<span class="token punctuation">)</span> <span class="token builtin class-name">shift</span>
        <span class="token builtin class-name">break</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$1</span> is not an option&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    <span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>
<span class="token comment">#</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">param</span> <span class="token keyword">in</span> <span class="token variable">$@</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Parameter #<span class="token variable">$count</span>: <span class="token variable">$param</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨é‡åˆ°åŒç ´æŠ˜çº¿æ—¶ï¼Œè„šæœ¬ç”¨ break å‘½ä»¤æ¥è·³å‡º while å¾ªç¯ã€‚ç”±äºè¿‡æ—©åœ°è·³å‡ºäº†å¾ªç¯ï¼Œæˆ‘ä»¬éœ€è¦å†åŠ ä¸€æ¡ shift å‘½ä»¤æ¥å°†åŒç ´æŠ˜çº¿ç§»å‡ºå‚æ•°å˜é‡ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sh test16.sh -c -a -b test1 test2 test3
Found the -c option
Found the -a option
Found the -b option
test1 is not an option
test2 is not an option
test3 is not an option

sh test16.sh -c -a -b -- test1 test2 test3
Found the -c option
Found the -a option
Found the -b option
Parameter #1: test1
Parameter #2: test2
Parameter #3: test3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“è„šæœ¬é‡åˆ°åŒç ´æŠ˜çº¿æ—¶ï¼Œå®ƒä¼šåœæ­¢å¤„ç†é€‰é¡¹ï¼Œå¹¶å°†å‰©ä¸‹çš„å‚æ•°éƒ½å½“ä½œå‘½ä»¤è¡Œå‚æ•°ã€‚</p><h5>å¤„ç†å¸¦å€¼çš„é€‰é¡¹</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token keyword">in</span>
        -a<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -a option&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        -b<span class="token punctuation">)</span> <span class="token assign-left variable">param</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -b option, with parameter value <span class="token variable">$param</span>&quot;</span>
            <span class="token builtin class-name">shift</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        -c<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -c option&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        --<span class="token punctuation">)</span> <span class="token builtin class-name">shift</span>
            <span class="token builtin class-name">break</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$1</span> is not an option&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    <span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>
<span class="token comment">#</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">param</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Parameter #<span class="token variable">$count</span>: <span class="token variable">$param</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">sh</span> demo4.sh <span class="token parameter variable">-a</span> <span class="token parameter variable">-b</span> test1 <span class="token parameter variable">-d</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-b</span> option, with parameter value test1
<span class="token parameter variable">-d</span> is not an option
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ case è¯­å¥å®šä¹‰äº†ä¸‰ä¸ªå®ƒè¦å¤„ç†çš„é€‰é¡¹ã€‚ -b é€‰é¡¹è¿˜éœ€è¦ä¸€ä¸ªé¢å¤–çš„å‚æ•°å€¼ã€‚ç”±äºè¦å¤„ç†çš„å‚æ•°æ˜¯ $1 ï¼Œé¢å¤–çš„å‚æ•°å€¼å°±åº”è¯¥ä½äº $2 ï¼ˆå› ä¸ºæ‰€æœ‰çš„å‚æ•°åœ¨å¤„ç†å®Œä¹‹åéƒ½ä¼šè¢«ç§»å‡ºï¼‰ã€‚åªè¦å°†å‚æ•°å€¼ä» $2 å˜é‡ä¸­æå–å‡ºæ¥å°±å¯ä»¥äº†ã€‚å½“ç„¶ï¼Œå› ä¸ºè¿™ä¸ªé€‰é¡¹å ç”¨äº†ä¸¤ä¸ªå‚æ•°ä½ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦ä½¿ç”¨ shift å‘½ä»¤å¤šç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚</p><p>åªç”¨è¿™äº›åŸºæœ¬çš„ç‰¹æ€§ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±èƒ½æ­£å¸¸å·¥ä½œï¼Œä¸ç®¡æŒ‰ä»€ä¹ˆé¡ºåºæ”¾ç½®é€‰é¡¹ï¼ˆä½†è¦è®°ä½åŒ…å«æ¯ä¸ªé€‰é¡¹ç›¸åº”çš„é€‰é¡¹å‚æ•°ï¼‰ã€‚</p><p>ç°åœ¨shellè„šæœ¬ä¸­å·²ç»æœ‰äº†å¤„ç†å‘½ä»¤è¡Œé€‰é¡¹çš„åŸºæœ¬èƒ½åŠ›ï¼Œä½†è¿˜æœ‰ä¸€äº›é™åˆ¶ã€‚æ¯”å¦‚ï¼Œå¦‚æœä½ æƒ³å°† å¤šä¸ªé€‰é¡¹æ”¾è¿›ä¸€ä¸ªå‚æ•°ä¸­æ—¶ï¼Œå®ƒå°±ä¸èƒ½å·¥ä½œäº†ã€‚</p><blockquote><p>sh <a href="http://test.sh" target="_blank" rel="noopener noreferrer">test.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> -ac</p></blockquote><h5>getopt</h5><p>å®ƒèƒ½å¤Ÿè¯†åˆ«å‘½ä»¤è¡Œå‚æ•°ï¼Œä»è€Œåœ¨è„šæœ¬ä¸­è§£æå®ƒä»¬æ—¶æ›´æ–¹ä¾¿ã€‚</p><blockquote><p>getopt optstring parameters</p><p>optstring æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„å…³é”®æ‰€åœ¨ã€‚å®ƒå®šä¹‰äº†å‘½ä»¤è¡Œæœ‰æ•ˆçš„é€‰é¡¹å­—æ¯ï¼Œè¿˜å®šä¹‰äº†å“ªäº›é€‰é¡¹å­—æ¯éœ€è¦å‚æ•°å€¼ã€‚ é¦–å…ˆï¼Œåœ¨ optstring ä¸­åˆ—å‡ºä½ è¦åœ¨è„šæœ¬ä¸­ç”¨åˆ°çš„æ¯ä¸ªå‘½ä»¤è¡Œé€‰é¡¹å­—æ¯ã€‚ç„¶åï¼Œåœ¨æ¯ä¸ªéœ€è¦å‚æ•°å€¼çš„é€‰é¡¹å­—æ¯ååŠ ä¸€ä¸ªå†’å·ã€‚ getopt å‘½ä»¤ä¼šåŸºäºä½ å®šä¹‰çš„ optstring è§£ææä¾›çš„å‚æ•°ã€‚</p></blockquote><p>ç®€å•ä¾‹å­:</p><blockquote><p>å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªä¸åœ¨ optstring ä¸­çš„é€‰é¡¹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ getopt å‘½ä»¤ä¼šäº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># getopt ab:cd -a -b test1 -cd test2 test3</span>
 <span class="token parameter variable">-a</span> <span class="token parameter variable">-b</span> test1 <span class="token parameter variable">-c</span> <span class="token parameter variable">-d</span> -- test2 test3
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># getopt ab:cd -a -b test1 -cde test2 test3</span>
getoptï¼šæ— æ•ˆé€‰é¡¹ -- e
 <span class="token parameter variable">-a</span> <span class="token parameter variable">-b</span> test1 <span class="token parameter variable">-c</span> <span class="token parameter variable">-d</span> -- test2 test3
 <span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># getopt -q ab:cd -a -b test1 -cde test2 test3</span>
 <span class="token parameter variable">-a</span> <span class="token parameter variable">-b</span> <span class="token string">&#39;test1&#39;</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-d</span> -- <span class="token string">&#39;test2&#39;</span> <span class="token string">&#39;test3&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ³¨æ„ ï¼š getopt å‘½ä»¤é€‰é¡¹å¿…é¡»å‡ºç°åœ¨ optstring ä¹‹å‰ã€‚</p></blockquote><p><strong>åœ¨è„šæœ¬ä¸­ä½¿ç”¨</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">set</span> -- <span class="token variable"><span class="token variable">$(</span>getopt <span class="token parameter variable">-q</span> ab:cd <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span><span class="token variable">)</span></span>

<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$1</span>&quot;</span> <span class="token keyword">in</span>
        -a<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -a option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        -b<span class="token punctuation">)</span> <span class="token assign-left variable">param</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -b option, with parameter value <span class="token variable">$param</span>&quot;</span>
            <span class="token builtin class-name">shift</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        -c<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -c option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        --<span class="token punctuation">)</span> <span class="token builtin class-name">shift</span>
            <span class="token builtin class-name">break</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$1</span> is not an option&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    <span class="token builtin class-name">shift</span>
<span class="token keyword">done</span>
<span class="token comment">#</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">param</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Parameter #<span class="token variable">$count</span>: <span class="token variable">$param</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo5.sh -ac</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-c</span> option

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo5.sh -a -b test1 -cd test2 test3 test4</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-b</span> option, with parameter value <span class="token string">&#39;test1&#39;</span>
Found the <span class="token parameter variable">-c</span> option
<span class="token parameter variable">-d</span> is not an option
Parameter <span class="token comment">#1: &#39;test2&#39;</span>
Parameter <span class="token comment">#2: &#39;test3&#39;</span>
Parameter <span class="token comment">#3: &#39;test4&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>getopt å‘½ä»¤å¹¶ä¸æ“…é•¿å¤„ç†å¸¦ç©ºæ ¼å’Œå¼•å·çš„å‚æ•°å€¼ã€‚å®ƒä¼šå°†ç©ºæ ¼å½“ä½œå‚æ•°åˆ†éš”ç¬¦ï¼Œè€Œä¸æ˜¯æ ¹æ®åŒå¼•å·å°†äºŒè€…å½“ä½œä¸€ä¸ªå‚æ•°ã€‚å¹¸è€Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªåŠæ³•èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ <strong>ï¼ˆä½¿ç”¨æ›´é«˜çº§çš„ getoptsï¼‰</strong> ã€‚</p><h5>getopts</h5><p>getoptä¼šå°†å‘½ä»¤è¡Œä¸Šé€‰é¡¹å’Œå‚æ•°å¤„ç†ååªç”Ÿæˆä¸€ä¸ªè¾“å‡ºï¼Œè€Œ getopts å‘½ä»¤èƒ½å¤Ÿå’Œå·²æœ‰çš„shellå‚æ•°å˜é‡é…åˆé»˜å¥‘ã€‚</p><p>æ¯æ¬¡è°ƒç”¨å®ƒæ—¶ï¼Œå®ƒä¸€æ¬¡åªå¤„ç†å‘½ä»¤è¡Œä¸Šæ£€æµ‹åˆ°çš„ä¸€ä¸ªå‚æ•°ã€‚å¤„ç†å®Œæ‰€æœ‰çš„å‚æ•°åï¼Œå®ƒä¼šé€€å‡ºå¹¶è¿”å›ä¸€ä¸ªå¤§äº0çš„é€€å‡ºçŠ¶æ€ç ã€‚è¿™è®©å®ƒéå¸¸é€‚åˆç”¨è§£æå‘½ä»¤è¡Œæ‰€æœ‰å‚æ•°çš„å¾ªç¯ä¸­ã€‚</p><p>getopts å‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><p><code>getopts optstring variable</code></p><p>optstring å€¼ç±»ä¼¼äº getopt å‘½ä»¤ä¸­çš„é‚£ä¸ªã€‚æœ‰æ•ˆçš„é€‰é¡¹å­—æ¯éƒ½ä¼šåˆ—åœ¨ optstring ä¸­ï¼Œå¦‚æœé€‰é¡¹å­—æ¯è¦æ±‚æœ‰ä¸ªå‚æ•°å€¼ï¼Œå°±åŠ ä¸€ä¸ªå†’å·ã€‚è¦å»æ‰é”™è¯¯æ¶ˆæ¯çš„è¯ï¼Œå¯ä»¥åœ¨ optstring ä¹‹å‰åŠ ä¸€ä¸ªå†’å·ã€‚ getopts å‘½ä»¤å°†å½“å‰å‚æ•°ä¿å­˜åœ¨å‘½ä»¤è¡Œä¸­å®šä¹‰çš„ variable ä¸­ã€‚</p><p>getopts å‘½ä»¤ä¼šç”¨åˆ°ä¸¤ä¸ªç¯å¢ƒå˜é‡ã€‚å¦‚æœé€‰é¡¹éœ€è¦è·Ÿä¸€ä¸ªå‚æ•°å€¼ï¼Œ OPTARG ç¯å¢ƒå˜é‡å°±ä¼šä¿å­˜è¿™ä¸ªå€¼ã€‚ OPTIND ç¯å¢ƒå˜é‡ä¿å­˜äº†å‚æ•°åˆ—è¡¨ä¸­ getopts æ­£åœ¨å¤„ç†çš„å‚æ•°ä½ç½®ã€‚è¿™æ ·ä½ å°±èƒ½åœ¨å¤„ç†å®Œé€‰é¡¹ä¹‹åç»§ç»­å¤„ç†å…¶ä»–å‘½ä»¤è¡Œå‚æ•°äº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span>
<span class="token keyword">while</span> <span class="token builtin class-name">getopts</span> :ab:c opt
<span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$opt</span>&quot;</span> <span class="token keyword">in</span>
        a<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -a option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        b<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -b option, with value <span class="token variable">$OPTARG</span>&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
        c<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -c option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Unknown option: <span class="token variable">$opt</span>&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo5.sh -ab test1 -c</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-b</span> option, with value test1
Found the <span class="token parameter variable">-c</span> option
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># -b &quot;test1 test2&quot; -a</span>
Found the <span class="token parameter variable">-b</span> option, with value test1 test2
Found the <span class="token parameter variable">-a</span> option
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># -abtest1</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-b</span> option, with value test1
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># -acde</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-c</span> option
Unknown option: ?
Unknown option: ?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç‰¹æ€§ï¼š</strong></p><ul><li>å¯ä»¥åœ¨å‚æ•°å€¼ä¸­åŒ…å«ç©ºæ ¼</li><li>å°†é€‰é¡¹å­—æ¯å’Œå‚æ•°å€¼æ”¾åœ¨ä¸€èµ·ä½¿ç”¨ï¼Œè€Œä¸ç”¨åŠ ç©ºæ ¼</li><li>å°†å‘½ä»¤è¡Œä¸Šæ‰¾åˆ°çš„æ‰€æœ‰æœªå®šä¹‰çš„é€‰é¡¹ç»Ÿä¸€è¾“å‡ºæˆé—®å·</li><li>çŸ¥é“ä½•æ—¶åœæ­¢å¤„ç†é€‰é¡¹ï¼Œå¹¶å°†å‚æ•°ç•™ç»™ä½ å¤„ç†</li></ul><p>åœ¨ getopts å¤„ç†æ¯ä¸ªé€‰é¡¹æ—¶ï¼Œå®ƒä¼šå°† OPTIND ç¯å¢ƒå˜é‡å€¼å¢ä¸€ã€‚åœ¨ getopts å®Œæˆå¤„ç†æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ shift å‘½ä»¤å’Œ OPTIND å€¼æ¥ç§»åŠ¨å‚æ•°ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">while</span> <span class="token builtin class-name">getopts</span> :ab:cd opt
<span class="token keyword">do</span>
    <span class="token keyword">case</span> <span class="token string">&quot;<span class="token variable">$opt</span>&quot;</span> <span class="token keyword">in</span>
        a<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -a option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        b<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -b option, with value <span class="token variable">$OPTARG</span>&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        c<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -c option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        d<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Found the -d option&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Unknown option: <span class="token variable">$opt</span>&quot;</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
<span class="token keyword">done</span>
<span class="token comment">#</span>
<span class="token builtin class-name">shift</span> $<span class="token punctuation">[</span> <span class="token environment constant">$OPTIND</span> - <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token comment">#</span>
<span class="token builtin class-name">echo</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">param</span> <span class="token keyword">in</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Parameter <span class="token variable">$count</span>: <span class="token variable">$param</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># -a -b test1 -d test2 test3 test4</span>
Found the <span class="token parameter variable">-a</span> option
Found the <span class="token parameter variable">-b</span> option, with value test1
Found the <span class="token parameter variable">-d</span> option
Parameter <span class="token number">1</span>: test2
Parameter <span class="token number">2</span>: test3
Parameter <span class="token number">3</span>: test4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å°†é€‰é¡¹æ ‡å‡†åŒ–" tabindex="-1"><a class="header-anchor" href="#å°†é€‰é¡¹æ ‡å‡†åŒ–" aria-hidden="true">#</a> å°†é€‰é¡¹æ ‡å‡†åŒ–</h4><p>åœ¨åˆ›å»ºshellè„šæœ¬æ—¶ï¼Œæ˜¾ç„¶å¯ä»¥æ§åˆ¶å…·ä½“æ€ä¹ˆåšã€‚ä½ å®Œå…¨å¯ä»¥å†³å®šç”¨å“ªäº›å­—æ¯é€‰é¡¹ä»¥åŠå®ƒä»¬çš„ ç”¨æ³•ã€‚</p><p>ä½†æœ‰äº›å­—æ¯é€‰é¡¹åœ¨Linuxä¸–ç•Œé‡Œå·²ç»æ‹¥æœ‰äº†æŸç§ç¨‹åº¦çš„æ ‡å‡†å«ä¹‰ã€‚å¦‚æœä½ èƒ½åœ¨shellè„šæœ¬ä¸­æ”¯ æŒè¿™äº›é€‰é¡¹ï¼Œè„šæœ¬çœ‹èµ·æ¥èƒ½æ›´å‹å¥½ä¸€äº›ï¼š</p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>é€‰é¡¹		æè¿°
-a		æ˜¾ç¤ºæ‰€æœ‰å¯¹è±¡
-c		ç”Ÿæˆä¸€ä¸ªè®¡æ•°
-d		æŒ‡å®šä¸€ä¸ªç›®å½•
-e		æ‰©å±•ä¸€ä¸ªå¯¹è±¡
-f		æŒ‡å®šè¯»å…¥æ•°æ®çš„æ–‡ä»¶
-h		æ˜¾ç¤ºå‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯
-i		å¿½ç•¥æ–‡æœ¬å¤§å°å†™
-l		äº§ç”Ÿè¾“å‡ºçš„é•¿æ ¼å¼ç‰ˆæœ¬
-n		ä½¿ç”¨éäº¤äº’æ¨¡å¼ï¼ˆæ‰¹å¤„ç†ï¼‰
-o		å°†æ‰€æœ‰è¾“å‡ºé‡å®šå‘åˆ°çš„æŒ‡å®šçš„è¾“å‡ºæ–‡ä»¶
-q		ä»¥å®‰é™æ¨¡å¼è¿è¡Œ
-r		é€’å½’åœ°å¤„ç†ç›®å½•å’Œæ–‡ä»¶
-s		ä»¥å®‰é™æ¨¡å¼è¿è¡Œ
-v		ç”Ÿæˆè¯¦ç»†è¾“å‡º
-x		æ’é™¤æŸä¸ªå¯¹è±¡
-y		å¯¹æ‰€æœ‰é—®é¢˜å›ç­”yes
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è·å¾—ç”¨æˆ·è¾“å…¥-read" tabindex="-1"><a class="header-anchor" href="#è·å¾—ç”¨æˆ·è¾“å…¥-read" aria-hidden="true">#</a> è·å¾—ç”¨æˆ·è¾“å…¥ read</h4><p>å°½ç®¡å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°æ˜¯ä»è„šæœ¬ç”¨æˆ·å¤„è·å¾—è¾“å…¥çš„ä¸€ç§é‡è¦æ–¹å¼ï¼Œä½†æœ‰æ—¶è„šæœ¬çš„äº¤äº’æ€§è¿˜éœ€è¦æ›´å¼ºä¸€äº›ã€‚æ¯”å¦‚ä½ æƒ³è¦åœ¨è„šæœ¬è¿è¡Œæ—¶é—®ä¸ªé—®é¢˜ï¼Œå¹¶ç­‰å¾…è¿è¡Œè„šæœ¬çš„äººæ¥å›ç­”</p><h5>åŸºæœ¬çš„è¯»å– read -p</h5><p>read å‘½ä»¤ä»æ ‡å‡†è¾“å…¥ï¼ˆé”®ç›˜ï¼‰æˆ–å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ä¸­æ¥å—è¾“å…¥ã€‚åœ¨æ”¶åˆ°è¾“å…¥åï¼Œ read å‘½ä»¤ ä¼šå°†æ•°æ®æ”¾è¿›ä¸€ä¸ªå˜é‡ã€‚ä¸‹é¢æ˜¯ read å‘½ä»¤çš„æœ€ç®€å•ç”¨æ³•ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;Enter your name: &quot;</span>
<span class="token builtin class-name">read</span> name
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello <span class="token variable">$name</span>, welcome to my program. &quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sh test21.sh
Enter your name: xiao yu
Hello xiao yu, welcome to my program.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>read å‘½ä»¤åŒ…å«äº† -p é€‰é¡¹ï¼Œå…è®¸ä½ ç›´æ¥åœ¨ read å‘½ä»¤è¡ŒæŒ‡å®šæç¤ºç¬¦</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Please enter your age: &quot;</span> age name
<span class="token assign-left variable">days</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$age</span> * <span class="token number">365</span> <span class="token punctuation">]</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;name <span class="token variable">$name</span>; That makes you over <span class="token variable">$days</span> days old! &quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sh test22.sh
Please enter your age: 10 yu
name yu; That makes you over 3650 days old!
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥åœ¨ read å‘½ä»¤è¡Œä¸­ä¸æŒ‡å®šå˜é‡ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œ read å‘½ä»¤ä¼šå°†å®ƒæ”¶åˆ°çš„ä»»ä½•æ•°æ®éƒ½æ”¾è¿›ç‰¹æ®Šç¯å¢ƒå˜é‡ REPLY ä¸­</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># Testing the REPLY Environment variable</span>
<span class="token comment">#</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter your name: &quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> Hello <span class="token environment constant">$REPLY</span>, welcome to my program.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sh test24.sh
Enter your name: Christine
Hello Christine, welcome to my program.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>REPLY ç¯å¢ƒå˜é‡ä¼šä¿å­˜è¾“å…¥çš„æ‰€æœ‰æ•°æ®ï¼Œå¯ä»¥åœ¨shellè„šæœ¬ä¸­åƒå…¶ä»–å˜é‡ä¸€æ ·ä½¿ç”¨</p><h5>è¶…æ—¶ read -t</h5><p>ä½¿ç”¨ read å‘½ä»¤æ—¶è¦å½“å¿ƒã€‚è„šæœ¬å¾ˆå¯èƒ½ä¼šä¸€ç›´è‹¦ç­‰ç€è„šæœ¬ç”¨æˆ·çš„è¾“å…¥ã€‚å¦‚æœä¸ç®¡æ˜¯å¦æœ‰æ•°æ®è¾“å…¥ï¼Œè„šæœ¬éƒ½å¿…é¡»ç»§ç»­æ‰§è¡Œï¼Œä½ å¯ä»¥ç”¨ -t é€‰é¡¹æ¥æŒ‡å®šä¸€ä¸ªè®¡æ—¶å™¨ã€‚ -t é€‰é¡¹æŒ‡å®šäº† read å‘½ä»¤ç­‰å¾…è¾“å…¥çš„ç§’æ•°ã€‚å½“è®¡æ—¶å™¨è¿‡æœŸåï¼Œ read å‘½ä»¤ä¼šè¿”å›ä¸€ä¸ªéé›¶é€€å‡ºçŠ¶æ€ç ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">if</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-t</span> <span class="token number">5</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Please enter your name: &quot;</span> name
<span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Hello <span class="token variable">$name</span>, welcome to my script&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Sorry, too slow! &quot;</span>
<span class="token keyword">fi</span>

$ <span class="token function">sh</span> test25.sh
Please enter your name: Rich
Hello Rich, welcome to my script
$ <span class="token function">sh</span> test25.sh
Please enter your name:
Sorry, too slow<span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè®¡æ—¶å™¨è¿‡æœŸï¼Œ read å‘½ä»¤ä¼šä»¥éé›¶é€€å‡ºçŠ¶æ€ç é€€å‡ºã€‚</p><p>å½“è¾“å…¥çš„å­—ç¬¦è¾¾åˆ°é¢„è®¾çš„å­—ç¬¦æ•°æ—¶ï¼Œå°±è‡ªåŠ¨é€€å‡ºï¼Œå°†è¾“å…¥çš„æ•°æ®èµ‹ç»™å˜é‡ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">read</span> <span class="token parameter variable">-n1</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Do you want to continue [Y/N]? &quot;</span> answer
<span class="token keyword">case</span> <span class="token variable">$answer</span> <span class="token keyword">in</span>
    Y <span class="token operator">|</span> y<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;fine, continue onâ€¦&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    N <span class="token operator">|</span> n<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> OK, goodbye
    <span class="token builtin class-name">exit</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the end of the script&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ sh test26.sh
Do you want to continue [Y/N]? Y
fine, continue onâ€¦
This is the end of the script
$
$ sh test26.sh
Do you want to continue [Y/N]? n
OK, goodbye
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-n é€‰é¡¹å’Œå€¼ 1 ä¸€èµ·ä½¿ç”¨ï¼Œå‘Šè¯‰ read å‘½ä»¤åœ¨æ¥å—å•ä¸ªå­—ç¬¦åé€€å‡ºã€‚</p><h5>éšè—æ–¹å¼è¯»å– read -s</h5><p>æœ‰æ—¶ä½ éœ€è¦ä»è„šæœ¬ç”¨æˆ·å¤„å¾—åˆ°è¾“å…¥ï¼Œä½†åˆåœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¾“å…¥ä¿¡æ¯ã€‚å…¶ä¸­å…¸å‹çš„ä¾‹å­å°±æ˜¯è¾“å…¥çš„å¯†ç ï¼Œä½†é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šå…¶ä»–éœ€è¦éšè—çš„æ•°æ®ç±»å‹ã€‚</p><p>-s é€‰é¡¹å¯ä»¥é¿å…åœ¨ read å‘½ä»¤ä¸­è¾“å…¥çš„æ•°æ®å‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Šï¼ˆå®é™…ä¸Šï¼Œæ•°æ®ä¼šè¢«æ˜¾ç¤ºï¼Œåªæ˜¯ read å‘½ä»¤ä¼šå°†æ–‡æœ¬é¢œè‰²è®¾æˆè·ŸèƒŒæ™¯è‰²ä¸€æ ·ï¼‰ã€‚è¿™é‡Œæœ‰ä¸ªåœ¨è„šæœ¬ä¸­ä½¿ç”¨ -s é€‰é¡¹çš„ä¾‹å­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">read</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter your password: &quot;</span> pass
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Is your password really <span class="token variable">$pass</span>? &quot;</span>

$ <span class="token function">sh</span> test27.sh
Enter your password:
Is your password really T3st1ng?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ä»æ–‡ä»¶ä¸­è¯»å–</h5><p>ä¹Ÿå¯ä»¥ç”¨ read å‘½ä»¤æ¥è¯»å–Linuxç³»ç»Ÿä¸Šæ–‡ä»¶é‡Œä¿å­˜çš„æ•°æ®ã€‚æ¯æ¬¡è°ƒç”¨ read å‘½ä»¤ï¼Œå®ƒéƒ½ä¼šä»æ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œæ–‡æœ¬ã€‚å½“æ–‡ä»¶ä¸­å†æ²¡æœ‰å†…å®¹æ—¶ï¼Œ read å‘½ä»¤ä¼šé€€å‡ºå¹¶è¿”å›éé›¶é€€å‡ºçŠ¶æ€ç ã€‚</p><p>å…¶ä¸­æœ€éš¾çš„éƒ¨åˆ†æ˜¯å°†æ–‡ä»¶ä¸­çš„æ•°æ®ä¼ ç»™ read å‘½ä»¤ã€‚æœ€å¸¸è§çš„æ–¹æ³•æ˜¯å¯¹æ–‡ä»¶ä½¿ç”¨ cat å‘½ä»¤ï¼Œå°†ç»“æœé€šè¿‡ç®¡é“ç›´æ¥ä¼ ç»™å«æœ‰ read å‘½ä»¤çš„ while å‘½ä»¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bas</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token function">cat</span> <span class="token builtin class-name">test</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Line <span class="token variable">$count</span>: <span class="token variable">$line</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Finished processing the file&quot;</span>
$
$ <span class="token function">cat</span> <span class="token builtin class-name">test</span>
The quick brown dog jumps over the lazy fox.
This is a test, this is only a test.
O Romeo, Romeo<span class="token operator">!</span> Wherefore art thou Romeo?
$
$ <span class="token function">sh</span> test28.sh
Line <span class="token number">1</span>: The quick brown dog jumps over the lazy fox.
Line <span class="token number">2</span>: This is a test, this is only a test.
Line <span class="token number">3</span>: O Romeo, Romeo<span class="token operator">!</span> Wherefore art thou Romeo?
Finished processing the <span class="token function">file</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="å‘ˆç°æ•°æ®" tabindex="-1"><a class="header-anchor" href="#å‘ˆç°æ•°æ®" aria-hidden="true">#</a> å‘ˆç°æ•°æ®</h3><h4 id="è¾“å…¥å’Œè¾“å‡º" tabindex="-1"><a class="header-anchor" href="#è¾“å…¥å’Œè¾“å‡º" aria-hidden="true">#</a> è¾“å…¥å’Œè¾“å‡º</h4><p><strong>æ ‡å‡†æ–‡ä»¶æè¿°ç¬¦</strong></p><p>Linuxç³»ç»Ÿå°†æ¯ä¸ªå¯¹è±¡å½“ä½œæ–‡ä»¶å¤„ç†ã€‚è¿™åŒ…æ‹¬è¾“å…¥å’Œè¾“å‡ºè¿›ç¨‹ã€‚Linuxç”¨æ–‡ä»¶æè¿°ç¬¦ï¼ˆ filedescriptor ï¼‰æ¥æ ‡è¯†æ¯ä¸ªæ–‡ä»¶å¯¹è±¡ã€‚æ–‡ä»¶æè¿°ç¬¦æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ï¼Œå¯ä»¥å”¯ä¸€æ ‡è¯†ä¼šè¯ä¸­æ‰“å¼€çš„æ–‡ä»¶ã€‚æ¯ä¸ªè¿›ç¨‹ä¸€æ¬¡æœ€å¤šå¯ä»¥æœ‰ä¹ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚å‡ºäºç‰¹æ®Šç›®çš„ï¼Œbash shellä¿ç•™äº†å‰ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆ 0 ã€ 1 å’Œ 2 ï¼‰</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>æ–‡ä»¶æè¿°ç¬¦  	ç¼© å†™  		æ è¿°
0  			STDIN		æ ‡å‡†è¾“å…¥ &lt;
1  			STDOUT		æ ‡å‡†è¾“å‡º &gt; &gt;&gt;	
2  			STDERR		æ ‡å‡†é”™è¯¯
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>STDIN</li></ul><p>å¯¹ç»ˆç«¯ç•Œé¢æ¥è¯´ï¼Œæ ‡å‡†è¾“å…¥æ˜¯é”®ç›˜ã€‚shellä» STDIN æ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„é”®ç›˜è·å¾—è¾“å…¥ï¼Œåœ¨ç”¨æˆ·è¾“å…¥æ—¶å¤„ç†æ¯ä¸ªå­—ç¬¦ã€‚ åœ¨ä½¿ç”¨è¾“å…¥é‡å®šå‘ç¬¦å·ï¼ˆ &lt; ï¼‰æ—¶ï¼ŒLinuxä¼šç”¨é‡å®šå‘æŒ‡å®šçš„æ–‡ä»¶æ¥æ›¿æ¢æ ‡å‡†è¾“å…¥æ–‡ä»¶æè¿°ç¬¦ã€‚å®ƒä¼šè¯»å–æ–‡ä»¶å¹¶æå–æ•°æ®ï¼Œå°±å¦‚åŒå®ƒæ˜¯é”®ç›˜ä¸Šé”®å…¥çš„ã€‚è®¸å¤šbashå‘½ä»¤èƒ½æ¥å— STDIN çš„è¾“å…¥ï¼Œå°¤å…¶æ˜¯æ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šæ–‡ä»¶çš„è¯ã€‚ä¸‹é¢æ˜¯ä¸ªç”¨ cat å‘½ä»¤å¤„ç† STDIN è¾“å…¥çš„æ•°æ®çš„ä¾‹å­ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ cat
this is a test
this is a test
this is a second test.
this is a second test.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“åœ¨å‘½ä»¤è¡Œä¸Šåªè¾“å…¥ cat å‘½ä»¤æ—¶ï¼Œå®ƒä¼šä» STDIN æ¥å—è¾“å…¥ã€‚è¾“å…¥ä¸€è¡Œï¼Œ cat å‘½ä»¤å°±ä¼šæ˜¾ç¤ºå‡ºä¸€è¡Œã€‚</p><p>ä½†ä½ ä¹Ÿå¯ä»¥é€šè¿‡ STDIN é‡å®šå‘ç¬¦å·å¼ºåˆ¶ cat å‘½ä»¤æ¥å—æ¥è‡ªå¦ä¸€ä¸ªé STDIN æ–‡ä»¶çš„è¾“å…¥ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">cat</span> <span class="token operator">&lt;</span> testfile
This is the first line.
This is the second line.
This is the third line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ cat å‘½ä»¤ä¼šç”¨testfileæ–‡ä»¶ä¸­çš„è¡Œä½œä¸ºè¾“å…¥ã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ç§æŠ€æœ¯å°†æ•°æ®è¾“å…¥åˆ°ä»»ä½•èƒ½ä»STDIN æ¥å—æ•°æ®çš„shellå‘½ä»¤ä¸­ã€‚</p><ul><li>STDOUT</li></ul><p>STDOUT æ–‡ä»¶æè¿°ç¬¦ä»£è¡¨shellçš„æ ‡å‡†è¾“å‡ºã€‚åœ¨ç»ˆç«¯ç•Œé¢ä¸Šï¼Œæ ‡å‡†è¾“å‡ºå°±æ˜¯ç»ˆç«¯æ˜¾ç¤ºå™¨ã€‚shellçš„æ‰€æœ‰è¾“å‡ºï¼ˆåŒ…æ‹¬shellä¸­è¿è¡Œçš„ç¨‹åºå’Œè„šæœ¬ï¼‰ä¼šè¢«å®šå‘åˆ°æ ‡å‡†è¾“å‡ºä¸­ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºå™¨ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°bashå‘½ä»¤ä¼šå°†è¾“å‡ºå¯¼å‘ STDOUT æ–‡ä»¶æè¿°ç¬¦ã€‚å¦‚ç¬¬11ç« ä¸­æ‰€è¿°ï¼Œä½ å¯ä»¥ç”¨è¾“å‡ºé‡å®šå‘æ¥æ”¹å˜ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token operator">&gt;</span> test2
$ <span class="token function">cat</span> test2
total <span class="token number">20</span>
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">53</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:30 <span class="token builtin class-name">test</span>
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">0</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:32 test2
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">73</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:23 testfile

$ <span class="token function">who</span> <span class="token operator">&gt;&gt;</span> test2
$ <span class="token function">cat</span> test2
total <span class="token number">20</span>
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">53</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:30 <span class="token builtin class-name">test</span>
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">0</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:32 test2
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">73</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:23 testfile
demo pts/0 <span class="token number">2014</span>-10-17 <span class="token number">15</span>:34 <span class="token punctuation">(</span><span class="token number">192.168</span>.1.2<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>who å‘½ä»¤ç”Ÿæˆçš„è¾“å‡ºä¼šè¢«è¿½åŠ åˆ°test2æ–‡ä»¶ä¸­å·²æœ‰æ•°æ®çš„åé¢ã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœä½ å¯¹è„šæœ¬ä½¿ç”¨äº†æ ‡å‡†è¾“å‡ºé‡å®šå‘ï¼Œä½ ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ã€‚ä¸‹é¢çš„ä¾‹å­è¯´æ˜äº†å¯èƒ½ä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> badfile <span class="token operator">&gt;</span> test3
ls: cannot access badfile: No such <span class="token function">file</span> or directory
$ <span class="token function">cat</span> test3

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“å‘½ä»¤ç”Ÿæˆé”™è¯¯æ¶ˆæ¯æ—¶ï¼Œshellå¹¶æœªå°†é”™è¯¯æ¶ˆæ¯é‡å®šå‘åˆ°è¾“å‡ºé‡å®šå‘æ–‡ä»¶ã€‚shellåˆ›å»ºäº†è¾“å‡ºé‡å®šå‘æ–‡ä»¶ï¼Œä½†é”™è¯¯æ¶ˆæ¯å´æ˜¾ç¤ºåœ¨äº†æ˜¾ç¤ºå™¨å±å¹•ä¸Šã€‚æ³¨æ„ï¼Œåœ¨æ˜¾ç¤ºtest3æ–‡ä»¶çš„å†…å®¹æ—¶å¹¶æ²¡æœ‰ä»»ä½•é”™è¯¯ã€‚test3æ–‡ä»¶åˆ›å»ºæˆåŠŸäº†ï¼Œåªæ˜¯é‡Œé¢æ˜¯ç©ºçš„ã€‚</p><p>shellå¯¹äºé”™è¯¯æ¶ˆæ¯çš„å¤„ç†æ˜¯è·Ÿæ™®é€šè¾“å‡ºåˆ†å¼€çš„ã€‚å¦‚æœä½ åˆ›å»ºäº†åœ¨åå°æ¨¡å¼ä¸‹è¿è¡Œçš„shellè„šæœ¬ï¼Œé€šå¸¸ä½ å¿…é¡»ä¾èµ–å‘é€åˆ°æ—¥å¿—æ–‡ä»¶çš„è¾“å‡ºæ¶ˆæ¯ã€‚ç”¨è¿™ç§æ–¹æ³•çš„è¯ï¼Œå¦‚æœå‡ºç°äº†é”™è¯¯ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯æ˜¯ä¸ä¼šå‡ºç°åœ¨æ—¥å¿—æ–‡ä»¶ä¸­çš„ã€‚ä½ éœ€è¦æ¢ç§æ–¹æ³•æ¥å¤„ç†ã€‚</p><ul><li>STDERR</li></ul><p>shellé€šè¿‡ç‰¹æ®Šçš„ STDERR æ–‡ä»¶æè¿°ç¬¦æ¥å¤„ç†é”™è¯¯æ¶ˆæ¯ã€‚ STDERR æ–‡ä»¶æè¿°ç¬¦ä»£è¡¨shellçš„æ ‡å‡†é”™è¯¯è¾“å‡ºã€‚shellæˆ–shellä¸­è¿è¡Œçš„ç¨‹åºå’Œè„šæœ¬å‡ºé”™æ—¶ç”Ÿæˆçš„é”™è¯¯æ¶ˆæ¯éƒ½ä¼šå‘é€åˆ°è¿™ä¸ªä½ç½®ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ STDERR æ–‡ä»¶æè¿°ç¬¦ä¼šå’Œ STDOUT æ–‡ä»¶æè¿°ç¬¦æŒ‡å‘åŒæ ·çš„åœ°æ–¹ï¼ˆå°½ç®¡åˆ†é…ç»™å®ƒä»¬çš„æ–‡ä»¶æè¿°ç¬¦å€¼ä¸åŒï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œé”™è¯¯æ¶ˆæ¯ä¹Ÿä¼šè¾“å‡ºåˆ°æ˜¾ç¤ºå™¨è¾“å‡ºä¸­ã€‚</p><p>ä½†ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œ STDERR å¹¶ä¸ä¼šéšç€ STDOUT çš„é‡å®šå‘è€Œå‘ç”Ÿæ”¹å˜ã€‚ä½¿ç”¨è„šæœ¬æ—¶ï¼Œä½ å¸¸å¸¸ä¼šæƒ³æ”¹å˜è¿™ç§è¡Œä¸ºï¼Œå°¤å…¶æ˜¯å½“ä½ å¸Œæœ›å°†é”™è¯¯æ¶ˆæ¯ä¿å­˜åˆ°æ—¥å¿—æ–‡ä»¶ä¸­çš„æ—¶å€™ã€‚</p><p><strong>é‡å®šå‘é”™è¯¯</strong></p><p>ä½ å·²ç»çŸ¥é“å¦‚ä½•ç”¨é‡å®šå‘ç¬¦å·æ¥é‡å®šå‘ STDOUT æ•°æ®ã€‚é‡å®šå‘ STDERR æ•°æ®ä¹Ÿæ²¡å¤ªå¤§å·®åˆ«ï¼Œåªè¦åœ¨ä½¿ç”¨é‡å®šå‘ç¬¦å·æ—¶å®šä¹‰ STDERR æ–‡ä»¶æè¿°ç¬¦å°±å¯ä»¥äº†ã€‚æœ‰å‡ ç§åŠæ³•å®ç°æ–¹æ³•ã€‚</p><ul><li>åªé‡å®šå‘é”™è¯¯</li></ul><p>STDERR æ–‡ä»¶æè¿°ç¬¦è¢«è®¾æˆ 2 ã€‚å¯ä»¥é€‰æ‹©åªé‡å®šå‘é”™è¯¯æ¶ˆæ¯ï¼Œå°†è¯¥æ–‡ä»¶æè¿°ç¬¦å€¼æ”¾åœ¨é‡å®šå‘ç¬¦å·å‰ã€‚è¯¥å€¼å¿…é¡»ç´§ç´§åœ°æ”¾åœ¨é‡å®šå‘ç¬¦å·å‰ï¼Œå¦åˆ™ä¸ä¼šå·¥ä½œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> badfile <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> test4
$ <span class="token function">cat</span> test4
ls: cannot access badfile: No such <span class="token function">file</span> or directory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿è¡Œè¯¥å‘½ä»¤ï¼Œé”™è¯¯æ¶ˆæ¯ä¸ä¼šå‡ºç°åœ¨å±å¹•ä¸Šäº†ã€‚è¯¥å‘½ä»¤ç”Ÿæˆçš„ä»»ä½•é”™è¯¯æ¶ˆæ¯éƒ½ä¼šä¿å­˜åœ¨è¾“å‡ºæ–‡ä»¶ä¸­ã€‚ç”¨è¿™ç§æ–¹æ³•ï¼Œshellä¼šåªé‡å®šå‘é”™è¯¯æ¶ˆæ¯ï¼Œè€Œéæ™®é€šæ•°æ®ã€‚è¿™é‡Œæ˜¯å¦ä¸€ä¸ªå°† STDOUT å’Œ STDERR æ¶ˆæ¯æ··æ‚åœ¨åŒä¸€è¾“å‡ºä¸­çš„ä¾‹å­</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ls</span> <span class="token parameter variable">-al</span> <span class="token builtin class-name">test</span> badtest test2 <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> test5
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">158</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:32 test2

$ <span class="token function">cat</span> test5
ls: cannot access test: No such <span class="token function">file</span> or directory
ls: cannot access badtest: No such <span class="token function">file</span> or directory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é‡å®šå‘é”™è¯¯å’Œæ•°æ®</li></ul><p>å¦‚æœæƒ³é‡å®šå‘é”™è¯¯å’Œæ­£å¸¸è¾“å‡ºï¼Œå¿…é¡»ç”¨ä¸¤ä¸ªé‡å®šå‘ç¬¦å·ã€‚éœ€è¦åœ¨ç¬¦å·å‰é¢æ”¾ä¸Šå¾…é‡å®šå‘æ•°æ®æ‰€å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶åæŒ‡å‘ç”¨äºä¿å­˜æ•°æ®çš„è¾“å‡ºæ–‡ä»¶ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> <span class="token builtin class-name">test</span> test2 test3 badtest <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> test6 <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> test7

$ <span class="token function">cat</span> test6
ls: cannot access test: No such <span class="token function">file</span> or directory
ls: cannot access badtest: No such <span class="token function">file</span> or directory
$ <span class="token function">cat</span> test7
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">158</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:32 test2
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">0</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:33 test3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å¯ä»¥ç”¨è¿™ç§æ–¹æ³•å°†è„šæœ¬çš„æ­£å¸¸è¾“å‡ºå’Œè„šæœ¬ç”Ÿæˆçš„é”™è¯¯æ¶ˆæ¯åˆ†ç¦»å¼€æ¥ã€‚è¿™æ ·å°±å¯ä»¥è½»æ¾åœ°è¯†åˆ«å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå†ä¸ç”¨åœ¨æˆåƒä¸Šä¸‡è¡Œæ­£å¸¸è¾“å‡ºæ•°æ®ä¸­ç¿»è…¾äº†ã€‚</p></blockquote><p>å¦‚æœæ„¿æ„ï¼Œä¹Ÿå¯ä»¥å°† STDERR å’Œ STDOUT çš„è¾“å‡ºé‡å®šå‘åˆ°åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ã€‚ä¸ºæ­¤bash shellæä¾›äº†ç‰¹æ®Šçš„é‡å®šå‘ç¬¦å· &amp;&gt; ã€‚å½“ä½¿ç”¨ &amp;&gt; ç¬¦æ—¶ï¼Œå‘½ä»¤ç”Ÿæˆçš„æ‰€æœ‰è¾“å‡ºéƒ½ä¼šå‘é€åˆ°åŒä¸€ä½ç½®ï¼ŒåŒ…æ‹¬æ•°æ®å’Œé”™è¯¯ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> <span class="token builtin class-name">test</span> test2 test3 badtest <span class="token operator">&amp;&gt;</span> test7

$ <span class="token function">cat</span> test7
ls: cannot access test: No such <span class="token function">file</span> or directory
ls: cannot access badtest: No such <span class="token function">file</span> or directory
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">158</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:32 test2
-rw-rw-r-- <span class="token number">1</span> demo demo <span class="token number">0</span> <span class="token number">2014</span>-10-16 <span class="token number">11</span>:33 test3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡ºè¾“å…¥" tabindex="-1"><a class="header-anchor" href="#åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡ºè¾“å…¥" aria-hidden="true">#</a> åœ¨è„šæœ¬ä¸­é‡å®šå‘è¾“å‡ºè¾“å…¥</h4><p><strong>é‡å®šå‘è¾“å‡º</strong></p><h5>ä¸´æ—¶é‡å®šå‘è¡Œè¾“å‡º</h5><p>åœ¨é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦æ—¶ï¼Œä½ å¿…é¡»åœ¨æ–‡ä»¶æè¿°ç¬¦æ•°å­—ä¹‹å‰åŠ ä¸€ä¸ª &amp; ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;This is an error message&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is an error&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is normal output&quot;</span>

$ ./test8
This is an error
This is normal output
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒLinuxä¼šå°† STDERR å¯¼å‘ STDOUT ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ åœ¨è¿è¡Œè„šæœ¬æ—¶é‡å®šå‘äº†STDERR ï¼Œè„šæœ¬ä¸­æ‰€æœ‰å¯¼å‘ STDERR çš„æ–‡æœ¬éƒ½ä¼šè¢«é‡å®šå‘ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./test8 <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> test9
This is normal output
$ <span class="token function">cat</span> test9
This is an error
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ–¹æ³•éå¸¸é€‚åˆåœ¨è„šæœ¬ä¸­ç”Ÿæˆé”™è¯¯æ¶ˆæ¯ã€‚å¦‚æœæœ‰äººç”¨äº†ä½ çš„è„šæœ¬ï¼Œä»–ä»¬å¯ä»¥åƒä¸Šé¢çš„ä¾‹å­ä¸­é‚£æ ·è½»æ¾åœ°é€šè¿‡ STDERR æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘é”™è¯¯æ¶ˆæ¯</p><h5>æ°¸ä¹…é‡å®šå‘è„šæœ¬ä¸­çš„æ‰€æœ‰å‘½ä»¤ exec</h5><p>å¦‚æœè„šæœ¬ä¸­æœ‰å¤§é‡æ•°æ®éœ€è¦é‡å®šå‘ï¼Œé‚£é‡å®šå‘æ¯ä¸ª echo è¯­å¥å°±ä¼šå¾ˆçƒ¦çã€‚å–è€Œä»£ä¹‹ï¼Œä½ å¯ä»¥ç”¨ exec å‘½ä»¤å‘Šè¯‰shellåœ¨è„šæœ¬æ‰§è¡ŒæœŸé—´é‡å®šå‘æŸä¸ªç‰¹å®šæ–‡ä»¶æè¿°ç¬¦ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>testout
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test of redirecting all output&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;from a script to another file.&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;without having to redirect every individual line&quot;</span>

$ ./test10
$ <span class="token function">cat</span> testout
This is a <span class="token builtin class-name">test</span> of redirecting all output
from a script to another file.
without having to redirect every individual line
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥åœ¨è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­é‡å®šå‘ STDOUT ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># redirecting output to different locations</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>testerror
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the start of the script&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;now redirecting all output to another location&quot;</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>testout
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This output should go to the testout file&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;but this should go to the testerror file&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;2</span>

$ ./test11
This is the start of the script
now redirecting all output to another location
$ <span class="token function">cat</span> testout
This output should go to the testout <span class="token function">file</span>
$ <span class="token function">cat</span> testerror
but this should go to the testerror <span class="token function">file</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é‡å®šå‘è¾“å…¥</strong></p><blockquote><p>exec 0&lt; testfile</p></blockquote><p>è¿™ä¸ªå‘½ä»¤ä¼šå‘Šè¯‰shellå®ƒåº”è¯¥ä»æ–‡ä»¶ testfile ä¸­è·å¾—è¾“å…¥ï¼Œè€Œä¸æ˜¯ STDIN ã€‚è¿™ä¸ªé‡å®šå‘åªè¦åœ¨è„šæœ¬éœ€è¦è¾“å…¥æ—¶å°±ä¼šä½œç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span> testfile
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> line
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Line #<span class="token variable">$count</span>: <span class="token variable">$line</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>

$ ./test12
Line <span class="token comment">#1: This is the first line.</span>
Line <span class="token comment">#2: This is the second line.</span>
Line <span class="token comment">#3: This is the third line.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºè‡ªå·±çš„é‡å®šå‘" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºè‡ªå·±çš„é‡å®šå‘" aria-hidden="true">#</a> åˆ›å»ºè‡ªå·±çš„é‡å®šå‘</h4><p><strong>åˆ›å»ºè¾“å‡ºæ–‡ä»¶æè¿°ç¬¦</strong></p><p>å¯ä»¥ç”¨ exec å‘½ä»¤æ¥ç»™è¾“å‡ºåˆ†é…æ–‡ä»¶æè¿°ç¬¦ã€‚å’Œæ ‡å‡†çš„æ–‡ä»¶æè¿°ç¬¦ä¸€æ ·ï¼Œä¸€æ—¦å°†å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦åˆ†é…ç»™ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªé‡å®šå‘å°±ä¼šä¸€ç›´æœ‰æ•ˆï¼Œç›´åˆ°ä½ é‡æ–°åˆ†é…ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#exec 3&gt;test13out</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;&gt;</span>test13out
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This should display on the monitor&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;and this should be stored in the file&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Then this should be back on the monitor&quot;</span>

$ ./test13
This should display on the monitor
Then this should be back on the monitor
$ <span class="token function">cat</span> test13out
and this should be stored <span class="token keyword">in</span> the <span class="token function">file</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè„šæœ¬ç”¨ exec å‘½ä»¤å°†æ–‡ä»¶æè¿°ç¬¦ 3 é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ã€‚å½“è„šæœ¬æ‰§è¡Œ echo è¯­å¥æ—¶ï¼Œè¾“å‡ºå†…å®¹ä¼šåƒé¢„æƒ³ä¸­é‚£æ ·æ˜¾ç¤ºåœ¨ STDOUT ä¸Šã€‚ä½†ä½ é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦ 3 çš„é‚£è¡Œ echo è¯­å¥çš„è¾“å‡ºå´è¿›å…¥äº†å¦ä¸€ä¸ªæ–‡ä»¶ã€‚è¿™æ ·ä½ å°±å¯ä»¥åœ¨æ˜¾ç¤ºå™¨ä¸Šä¿æŒæ­£å¸¸çš„è¾“å‡ºï¼Œè€Œå°†ç‰¹å®šä¿¡æ¯é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼ˆæ¯”å¦‚æ—¥å¿—æ–‡ä»¶ï¼‰ã€‚</p><p><strong>é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦</strong></p><p>ç°åœ¨ä»‹ç»æ€ä¹ˆæ¢å¤å·²é‡å®šå‘çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ä½ å¯ä»¥åˆ†é…å¦å¤–ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ç»™æ ‡å‡†æ–‡ä»¶æè¿° ç¬¦ï¼Œåä¹‹äº¦ç„¶ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥å°† STDOUT çš„åŸæ¥ä½ç½®é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶åå†åˆ©ç”¨ è¯¥æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘å› STDOUT ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span><span class="token file-descriptor important">&amp;1</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>test14out
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This should store in the output file&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;along with this line.&quot;</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Now things should be back to normal&quot;</span>

$ ./test14
Now things should be back to normal
$ <span class="token function">cat</span> test14out
This should store <span class="token keyword">in</span> the output <span class="token function">file</span>
along with this line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é¦–å…ˆï¼Œè„šæœ¬å°†æ–‡ä»¶æè¿°ç¬¦ 3 é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦1çš„å½“å‰ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ STDOUT ã€‚è¿™æ„å‘³ç€ä»»ä½•å‘é€ç»™æ–‡ä»¶æè¿°ç¬¦ 3 çš„è¾“å‡ºéƒ½å°†å‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Šã€‚</p><p>ç¬¬äºŒä¸ª exec å‘½ä»¤å°† STDOUT é‡å®šå‘åˆ°æ–‡ä»¶ï¼Œshellç°åœ¨ä¼šå°†å‘é€ç»™ STDOUT çš„è¾“å‡ºç›´æ¥é‡å®šå‘åˆ°è¾“å‡ºæ–‡ä»¶ä¸­ã€‚ä½†æ˜¯ï¼Œæ–‡ä»¶æè¿°ç¬¦ 3 ä»ç„¶æŒ‡å‘ STDOUT åŸæ¥çš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºå™¨ã€‚å¦‚æœæ­¤æ—¶å°†è¾“å‡ºæ•°æ®å‘é€ç»™æ–‡ä»¶æè¿°ç¬¦ 3 ï¼Œå®ƒä»ç„¶ä¼šå‡ºç°åœ¨æ˜¾ç¤ºå™¨ä¸Šï¼Œå°½ç®¡ STDOUT å·²ç»è¢«é‡å®šå‘äº†ã€‚</p><p>åœ¨å‘ STDOUT ï¼ˆç°åœ¨æŒ‡å‘ä¸€ä¸ªæ–‡ä»¶ï¼‰å‘é€ä¸€äº›è¾“å‡ºä¹‹åï¼Œè„šæœ¬å°† STDOUT é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦ 3 çš„å½“å‰ä½ç½®ï¼ˆç°åœ¨ä»ç„¶æ˜¯æ˜¾ç¤ºå™¨ï¼‰ã€‚è¿™æ„å‘³ç€ç°åœ¨ STDOUT åˆæŒ‡å‘äº†å®ƒåŸæ¥çš„ä½ç½®ï¼šæ˜¾ç¤ºå™¨ã€‚</p><p>è¿™ä¸ªæ–¹æ³•å¯èƒ½æœ‰ç‚¹å«äººå›°æƒ‘ï¼Œä½†è¿™æ˜¯ä¸€ç§åœ¨è„šæœ¬ä¸­ä¸´æ—¶é‡å®šå‘è¾“å‡ºï¼Œç„¶åæ¢å¤é»˜è®¤è¾“å‡ºè®¾ç½®çš„å¸¸ç”¨æ–¹æ³•ã€‚</p><p><strong>åˆ›å»ºè¾“å…¥æ–‡ä»¶æè¿°ç¬¦</strong></p><p>å¯ä»¥ç”¨å’Œé‡å®šå‘è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦åŒæ ·çš„åŠæ³•é‡å®šå‘è¾“å…¥æ–‡ä»¶æè¿°ç¬¦ã€‚åœ¨é‡å®šå‘åˆ°æ–‡ä»¶ä¹‹å‰ï¼Œå…ˆå°† STDIN æ–‡ä»¶æè¿°ç¬¦ä¿å­˜åˆ°å¦å¤–ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œç„¶ååœ¨è¯»å–å®Œæ–‡ä»¶ä¹‹åå†å°† STDIN æ¢å¤åˆ°å®ƒåŸæ¥çš„ä½ç½®ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">6</span>&lt;</span><span class="token file-descriptor important">&amp;0</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span> testfile
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> line
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Line #<span class="token variable">$count</span>: <span class="token variable">$line</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span><span class="token file-descriptor important">&amp;6</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Are you done now? &quot;</span> answer
<span class="token keyword">case</span> <span class="token variable">$answer</span> <span class="token keyword">in</span>
    Y<span class="token operator">|</span>y<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Goodbye&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    N<span class="token operator">|</span>n<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">&quot;Sorry, this is the end.&quot;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
$ ./test15
Line <span class="token comment">#1: This is the first line.</span>
Line <span class="token comment">#2: This is the second line.</span>
Line <span class="token comment">#3: This is the third line.</span>
Are you <span class="token keyword">done</span> now? y
Goodbye
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–‡ä»¶æè¿°ç¬¦ 6 ç”¨æ¥ä¿å­˜ STDIN çš„ä½ç½®ã€‚ç„¶åè„šæœ¬å°† STDIN é‡å®šå‘åˆ°ä¸€ä¸ªæ–‡ä»¶ã€‚read å‘½ä»¤çš„æ‰€æœ‰è¾“å…¥éƒ½æ¥è‡ªé‡å®šå‘åçš„ STDIN ï¼ˆä¹Ÿå°±æ˜¯è¾“å…¥æ–‡ä»¶ï¼‰ã€‚</p><p>åœ¨è¯»å–äº†æ‰€æœ‰è¡Œä¹‹åï¼Œè„šæœ¬ä¼šå°† STDIN é‡å®šå‘åˆ°æ–‡ä»¶æè¿°ç¬¦ 6 ï¼Œä»è€Œå°† STDIN æ¢å¤åˆ°åŸå…ˆçš„ä½ç½®ã€‚è¯¥è„šæœ¬ç”¨äº†å¦å¤–ä¸€ä¸ª read å‘½ä»¤æ¥æµ‹è¯• STDIN æ˜¯å¦æ¢å¤æ­£å¸¸äº†ã€‚è¿™æ¬¡å®ƒä¼šç­‰å¾…é”®ç›˜çš„è¾“å…¥ã€‚</p><p><strong>åˆ›å»ºè¯»å†™æ–‡ä»¶æè¿°ç¬¦</strong></p><p>å°½ç®¡çœ‹èµ·æ¥å¯èƒ½ä¼šå¾ˆå¥‡æ€ªï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥æ‰“å¼€å•ä¸ªæ–‡ä»¶æè¿°ç¬¦æ¥ä½œä¸ºè¾“å…¥å’Œè¾“å‡ºã€‚å¯ä»¥ç”¨åŒä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦å¯¹åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯»å†™ã€‚</p><p>ä¸è¿‡ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼Œä½ è¦ç‰¹åˆ«å°å¿ƒã€‚ç”±äºä½ æ˜¯å¯¹åŒä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ•°æ®è¯»å†™ï¼Œshellä¼šç»´æŠ¤ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ŒæŒ‡æ˜åœ¨æ–‡ä»¶ä¸­çš„å½“å‰ä½ç½®ã€‚ä»»ä½•è¯»æˆ–å†™éƒ½ä¼šä»æ–‡ä»¶æŒ‡é’ˆä¸Šæ¬¡çš„ä½ç½®å¼€å§‹ã€‚å¦‚æœä¸å¤Ÿå°å¿ƒï¼Œå®ƒä¼šäº§ç”Ÿä¸€äº›ä»¤äººç ç›®çš„ç»“æœã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&lt;&gt;</span> testfile
<span class="token builtin class-name">read</span> line <span class="token operator">&lt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Read: <span class="token variable">$line</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test line&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>


$ <span class="token function">cat</span> testfile
This is the first line.
This is the second line.
This is the third line.
$ ./test16
Read: This is the first line.
$ <span class="token function">cat</span> testfile
This is the first line.
This is a <span class="token builtin class-name">test</span> line
ine.
This is the third line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¿™ä¸ªä¾‹å­ç”¨äº† exec å‘½ä»¤å°†æ–‡ä»¶æè¿°ç¬¦ 3 åˆ†é…ç»™æ–‡ä»¶ testfile ä»¥è¿›è¡Œæ–‡ä»¶è¯»å†™ã€‚æ¥ä¸‹æ¥ï¼Œå®ƒé€šè¿‡åˆ†é…å¥½çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œä½¿ç”¨ read å‘½ä»¤è¯»å–æ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œï¼Œç„¶åå°†è¿™ä¸€è¡Œæ˜¾ç¤ºåœ¨ STDOUT ä¸Šã€‚æœ€åï¼Œå®ƒç”¨ echo è¯­å¥å°†ä¸€è¡Œæ•°æ®å†™å…¥ç”±åŒä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦æ‰“å¼€çš„æ–‡ä»¶ä¸­ã€‚</p></blockquote><p>åœ¨è¿è¡Œè„šæœ¬æ—¶ï¼Œä¸€å¼€å§‹è¿˜ç®—æ­£å¸¸ã€‚è¾“å‡ºå†…å®¹è¡¨æ˜è„šæœ¬è¯»å–äº†testfileæ–‡ä»¶ä¸­çš„ç¬¬ä¸€è¡Œã€‚ä½†å¦‚æœä½ åœ¨è„šæœ¬è¿è¡Œå®Œæ¯•åï¼ŒæŸ¥çœ‹testfileæ–‡ä»¶å†…å®¹çš„è¯ï¼Œä½ ä¼šå‘ç°å†™å…¥æ–‡ä»¶ä¸­çš„æ•°æ®è¦†ç›–äº†å·²æœ‰çš„æ•°æ®ã€‚</p><p>å½“è„šæœ¬å‘æ–‡ä»¶ä¸­å†™å…¥æ•°æ®æ—¶ï¼Œå®ƒä¼šä»æ–‡ä»¶æŒ‡é’ˆæ‰€å¤„çš„ä½ç½®å¼€å§‹ã€‚ read å‘½ä»¤è¯»å–äº†ç¬¬ä¸€è¡Œæ•°æ®ï¼Œæ‰€ä»¥å®ƒä½¿å¾—æ–‡ä»¶æŒ‡é’ˆæŒ‡å‘äº†ç¬¬äºŒè¡Œæ•°æ®çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚åœ¨ echo è¯­å¥å°†æ•°æ®è¾“å‡ºåˆ°æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šå°†æ•°æ®æ”¾åœ¨æ–‡ä»¶æŒ‡é’ˆçš„å½“å‰ä½ç½®ï¼Œè¦†ç›–äº†è¯¥ä½ç½®çš„å·²æœ‰æ•°æ®ã€‚</p><p><strong>å…³é—­æ–‡ä»¶æè¿°ç¬¦</strong></p><p>å¦‚æœä½ åˆ›å»ºäº†æ–°çš„è¾“å…¥æˆ–è¾“å‡ºæ–‡ä»¶æè¿°ç¬¦ï¼Œshellä¼šåœ¨è„šæœ¬é€€å‡ºæ—¶è‡ªåŠ¨å…³é—­å®ƒä»¬ã€‚ç„¶è€Œåœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œä½ éœ€è¦åœ¨è„šæœ¬ç»“æŸå‰æ‰‹åŠ¨å…³é—­æ–‡ä»¶æè¿°ç¬¦ã€‚</p><p>è¦å…³é—­æ–‡ä»¶æè¿°ç¬¦ï¼Œå°†å®ƒé‡å®šå‘åˆ°ç‰¹æ®Šç¬¦å· &amp;- ã€‚</p><p>exec 3&gt;&amp;- è¯¥è¯­å¥ä¼šå…³é—­æ–‡ä»¶æè¿°ç¬¦ 3 ï¼Œä¸å†åœ¨è„šæœ¬ä¸­ä½¿ç”¨å®ƒã€‚è¿™é‡Œæœ‰ä¸ªä¾‹å­æ¥è¯´æ˜å½“ä½ å°è¯•ä½¿ç”¨å·²å…³é—­çš„æ–‡ä»¶æè¿°ç¬¦æ—¶ä¼šæ€æ ·ã€‚ä¸€æ—¦å…³é—­äº†æ–‡ä»¶æè¿°ç¬¦ï¼Œå°±ä¸èƒ½åœ¨è„šæœ¬ä¸­å‘å®ƒå†™å…¥ä»»ä½•æ•°æ®ï¼Œå¦åˆ™shellä¼šç”Ÿæˆé”™è¯¯æ¶ˆæ¯ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> test17file
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test line of data&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;&amp;</span>-
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This won&#39;t work&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>

$ ./badtest
./badtest: <span class="token number">3</span>: Bad <span class="token function">file</span> descriptor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å…³é—­æ–‡ä»¶æè¿°ç¬¦æ—¶è¿˜è¦æ³¨æ„å¦ä¸€ä»¶äº‹ã€‚å¦‚æœéšåä½ åœ¨è„šæœ¬ä¸­æ‰“å¼€äº†åŒä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œshell ä¼šç”¨ä¸€ä¸ªæ–°æ–‡ä»¶æ¥æ›¿æ¢å·²æœ‰æ–‡ä»¶ã€‚è¿™æ„å‘³ç€å¦‚æœä½ è¾“å‡ºæ•°æ®ï¼Œå®ƒå°±ä¼šè¦†ç›–å·²æœ‰æ–‡ä»¶ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> test17file
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test line of data&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;&amp;</span>-
<span class="token function">cat</span> test17file
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> test17file
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This&#39;ll be bad&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>

$ ./test17
This is a <span class="token builtin class-name">test</span> line of data
$ <span class="token function">cat</span> test17file
This&#39;ll be bad
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>åœ¨å‘test17fileæ–‡ä»¶å‘é€ä¸€ä¸ªæ•°æ®å­—ç¬¦ä¸²å¹¶å…³é—­è¯¥æ–‡ä»¶æè¿°ç¬¦ä¹‹åï¼Œè„šæœ¬ç”¨äº† cat å‘½ä»¤æ¥æ˜¾ç¤ºæ–‡ä»¶çš„å†…å®¹ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½è¿˜å¥½ã€‚ä¸‹ä¸€æ­¥ï¼Œè„šæœ¬é‡æ–°æ‰“å¼€äº†è¯¥è¾“å‡ºæ–‡ä»¶å¹¶å‘å®ƒå‘é€äº†å¦ä¸€ä¸ªæ•°æ®å­—ç¬¦ä¸²ã€‚å½“æ˜¾ç¤ºè¯¥è¾“å‡ºæ–‡ä»¶çš„å†…å®¹æ—¶ï¼Œä½ æ‰€èƒ½çœ‹åˆ°çš„åªæœ‰ç¬¬äºŒä¸ªæ•°æ®å­—ç¬¦ä¸²ã€‚shellè¦†ç›–äº†åŸæ¥çš„è¾“å‡ºæ–‡ä»¶ã€‚</p></blockquote><h4 id="åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦-lsof" tabindex="-1"><a class="header-anchor" href="#åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦-lsof" aria-hidden="true">#</a> åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ lsof</h4><p>è¯¥å‘½ä»¤ä¼šäº§ç”Ÿå¤§é‡çš„è¾“å‡ºã€‚å®ƒä¼šæ˜¾ç¤ºå½“å‰Linuxç³»ç»Ÿä¸Šæ‰“å¼€çš„æ¯ä¸ªæ–‡ä»¶çš„æœ‰å…³ä¿¡æ¯ã€‚è¿™åŒ…æ‹¬åå°è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹ä»¥åŠç™»å½•åˆ°ç³»ç»Ÿçš„ä»»ä½•ç”¨æˆ·ã€‚æœ‰å¤§é‡çš„å‘½ä»¤è¡Œé€‰é¡¹å’Œå‚æ•°å¯ä»¥ç”¨æ¥å¸®åŠ©è¿‡æ»¤ lsof çš„è¾“å‡ºã€‚æœ€å¸¸ç”¨çš„æœ‰ -p å’Œ -d ï¼Œå‰è€…å…è®¸æŒ‡å®šè¿›ç¨‹IDï¼ˆPIDï¼‰ï¼Œåè€…å…è®¸æŒ‡å®šè¦æ˜¾ç¤ºçš„æ–‡ä»¶æè¿°ç¬¦ç¼–å·ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# lsof -a -p $$ -d 0,1,2
COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
bash    1458 root    0u   CHR  136,0      0t0    3 /dev/pts/0
bash    1458 root    1u   CHR  136,0      0t0    3 /dev/pts/0
bash    1458 root    2u   CHR  136,0      0t0    3 /dev/pts/0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>COMMAND æ­£åœ¨è¿è¡Œçš„å‘½ä»¤åçš„å‰9ä¸ªå­—ç¬¦</li><li>PID è¿›ç¨‹çš„PID</li><li>USER è¿›ç¨‹å±ä¸»çš„ç™»å½•å</li><li>FD æ–‡ä»¶æè¿°ç¬¦å·ä»¥åŠè®¿é—®ç±»å‹ï¼ˆ r ä»£è¡¨è¯»ï¼Œ w ä»£è¡¨å†™ï¼Œ u ä»£è¡¨è¯»å†™ï¼‰</li><li>TYPE æ–‡ä»¶çš„ç±»å‹ï¼ˆ CHR ä»£è¡¨å­—ç¬¦å‹ï¼Œ BLK ä»£è¡¨å—å‹ï¼Œ DIR ä»£è¡¨ç›®å½•ï¼Œ REG ä»£è¡¨å¸¸è§„æ–‡ä»¶ï¼‰</li><li>DEVICE è®¾å¤‡çš„è®¾å¤‡å·ï¼ˆä¸»è®¾å¤‡å·å’Œä»è®¾å¤‡å·ï¼‰</li><li>SIZE å¦‚æœæœ‰çš„è¯ï¼Œè¡¨ç¤ºæ–‡ä»¶çš„å¤§å°</li><li>NODE æœ¬åœ°æ–‡ä»¶çš„èŠ‚ç‚¹å·</li><li>NAME æ–‡ä»¶å</li></ul><p>ä¸ STDIN ã€ STDOUT å’Œ STDERR å…³è”çš„æ–‡ä»¶ç±»å‹æ˜¯å­—ç¬¦å‹ã€‚å› ä¸º STDIN ã€ STDOUT å’Œ STDERR æ–‡ä»¶æè¿°ç¬¦éƒ½æŒ‡å‘ç»ˆç«¯ï¼Œæ‰€ä»¥è¾“å‡ºæ–‡ä»¶çš„åç§°å°±æ˜¯ç»ˆç«¯çš„è®¾å¤‡åã€‚æ‰€æœ‰3ç§æ ‡å‡†æ–‡ä»¶éƒ½æ”¯æŒè¯»å’Œå†™ï¼ˆå°½ç®¡å‘ STDIN å†™æ•°æ®ä»¥åŠä» STDOUT è¯»æ•°æ®çœ‹èµ·æ¥æœ‰ç‚¹å¥‡æ€ªï¼‰ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> test18file1
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">6</span>&gt;</span> test18file2
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">7</span>&lt;</span> testfile
/usr/sbin/lsof <span class="token parameter variable">-a</span> <span class="token parameter variable">-p</span> <span class="token variable">$$</span> -d0,1,2,3,6,7


$ ./test18
COMMAND PID <span class="token environment constant">USER</span> FD TYPE DEVICE SIZE NODE NAME
test18 <span class="token number">3594</span> demo 0u CHR <span class="token number">136,0</span> <span class="token number">2</span> /dev/pts/0
test18 <span class="token number">3594</span> demo 1u CHR <span class="token number">136,0</span> <span class="token number">2</span> /dev/pts/0
test18 <span class="token number">3594</span> demo 2u CHR <span class="token number">136,0</span> <span class="token number">2</span> /dev/pts/0
<span class="token number">18</span> <span class="token number">3594</span> demo 3w REG <span class="token number">253,0</span> <span class="token number">0</span> <span class="token number">360712</span> /home/demo/test18file1
<span class="token number">18</span> <span class="token number">3594</span> demo 6w REG <span class="token number">253,0</span> <span class="token number">0</span> <span class="token number">360715</span> /home/demo/test18file2
<span class="token number">18</span> <span class="token number">3594</span> demo 7r REG <span class="token number">253,0</span> <span class="token number">73</span> <span class="token number">360717</span> /home/demo/testfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é˜»æ­¢å‘½ä»¤è¾“å‡º" tabindex="-1"><a class="header-anchor" href="#é˜»æ­¢å‘½ä»¤è¾“å‡º" aria-hidden="true">#</a> é˜»æ­¢å‘½ä»¤è¾“å‡º</h4><p>æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½ä¸æƒ³æ˜¾ç¤ºè„šæœ¬çš„è¾“å‡ºã€‚è¿™åœ¨å°†è„šæœ¬ä½œä¸ºåå°è¿›ç¨‹è¿è¡Œæ—¶å¾ˆå¸¸è§ã€‚å¦‚æœåœ¨è¿è¡Œåœ¨åå°çš„è„šæœ¬å‡ºç°é”™è¯¯æ¶ˆæ¯ï¼Œshellä¼šé€šè¿‡ç”µå­é‚®ä»¶å°†å®ƒä»¬å‘ç»™è¿›ç¨‹çš„å±ä¸»ã€‚è¿™ä¼šå¾ˆéº»çƒ¦ï¼Œå°¤å…¶æ˜¯å½“è¿è¡Œä¼šç”Ÿæˆå¾ˆå¤šçƒ¦ççš„å°é”™è¯¯çš„è„šæœ¬æ—¶ã€‚</p><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°† STDERR é‡å®šå‘åˆ°ä¸€ä¸ªå«ä½œnullæ–‡ä»¶çš„ç‰¹æ®Šæ–‡ä»¶ã€‚nullæ–‡ä»¶è·Ÿå®ƒçš„åå­—å¾ˆåƒï¼Œæ–‡ä»¶é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚shellè¾“å‡ºåˆ°nullæ–‡ä»¶çš„ä»»ä½•æ•°æ®éƒ½ä¸ä¼šä¿å­˜ï¼Œå…¨éƒ¨éƒ½è¢«ä¸¢æ‰äº†ã€‚</p><p>åœ¨Linuxç³»ç»Ÿä¸Šnullæ–‡ä»¶çš„æ ‡å‡†ä½ç½®æ˜¯/dev/nullã€‚ä½ é‡å®šå‘åˆ°è¯¥ä½ç½®çš„ä»»ä½•æ•°æ®éƒ½ä¼šè¢«ä¸¢æ‰ï¼Œä¸ä¼šæ˜¾ç¤ºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> <span class="token operator">&gt;</span> /dev/null
$ <span class="token function">cat</span> /dev/null
$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> badfile test16 <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åˆ›å»ºä¸´æ—¶æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸´æ—¶æ–‡ä»¶" aria-hidden="true">#</a> åˆ›å»ºä¸´æ—¶æ–‡ä»¶</h4><p><strong>åˆ›å»ºæœ¬åœ°ä¸´æ—¶æ–‡ä»¶</strong></p><p>æ¨¡æ¿å¯ä»¥åŒ…å«ä»»æ„æ–‡æœ¬æ–‡ä»¶åï¼Œåœ¨æ–‡ä»¶åæœ«å°¾åŠ ä¸Š6ä¸ª X å°±è¡Œäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ mktemp testing.XXXXXX
$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> testing*
-rw------- <span class="token number">1</span> demo demo <span class="token number">0</span> Oct <span class="token number">17</span> <span class="token number">21</span>:30 testing.UfIi13
$ mktemp testing.XXXXXX
testing.1DRLuV
$ mktemp testing.XXXXXX
testing.lVBtkW
$ mktemp testing.XXXXXX
testing.PgqNKG
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> testing*
-rw------- <span class="token number">1</span> demo demo <span class="token number">0</span> Oct <span class="token number">17</span> <span class="token number">21</span>:57 testing.1DRLuV
-rw------- <span class="token number">1</span> demo demo <span class="token number">0</span> Oct <span class="token number">17</span> <span class="token number">21</span>:57 testing.PgqNKG
-rw------- <span class="token number">1</span> demo demo <span class="token number">0</span> Oct <span class="token number">17</span> <span class="token number">21</span>:30 testing.UfIi13
-rw------- <span class="token number">1</span> demo demo <span class="token number">0</span> Oct <span class="token number">17</span> <span class="token number">21</span>:57 testing.lVBtkW
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">tempfile</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp test19.XXXXXX<span class="token variable">)</span></span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span><span class="token variable">$tempfile</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This script writes to temp file <span class="token variable">$tempfile</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the first line&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the second line.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the last line.&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;3</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">3</span>&gt;&amp;</span>-
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Done creating temp file. The contents are:&quot;</span>
<span class="token function">cat</span> <span class="token variable">$tempfile</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable">$tempfile</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> /dev/null

$ ./test19
This script writes to temp <span class="token function">file</span> test19.vCHoya
Done creating temp file. The contents are:
This is the first line
This is the second line.
This is the last line.
$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> test19*
-rwxr--r-- <span class="token number">1</span> demo demo <span class="token number">356</span> Oct <span class="token number">29</span> <span class="token number">22</span>:03 test19*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>mktemp å‘½ä»¤æ¥åˆ›å»ºä¸´æ—¶æ–‡ä»¶å¹¶å°†æ–‡ä»¶åèµ‹ç»™ $tempfile å˜é‡ã€‚æ¥ç€å°†è¿™ä¸ªä¸´æ—¶æ–‡ä»¶ä½œä¸ºæ–‡ä»¶æè¿°ç¬¦ 3 çš„è¾“å‡ºé‡å®šå‘æ–‡ä»¶ã€‚åœ¨å°†ä¸´æ—¶æ–‡ä»¶åæ˜¾ç¤ºåœ¨ STDOUT ä¹‹åï¼Œå‘ä¸´æ—¶æ–‡ä»¶ä¸­å†™å…¥äº†å‡ è¡Œæ–‡æœ¬ï¼Œç„¶åå…³é—­äº†æ–‡ä»¶æè¿°ç¬¦ã€‚æœ€åï¼Œæ˜¾ç¤ºå‡ºä¸´æ—¶æ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶ç”¨ rm å‘½ä»¤å°†å…¶åˆ é™¤ã€‚</p></blockquote><p><strong>åœ¨/tmp ç›®å½•åˆ›å»ºä¸´æ—¶æ–‡ä»¶</strong></p><p>-t é€‰é¡¹ä¼šå¼ºåˆ¶ mktemp å‘½ä»¤æ¥åœ¨ç³»ç»Ÿçš„ä¸´æ—¶ç›®å½•æ¥åˆ›å»ºè¯¥æ–‡ä»¶ã€‚åœ¨ç”¨è¿™ä¸ªç‰¹æ€§æ—¶ï¼Œ mktemp å‘½ä»¤ä¼šè¿”å›ç”¨æ¥åˆ›å»ºä¸´æ—¶æ–‡ä»¶çš„å…¨è·¯å¾„ï¼Œè€Œä¸æ˜¯åªæœ‰æ–‡ä»¶åã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ mktemp <span class="token parameter variable">-t</span> test.XXXXXX
/tmp/test.xG3374
$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> /tmp/test*
-rw------- <span class="token number">1</span> demo demo <span class="token number">0</span> <span class="token number">2014</span>-10-29 <span class="token number">18</span>:41 /tmp/test.xG3374
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº mktemp å‘½ä»¤è¿”å›äº†å…¨è·¯å¾„åï¼Œä½ å¯ä»¥åœ¨Linuxç³»ç»Ÿä¸Šçš„ä»»ä½•ç›®å½•ä¸‹å¼•ç”¨è¯¥ä¸´æ—¶æ–‡ä»¶ï¼Œä¸ç®¡ä¸´æ—¶ç›®å½•åœ¨å“ªé‡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># creating a temp file in /tmp</span>
<span class="token assign-left variable">tempfile</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp <span class="token parameter variable">-t</span> tmp.XXXXXX<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test file.&quot;</span> <span class="token operator">&gt;</span> <span class="token variable">$tempfile</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the second line of the test.&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$tempfile</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The temp file is located at: <span class="token variable">$tempfile</span>&quot;</span>
<span class="token function">cat</span> <span class="token variable">$tempfile</span>
<span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable">$tempfile</span>


$ ./test20
The temp <span class="token function">file</span> is located at: /tmp/tmp.Ma3390
This is a <span class="token builtin class-name">test</span> file.
This is the second line of the test.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åˆ›å»ºä¸´æ—¶ç›®å½•</strong></p><p>-d é€‰é¡¹å‘Šè¯‰ mktemp å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªä¸´æ—¶ç›®å½•è€Œä¸æ˜¯ä¸´æ—¶æ–‡ä»¶ã€‚è¿™æ ·ä½ å°±èƒ½ç”¨è¯¥ç›®å½•è¿›è¡Œä»»ä½•éœ€è¦çš„æ“ä½œäº†ï¼Œæ¯”å¦‚åˆ›å»ºå…¶ä»–çš„ä¸´æ—¶æ–‡ä»¶ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># using a temporary directory</span>
<span class="token assign-left variable">tempdir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp <span class="token parameter variable">-d</span> dir.XXXXXX<span class="token variable">)</span></span>
<span class="token builtin class-name">cd</span> <span class="token variable">$tempdir</span>
<span class="token assign-left variable">tempfile1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp temp.XXXXXX<span class="token variable">)</span></span>
<span class="token assign-left variable">tempfile2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>mktemp temp.XXXXXX<span class="token variable">)</span></span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">7</span>&gt;</span> <span class="token variable">$tempfile1</span>
<span class="token builtin class-name">exec</span> <span class="token operator"><span class="token file-descriptor important">8</span>&gt;</span> <span class="token variable">$tempfile2</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Sending data to directory <span class="token variable">$tempdir</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test line of data for <span class="token variable">$tempfile1</span>&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;7</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test line of data for <span class="token variable">$tempfile2</span>&quot;</span> <span class="token operator">&gt;</span><span class="token file-descriptor important">&amp;8</span>
$ ./test21
Sending data to directory dir.ouT8S8
$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">72</span>
drwxr-xr-x <span class="token number">3</span> demo demo <span class="token number">4096</span> Oct <span class="token number">17</span> <span class="token number">22</span>:20 ./
drwxr-xr-x <span class="token number">9</span> demo demo <span class="token number">4096</span> Oct <span class="token number">17</span> 09:44 <span class="token punctuation">..</span>/
drwx------ <span class="token number">2</span> demo demo <span class="token number">4096</span> Oct <span class="token number">17</span> <span class="token number">22</span>:20 dir.ouT8S8/
-rwxr--r-- <span class="token number">1</span> demo demo <span class="token number">338</span> Oct <span class="token number">17</span> <span class="token number">22</span>:20 test21*
$ <span class="token builtin class-name">cd</span> dir.ouT8S8
<span class="token punctuation">[</span>dir.ouT8S8<span class="token punctuation">]</span>$ <span class="token function">ls</span> <span class="token parameter variable">-al</span>
total <span class="token number">16</span>
drwx------ <span class="token number">2</span> demo demo <span class="token number">4096</span> Oct <span class="token number">17</span> <span class="token number">22</span>:20 ./
drwxr-xr-x <span class="token number">3</span> demo demo <span class="token number">4096</span> Oct <span class="token number">17</span> <span class="token number">22</span>:20 <span class="token punctuation">..</span>/
-rw------- <span class="token number">1</span> demo demo <span class="token number">44</span> Oct <span class="token number">17</span> <span class="token number">22</span>:20 temp.N5F3O6
-rw------- <span class="token number">1</span> demo demo <span class="token number">44</span> Oct <span class="token number">17</span> <span class="token number">22</span>:20 temp.SQslb7
<span class="token punctuation">[</span>dir.ouT8S8<span class="token punctuation">]</span>$ <span class="token function">cat</span> temp.N5F3O6
This is a <span class="token builtin class-name">test</span> line of data <span class="token keyword">for</span> temp.N5F3O6
<span class="token punctuation">[</span>dir.ouT8S8<span class="token punctuation">]</span>$ <span class="token function">cat</span> temp.SQslb7
This is a <span class="token builtin class-name">test</span> line of data <span class="token keyword">for</span> temp.SQslb7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è®°å½•æ¶ˆæ¯" tabindex="-1"><a class="header-anchor" href="#è®°å½•æ¶ˆæ¯" aria-hidden="true">#</a> è®°å½•æ¶ˆæ¯</h4><p>å°†è¾“å‡ºåŒæ—¶å‘é€åˆ°æ˜¾ç¤ºå™¨å’Œæ—¥å¿—æ–‡ä»¶ï¼Œè¿™ç§åšæ³•æœ‰æ—¶å€™èƒ½å¤Ÿæ´¾ä¸Šç”¨åœºã€‚ä½ ä¸ç”¨å°†è¾“å‡ºé‡å®šå‘ä¸¤æ¬¡ï¼Œåªè¦ç”¨ç‰¹æ®Šçš„ tee å‘½ä»¤å°±è¡Œã€‚</p><p>tee å‘½ä»¤ç›¸å½“äºç®¡é“çš„ä¸€ä¸ªTå‹æ¥å¤´ã€‚å®ƒå°†ä» STDIN è¿‡æ¥çš„æ•°æ®åŒæ—¶å‘å¾€ä¸¤å¤„ã€‚ä¸€å¤„æ˜¯STDOUT ï¼Œå¦ä¸€å¤„æ˜¯ tee å‘½ä»¤è¡Œæ‰€æŒ‡å®šçš„æ–‡ä»¶åï¼š</p><p>tee filename</p><p>ç”±äº tee ä¼šé‡å®šå‘æ¥è‡ª STDIN çš„æ•°æ®ï¼Œä½ å¯ä»¥ç”¨å®ƒé…åˆç®¡é“å‘½ä»¤æ¥é‡å®šå‘å‘½ä»¤è¾“å‡º</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">date</span> <span class="token operator">|</span> <span class="token function">tee</span> testfile
Sun Oct <span class="token number">19</span> <span class="token number">18</span>:56:21 EDT <span class="token number">2014</span>
$ <span class="token function">cat</span> testfile
Sun Oct <span class="token number">19</span> <span class="token number">18</span>:56:21 EDT <span class="token number">2014</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ tee å‘½ä»¤ä¼šåœ¨æ¯æ¬¡ä½¿ç”¨æ—¶è¦†ç›–è¾“å‡ºæ–‡ä»¶å†…å®¹ï¼Œå¦‚æœä½ æƒ³å°†æ•°æ®è¿½åŠ åˆ°æ–‡ä»¶ä¸­ï¼Œå¿…é¡»ç”¨ -a é€‰é¡¹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">who</span> <span class="token operator">|</span> <span class="token function">tee</span> testfile
demo pts/0 <span class="token number">2014</span>-10-17 <span class="token number">18</span>:41 <span class="token punctuation">(</span><span class="token number">192.168</span>.1.2<span class="token punctuation">)</span>
$ <span class="token function">cat</span> testfile
demo pts/0 <span class="token number">2014</span>-10-17 <span class="token number">18</span>:41 <span class="token punctuation">(</span><span class="token number">192.168</span>.1.2<span class="token punctuation">)</span>

$ <span class="token function">date</span> <span class="token operator">|</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> testfile
Sun Oct <span class="token number">19</span> <span class="token number">18</span>:58:05 EDT <span class="token number">2014</span>
$ <span class="token function">cat</span> testfile
demo pts/0 <span class="token number">2014</span>-10-17 <span class="token number">18</span>:41 <span class="token punctuation">(</span><span class="token number">192.168</span>.1.2<span class="token punctuation">)</span>
Sun Oct <span class="token number">19</span> <span class="token number">18</span>:58:05 EDT <span class="token number">2014</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ©ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ—¢èƒ½å°†æ•°æ®ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œä¹Ÿèƒ½å°†æ•°æ®æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">tempfile</span><span class="token operator">=</span>test22file
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the start of the test&quot;</span> <span class="token operator">|</span> <span class="token function">tee</span> <span class="token variable">$tempfile</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the second line of the test&quot;</span> <span class="token operator">|</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> <span class="token variable">$tempfile</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the end of the test&quot;</span> <span class="token operator">|</span> <span class="token function">tee</span> <span class="token parameter variable">-a</span> <span class="token variable">$tempfile</span>

$ ./test22
This is the start of the <span class="token builtin class-name">test</span>
This is the second line of the <span class="token builtin class-name">test</span>
This is the end of the <span class="token builtin class-name">test</span>
$ <span class="token function">cat</span> test22file
This is the start of the <span class="token builtin class-name">test</span>
This is the second line of the <span class="token builtin class-name">test</span>
This is the end of the <span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç»¼åˆå®ä¾‹-1" tabindex="-1"><a class="header-anchor" href="#ç»¼åˆå®ä¾‹-1" aria-hidden="true">#</a> ç»¼åˆå®ä¾‹</h4><p>è¿™ä¸ªæ ·ä¾‹è„šæœ¬ä¸¤ä»¶äº‹éƒ½åšäº†ã€‚å®ƒè¯»å–.csv æ ¼å¼çš„æ•°æ®æ–‡ä»¶ï¼Œè¾“å‡ºSQL INSERT è¯­å¥æ¥å°†æ•°æ®æ’å…¥æ•°æ®åº“ã€‚</p><p>ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šå¾…è¯»å–çš„.csvæ–‡ä»¶ã€‚.csvæ ¼å¼ç”¨äºä»ç”µå­è¡¨æ ¼ä¸­å¯¼å‡ºæ•°æ®ï¼Œæ‰€ä»¥ä½ å¯ä»¥æŠŠæ•°æ®åº“æ•°æ®æ”¾å…¥ç”µå­è¡¨æ ¼ä¸­ï¼ŒæŠŠç”µå­è¡¨æ ¼ä¿å­˜æˆ.csvæ ¼å¼ï¼Œè¯»å–æ–‡ä»¶ï¼Œç„¶ååˆ›å»º INSERT è¯­å¥å°†æ•°æ®æ’å…¥MySQLæ•°æ®åº“ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">outfile</span><span class="token operator">=</span><span class="token string">&#39;members.sql&#39;</span>
<span class="token assign-left variable"><span class="token environment constant">IFS</span></span><span class="token operator">=</span><span class="token string">&#39;,&#39;</span>
<span class="token keyword">while</span> <span class="token builtin class-name">read</span> lname fname address city state <span class="token function">zip</span>
<span class="token keyword">do</span>
<span class="token function">cat</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">$outfile</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
INSERT INTO members (lname,fname,address,city,state,zip) VALUES
(&#39;<span class="token variable">$lname</span>&#39;, &#39;<span class="token variable">$fname</span>&#39;, &#39;<span class="token variable">$address</span>&#39;, &#39;<span class="token variable">$city</span>&#39;, &#39;<span class="token variable">$state</span>&#39;, &#39;<span class="token variable">$zip</span>&#39;);
EOF</span>
<span class="token keyword">done</span> <span class="token operator">&lt;</span> <span class="token variable">${1}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ§åˆ¶è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#æ§åˆ¶è„šæœ¬" aria-hidden="true">#</a> æ§åˆ¶è„šæœ¬</h3><h4 id="å¤„ç†ä¿¡å·" tabindex="-1"><a class="header-anchor" href="#å¤„ç†ä¿¡å·" aria-hidden="true">#</a> å¤„ç†ä¿¡å·</h4><h5>ä¿¡å·</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ä¿¡å·  å€¼		  æè¿°
1  	SIGHUP		æŒ‚èµ·è¿›ç¨‹
2  	SIGINT		ç»ˆæ­¢è¿›ç¨‹
3  	SIGQUIT		åœæ­¢è¿›ç¨‹
9  	SIGKILL		æ— æ¡ä»¶ç»ˆæ­¢è¿›ç¨‹
15  SIGTERM		å°½å¯èƒ½ç»ˆæ­¢è¿›ç¨‹
17  SIGSTOP		æ— æ¡ä»¶åœæ­¢è¿›ç¨‹ï¼Œä½†ä¸æ˜¯ç»ˆæ­¢è¿›ç¨‹
18  SIGTSTP		åœæ­¢æˆ–æš‚åœè¿›ç¨‹ï¼Œä½†ä¸ç»ˆæ­¢è¿›ç¨‹
19  SIGCONT		ç»§ç»­è¿è¡Œåœæ­¢çš„è¿›ç¨‹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>sleep((ç”Ÿæˆä¿¡å·:ä¸­æ–­ã€æš‚åœè¿›ç¨‹)ã€</h5><p>sleep 100;</p><h5>kill(ç»“æŸè¿›ç¨‹)</h5><p>kill -9 2152</p><h5>trap(æ•è·ä¿¡å·)</h5><blockquote><p>trap commands signals</p></blockquote><p>å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ trap å‘½ä»¤æ¥å¿½ç•¥ SIGINT ä¿¡å·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">trap</span> <span class="token string">&quot;echo &#39; Sorry! I have trapped Ctrl-C&#39;&quot;</span> SIGINT

<span class="token builtin class-name">echo</span> This is a <span class="token builtin class-name">test</span> script

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">10</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Loop #<span class="token variable">$count</span>&quot;</span>
    <span class="token function">sleep</span> <span class="token number">1</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token comment">#</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the end of the test script&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ ./test1.sh
This is a test script
Loop #1
Loop #2
Loop #3
Loop #4
Loop #5
^C Sorry! I have trapped Ctrl-C
Loop #6
Loop #7
Loop #8
^C Sorry! I have trapped Ctrl-C
Loop #9
Loop #10
This is the end of the test script
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ•è·è„šæœ¬é€€å‡º</h5><p>é™¤äº†åœ¨shellè„šæœ¬ä¸­æ•è·ä¿¡å·ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨shellè„šæœ¬é€€å‡ºæ—¶è¿›è¡Œæ•è·ã€‚è¿™æ˜¯åœ¨shellå®Œæˆä»»åŠ¡æ—¶æ‰§è¡Œå‘½ä»¤çš„ä¸€ç§ç®€ä¾¿æ–¹æ³•ã€‚</p><p>è¦æ•è·shellè„šæœ¬çš„é€€å‡ºï¼Œåªè¦åœ¨ trap å‘½ä»¤ååŠ ä¸Š EXIT ä¿¡å·å°±è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">trap</span> <span class="token string">&quot;echo Goodbye...&quot;</span> EXIT

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Loop #<span class="token variable">$count</span>&quot;</span>
    <span class="token function">sleep</span> <span class="token number">1</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>


$ ./test2.sh
Loop <span class="token comment">#1</span>
Loop <span class="token comment">#2</span>
Loop <span class="token comment">#3</span>
Loop <span class="token comment">#4</span>
Loop <span class="token comment">#5</span>
Goodbye<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ä¿®æ”¹æˆ–ç§»é™¤æ•è·</h5><p>è¦æƒ³åœ¨è„šæœ¬ä¸­çš„ä¸åŒä½ç½®è¿›è¡Œä¸åŒçš„æ•è·å¤„ç†ï¼Œåªéœ€é‡æ–°ä½¿ç”¨å¸¦æœ‰æ–°é€‰é¡¹çš„ trap å‘½ä»¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># Modifying a set trap</span>
<span class="token comment">#</span>
<span class="token builtin class-name">trap</span> <span class="token string">&quot;echo &#39; Sorry... Ctrl-C is trapped.&#39;&quot;</span> SIGINT
<span class="token comment">#</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Loop #<span class="token variable">$count</span>&quot;</span>
    <span class="token function">sleep</span> <span class="token number">1</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token comment">#</span>
<span class="token builtin class-name">trap</span> <span class="token string">&quot;echo &#39; I modified the trap!&#39;&quot;</span> SIGINT
<span class="token comment">#</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Second Loop #<span class="token variable">$count</span>&quot;</span>
    <span class="token function">sleep</span> <span class="token number">1</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¿®æ”¹äº†ä¿¡å·æ•è·ä¹‹åï¼Œè„šæœ¬å¤„ç†ä¿¡å·çš„æ–¹å¼å°±ä¼šå‘ç”Ÿå˜åŒ–ã€‚ä½†å¦‚æœä¸€ä¸ªä¿¡å·æ˜¯åœ¨æ•è·è¢«ä¿®æ”¹å‰æ¥æ”¶åˆ°çš„ï¼Œé‚£ä¹ˆè„šæœ¬ä»ç„¶ä¼šæ ¹æ®æœ€åˆçš„ trap å‘½ä»¤è¿›è¡Œå¤„ç†ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>sh test3.sh
Loop #1
Loop #2
Loop #3
^C Sorry... Ctrl-C is trapped.
Loop #4
Loop #5
Second Loop #1
Second Loop #2
^C I modified the trap!
Second Loop #3
Second Loop #4
Second Loop #5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥åˆ é™¤å·²è®¾ç½®å¥½çš„æ•è·ã€‚åªéœ€è¦åœ¨ trap å‘½ä»¤ä¸å¸Œæœ›æ¢å¤é»˜è®¤è¡Œä¸ºçš„ä¿¡å·åˆ—è¡¨ä¹‹é—´åŠ ä¸Šä¸¤ä¸ªç ´æŠ˜å·å°±è¡Œäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># Modifying a set trap</span>
<span class="token comment">#</span>
<span class="token builtin class-name">trap</span> <span class="token string">&quot;echo &#39; Sorry... Ctrl-C is trapped.&#39;&quot;</span> SIGINT
<span class="token comment">#</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Loop #<span class="token variable">$count</span>&quot;</span>
    <span class="token function">sleep</span> <span class="token number">1</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">trap</span> -- SIGINT
<span class="token builtin class-name">echo</span> <span class="token string">&quot;I just removed the trap&quot;</span>

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Second Loop #<span class="token variable">$count</span>&quot;</span>
    <span class="token function">sleep</span> <span class="token number">1</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>

$ ./test3b.sh
Loop <span class="token comment">#1</span>
Loop <span class="token comment">#2</span>
Loop <span class="token comment">#3</span>
Loop <span class="token comment">#4</span>
Loop <span class="token comment">#5</span>
I just removed the <span class="token builtin class-name">trap</span>
Second Loop <span class="token comment">#1</span>
Second Loop <span class="token comment">#2</span>
Second Loop <span class="token comment">#3</span>
^C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç§»é™¤ä¿¡å·æ•è·åï¼Œè„šæœ¬æŒ‰ç…§é»˜è®¤è¡Œä¸ºæ¥å¤„ç† SIGINT ä¿¡å·ï¼Œä¹Ÿå°±æ˜¯ç»ˆæ­¢è„šæœ¬è¿è¡Œã€‚ä½†å¦‚æœä¿¡å·æ˜¯åœ¨æ•è·è¢«ç§»é™¤å‰æ¥æ”¶åˆ°çš„ï¼Œé‚£ä¹ˆè„šæœ¬ä¼šæŒ‰ç…§åŸå…ˆ trap å‘½ä»¤ä¸­çš„è®¾ç½®è¿›è¡Œå¤„ç†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ./test3b.sh
Loop <span class="token comment">#1</span>
Loop <span class="token comment">#2</span>
Loop <span class="token comment">#3</span>
^C Sorry<span class="token punctuation">..</span>. Ctrl-C is trapped.
Loop <span class="token comment">#4</span>
Loop <span class="token comment">#5</span>
I just removed the <span class="token builtin class-name">trap</span>
Second Loop <span class="token comment">#1</span>
Second Loop <span class="token comment">#2</span>
^C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="åå°æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#åå°æ¨¡å¼" aria-hidden="true">#</a> åå°æ¨¡å¼ &amp;</h4><p>å½“ &amp; ç¬¦æ”¾åˆ°å‘½ä»¤åæ—¶ï¼Œå®ƒä¼šå°†å‘½ä»¤å’Œbash shellåˆ†ç¦»å¼€æ¥ï¼Œå°†å‘½ä»¤ä½œä¸ºç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‹¬ç«‹çš„åå°è¿›ç¨‹è¿è¡Œã€‚</p><p>åå°è¿è¡Œè„šæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./test4.sh <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨éæ§åˆ¶å°ä¸‹è¿è¡Œè„šæœ¬ï¼ˆåœ¨é€€å‡ºç»ˆç«¯ä¼šè¯æ—¶é˜»æ­¢è¿›ç¨‹é€€å‡ºï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">nohup</span> ./test1.sh <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="ä½œä¸šæ§åˆ¶-jobs" tabindex="-1"><a class="header-anchor" href="#ä½œä¸šæ§åˆ¶-jobs" aria-hidden="true">#</a> ä½œä¸šæ§åˆ¶ jobs</h4><p><strong>æŸ¥çœ‹ä½œä¸š</strong></p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>å‚ æ•°  	æ è¿°
-l		åˆ—å‡ºè¿›ç¨‹çš„PIDä»¥åŠä½œä¸šå·
-n		åªåˆ—å‡ºä¸Šæ¬¡shellå‘å‡ºçš„é€šçŸ¥åæ”¹å˜äº†çŠ¶æ€çš„ä½œä¸š
-p		åªåˆ—å‡ºä½œä¸šçš„PID
-r		åªåˆ—å‡ºè¿è¡Œä¸­çš„ä½œä¸š
-s		åªåˆ—å‡ºå·²åœæ­¢çš„ä½œä¸š
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">jobs</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ Stopped ./test10.sh
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>- Running ./test10.sh <span class="token operator">&gt;</span> test10.out <span class="token operator">&amp;</span>
$ <span class="token function">jobs</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ <span class="token number">1897</span> Stopped ./test10.sh
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>- <span class="token number">1917</span> Running ./test10.sh <span class="token operator">&gt;</span> test10.out <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¸¦åŠ å·<code>+</code>çš„ä½œä¸šä¼šè¢«å½“åšé»˜è®¤ä½œä¸šã€‚å¸¦å‡å·<code>-</code>çš„ä½œä¸šæˆä¸ºä¸‹ä¸€ä¸ªé»˜è®¤ä½œä¸šã€‚</p><p>ä¸‹é¢ä¾‹å­è¯´æ˜äº†é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªä½œä¸šåœ¨é»˜è®¤ä½œä¸šç§»é™¤æ—¶æ˜¯å¦‚ä½•æˆä¸ºé»˜è®¤ä½œä¸šçš„ã€‚æœ‰3ä¸ªç‹¬ç«‹çš„è¿›ç¨‹åœ¨åå°è¢«å¯åŠ¨ã€‚ jobs å‘½ä»¤æ˜¾ç¤ºå‡ºäº†è¿™äº›è¿›ç¨‹ã€è¿›ç¨‹çš„PIDåŠå…¶çŠ¶æ€ã€‚æ³¨æ„ï¼Œé»˜è®¤è¿›ç¨‹ï¼ˆå¸¦æœ‰åŠ å·çš„é‚£ä¸ªï¼‰æ˜¯æœ€åå¯åŠ¨çš„é‚£ä¸ªè¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯3å·ä½œä¸šã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ./test10.sh <span class="token operator">&gt;</span> test10a.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1950</span>
$ ./test10.sh <span class="token operator">&gt;</span> test10b.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token number">1952</span>
$ ./test10.sh <span class="token operator">&gt;</span> test10c.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token number">1955</span>
$ <span class="token function">jobs</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">1950</span> Running ./test10.sh <span class="token operator">&gt;</span> test10a.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>- <span class="token number">1952</span> Running ./test10.sh <span class="token operator">&gt;</span> test10b.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>+ <span class="token number">1955</span> Running ./test10.sh <span class="token operator">&gt;</span> test10c.out <span class="token operator">&amp;</span>
$ <span class="token function">kill</span> <span class="token number">1955</span>
$ <span class="token function">jobs</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>- <span class="token number">1950</span> Running ./test10.sh <span class="token operator">&gt;</span> test10a.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>+ <span class="token number">1952</span> Running ./test10.sh <span class="token operator">&gt;</span> test10b.out <span class="token operator">&amp;</span>
$ <span class="token function">kill</span> <span class="token number">1952</span>
$ <span class="token function">jobs</span> <span class="token parameter variable">-l</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ <span class="token number">1950</span> Running ./test10.sh <span class="token operator">&gt;</span> test10a.out <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>é‡å¯åœæ­¢çš„ä½œä¸š</strong></p><p>è¦ä»¥åå°æ¨¡å¼é‡å¯ä¸€ä¸ªä½œä¸šï¼Œå¯ç”¨ bg n å‘½ä»¤åŠ ä¸Šä½œä¸šå·ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ./test11.sh
^Z
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ Stopped ./test11.sh
$ <span class="token function">bg</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ ./test11.sh <span class="token operator">&amp;</span>
$ <span class="token function">jobs</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ Running ./test11.sh <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘½ä»¤ bg 2 ç”¨äºå°†ç¬¬äºŒä¸ªä½œä¸šç½®äºåå°æ¨¡å¼ã€‚æ³¨æ„ï¼Œå½“ä½¿ç”¨ jobs å‘½ä»¤æ—¶ï¼Œå®ƒåˆ—å‡ºäº†ä½œä¸šåŠå…¶çŠ¶æ€ï¼Œå³ä¾¿æ˜¯é»˜è®¤ä½œä¸šå½“å‰å¹¶æœªå¤„äºåå°æ¨¡å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ./test11.sh
^Z
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ Stopped ./test11.sh
$ ./test12.sh
^Z
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>+ Stopped ./test12.sh
$ <span class="token function">bg</span> <span class="token number">2</span>
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>+ ./test12.sh <span class="token operator">&amp;</span>
$ <span class="token function">jobs</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ Stopped ./test11.sh
<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>- Running ./test12.sh <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦ä»¥å‰å°æ¨¡å¼é‡å¯ä½œä¸šï¼Œå¯ç”¨å¸¦æœ‰ä½œä¸šå·çš„ fg å‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">fg</span> <span class="token number">2</span>
./test12.sh
This is the script&#39;s end<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="è°ƒæ•´è°¦è®©åº¦-nice" tabindex="-1"><a class="header-anchor" href="#è°ƒæ•´è°¦è®©åº¦-nice" aria-hidden="true">#</a> è°ƒæ•´è°¦è®©åº¦ nice</h4><p>è°ƒåº¦ä¼˜å…ˆçº§æ˜¯ä¸ªæ•´æ•°å€¼ï¼Œä» -20ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰åˆ°+19ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œbash shell ä»¥ä¼˜å…ˆçº§0æ¥å¯åŠ¨æ‰€æœ‰è¿›ç¨‹</p><p>nice å‘½ä»¤å…è®¸ä½ è®¾ç½®å‘½ä»¤å¯åŠ¨æ—¶çš„è°ƒåº¦ä¼˜å…ˆçº§ã€‚è¦è®©å‘½ä»¤ä»¥æ›´ä½çš„ä¼˜å…ˆçº§è¿è¡Œï¼Œåªè¦ç”¨ nice çš„ -n å‘½ä»¤è¡Œæ¥æŒ‡å®šæ–°çš„ä¼˜å…ˆçº§çº§åˆ«ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">nice</span> <span class="token parameter variable">-n</span> <span class="token number">10</span> ./test4.sh <span class="token operator">&gt;</span> test4.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">4973</span>
$ <span class="token function">ps</span> <span class="token parameter variable">-p</span> <span class="token number">4973</span> <span class="token parameter variable">-o</span> pid,ppid,ni,cmd
PID <span class="token environment constant">PPID</span> NI CMD
<span class="token number">4973</span> <span class="token number">4721</span> <span class="token number">10</span> /bin/bash ./test4.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>nice å‘½ä»¤ä¼šé˜»æ­¢æ™®é€šç³»ç»Ÿç”¨æˆ·æ¥æé«˜å‘½ä»¤çš„ä¼˜å…ˆçº§</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">nice</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-10</span> ./test4.sh <span class="token operator">&gt;</span> test4.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">4985</span>
$ nice: cannot <span class="token builtin class-name">set</span> niceness: Permission denied
	<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ Done <span class="token function">nice</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-10</span> ./test4.sh <span class="token operator">&gt;</span> test4.out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>nice å‘½ä»¤çš„ -n é€‰é¡¹å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œåªéœ€è¦åœ¨ç ´æŠ˜å·åé¢è·Ÿä¸Šä¼˜å…ˆçº§å°±è¡Œäº†.</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">nice</span> <span class="token parameter variable">-10</span> ./test4.sh <span class="token operator">&gt;</span> test4.out <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">4993</span>
$ <span class="token function">ps</span> <span class="token parameter variable">-p</span> <span class="token number">4993</span> <span class="token parameter variable">-o</span> pid,ppid,ni,cmd
PID <span class="token environment constant">PPID</span> NI CMD
<span class="token number">4993</span> <span class="token number">4721</span> <span class="token number">10</span> /bin/bash ./test4.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>renice</strong></p><p>æœ‰æ—¶ä½ æƒ³æ”¹å˜ç³»ç»Ÿä¸Šå·²è¿è¡Œå‘½ä»¤çš„ä¼˜å…ˆçº§ã€‚è¿™æ­£æ˜¯ renice å‘½ä»¤å¯ä»¥åšåˆ°çš„ã€‚å®ƒå…è®¸ä½ æŒ‡å®šè¿è¡Œè¿›ç¨‹çš„PIDæ¥æ”¹å˜å®ƒçš„ä¼˜å…ˆçº§ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ ./test11.sh <span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">5055</span>
$ <span class="token function">ps</span> <span class="token parameter variable">-p</span> <span class="token number">5055</span> <span class="token parameter variable">-o</span> pid,ppid,ni,cmd
PID <span class="token environment constant">PPID</span> NI CMD
<span class="token number">5055</span> <span class="token number">4721</span> <span class="token number">0</span> /bin/bash ./test11.sh
$ <span class="token function">renice</span> <span class="token parameter variable">-n</span> <span class="token number">10</span> <span class="token parameter variable">-p</span> <span class="token number">5055</span>
<span class="token number">5055</span>: old priority <span class="token number">0</span>, new priority <span class="token number">10</span>
$ <span class="token function">ps</span> <span class="token parameter variable">-p</span> <span class="token number">5055</span> <span class="token parameter variable">-o</span> pid,ppid,ni,cmd
PID <span class="token environment constant">PPID</span> NI CMD
<span class="token number">5055</span> <span class="token number">4721</span> <span class="token number">10</span> /bin/bash ./test11.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>renice å‘½ä»¤ä¼šè‡ªåŠ¨æ›´æ–°å½“å‰è¿è¡Œè¿›ç¨‹çš„è°ƒåº¦ä¼˜å…ˆçº§ã€‚å’Œ nice å‘½ä»¤ä¸€æ ·ï¼Œ renice å‘½ä»¤ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼š</p><ul><li>åªèƒ½å¯¹å±äºä½ çš„è¿›ç¨‹æ‰§è¡Œ renice ï¼›</li><li>åªèƒ½é€šè¿‡ renice é™ä½è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼›</li><li>rootç”¨æˆ·å¯ä»¥é€šè¿‡ renice æ¥ä»»æ„è°ƒæ•´è¿›ç¨‹çš„ä¼˜å…ˆçº§ã€‚</li></ul><p>å¦‚æœæƒ³å®Œå…¨æ§åˆ¶è¿è¡Œè¿›ç¨‹ï¼Œå¿…é¡»ä»¥rootè´¦æˆ·èº«ä»½ç™»å½•æˆ–ä½¿ç”¨ sudo å‘½ä»¤ã€‚</p><h4 id="å®šæ—¶è¿è¡Œä½œä¸š" tabindex="-1"><a class="header-anchor" href="#å®šæ—¶è¿è¡Œä½œä¸š" aria-hidden="true">#</a> å®šæ—¶è¿è¡Œä½œä¸š</h4><h5>at</h5><p><code>at</code> å‘½ä»¤ä¼šå°†ä½œä¸šæäº¤åˆ°é˜Ÿåˆ—ä¸­ï¼ŒæŒ‡å®šshellä½•æ—¶è¿è¡Œè¯¥ä½œä¸šã€‚ at çš„å®ˆæŠ¤è¿›ç¨‹ atd ä¼šä»¥åå°æ¨¡å¼è¿è¡Œï¼Œæ£€æŸ¥ä½œä¸šé˜Ÿåˆ—æ¥è¿è¡Œä½œä¸šã€‚å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆä¼šåœ¨å¯åŠ¨æ—¶è¿è¡Œæ­¤å®ˆæŠ¤è¿›ç¨‹ã€‚</p><p><code>atd</code> å®ˆæŠ¤è¿›ç¨‹ä¼šæ£€æŸ¥ç³»ç»Ÿä¸Šçš„ä¸€ä¸ªç‰¹æ®Šç›®å½•ï¼ˆé€šå¸¸ä½äº/var/spool/atï¼‰æ¥è·å–ç”¨ at å‘½ä»¤æäº¤çš„ä½œä¸šã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ atd å®ˆæŠ¤è¿›ç¨‹ä¼šæ¯60ç§’æ£€æŸ¥ä¸€ä¸‹è¿™ä¸ªç›®å½•ã€‚æœ‰ä½œä¸šæ—¶ï¼Œ atd å®ˆæŠ¤è¿›ç¨‹ä¼šæ£€æŸ¥ä½œä¸šè®¾ç½®è¿è¡Œçš„æ—¶é—´ã€‚å¦‚æœæ—¶é—´è·Ÿå½“å‰æ—¶é—´åŒ¹é…ï¼Œ atd å®ˆæŠ¤è¿›ç¨‹å°±ä¼šè¿è¡Œæ­¤ä½œä¸šã€‚</p><p><em>å‘½ä»¤çš„æ ¼å¼:</em></p><blockquote><p>at [-f filename] time</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ at å‘½ä»¤ä¼šå°† STDIN çš„è¾“å…¥æ”¾åˆ°é˜Ÿåˆ—ä¸­ã€‚</p><p><code>-f</code> å‚æ•°æ¥æŒ‡å®šç”¨äºè¯»å–å‘½ä»¤ï¼ˆè„šæœ¬æ–‡ä»¶ï¼‰çš„æ–‡ä»¶å</p><p><code>time</code> å¦‚æœæŒ‡å®šçš„æ—¶é—´å·²ç»é”™è¿‡ï¼Œ at å‘½ä»¤ä¼šåœ¨ç¬¬äºŒå¤©çš„é‚£ä¸ªæ—¶é—´è¿è¡ŒæŒ‡å®šçš„ä½œä¸šã€‚</p></blockquote><p><em>æ—¶é—´æ ¼å¼:</em></p><ul><li>æ ‡å‡†çš„å°æ—¶å’Œåˆ†é’Ÿæ ¼å¼ï¼Œæ¯”å¦‚10:15ã€‚</li><li>AM/PMæŒ‡ç¤ºç¬¦ï¼Œæ¯”å¦‚10:15 PMã€‚</li><li>ç‰¹å®šå¯å‘½åæ—¶é—´ï¼Œæ¯”å¦‚nowã€noonã€midnightæˆ–è€…teatimeï¼ˆ4 PMï¼‰ã€‚é™¤äº†æŒ‡å®šè¿è¡Œä½œä¸šçš„æ—¶é—´ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¸åŒçš„æ—¥æœŸæ ¼å¼æŒ‡å®šç‰¹å®šçš„æ—¥æœŸã€‚</li><li>æ ‡å‡†æ—¥æœŸæ ¼å¼ï¼Œæ¯”å¦‚MMDDYYã€MM/DD/YYæˆ–DD.MM.YYã€‚</li><li>æ–‡æœ¬æ—¥æœŸï¼Œæ¯”å¦‚Jul 4æˆ–Dec 25ï¼ŒåŠ ä¸åŠ å¹´ä»½å‡å¯ã€‚</li><li>ä½ ä¹Ÿå¯ä»¥æŒ‡å®šæ—¶é—´å¢é‡ <ul><li>å½“å‰æ—¶é—´+25 min</li><li>æ˜å¤©10:15 PM</li><li>10:15+7 å¤©</li></ul></li></ul><p>ä½¿ç”¨ at å‘½ä»¤æ—¶ï¼Œè¯¥ä½œä¸šä¼šè¢«æäº¤åˆ°ä½œä¸šé˜Ÿåˆ—ï¼ˆjob queueï¼‰ã€‚ä½œä¸šé˜Ÿåˆ—ä¼šä¿å­˜é€šè¿‡ at å‘½ä»¤æäº¤çš„å¾…å¤„ç†çš„ä½œä¸šã€‚é’ˆå¯¹ä¸åŒä¼˜å…ˆçº§ï¼Œå­˜åœ¨26ç§ä¸åŒçš„ä½œä¸šé˜Ÿåˆ—ã€‚ä½œä¸šé˜Ÿåˆ—é€šå¸¸ç”¨å°å†™å­—æ¯ <code>a~z</code> å’Œå¤§å†™å­—æ¯ <code>A~Z</code> æ¥æŒ‡ä»£ã€‚</p><p>ä½œä¸šé˜Ÿåˆ—çš„å­—æ¯æ’åºè¶Šé«˜ï¼Œä½œä¸šè¿è¡Œçš„ä¼˜å…ˆçº§å°±è¶Šä½ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ at çš„ä½œä¸šä¼šè¢«æäº¤åˆ° a ä½œä¸šé˜Ÿåˆ—ã€‚å¦‚æœæƒ³ä»¥æ›´é«˜ä¼˜å…ˆçº§è¿è¡Œä½œä¸šï¼Œå¯ä»¥ç”¨ -q å‚æ•°æŒ‡å®šä¸åŒçš„é˜Ÿåˆ—å­—æ¯ã€‚</p><p><strong>è·å–ä½œä¸šçš„è¾“å‡º</strong></p><p>é‡å®šå‘è¾“å‡º</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token operator">&gt;</span> zz.log
<span class="token builtin class-name">echo</span> <span class="token string">&quot;at å®šæ—¶æ‰§è¡Œä»»åŠ¡: <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%F,%T<span class="token variable">)</span></span>&quot;</span> <span class="token operator">&gt;&gt;</span> zz.log
<span class="token function">sleep</span> <span class="token number">5</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;è„šæœ¬ä»»åŠ¡æ‰§è¡Œå®Œæˆ: <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%F,%T<span class="token variable">)</span></span>&quot;</span> <span class="token operator">&gt;&gt;</span> zz.log


<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># at -f demo6.sh now</span>
job <span class="token number">12</span> at Fri Sep <span class="token number">16</span> <span class="token number">13</span>:05:00 <span class="token number">2022</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat zz.log</span>
at å®šæ—¶æ‰§è¡Œä»»åŠ¡: <span class="token number">2022</span>-09-16,13:05:49
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat zz.log</span>
at å®šæ—¶æ‰§è¡Œä»»åŠ¡: <span class="token number">2022</span>-09-16,13:05:49
è„šæœ¬ä»»åŠ¡æ‰§è¡Œå®Œæˆ: <span class="token number">2022</span>-09-16,13:05:54
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>å¦‚æœä¸æƒ³åœ¨ at å‘½ä»¤ä¸­ä½¿ç”¨é‚®ä»¶æˆ–é‡å®šå‘ï¼Œæœ€å¥½åŠ ä¸Š -M é€‰é¡¹æ¥å±è”½ä½œä¸šäº§ç”Ÿçš„è¾“å‡ºä¿¡æ¯ã€‚</p></blockquote><p>ä½¿ç”¨ e-mail ä½œä¸º at å‘½ä»¤çš„è¾“å‡ºæå…¶ä¸ä¾¿ã€‚ä½¿ç”¨ <code>sendmail</code> åº”ç”¨ç¨‹åºæ¥å‘é€é‚®ä»¶ã€‚</p><p>yum -y install sendmail</p><p><strong>åˆ—å‡ºç­‰å¾…çš„ä½œä¸š atq</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>at <span class="token parameter variable">-M</span> <span class="token parameter variable">-f</span> demo6.sh teatime
at <span class="token parameter variable">-M</span> <span class="token parameter variable">-f</span> demo6.sh tomorrow
at <span class="token parameter variable">-M</span> <span class="token parameter variable">-f</span> demo6.sh <span class="token number">13</span>:04
at <span class="token parameter variable">-M</span> <span class="token parameter variable">-f</span> demo6.sh now
atq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># at -M -f demo6.sh teatime</span>
job <span class="token number">13</span> at Fri Sep <span class="token number">16</span> <span class="token number">16</span>:00:00 <span class="token number">2022</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># at -M -f demo6.sh tomorrow</span>
job <span class="token number">14</span> at Sat Sep <span class="token number">17</span> <span class="token number">13</span>:07:00 <span class="token number">2022</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># at -M -f demo6.sh 13:04</span>
job <span class="token number">15</span> at Sat Sep <span class="token number">17</span> <span class="token number">13</span>:04:00 <span class="token number">2022</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># at -M -f demo6.sh now</span>
job <span class="token number">16</span> at Fri Sep <span class="token number">16</span> <span class="token number">13</span>:07:00 <span class="token number">2022</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># atq</span>
<span class="token number">9</span>       Sat Sep <span class="token number">17</span> <span class="token number">13</span>:02:00 <span class="token number">2022</span> a root
<span class="token number">13</span>      Fri Sep <span class="token number">16</span> <span class="token number">16</span>:00:00 <span class="token number">2022</span> a root
<span class="token number">14</span>      Sat Sep <span class="token number">17</span> <span class="token number">13</span>:07:00 <span class="token number">2022</span> a root
<span class="token number">15</span>      Sat Sep <span class="token number">17</span> <span class="token number">13</span>:04:00 <span class="token number">2022</span> a root
<span class="token number">16</span>      Fri Sep <span class="token number">16</span> <span class="token number">13</span>:07:00 <span class="token number">2022</span> <span class="token operator">=</span> root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åˆ é™¤ä½œä¸š atrm</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># atq</span>
<span class="token number">9</span>       Sat Sep <span class="token number">17</span> <span class="token number">13</span>:02:00 <span class="token number">2022</span> a root
<span class="token number">17</span>      Fri Sep <span class="token number">16</span> <span class="token number">16</span>:00:00 <span class="token number">2022</span> a root
<span class="token number">18</span>      Sat Sep <span class="token number">17</span> <span class="token number">13</span>:11:00 <span class="token number">2022</span> a root
<span class="token number">19</span>      Sat Sep <span class="token number">17</span> <span class="token number">13</span>:04:00 <span class="token number">2022</span> a root
<span class="token number">20</span>      Fri Sep <span class="token number">16</span> <span class="token number">13</span>:11:00 <span class="token number">2022</span> <span class="token operator">=</span> root
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># atrm {17,19,18}</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># atq</span>
<span class="token number">9</span>       Sat Sep <span class="token number">17</span> <span class="token number">13</span>:02:00 <span class="token number">2022</span> a root
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>cron</h5><p><a href="http://cron.ciding.cc/" target="_blank" rel="noopener noreferrer">åœ¨çº¿è¡¨è¾¾å¼ç”Ÿæˆå™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ç”¨ at å‘½ä»¤åœ¨é¢„è®¾æ—¶é—´å®‰æ’è„šæœ¬æ‰§è¡Œéå¸¸å¥½ç”¨ï¼Œä½†å¦‚æœä½ éœ€è¦è„šæœ¬åœ¨æ¯å¤©çš„åŒä¸€æ—¶é—´è¿è¡Œæˆ–æ˜¯æ¯å‘¨ä¸€æ¬¡ã€æ¯æœˆä¸€æ¬¡å‘¢ï¼Ÿç”¨ä¸ç€å†ä½¿ç”¨ at ä¸æ–­æäº¤ä½œä¸šäº†ã€‚</p><p><strong>cronæ—¶é—´è¡¨</strong></p><p><em>æ ¼å¼å¦‚ä¸‹ï¼š</em></p><blockquote><p>åˆ†é’Ÿ å°æ—¶ æ—¥æœŸå€¼ï¼ˆNå·ï¼‰ æœˆ å‘¨ ã€éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‘</p><p>min hour dayofmonth month dayofweek command</p><ul><li>dayofmonth è¡¨é¡¹æŒ‡å®šæœˆä»½ä¸­çš„æ—¥æœŸå€¼ï¼ˆ*ï¼Œ1-31ï¼‰</li><li>dayofweekï¼ˆ*ï¼Œmonã€tueã€wedã€thuã€friã€satã€sunï¼‰æˆ–æ•°å€¼ï¼ˆ*ï¼Œ0ä¸ºå‘¨æ—¥ï¼Œ6ä¸ºå‘¨å…­ï¼‰æ¥æŒ‡å®šã€‚</li></ul></blockquote><p>cronæ—¶é—´è¡¨å…è®¸ä½ ç”¨ç‰¹å®šå€¼ã€å–å€¼èŒƒå›´ï¼ˆæ¯”å¦‚1~5ï¼‰æˆ–è€…æ˜¯é€šé…ç¬¦ï¼ˆæ˜Ÿå·*ï¼‰æ¥æŒ‡å®šæ¡ç›®ã€‚</p><p>ä¾‹å¦‚ï¼šåœ¨æ¯å¤©çš„10:15è¿è¡Œä¸€ä¸ªå‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">15</span> <span class="token number">10</span> * * * <span class="token builtin class-name">command</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨æ¯å‘¨ä¸€4:15 PMè¿è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">15</span> <span class="token number">16</span> * * <span class="token number">1</span> <span class="token builtin class-name">command</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨æ¯ä¸ªæœˆçš„ç¬¬ä¸€å¤©ä¸­åˆ12ç‚¹æ‰§è¡Œå‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>00 <span class="token number">12</span> <span class="token number">1</span> * * <span class="token builtin class-name">command</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p><strong>è¯´æ˜</strong> å¦‚ä½•è®¾ç½®ä¸€ä¸ªåœ¨æ¯ä¸ªæœˆçš„æœ€åä¸€å¤©æ‰§è¡Œçš„å‘½ä»¤ï¼Œå› ä¸ºä½ æ— æ³•è®¾ç½®dayofmonthçš„å€¼æ¥æ¶µç›–æ‰€æœ‰çš„æœˆä»½ã€‚è¿™ä¸ªé—®é¢˜å›°æ‰°ç€Linuxå’ŒUnixç¨‹åºå‘˜ï¼Œä¹Ÿæ¿€å‘äº†ä¸å°‘è§£å†³åŠæ³•ã€‚å¸¸ç”¨çš„æ–¹æ³•æ˜¯åŠ ä¸€æ¡ä½¿ç”¨ date å‘½ä»¤çš„ if-then è¯­å¥æ¥æ£€æŸ¥æ˜å¤©çš„æ—¥æœŸæ˜¯ä¸æ˜¯01ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>00 <span class="token number">12</span> * * * <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">`</span> <span class="token function">date</span> +%d <span class="token parameter variable">-d</span> tomorrow <span class="token variable">`</span></span> <span class="token operator">=</span> 01 <span class="token punctuation">]</span> <span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token punctuation">;</span> <span class="token builtin class-name">command</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®ƒä¼šåœ¨æ¯å¤©ä¸­åˆ12ç‚¹æ¥æ£€æŸ¥æ˜¯ä¸æ˜¯å½“æœˆçš„æœ€åä¸€å¤©ï¼Œå¦‚æœæ˜¯ï¼Œcronå°†ä¼šè¿è¡Œè¯¥å‘½ä»¤ã€‚</p></blockquote><p>å‘½ä»¤åˆ—è¡¨å¿…é¡»æŒ‡å®šè¦è¿è¡Œçš„å‘½ä»¤æˆ–è„šæœ¬çš„å…¨è·¯å¾„å:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">15</span> <span class="token number">10</span> * * * /home/shell/test4.sh <span class="token operator">&gt;</span> test4out
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5>crontab</h5><p><strong>æµè§ˆcronç›®å½•</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ls</span> /etc/cron.*ly
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ‰4ä¸ªåŸºæœ¬ç›®å½•ï¼š<code>hourly</code>ã€<code>daily</code>ã€<code>monthly</code> å’Œ <code>weekly</code></p><p>å› æ­¤ï¼Œå¦‚æœè„šæœ¬éœ€è¦æ¯å¤©è¿è¡Œä¸€æ¬¡ï¼Œåªè¦å°†è„šæœ¬å¤åˆ¶åˆ°dailyç›®å½•ï¼Œcronå°±ä¼šæ¯å¤©æ‰§è¡Œå®ƒï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><p><strong>å¸¸è§ç¤ºä¾‹</strong></p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>ï¼ˆ1ï¼‰0/2 * * * * ?   è¡¨ç¤ºæ¯2ç§’ æ‰§è¡Œä»»åŠ¡
ï¼ˆ1ï¼‰0 0/2 * * * ?    è¡¨ç¤ºæ¯2åˆ†é’Ÿ æ‰§è¡Œä»»åŠ¡
ï¼ˆ1ï¼‰0 0 2 1 * ?   è¡¨ç¤ºåœ¨æ¯æœˆçš„1æ—¥çš„å‡Œæ™¨2ç‚¹è°ƒæ•´ä»»åŠ¡
ï¼ˆ2ï¼‰0 15 10 ? * MON-FRI   è¡¨ç¤ºå‘¨ä¸€åˆ°å‘¨äº”æ¯å¤©ä¸Šåˆ10:15æ‰§è¡Œä½œä¸š
ï¼ˆ3ï¼‰0 15 10 ? 6L 2002-2006   è¡¨ç¤º2002-2006å¹´çš„æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15æ‰§è¡Œ
ï¼ˆ4ï¼‰0 0 10,14,16 * * ?   æ¯å¤©ä¸Šåˆ10ç‚¹ï¼Œä¸‹åˆ2ç‚¹ï¼Œ4ç‚¹ 
ï¼ˆ5ï¼‰0 0/30 9-17 * * ?   æœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶ 
ï¼ˆ6ï¼‰0 0 12 ? * WED    è¡¨ç¤ºæ¯ä¸ªæ˜ŸæœŸä¸‰ä¸­åˆ12ç‚¹ 
ï¼ˆ7ï¼‰0 0 12 * * ?   æ¯å¤©ä¸­åˆ12ç‚¹è§¦å‘ 
ï¼ˆ8ï¼‰0 15 10 ? * *    æ¯å¤©ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ9ï¼‰0 15 10 * * ?     æ¯å¤©ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ10ï¼‰0 15 10 * * ?    æ¯å¤©ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ11ï¼‰0 15 10 * * ? 2005    2005å¹´çš„æ¯å¤©ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ12ï¼‰0 * 14 * * ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:59æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘ 
ï¼ˆ13ï¼‰0 0/5 14 * * ?    åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘ 
ï¼ˆ14ï¼‰0 0/5 14,18 * * ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°2:55æœŸé—´å’Œä¸‹åˆ6ç‚¹åˆ°6:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘
ï¼ˆ15ï¼‰0 0-5 14 * * ?    åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:05æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘ 
ï¼ˆ16ï¼‰0 10,44 14 ? 3 WED    æ¯å¹´ä¸‰æœˆçš„æ˜ŸæœŸä¸‰çš„ä¸‹åˆ2:10å’Œ2:44è§¦å‘ 
ï¼ˆ17ï¼‰0 15 10 ? * MON-FRI    å‘¨ä¸€è‡³å‘¨äº”çš„ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ18ï¼‰0 15 10 15 * ?    æ¯æœˆ15æ—¥ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ19ï¼‰0 15 10 L * ?    æ¯æœˆæœ€åä¸€æ—¥çš„ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ20ï¼‰0 15 10 ? * 6L    æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ21ï¼‰0 15 10 ? * 6L 2002-2005   2002å¹´è‡³2005å¹´çš„æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘ 
ï¼ˆ22ï¼‰0 15 10 ? * 6#3   æ¯æœˆçš„ç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>anacron</h5><p>å¦‚æœæŸä¸ªä½œä¸šåœ¨cronæ—¶é—´è¡¨ä¸­å®‰æ’è¿è¡Œçš„æ—¶é—´å·²åˆ°ï¼Œä½†è¿™æ—¶å€™Linuxç³»ç»Ÿå¤„äºå…³æœºçŠ¶æ€ï¼Œé‚£ä¹ˆè¿™ä¸ªä½œä¸šå°±ä¸ä¼šè¢«è¿è¡Œã€‚å½“ç³»ç»Ÿå¼€æœºæ—¶ï¼Œcronç¨‹åºä¸ä¼šå†å»è¿è¡Œé‚£äº›é”™è¿‡çš„ä½œä¸šã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè®¸å¤šLinuxå‘è¡Œç‰ˆè¿˜åŒ…å«äº†anacron ç¨‹åºã€‚</p><p>è¿™ä¸ªåŠŸèƒ½å¸¸ç”¨äºè¿›è¡Œå¸¸è§„æ—¥å¿—ç»´æŠ¤çš„è„šæœ¬ã€‚</p><p>åªä¼šå¤„ç†ä½äºcronç›®å½•çš„ç¨‹åºï¼Œæ¯”å¦‚/etc/cron.monthlyã€‚å®ƒç”¨æ—¶é—´æˆ³æ¥å†³å®šä½œä¸šæ˜¯å¦åœ¨æ­£ç¡®çš„è®¡åˆ’é—´éš”å†…è¿è¡Œäº†ã€‚æ¯ä¸ªcronç›®å½•éƒ½æœ‰ä¸ªæ—¶é—´æˆ³æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä½äº/var/spool/anacronã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat /var/spool/anacron/cron.monthly</span>
<span class="token number">20220908</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>anacronç¨‹åºä½¿ç”¨è‡ªå·±çš„æ—¶é—´è¡¨ï¼ˆé€šå¸¸ä½äº/etc/anacrontabï¼‰æ¥æ£€æŸ¥ä½œä¸šç›®å½•</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat /etc/anacrontab</span>
<span class="token comment"># /etc/anacrontab: configuration file for anacron</span>

<span class="token comment"># See anacron(8) and anacrontab(5) for details.</span>

<span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/bin/sh
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/sbin:/bin:/usr/sbin:/usr/bin
<span class="token assign-left variable">MAILTO</span><span class="token operator">=</span>root
<span class="token comment"># the maximal random delay added to the base delay of the jobs</span>
<span class="token assign-left variable">RANDOM_DELAY</span><span class="token operator">=</span><span class="token number">45</span>
<span class="token comment"># the jobs will be started during the following hours only</span>
<span class="token assign-left variable">START_HOURS_RANGE</span><span class="token operator">=</span><span class="token number">3</span>-22

<span class="token comment">#period in days   delay in minutes   job-identifier   command</span>
<span class="token number">1</span>       <span class="token number">5</span>       cron.daily              <span class="token function">nice</span> run-parts /etc/cron.daily
<span class="token number">7</span>       <span class="token number">25</span>      cron.weekly             <span class="token function">nice</span> run-parts /etc/cron.weekly
@monthly <span class="token number">45</span>     cron.monthly            <span class="token function">nice</span> run-parts /etc/cron.monthly
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>anacronæ—¶é—´è¡¨çš„åŸºæœ¬æ ¼å¼å’Œcronæ—¶é—´è¡¨ç•¥æœ‰ä¸åŒï¼š</p><blockquote><p>period delay identifier command</p></blockquote><ul><li>period æ¡ç›®å®šä¹‰äº†ä½œä¸šå¤šä¹…è¿è¡Œä¸€æ¬¡ï¼Œä»¥å¤©ä¸ºå•ä½ã€‚anacronç¨‹åºç”¨æ­¤æ¡ç›®æ¥æ£€æŸ¥ä½œä¸šçš„æ—¶é—´æˆ³æ–‡ä»¶ã€‚</li><li>delay æ¡ç›®ä¼šæŒ‡å®šç³»ç»Ÿå¯åŠ¨åanacronç¨‹åºéœ€è¦ç­‰å¾…å¤šå°‘åˆ†é’Ÿå†å¼€å§‹è¿è¡Œé”™è¿‡çš„è„šæœ¬ã€‚</li><li>command æ¡ç›®åŒ…å«äº†run-partsç¨‹åºå’Œä¸€ä¸ªcronè„šæœ¬ç›®å½•åã€‚run-partsç¨‹åºè´Ÿè´£è¿è¡Œç›®å½•ä¸­ä¼ ç»™å®ƒçš„ ä»»ä½•è„šæœ¬ã€‚<strong>æ³¨æ„</strong> anacronä¸ä¼šè¿è¡Œä½äº/etc/cron.hourlyçš„è„šæœ¬ã€‚è¿™æ˜¯å› ä¸ºanacronç¨‹åºä¸ä¼šå¤„ç†æ‰§è¡Œæ—¶é—´ éœ€æ±‚å°äºä¸€å¤©çš„è„šæœ¬ã€‚</li><li>identifier æ¡ç›®æ˜¯ä¸€ç§ç‰¹åˆ«çš„éç©ºå­—ç¬¦ä¸²ï¼Œå¦‚ cron-weekly ã€‚å®ƒç”¨äºå”¯ä¸€æ ‡è¯†æ—¥å¿—æ¶ˆæ¯å’Œé”™è¯¯é‚®ä»¶ä¸­çš„ä½œä¸š</li></ul><h5>ä½¿ç”¨æ–° shell å¯åŠ¨è„šæœ¬</h5><p>å›æƒ³ä¸€ä¸‹å½“ç”¨æˆ·ç™»å…¥bash shellæ—¶éœ€è¦è¿è¡Œçš„å¯åŠ¨æ–‡ä»¶ <a href="#linux-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">å‚è§ç¯å¢ƒå˜é‡</a>ã€‚å¦å¤–åˆ«å¿˜äº†ï¼Œä¸æ˜¯æ‰€æœ‰çš„å‘è¡Œç‰ˆä¸­éƒ½åŒ…å«è¿™äº›å¯åŠ¨æ–‡ä»¶ã€‚åŸºæœ¬ä¸Šï¼Œä¾ç…§ä¸‹åˆ—é¡ºåºæ‰€æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¼šè¢«è¿è¡Œï¼Œå…¶ä½™çš„æ–‡ä»¶ä¼šè¢«å¿½ç•¥ï¼š</p><ul><li>$HOME/.bash_profil</li><li>$HOME/.bash_login</li><li>$HOME/.profile</li></ul><p>å› æ­¤ï¼Œåº”è¯¥å°†éœ€è¦åœ¨ç™»å½•æ—¶è¿è¡Œçš„è„šæœ¬æ”¾åœ¨ä¸Šé¢ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚æ¯æ¬¡å¯åŠ¨ä¸€ä¸ªæ–°shellæ—¶ï¼Œbash shelléƒ½ä¼šè¿è¡Œ.bashrcæ–‡ä»¶ã€‚å¯ä»¥è¿™æ ·æ¥éªŒè¯ï¼šåœ¨ä¸»ç›®å½•ä¸‹çš„.bashrcæ–‡ä»¶ä¸­åŠ å…¥ä¸€æ¡ç®€å•çš„ echo è¯­å¥ï¼Œç„¶åå¯åŠ¨ä¸€ä¸ªæ–°shellã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">cat</span> .bashrc
<span class="token comment"># .bashrc</span>
<span class="token comment"># Source global definitions</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/bashrc <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
<span class="token builtin class-name">.</span> /etc/bashrc
<span class="token keyword">fi</span>
<span class="token comment"># User specific aliases and functions</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;I&#39;m in a new shell!&quot;</span>

$ <span class="token function">bash</span>
I&#39;m <span class="token keyword">in</span> a new shell<span class="token operator">!</span>
$ <span class="token builtin class-name">exit</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é«˜çº§-shell-è„šæœ¬ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#é«˜çº§-shell-è„šæœ¬ç¼–ç¨‹" aria-hidden="true">#</a> é«˜çº§ shell è„šæœ¬ç¼–ç¨‹</h2><h3 id="åˆ›å»ºå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå‡½æ•°" aria-hidden="true">#</a> åˆ›å»ºå‡½æ•°</h3><h5>åŸºæœ¬çš„è„šæœ¬å‡½æ•°</h5><p><strong>åˆ›å»ºå‡½æ•°</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#1</span>
<span class="token keyword">function</span>  <span class="token function-name function">name</span> <span class="token punctuation">{</span>
	commands
<span class="token punctuation">}</span>
<span class="token comment">#2</span>
<span class="token function-name function">name</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	commands
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨å‡½æ•°</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token keyword">function</span> <span class="token function-name function">func1</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;# <span class="token variable">$count</span> - This is an example of a function111&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">func2</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;# <span class="token variable">$count</span> - This is an example of a function222&quot;</span>
<span class="token punctuation">}</span>


<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">5</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    func1
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>

<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-ge</span> <span class="token number">5</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">[</span> <span class="token variable">$count</span> <span class="token parameter variable">-le</span> <span class="token number">10</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    func2
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is the end of the loop&quot;</span>
func1
<span class="token builtin class-name">echo</span>
func2
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Now this is the end of the script&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo7.sh</span>
<span class="token comment"># 1 - This is an example of a function111</span>
<span class="token comment"># 2 - This is an example of a function111</span>
<span class="token comment"># 3 - This is an example of a function111</span>
<span class="token comment"># 4 - This is an example of a function111</span>
<span class="token comment"># 5 - This is an example of a function111</span>
<span class="token comment"># 6 - This is an example of a function222</span>
<span class="token comment"># 7 - This is an example of a function222</span>
<span class="token comment"># 8 - This is an example of a function222</span>
<span class="token comment"># 9 - This is an example of a function222</span>
<span class="token comment"># 10 - This is an example of a function222</span>

This is the end of the loop
<span class="token comment"># 11 - This is an example of a function111</span>

<span class="token comment"># 11 - This is an example of a function222</span>
Now this is the end of the script
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„</strong> å¦‚æœåœ¨å‡½æ•°è¢«å®šä¹‰å‰ä½¿ç”¨å‡½æ•°ï¼Œä½ ä¼šæ”¶åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯</p><h5>è¿”å›å€¼</h5><p><strong>ä½¿ç”¨ $?</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>echo
echo &quot;The exit status is: $?&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo7.sh</span>
The <span class="token builtin class-name">exit</span> status is: <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ä½¿ç”¨ return</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">dbl</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter a value: &quot;</span> value
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;doubling the value&quot;</span>
    <span class="token builtin class-name">return</span> $<span class="token punctuation">[</span> <span class="token variable">$value</span> * <span class="token number">2</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
dbl
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The new value is <span class="token variable">$?</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh demo8.sh
Enter a value: 2
doubling the value
The new value is 4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†å½“ç”¨è¿™ç§æ–¹æ³•ä»å‡½æ•°ä¸­è¿”å›å€¼æ—¶ï¼Œè¦å°å¿ƒäº†ã€‚è®°ä½ä¸‹é¢ä¸¤æ¡æŠ€å·§æ¥é¿å…é—®é¢˜ï¼š</p><ul><li>è®°ä½ï¼Œå‡½æ•°ä¸€ç»“æŸå°±å–è¿”å›å€¼ï¼›</li><li>è®°ä½ï¼Œé€€å‡ºçŠ¶æ€ç å¿…é¡»æ˜¯0~255ã€‚</li></ul><p>å¦‚æœåœ¨ç”¨ $? å˜é‡æå–å‡½æ•°è¿”å›å€¼ä¹‹å‰æ‰§è¡Œäº†å…¶ä»–å‘½ä»¤ï¼Œå‡½æ•°çš„è¿”å›å€¼å°±ä¼šä¸¢å¤±ã€‚è®°ä½ï¼Œ$? å˜é‡ä¼šè¿”å›æ‰§è¡Œçš„æœ€åä¸€æ¡å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç ã€‚</p><p>ç¬¬äºŒä¸ªé—®é¢˜ç•Œå®šäº†è¿”å›å€¼çš„å–å€¼èŒƒå›´ã€‚ç”±äºé€€å‡ºçŠ¶æ€ç å¿…é¡»å°äº256ï¼Œå‡½æ•°çš„ç»“æœå¿…é¡»ç”Ÿæˆä¸€ä¸ªå°äº256çš„æ•´æ•°å€¼ã€‚ä»»ä½•å¤§äº256çš„å€¼éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯å€¼ã€‚</p><p><strong>ä½¿ç”¨å‡½æ•°è¾“å‡º</strong></p><p><code>result=$(dbl)</code> è¿™ä¸ªå‘½ä»¤ä¼šå°† dbl å‡½æ•°çš„è¾“å‡º<code>echo</code>èµ‹ç»™ $result å˜é‡</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">function</span> <span class="token function-name function">dbl</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter a value: &quot;</span> value
    <span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span> <span class="token variable">$value</span> * <span class="token number">2</span> <span class="token punctuation">]</span>
    <span class="token builtin class-name">echo</span> <span class="token number">6666</span>
<span class="token punctuation">}</span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>dbl<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The new value is <span class="token variable">$result</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh demo9.sh
Enter a value: 200
The new value is 400
6666
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>è¯´æ˜</strong> é€šè¿‡è¿™ç§æŠ€æœ¯ï¼Œä½ è¿˜å¯ä»¥è¿”å›æµ®ç‚¹å€¼å’Œå­—ç¬¦ä¸²å€¼ã€‚è¿™ä½¿å®ƒæˆä¸ºä¸€ç§è·å–å‡½æ•°è¿”å›å€¼çš„å¼ºå¤§æ–¹æ³•ã€‚</p><hr><h5>åœ¨å‡½æ•°ä¸­ä½¿ç”¨å˜é‡</h5><p><strong>å‘å‡½æ•°ä¼ é€’å‚æ•°</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">function</span> <span class="token function-name function">addem</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-gt</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    	<span class="token builtin class-name">echo</span> <span class="token number">0</span>ä¸ªæˆ–å¤§äº2ä¸ªå‚æ•°
    <span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-eq</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    	<span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span> <span class="token variable">$1</span> + <span class="token variable">$1</span> <span class="token punctuation">]</span>
    <span class="token keyword">else</span>
    	<span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span> <span class="token variable">$1</span> * <span class="token variable">$2</span> <span class="token punctuation">]</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>

<span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;ä¼ å…¥ 10 15 &quot;</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>addem <span class="token number">10</span> <span class="token number">15</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> è¿”å›ï¼š<span class="token variable">$value</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;ä¼ å…¥ 10 &quot;</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>addem <span class="token number">10</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> è¿”å›ï¼š<span class="token variable">$value</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;æ— å‚æ•° &quot;</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>addem<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> è¿”å›ï¼š<span class="token variable">$value</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;ä¼ å…¥ 10 15 20 &quot;</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>addem <span class="token number">10</span> <span class="token number">15</span> <span class="token number">20</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> è¿”å›ï¼š<span class="token variable">$value</span>
<span class="token builtin class-name">echo</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh demo10.sh
ä¼ å…¥ 10 15 è¿”å›ï¼š150

ä¼ å…¥ 10 è¿”å›ï¼š20

æ— å‚æ•° è¿”å›ï¼š0ä¸ªæˆ–å¤§äº2ä¸ªå‚æ•°

ä¼ å…¥ 10 15 20 è¿”å›ï¼š0ä¸ªæˆ–å¤§äº2ä¸ªå‚æ•°
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºå‡½æ•°ä½¿ç”¨ç‰¹æ®Šå‚æ•°ç¯å¢ƒå˜é‡ä½œä¸ºè‡ªå·±çš„å‚æ•°å€¼ï¼Œå› æ­¤å®ƒæ— æ³•ç›´æ¥è·å–è„šæœ¬åœ¨å‘½ä»¤è¡Œä¸­çš„å‚æ•°å€¼ã€‚ä¸‹é¢çš„ä¾‹å­å°†ä¼šè¿è¡Œå¤±è´¥ã€‚å°½ç®¡å‡½æ•°ä¹Ÿä½¿ç”¨äº† $1 å’Œ $2 å˜é‡ï¼Œä½†å®ƒä»¬å’Œè„šæœ¬ä¸»ä½“ä¸­çš„ $1 å’Œ $2 å˜é‡å¹¶ä¸ç›¸åŒã€‚è¦åœ¨å‡½æ•°ä¸­ä½¿ç”¨è¿™äº›å€¼ï¼Œå¿…é¡»åœ¨è°ƒç”¨å‡½æ•°æ—¶æ‰‹åŠ¨å°†å®ƒä»¬ä¼ è¿‡å».ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">function</span> <span class="token function-name function">badfunc1</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span> <span class="token variable">$1</span> * <span class="token variable">$2</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token builtin class-name">echo</span> <span class="token variable">$@</span>
<span class="token builtin class-name">echo</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-eq</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>badfunc1<span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;The result is <span class="token variable">$value</span>&quot;</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-eq</span> <span class="token number">3</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   	<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>badfunc1 $1 $2<span class="token variable">)</span></span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;The result is <span class="token variable">$value</span>&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Usage: badtest1 a b&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh demo11.sh 12 2
12 2

demo11.sh:è¡Œ4: *  : è¯­æ³•é”™è¯¯: æœŸå¾…æ“ä½œæ•° ï¼ˆé”™è¯¯ç¬¦å·æ˜¯ &quot;*  &quot;ï¼‰
The result is
[root@admin shell]# sh demo11.sh 12 2 21
12 2 21

The result is 24
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åœ¨å‡½æ•°ä¸­å¤„ç†å˜é‡</strong></p><ul><li>å…¨å±€å˜é‡</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">dbl</span> <span class="token punctuation">{</span>
    <span class="token assign-left variable">value</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$value</span> * <span class="token number">2</span> <span class="token punctuation">]</span>
    <span class="token builtin class-name">echo</span> å‡½æ•°å†…ï¼š<span class="token variable">$value</span>
<span class="token punctuation">}</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;è¾“å…¥ä¸€ä¸ªå€¼: &quot;</span> value
dbl
<span class="token builtin class-name">echo</span> <span class="token string">&quot;å‡½æ•°å¤–: <span class="token variable">$value</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo12.sh</span>
è¾“å…¥ä¸€ä¸ªå€¼: <span class="token number">12</span>
å‡½æ•°å†…ï¼š24
å‡½æ•°å¤–: <span class="token number">24</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>$value å˜é‡åœ¨å‡½æ•°å¤–å®šä¹‰å¹¶è¢«èµ‹å€¼ã€‚å½“ dbl å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè¯¥å˜é‡åŠå…¶å€¼åœ¨å‡½æ•°ä¸­éƒ½ä¾ç„¶æœ‰æ•ˆã€‚å¦‚æœå˜é‡åœ¨å‡½æ•°å†…è¢«èµ‹äºˆäº†æ–°å€¼ï¼Œé‚£ä¹ˆåœ¨è„šæœ¬ä¸­å¼•ç”¨è¯¥å˜é‡æ—¶ï¼Œæ–°å€¼ä¹Ÿä¾ç„¶æœ‰æ•ˆã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">func1</span> <span class="token punctuation">{</span>
    <span class="token assign-left variable">temp</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$value</span> + <span class="token number">5</span> <span class="token punctuation">]</span>
    <span class="token assign-left variable">result</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$temp</span> * <span class="token number">2</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token assign-left variable">temp</span><span class="token operator">=</span><span class="token number">4</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">6</span>

func1
<span class="token builtin class-name">echo</span> <span class="token string">&quot;temp = <span class="token variable">$temp</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;result = <span class="token variable">$result</span>&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$temp</span> <span class="token parameter variable">-gt</span> <span class="token variable">$value</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;temp is å¤§&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;temp is å°&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sh demo12.sh</span>
temp <span class="token operator">=</span> <span class="token number">11</span>
result <span class="token operator">=</span> <span class="token number">22</span>
temp is å¤§
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äºå‡½æ•°ä¸­ç”¨åˆ°äº† $temp å˜é‡ï¼Œå®ƒçš„å€¼åœ¨è„šæœ¬ä¸­ä½¿ç”¨æ—¶å—åˆ°äº†å½±å“ï¼Œäº§ç”Ÿäº†æ„æƒ³ä¸åˆ°çš„åæœã€‚æœ‰ä¸ªç®€å•çš„åŠæ³•å¯ä»¥åœ¨å‡½æ•°ä¸­è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢å°†ä¼šä»‹ç»</p><ul><li>å±€éƒ¨å˜é‡ local</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">func1</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">temp</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$value</span> + <span class="token number">5</span> <span class="token punctuation">]</span>
    <span class="token assign-left variable">result</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$temp</span> * <span class="token number">2</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token assign-left variable">temp</span><span class="token operator">=</span><span class="token number">4</span>
<span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token number">6</span>

func1
<span class="token builtin class-name">echo</span> <span class="token string">&quot;temp = <span class="token variable">$temp</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;result = <span class="token variable">$result</span>&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$temp</span> <span class="token parameter variable">-gt</span> <span class="token variable">$value</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;temp is å¤§&quot;</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;temp is å°&quot;</span>
<span class="token keyword">fi</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>local å…³é”®å­—ä¿è¯äº†å˜é‡åªå±€é™åœ¨è¯¥å‡½æ•°ä¸­ã€‚å¦‚æœè„šæœ¬ä¸­åœ¨è¯¥å‡½æ•°ä¹‹å¤–æœ‰åŒæ ·åå­—çš„å˜é‡ï¼Œé‚£ä¹ˆshellå°†ä¼šä¿æŒè¿™ä¸¤ä¸ªå˜é‡çš„å€¼æ˜¯åˆ†ç¦»çš„ã€‚</p><h5>æ•°ç»„å˜é‡å’Œå‡½æ•°</h5><p><strong>å‘å‡½æ•°ä¼ æ•°ç»„å‚æ•°</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">testit</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;The parameters are: <span class="token variable">$@</span>&quot;</span>
    <span class="token assign-left variable">thisarray</span><span class="token operator">=</span><span class="token variable">$1</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;The received array is <span class="token variable">${thisarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token punctuation">}</span>
<span class="token assign-left variable">myarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The original array is: <span class="token variable">${myarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span>
testit <span class="token variable">$myarray</span>

<span class="token comment">#####å˜åŒ–</span>
<span class="token keyword">function</span> <span class="token function-name function">testit</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> newarray
    <span class="token assign-left variable">newarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token string">&#39;echo &quot;$@&quot;&#39;</span><span class="token punctuation">)</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;The new array value is: <span class="token variable">${newarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token punctuation">}</span>
<span class="token assign-left variable">myarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The original array is <span class="token variable">${myarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span>
testit <span class="token variable">${myarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>The original array is: <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
The parameters are: <span class="token number">1</span>
The received array is <span class="token number">1</span>
<span class="token comment">#####å˜åŒ–å</span>
The original array is <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
The new array value is: <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œæ•°ç»„ä»ç„¶å¯ä»¥åƒå…¶ä»–æ•°ç»„ä¸€æ ·ä½¿ç”¨</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">addarray</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
    <span class="token builtin class-name">local</span> newarray
    <span class="token assign-left variable">newarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span><span class="token variable">)</span></span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">value</span> <span class="token keyword">in</span> <span class="token variable">${newarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
    <span class="token keyword">do</span>
        <span class="token assign-left variable">sum</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$sum</span> + <span class="token variable">$value</span> <span class="token punctuation">]</span>
    <span class="token keyword">done</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>
<span class="token punctuation">}</span>
<span class="token assign-left variable">myarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The original array is: <span class="token variable">${myarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token assign-left variable">arg1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $<span class="token punctuation">{</span>myarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token variable">)</span></span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>addarray $arg1<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The result is <span class="token variable">$result</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>The original array is: 1 2 3 4 5
The result is 15
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>addarray å‡½æ•°ä¼šéå†æ‰€æœ‰çš„æ•°ç»„å…ƒç´ ï¼Œå°†å®ƒä»¬ç´¯åŠ åœ¨ä¸€èµ·ã€‚ä½ å¯ä»¥åœ¨ myarray æ•°ç»„å˜é‡ä¸­æ”¾ç½®ä»»æ„å¤šçš„å€¼ï¼Œ addarry å‡½æ•°ä¼šå°†å®ƒä»¬éƒ½åŠ èµ·æ¥ã€‚</p><p><strong>ä»å‡½æ•°è¿”å›æ•°ç»„</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">arraydblr</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">local</span> origarray
    <span class="token builtin class-name">local</span> newarray
    <span class="token builtin class-name">local</span> elements
    <span class="token builtin class-name">local</span> i
    <span class="token assign-left variable">origarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span><span class="token variable">)</span></span><span class="token punctuation">)</span>
    <span class="token assign-left variable">newarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span><span class="token variable">)</span></span><span class="token punctuation">)</span>
    <span class="token assign-left variable">elements</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$#</span> - <span class="token number">1</span> <span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> $elements<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">))</span></span> <span class="token punctuation">{</span>
        newarray<span class="token punctuation">[</span><span class="token variable">$i</span><span class="token punctuation">]</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">${origarray<span class="token punctuation">[</span>$i<span class="token punctuation">]</span>}</span> * <span class="token number">2</span> <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">${newarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>
<span class="token punctuation">}</span>
<span class="token assign-left variable">myarray</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The original array is: <span class="token variable">${myarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span>
<span class="token assign-left variable">arg1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $<span class="token punctuation">{</span>myarray<span class="token punctuation">[</span>*<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token variable">)</span></span>
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token variable"><span class="token variable">$(</span>arraydblr $arg1<span class="token variable">)</span></span><span class="token punctuation">)</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The new array is: <span class="token variable">${result<span class="token punctuation">[</span>*<span class="token punctuation">]</span>}</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>The original array is: 1 2 3 4 5
The new array is: 2 4 6 8 10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5>å‡½æ•°é€’å½’</h5><p>å‡½æ•°å¯ä»¥è°ƒç”¨è‡ªå·±æ¥å¾—åˆ°ç»“æœã€‚é€šå¸¸é€’å½’å‡½æ•°éƒ½æœ‰ä¸€ä¸ªæœ€ç»ˆå¯ä»¥è¿­ä»£åˆ°çš„åŸºå‡†å€¼ã€‚è®¸å¤šé«˜çº§æ•°å­¦ç®—æ³•ç”¨é€’å½’å¯¹å¤æ‚çš„æ–¹ç¨‹è¿›è¡Œé€çº§è§„çº¦ï¼Œç›´åˆ°åŸºå‡†å€¼å®šä¹‰çš„é‚£çº§ã€‚</p><p>é€’å½’ç®—æ³•çš„ç»å…¸ä¾‹å­æ˜¯è®¡ç®—é˜¶ä¹˜ã€‚ä¸€ä¸ªæ•°çš„é˜¶ä¹˜æ˜¯è¯¥æ•°ä¹‹å‰çš„æ‰€æœ‰æ•°ä¹˜ä»¥è¯¥æ•°çš„å€¼ã€‚å› æ­¤ï¼Œè¦è®¡ç®—5çš„é˜¶ä¹˜ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹æ–¹ç¨‹ï¼š</p><blockquote><p>5! = 1 * 2 * 3 * 4 * 5 = 120</p></blockquote><p>ä½¿ç”¨é€’å½’ï¼Œæ–¹ç¨‹å¯ä»¥ç®€åŒ–æˆä»¥ä¸‹å½¢å¼ï¼š</p><blockquote><p>x! = x * (x-1)!</p></blockquote><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œxçš„é˜¶ä¹˜ç­‰äºxä¹˜ä»¥xï€­1çš„é˜¶ä¹˜ã€‚è¿™å¯ä»¥ç”¨ç®€å•çš„é€’å½’è„šæœ¬è¡¨è¾¾ä¸ºï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">factorial</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$1</span> <span class="token parameter variable">-eq</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token number">1</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">temp</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$1</span> - <span class="token number">1</span> <span class="token punctuation">]</span>
        <span class="token builtin class-name">local</span> <span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token string">&#39;factorial $temp&#39;</span>
        <span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span> <span class="token variable">$result</span> * <span class="token variable">$1</span> <span class="token punctuation">]</span>
    <span class="token keyword">fi</span>
<span class="token punctuation">}</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">&quot;Enter value: &quot;</span> value
<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>factorial $value<span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The factorial of <span class="token variable">$value</span> is: <span class="token variable">$result</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Enter value: 5
The factorial of 5 is: 120
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ›å»ºåº“ source</h5><p>source å‘½ä»¤ä¼šåœ¨å½“å‰shellä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°shellã€‚å¯ä»¥ç”¨ source å‘½ä»¤æ¥åœ¨shellè„šæœ¬ä¸­è¿è¡Œåº“æ–‡ä»¶è„šæœ¬ã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«è„šæœ¬ä¸­æ‰€éœ€å‡½æ•°çš„å…¬ç”¨åº“æ–‡ä»¶</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>function addem {
    echo $[ $1 + $2 ]
}
function multem {
    echo $[ $1 * $2 ]
}
function divem {
    if [ $2 -ne 0 ]; then
        echo $[ $1 / $2 ]
    else
        echo -1
    fi
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">.</span> ./myfuncs

<span class="token assign-left variable">value1</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token assign-left variable">value2</span><span class="token operator">=</span><span class="token number">5</span>

<span class="token assign-left variable">result1</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>addem $value1 $value2<span class="token variable">)</span></span>
<span class="token assign-left variable">result2</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>multem $value1 $value2<span class="token variable">)</span></span>
<span class="token assign-left variable">result3</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>divem $value1 $value2<span class="token variable">)</span></span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;The result of adding them is: <span class="token variable">$result1</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The result of multiplying them is: <span class="token variable">$result2</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The result of dividing them is: <span class="token variable">$result3</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>The result of adding them is: 15
The result of multiplying them is: 50
The result of dividing them is: 2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨å‡½æ•°</h5><ul><li>ä¸€ç§æ–¹æ³•æ˜¯é‡‡ç”¨å•è¡Œæ–¹å¼å®šä¹‰å‡½æ•°</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># function divem { echo $[ $1 / $2 ]; }</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># divem 66 3</span>
<span class="token number">22</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å¦ä¸€ç§æ–¹æ³•æ˜¯é‡‡ç”¨å¤šè¡Œæ–¹å¼æ¥å®šä¹‰å‡½æ•°</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># function multem {</span>
<span class="token operator">&gt;</span> <span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span> <span class="token variable">$1</span> * <span class="token variable">$2</span> <span class="token punctuation">]</span>
<span class="token operator">&gt;</span> <span class="token punctuation">}</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># multem 12 2</span>
<span class="token number">24</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åœ¨.bashrc æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°</strong></p><p>æœ€ä½³åœ°ç‚¹å°±æ˜¯.bashrcæ–‡ä»¶ã€‚bash shellåœ¨æ¯æ¬¡å¯åŠ¨æ—¶éƒ½ä¼šåœ¨ä¸»ç›®å½•ä¸‹æŸ¥æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œä¸ç®¡æ˜¯äº¤äº’å¼shellè¿˜æ˜¯ä»ç°æœ‰shellä¸­å¯åŠ¨çš„æ–°shellã€‚</p><ul><li>ç›´æ¥å®šä¹‰å‡½æ•°</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># .bashrc</span>
<span class="token comment"># Source global definitions</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-r</span> /etc/bashrc <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">.</span> /etc/bashrc
<span class="token keyword">fi</span>
<span class="token keyword">function</span> <span class="token function-name function">addem</span> <span class="token punctuation">{</span>
    <span class="token builtin class-name">echo</span> $<span class="token punctuation">[</span> <span class="token variable">$1</span> + <span class="token variable">$2</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>è¯»å–å‡½æ•°æ–‡ä»¶</li></ul><p>åªè¦æ˜¯åœ¨shellè„šæœ¬ä¸­ï¼Œéƒ½å¯ä»¥ç”¨ source å‘½ä»¤ï¼ˆæˆ–è€…å®ƒçš„åˆ«åç‚¹æ“ä½œç¬¦ï¼‰å°†åº“æ–‡ä»¶ä¸­çš„å‡½æ•°æ·»åŠ åˆ°ä½ çš„.bashrcè„šæœ¬ä¸­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># .bashrc</span>
<span class="token comment"># Source global definitions</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-r</span> /etc/bashrc <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">.</span> /etc/bashrc
<span class="token keyword">fi</span>

<span class="token builtin class-name">.</span> /home/shell/libraries/myfuncs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦ç¡®ä¿åº“æ–‡ä»¶çš„è·¯å¾„åæ­£ç¡®ï¼Œä»¥ä¾¿bash shellèƒ½å¤Ÿæ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚ä¸‹æ¬¡å¯åŠ¨shellæ—¶ï¼Œåº“ä¸­çš„æ‰€æœ‰å‡½æ•°éƒ½å¯åœ¨å‘½ä»¤è¡Œç•Œé¢ä¸‹ä½¿ç”¨äº†ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$ addem 10 5
15
$ multem 10 5
50
$ divem 10 5
2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="shtoolå‡½æ•°åº“ä½¿ç”¨ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#shtoolå‡½æ•°åº“ä½¿ç”¨ç¤ºä¾‹" aria-hidden="true">#</a> shtoolå‡½æ•°åº“ä½¿ç”¨ç¤ºä¾‹</h4><h5>ä¸‹è½½ä¸å®‰è£…</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yum install shtool
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5>æ„å»ºåº“</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./confifgure
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>configure å‘½ä»¤ä¼šæ£€æŸ¥æ„å»ºshtoolåº“æ–‡ä»¶æ‰€å¿…éœ€çš„è½¯ä»¶ã€‚ä¸€æ—¦å‘ç°äº†æ‰€éœ€çš„å·¥å…·ï¼Œå®ƒä¼šä½¿ç”¨å·¥å…·è·¯å¾„ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚</p><p>make å‘½ä»¤è´Ÿè´£æ„å»ºshtoolåº“æ–‡ä»¶ã€‚æœ€ç»ˆçš„ç»“æœï¼ˆ shtool ï¼‰æ˜¯ä¸€ä¸ªå®Œæ•´çš„åº“è½¯ä»¶åŒ…ã€‚</p><p>è¦å®Œæˆå®‰è£…ï¼Œéœ€è¦ä½¿ç”¨ make å‘½ä»¤çš„ install é€‰é¡¹ã€‚</p><h5>shtool åº“å‡½æ•°</h5><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>å‡½ æ•° 		æ è¿°
Arx			åˆ›å»ºå½’æ¡£æ–‡ä»¶ï¼ˆåŒ…å«ä¸€äº›æ‰©å±•åŠŸèƒ½ï¼‰
Echo		æ˜¾ç¤ºå­—ç¬¦ä¸²ï¼Œå¹¶æä¾›äº†ä¸€äº›æ‰©å±•æ„ä»¶
fixperm		æ”¹å˜ç›®å½•æ ‘ä¸­çš„æ–‡ä»¶æƒé™
install		å®‰è£…è„šæœ¬æˆ–æ–‡ä»¶
mdate		æ˜¾ç¤ºæ–‡ä»¶æˆ–ç›®å½•çš„ä¿®æ”¹æ—¶é—´
mkdir		åˆ›å»ºä¸€ä¸ªæˆ–æ›´å¤šç›®å½•
Mkln		ä½¿ç”¨ç›¸å¯¹è·¯å¾„åˆ›å»ºé“¾æ¥
mkshadow		åˆ›å»ºä¸€æ£µé˜´å½±æ ‘
move		å¸¦æœ‰æ›¿æ¢åŠŸèƒ½çš„æ–‡ä»¶ç§»åŠ¨
Path		å¤„ç†ç¨‹åºè·¯å¾„
platform		æ˜¾ç¤ºå¹³å°æ ‡è¯†
Prop		æ˜¾ç¤ºä¸€ä¸ªå¸¦æœ‰åŠ¨ç”»æ•ˆæœçš„è¿›åº¦æ¡
rotate		è½¬ç½®æ—¥å¿—æ–‡ä»¶
Scpp		å…±äº«çš„Cé¢„å¤„ç†å™¨
Slo			æ ¹æ®åº“çš„ç±»åˆ«ï¼Œåˆ†ç¦»é“¾æ¥å™¨é€‰é¡¹
Subst		ä½¿ç”¨sedçš„æ›¿æ¢æ“ä½œ
Table		ä»¥è¡¨æ ¼çš„å½¢å¼æ˜¾ç¤ºç”±å­—æ®µåˆ†éš”ï¼ˆfield-separatedï¼‰çš„æ•°æ®
tarball		ä»æ–‡ä»¶å’Œç›®å½•ä¸­åˆ›å»ºtaræ–‡ä»¶
version		åˆ›å»ºç‰ˆæœ¬ä¿¡æ¯æ–‡ä»¶
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä¸ªshtoolå‡½æ•°éƒ½åŒ…å«å¤§é‡çš„é€‰é¡¹å’Œå‚æ•°ï¼Œä½ å¯ä»¥åˆ©ç”¨å®ƒä»¬æ”¹å˜å‡½æ•°çš„å·¥ä½œæ–¹å¼ã€‚ä¸‹é¢æ˜¯ shtoolå‡½æ•°çš„ä½¿ç”¨æ ¼å¼ï¼š</p><blockquote><p>shtool [options] [function [options] [args]]</p></blockquote><h5>ä½¿ç”¨åº“</h5><p>å¯ä»¥åœ¨å‘½ä»¤è¡Œæˆ–è‡ªå·±çš„shellè„šæœ¬ä¸­ç›´æ¥ä½¿ç”¨shtoolå‡½æ•°ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨shellè„šæœ¬ä¸­ä½¿ç”¨ platform å‡½æ•°çš„ä¾‹å­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">cat</span> test16
<span class="token comment">#!/bin/bash</span>
shtool platform
$ ./test16
centos <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>AMD64<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ls â€“al /usr/bin | shtool prop â€“p &quot;waiting...&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹" aria-hidden="true">#</a> å›¾å½¢åŒ–æ¡Œé¢ç¯å¢ƒä¸­çš„è„šæœ¬ç¼–ç¨‹</h3><h4 id="åˆ›å»ºæ–‡æœ¬èœå•" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæ–‡æœ¬èœå•" aria-hidden="true">#</a> åˆ›å»ºæ–‡æœ¬èœå•</h4><h4 id="åˆ›å»ºæ–‡æœ¬çª—å£éƒ¨ä»¶" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºæ–‡æœ¬çª—å£éƒ¨ä»¶" aria-hidden="true">#</a> åˆ›å»ºæ–‡æœ¬çª—å£éƒ¨ä»¶</h4><h4 id="æ·»åŠ x-windowå›¾å½¢" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ x-windowå›¾å½¢" aria-hidden="true">#</a> æ·»åŠ X Windowå›¾å½¢</h4><h3 id="æ­£åˆ™è¡¨è¾¾å¼" tabindex="-1"><a class="header-anchor" href="#æ­£åˆ™è¡¨è¾¾å¼" aria-hidden="true">#</a> æ­£åˆ™è¡¨è¾¾å¼</h3><h4 id="æ­£åˆ™è¡¨è¾¾å¼çš„ç±»å‹" tabindex="-1"><a class="header-anchor" href="#æ­£åˆ™è¡¨è¾¾å¼çš„ç±»å‹" aria-hidden="true">#</a> æ­£åˆ™è¡¨è¾¾å¼çš„ç±»å‹</h4><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼ˆregular expression engineï¼‰å®ç°çš„ã€‚æ­£åˆ™è¡¨è¾¾å¼å¼•æ“æ˜¯ä¸€å¥—åº•å±‚è½¯ä»¶ï¼Œè´Ÿè´£è§£é‡Šæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼å¹¶ä½¿ç”¨è¿™äº›æ¨¡å¼è¿›è¡Œæ–‡æœ¬åŒ¹é…ã€‚ åœ¨Linuxä¸­ï¼Œæœ‰ä¸¤ç§æµè¡Œçš„æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ï¼š</p><ul><li>POSIXåŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ï¼ˆbasic regular expressionï¼ŒBREï¼‰å¼•æ“</li><li>POSIXæ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ï¼ˆextended regular expressionï¼ŒEREï¼‰å¼•æ“</li></ul><p>å¤§å¤šæ•°Linuxå·¥å…·éƒ½è‡³å°‘ç¬¦åˆPOSIX BREå¼•æ“è§„èŒƒï¼Œèƒ½å¤Ÿè¯†åˆ«è¯¥è§„èŒƒå®šä¹‰çš„æ‰€æœ‰æ¨¡å¼ç¬¦å·ã€‚é—æ†¾çš„æ˜¯ï¼Œæœ‰äº›å·¥å…·ï¼ˆæ¯”å¦‚sedç¼–è¾‘å™¨ï¼‰åªç¬¦åˆäº†BREå¼•æ“è§„èŒƒçš„å­é›†ã€‚è¿™æ˜¯å‡ºäºé€Ÿåº¦æ–¹é¢çš„è€ƒè™‘å¯¼è‡´çš„ï¼Œå› ä¸ºsedç¼–è¾‘å™¨å¸Œæœ›èƒ½å°½å¯èƒ½å¿«åœ°å¤„ç†æ•°æ®æµä¸­çš„æ–‡æœ¬ã€‚</p><p>POSIX BREå¼•æ“é€šå¸¸å‡ºç°åœ¨ä¾èµ–æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ–‡æœ¬è¿‡æ»¤çš„ç¼–ç¨‹è¯­è¨€ä¸­ã€‚å®ƒä¸ºå¸¸è§æ¨¡å¼æä¾›äº†é«˜çº§æ¨¡å¼ç¬¦å·å’Œç‰¹æ®Šç¬¦å·ï¼Œæ¯”å¦‚åŒ¹é…æ•°å­—ã€å•è¯ä»¥åŠæŒ‰å­—æ¯æ’åºçš„å­—ç¬¦ã€‚gawkç¨‹åºç”¨EREå¼•æ“æ¥å¤„ç†å®ƒçš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚</p><hr><p><strong>è­¦å‘Š</strong> è®°ä½ï¼Œsedç¼–è¾‘å™¨å’Œgawkç¨‹åºçš„æ­£åˆ™è¡¨è¾¾å¼å¼•æ“ä¹‹é—´æ˜¯æœ‰åŒºåˆ«çš„ã€‚gawkç¨‹åºå¯ä»¥ä½¿ç”¨å¤§å¤šæ•°æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ç¬¦å·ï¼Œå¹¶ä¸”èƒ½æä¾›ä¸€äº›é¢å¤–è¿‡æ»¤åŠŸèƒ½ï¼Œè€Œè¿™äº›åŠŸèƒ½éƒ½æ˜¯sedç¼–è¾‘å™¨æ‰€ä¸å…·å¤‡çš„ã€‚ä½†æ­£å› ä¸ºå¦‚æ­¤ï¼Œgawkç¨‹åºåœ¨å¤„ç†æ•°æ®æµæ—¶é€šå¸¸æ‰æ¯”è¾ƒæ…¢ã€‚</p><hr><h4 id="åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼-bre" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼-bre" aria-hidden="true">#</a> åŸºç¡€æ­£åˆ™è¡¨è¾¾å¼ BRE</h4><h5>çº¯æ–‡æœ¬</h5><p>åœ¨sedç¼–è¾‘å™¨å’Œgawkç¨‹åºä¸­ç”¨æ ‡å‡†æ–‡æœ¬å­—ç¬¦ä¸²æ¥è¿‡æ»¤æ•°æ®ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a test&quot; | sed -n &#39;/test/p&#39;</span>
This is a <span class="token builtin class-name">test</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a test&quot; | sed -n &#39;/trial/p&#39;</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a test&quot; | gawk &#39;/test/{print $0}&#39;</span>
This is a <span class="token builtin class-name">test</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a test&quot; | gawk &#39;/trial/{print $0}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç¬¬ä¸€ä¸ªæ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªå•è¯testã€‚sedç¼–è¾‘å™¨å’Œgawkç¨‹åºè„šæœ¬ç”¨å®ƒä»¬å„è‡ªçš„ print å‘½ä»¤æ‰“å°å‡ºåŒ¹é…è¯¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼çš„æ‰€æœ‰è¡Œã€‚ç”±äº echo è¯­å¥åœ¨æ–‡æœ¬å­—ç¬¦ä¸²ä¸­åŒ…å«äº†å•è¯testï¼Œæ•°æ®æµæ–‡æœ¬èƒ½å¤ŸåŒ¹é…æ‰€å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ï¼Œå› æ­¤sedç¼–è¾‘å™¨æ˜¾ç¤ºäº†è¯¥è¡Œã€‚</p><p>ç¬¬äºŒä¸ªæ¨¡å¼ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªå•è¯ï¼Œè¿™æ¬¡æ˜¯trialã€‚å› ä¸º echo è¯­å¥æ–‡æœ¬å­—ç¬¦ä¸²æ²¡åŒ…å«è¯¥å•è¯ï¼Œæ‰€ä»¥æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼æ²¡æœ‰åŒ¹é…ï¼Œå› æ­¤sedç¼–è¾‘å™¨å’Œgawkç¨‹åºéƒ½æ²¡æ‰“å°è¯¥è¡Œã€‚</p></blockquote><p>ç¬¬ä¸€æ¡åŸåˆ™å°±æ˜¯ï¼šæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼éƒ½åŒºåˆ†å¤§å°å†™ã€‚è¿™æ„å‘³ç€å®ƒä»¬åªä¼šåŒ¹é…å¤§å°å†™ä¹Ÿç›¸ç¬¦çš„æ¨¡å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a test&quot; | sed -n &#39;/this/p&#39;</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a test&quot; | sed -n &#39;/This/p&#39;</span>
This is a <span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;The books are expensive&quot; | sed -n &#39;/book/p&#39;</span>
The books are expensive
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;The book is expensive&quot; | sed -n &#39;/books/p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨ç©ºæ ¼å’Œæ•°å­—ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is line number 1&quot; | sed -n &#39;/ber 1/p&#39;</span>
This is line number <span class="token number">1</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is line number1&quot; | sed -n &#39;/ber 1/p&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data1</span>
Thisisanormallineoftext.
This is a line with too many spaces. 
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/ /p&#39; data1</span>
This is a line with too many spaces.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ç‰¹æ®Šå­—ç¬¦</h5><blockquote><ul><li><code>.</code> <code>*</code> <code>[]</code> <code>^</code> <code>$</code> <code>{}</code> <code>\</code> <code>/</code> <code>+</code> <code>?</code> <code>|</code> <code>()</code></li></ul></blockquote><p>ç”¨æŸä¸ªç‰¹æ®Šå­—ç¬¦ä½œä¸ºæ–‡æœ¬å­—ç¬¦ï¼Œå°±å¿…é¡»è½¬ä¹‰ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data2</span>
The cost is <span class="token variable">$4</span>.00
sdfs oioijk <span class="token number">6846</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/\$/p&#39; data2</span>
The cost is <span class="token variable">$4</span>.00

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;\ is a special character&quot; | sed -n &#39;/\\/p&#39;</span>
<span class="token punctuation">\</span> is a special character

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;3 / 2&quot; | sed -n &#39;///p&#39;</span>
sed: <span class="token parameter variable">-e</span> expression <span class="token comment">#1, char 2: No previous regular expression</span>

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;3 / 2&quot; | sed -n &#39;/\//p&#39;</span>
<span class="token number">3</span> / <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>é”šå­—ç¬¦ ^$</h5><ul><li>é”å®šåœ¨è¡Œé¦– <code>^</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;The book store&quot; | sed -n &#39;/^book/p&#39;</span>

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;Books are great&quot; | sed -n &#39;/^Book/p&#39;</span>
Books are great

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data3</span>
This is a <span class="token builtin class-name">test</span> line.
this is another <span class="token builtin class-name">test</span> line.
A line that tests this feature.
Yet <span class="token function">more</span> testing of this
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/^this/p&#39; data3</span>
this is another <span class="token builtin class-name">test</span> line.

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This ^ is a test&quot; | sed -n &#39;/s ^/p&#39;</span>
This ^ is a <span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é”å®šåœ¨è¡Œå°¾ <code>$</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a good book&quot; | sed -n &#39;/book$/p&#39;</span>
This is a good book
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This book is good&quot; | sed -n &#39;/book$/p&#39;</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;There are a lot of good books&quot; | sed -n &#39;/book$/p&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç»„åˆä½¿ç”¨</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data4</span>
this is a <span class="token builtin class-name">test</span> of using both anchors
I said this is a <span class="token builtin class-name">test</span>
this is a <span class="token builtin class-name">test</span>
I<span class="token string">&#39;m sure this is a test.
[root@admin shell]# sed -n &#39;</span>/^this is a test$/p<span class="token string">&#39; data4
this is a test
[root@admin shell]# sed -n &#39;</span>/^this is test$/p<span class="token string">&#39; data4
[root@admin shell]# sed -n &#39;</span>/^this test$/p&#39; data4
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿‡æ»¤å‡ºæ•°æ®æµä¸­çš„ç©ºç™½è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data5</span>
This is one <span class="token builtin class-name">test</span> line.

This is another <span class="token builtin class-name">test</span> line.
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;/^$/d&#39; data5</span>
This is one <span class="token builtin class-name">test</span> line.
This is another <span class="token builtin class-name">test</span> line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ç‚¹å·å­—ç¬¦</h5><p><code>.</code> ç”¨æ¥åŒ¹é…é™¤æ¢è¡Œç¬¦ä¹‹å¤–çš„ <strong>ä»»æ„å•ä¸ªå­—ç¬¦</strong>ã€‚å®ƒå¿…é¡»åŒ¹é…ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœåœ¨ç‚¹å·å­—ç¬¦çš„ä½ç½®æ²¡æœ‰å­—ç¬¦ï¼Œé‚£ä¹ˆæ¨¡å¼å°±ä¸æˆç«‹ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data6</span>
This is a <span class="token builtin class-name">test</span> of a line.
The <span class="token function">cat</span> is sleeping.
That is a very <span class="token function">nice</span> hat.
This <span class="token builtin class-name">test</span> is at line four.
at ten o<span class="token string">&#39;clock we&#39;</span>ll go home.

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/.at/p&#39; data6</span>
The <span class="token function">cat</span> is sleeping.
That is a very <span class="token function">nice</span> hat.
This <span class="token builtin class-name">test</span> is at line four.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œç©ºæ ¼ä¹Ÿæ˜¯å­—ç¬¦ï¼Œå› æ­¤ at å‰é¢çš„ç©ºæ ¼åˆšå¥½åŒ¹é…äº†è¯¥æ¨¡å¼ã€‚ç¬¬äº”è¡Œè¯æ˜äº†è¿™ç‚¹ï¼Œå°† at æ”¾åœ¨è¡Œé¦–å°±ä¸ ä¼šåŒ¹é…è¯¥æ¨¡å¼äº†ã€‚</p><h5>å­—ç¬¦ç»„ []</h5><p>å¯ä»¥å®šä¹‰ç”¨æ¥åŒ¹é…æ–‡æœ¬æ¨¡å¼ä¸­æŸä¸ªä½ç½®çš„ä¸€ç»„å­—ç¬¦ã€‚å¦‚æœå­—ç¬¦ç»„ä¸­çš„æŸä¸ªå­—ç¬¦å‡ºç°åœ¨äº†æ•°æ®æµä¸­ï¼Œé‚£å®ƒå°±åŒ¹é…äº†è¯¥æ¨¡å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data6</span>
This is a <span class="token builtin class-name">test</span> of a line.
The <span class="token function">cat</span> is sleeping.
That is a very <span class="token function">nice</span> hat.
This <span class="token builtin class-name">test</span> is at line four.
at ten o<span class="token string">&#39;clock we&#39;</span>ll go home.
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;/[ch]at/p&#39; data6</span>
The <span class="token function">cat</span> is sleeping.
That is a very <span class="token function">nice</span> hat.
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;Yes&quot; | sed -n &#39;/[Yy]es/p&#39;</span>
Yes
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;yes&quot; | sed -n &#39;/[Yy]es/p&#39;</span>
<span class="token function">yes</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;Yes&quot; | sed -n &#39;/[Yy][Ee][Ss]/p&#39;</span>
Yes
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;yEs&quot; | sed -n &#39;/[Yy][Ee][Ss]/p&#39;</span>
yEs
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;yeS&quot; | sed -n &#39;/[Yy][Ee][Ss]/p&#39;</span>
yeS
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿˜å¯ä»¥æ˜¯æ•°å­—</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data7</span>
This line doesn<span class="token string">&#39;t contain a number.
This line has 1 number on it.
This line a number 2 on it.
This line has a number 4 on it.

[root@admin shell]# sed -n &#39;</span>/<span class="token punctuation">[</span>0123<span class="token punctuation">]</span>/p&#39; data7
This line has <span class="token number">1</span> number on it.
This line a number <span class="token number">2</span> on it.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚®ç¼–éªŒè¯</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data8</span>
<span class="token number">60633</span>
<span class="token number">46201</span>
<span class="token number">223001</span>
<span class="token number">556400</span>
<span class="token number">4353</span>
<span class="token number">22203</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># $ sed -n &#39;/^[0123456789][0123456789][0123456789][0123456789][0123456789]$/p&#39; data8</span>
<span class="token number">60633</span>
<span class="token number">46201</span>
<span class="token number">22203</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data9</span>
I need to have some maintenence <span class="token keyword">done</span> on my car.
I<span class="token string">&#39;ll pay that in a seperate invoice.
After I pay for the maintenance my car will be as good as new.

[root@admin shell]# sed -n &#39;</span>/maint<span class="token punctuation">[</span>ea<span class="token punctuation">]</span>n<span class="token punctuation">[</span>ae<span class="token punctuation">]</span>nce/p/sep<span class="token punctuation">[</span>ea<span class="token punctuation">]</span>r<span class="token punctuation">[</span>ea<span class="token punctuation">]</span>te/p<span class="token string">&#39; data9
I need to have some maintenence done on my car.
I&#39;</span>ll pay that <span class="token keyword">in</span> a seperate invoice.
After I pay <span class="token keyword">for</span> the maintenance my car will be as good as new.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ¬ä¾‹ä¸­çš„ä¸¤ä¸ª sed æ‰“å°å‘½ä»¤åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ç»„æ¥å¸®åŠ©æ‰¾åˆ°æ–‡æœ¬ä¸­æ‹¼é”™çš„å•è¯ <code>maintenance</code> å’Œ <code>separate</code>ã€‚åŒæ ·çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¹Ÿèƒ½åŒ¹é…æ­£ç¡®æ‹¼å†™çš„ <code>maintenance</code>ã€‚</p><h5>æ’é™¤å‹å­—ç¬¦ç»„</h5><p>åªè¦åœ¨å­—ç¬¦ç»„çš„å¼€å¤´åŠ ä¸ªè„±å­—ç¬¦</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-n</span> /<span class="token punctuation">[</span>^ab<span class="token punctuation">]</span>ops/p data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h5>åŒºé—´</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/^[0-9][0-9][0-9][0-9][0-9]$/p&#39;</span> data8
<span class="token number">60633</span>
<span class="token number">46201</span>
<span class="token number">45902</span>

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/[0-9][a-z]ops/p&#39;</span> data
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/[a-ch-m]at/p&#39;</span> data6
The <span class="token function">cat</span> is sleeping.
That is a very <span class="token function">nice</span> hat.
<span class="token builtin class-name">echo</span> <span class="token string">&quot;a8392&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/^[0-9][0-9][0-9][0-9][0-9]$/p&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;1839a&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/^[0-9][0-9][0-9][0-9][0-9]$/p
echo &quot;18a92&quot; | sed -n &#39;</span>/^<span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span>$/p&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ç‰¹æ®Šçš„å­—ç¬¦ç»„</h5><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>ç»„  				æ è¿°
<span class="token punctuation">[</span><span class="token punctuation">[</span>:alpha:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…ä»»æ„å­—æ¯å­—ç¬¦ï¼Œä¸ç®¡æ˜¯å¤§å†™è¿˜æ˜¯å°å†™
<span class="token punctuation">[</span><span class="token punctuation">[</span>:alnum:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…ä»»æ„å­—æ¯æ•°å­—å­—ç¬¦0~9ã€A~Zæˆ–a~z
<span class="token punctuation">[</span><span class="token punctuation">[</span>:blank:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦
<span class="token punctuation">[</span><span class="token punctuation">[</span>:digit:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…0~9ä¹‹é—´çš„æ•°å­—
<span class="token punctuation">[</span><span class="token punctuation">[</span>:lower:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…å°å†™å­—æ¯å­—ç¬¦a~z
<span class="token punctuation">[</span><span class="token punctuation">[</span>:print:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…ä»»æ„å¯æ‰“å°å­—ç¬¦
<span class="token punctuation">[</span><span class="token punctuation">[</span>:punct:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…æ ‡ç‚¹ç¬¦å·
<span class="token punctuation">[</span><span class="token punctuation">[</span>:space:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…ä»»æ„ç©ºç™½å­—ç¬¦ï¼šç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€NLã€FFã€VTå’ŒCR
<span class="token punctuation">[</span><span class="token punctuation">[</span>:upper:<span class="token punctuation">]</span><span class="token punctuation">]</span>		åŒ¹é…ä»»æ„å¤§å†™å­—æ¯å­—ç¬¦A~Z
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;abc&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/[[:digit:]]/p&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;abc&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/[[:alpha:]]/p&#39;</span>
abc
<span class="token builtin class-name">echo</span> <span class="token string">&quot;abc123&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/[[:digit:]]/p&#39;</span>
abc123
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is, a test&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/[[:punct:]]/p&#39;</span>
This is, a <span class="token builtin class-name">test</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;This is a test&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/[[:punct:]]/p&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ˜Ÿå·</h5><p>åœ¨å­—ç¬¦åé¢æ”¾ç½®æ˜Ÿå·è¡¨æ˜è¯¥å­—ç¬¦å¿…é¡»åœ¨åŒ¹é…æ¨¡å¼çš„æ–‡æœ¬ä¸­å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ã€‚</p><p>è¿™ä¸ªæ¨¡å¼ç¬¦å·å¹¿æ³›ç”¨äºå¤„ç†æœ‰å¸¸è§æ‹¼å†™é”™è¯¯æˆ–åœ¨ä¸åŒè¯­è¨€ä¸­æœ‰æ‹¼å†™å˜åŒ–çš„å•è¯ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;ik&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/ie*k/p&#39;</span>
ik
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;iek&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/ie*k/p&#39;</span>
iek
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;ieek&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/ie*k/p&#39;</span>
ieek
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;ieeek&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/ie*k/p&#39;</span>
ieeek
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†™ä¸ªå¯èƒ½ç”¨åœ¨ç¾å¼æˆ–è‹±å¼è‹±è¯­ä¸­çš„è„šæœ¬ï¼Œæ¨¡å¼ä¸­çš„ u* è¡¨æ˜å­—æ¯uå¯èƒ½å‡ºç°æˆ–ä¸å‡ºç°åœ¨åŒ¹é…æ¨¡å¼çš„æ–‡æœ¬ä¸­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;I&#39;m getting a color TV&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/colou*r/p&#39;</span>
I<span class="token string">&#39;m getting a color TV
echo &quot;I&#39;</span>m getting a colour TV<span class="token string">&quot; | sed -n &#39;/colou*r/p&#39;
I&#39;m getting a colour TV

echo &quot;</span>I ate a potatoe with my lunch.<span class="token string">&quot; | sed -n &#39;/potatoe*/p&#39;
I ate a potatoe with my lunch.
echo &quot;</span>I ate a potato with my lunch.&quot; <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/potatoe*/p&#39;</span>
I ate a potato with my lunch.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ç‚¹å·ç‰¹æ®Šå­—ç¬¦å’Œæ˜Ÿå·ç‰¹æ®Šå­—ç¬¦ç»„åˆèµ·æ¥ã€‚è¿™ä¸ªç»„åˆèƒ½å¤ŸåŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„å­—ç¬¦ã€‚å®ƒé€šå¸¸ç”¨åœ¨æ•°æ®æµä¸­ä¸¤ä¸ªå¯èƒ½ç›¸é‚»æˆ–ä¸ç›¸é‚»çš„æ–‡æœ¬å­—ç¬¦ä¸²ä¹‹é—´ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;this is a regular pattern expression&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/regular.*expression/p&#39;</span>
this is a regular pattern expression
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ˜Ÿå·è¿˜èƒ½ç”¨åœ¨å­—ç¬¦ç»„ä¸Šã€‚å®ƒå…è®¸æŒ‡å®šå¯èƒ½åœ¨æ–‡æœ¬ä¸­å‡ºç°å¤šæ¬¡çš„å­—ç¬¦ç»„æˆ–å­—ç¬¦åŒºé—´ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
bt
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bat&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
bat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;btt&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
btt
<span class="token builtin class-name">echo</span> <span class="token string">&quot;baat&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
baat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;baaeeet&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
baaeeet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;baeeaeeat&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
baeeaeeat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;baakeeet&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/b[ae]*t/p&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼-ere" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼-ere" aria-hidden="true">#</a> æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ ERE</h4><p><code>gawk</code>ç¨‹åºèƒ½å¤Ÿè¯†åˆ« <code>ERE</code> æ¨¡å¼ï¼Œä½† <code>sed</code> ç¼–è¾‘å™¨ä¸èƒ½ã€‚</p><h5>é—®å·</h5><p>é—®å·è¡¨æ˜å‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç° <strong>0æ¬¡æˆ–1æ¬¡</strong>ï¼Œå®ƒä¸ä¼šåŒ¹é…å¤šæ¬¡å‡ºç°çš„å­—ç¬¦ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be?t/{print $0}&#39;</span>
bt
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be?t/{print $0}&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be?t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beeet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be?t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]?t/{print $0}&#39;</span>
bt
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]?t/{print $0}&#39;</span>
bat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bot&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]?t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]?t/{print $0}&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;baet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]?t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]?t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]?t/{print $0}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå­—ç¬¦ç»„ä¸­çš„å­—ç¬¦å‡ºç°äº†0æ¬¡æˆ–1æ¬¡ï¼Œæ¨¡å¼åŒ¹é…å°±æˆç«‹ã€‚ä½†å¦‚æœä¸¤ä¸ªå­—ç¬¦éƒ½å‡ºç°äº†ï¼Œæˆ–è€…å…¶ä¸­ä¸€ä¸ªå­—ç¬¦å‡ºç°äº†2æ¬¡ï¼Œæ¨¡å¼åŒ¹é…å°±ä¸æˆç«‹ã€‚</p><h5>åŠ å·</h5><p>åŠ å·è¡¨æ˜å‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç° <strong>1æ¬¡æˆ–å¤šæ¬¡</strong>ï¼Œä½† <strong>å¿…é¡»è‡³å°‘å‡ºç°1æ¬¡</strong>ã€‚å¦‚æœè¯¥å­—ç¬¦æ²¡æœ‰å‡ºç°ï¼Œé‚£ä¹ˆæ¨¡å¼å°±ä¸ä¼šåŒ¹é…ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;beeet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be+t/{print $0}&#39;</span>
beeet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be+t/{print $0}&#39;</span>
beet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be+t/{print $0}&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/be+t/{print $0}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ¬¡å¦‚æœå­—ç¬¦ç»„ä¸­å®šä¹‰çš„ä»»ä¸€å­—ç¬¦å‡ºç°äº†ï¼Œæ–‡æœ¬å°±ä¼šåŒ¹é…æŒ‡å®šçš„æ¨¡å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]+t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]+t/{print $0}&#39;</span>
bat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]+t/{print $0}&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]+t/{print $0}&#39;</span>
beat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]+t/{print $0}&#39;</span>
beet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beeat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/b[ae]+t/{print $0}&#39;</span>
beeat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹</p><h5>èŠ±æ‹¬å·</h5><p>EREä¸­çš„èŠ±æ‹¬å·å…è®¸ä½ ä¸ºå¯é‡å¤çš„æ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šä¸€ä¸ªä¸Šé™ã€‚è¿™é€šå¸¸ç§°ä¸ºé—´éš”ï¼ˆintervalï¼‰ã€‚</p><p>å¯ä»¥ç”¨ä¸¤ç§æ ¼å¼æ¥æŒ‡å®šåŒºé—´ã€‚</p><ul><li>m ï¼šæ­£åˆ™è¡¨è¾¾å¼å‡†ç¡®å‡ºç° m æ¬¡ã€‚</li><li>m, n ï¼šæ­£åˆ™è¡¨è¾¾å¼è‡³å°‘å‡ºç° m æ¬¡ï¼Œè‡³å¤š n æ¬¡ã€‚</li></ul><p>è¿™ä¸ªç‰¹æ€§å¯ä»¥ç²¾ç¡®è°ƒæ•´å­—ç¬¦æˆ–å­—ç¬¦é›†åœ¨æ¨¡å¼ä¸­å…·ä½“å‡ºç°çš„æ¬¡æ•°ã€‚</p><hr><p><strong>è­¦å‘Š</strong> é»˜è®¤æƒ…å†µä¸‹ï¼Œgawkç¨‹åºä¸ä¼šè¯†åˆ«æ­£åˆ™è¡¨è¾¾å¼é—´éš”ã€‚å¿…é¡»æŒ‡å®šgawkç¨‹åºçš„ <code>--re- interval</code> å‘½ä»¤è¡Œé€‰é¡¹æ‰èƒ½è¯†åˆ«æ­£åˆ™è¡¨è¾¾å¼é—´éš”</p><hr><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1}t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1}t/{print $0}&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1}t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1}t/{print $0}&#39;</span>
beet
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1,2}t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1,2}t/{print $0}&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1,2}t/{print $0}&#39;</span>
beet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beeet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/be{1,2}t/{print $0}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;bt&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
bat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
bet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
beat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
beet
<span class="token builtin class-name">echo</span> <span class="token string">&quot;beeat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;baeet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;baeaet&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> --re-interval <span class="token string">&#39;/b[ae]{1,2}t/{print $0}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å­—æ¯aæˆ–eåœ¨æ–‡æœ¬æ¨¡å¼ä¸­åªå‡ºç°äº†1~2æ¬¡ï¼Œåˆ™æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…ï¼›å¦åˆ™ï¼Œæ¨¡å¼åŒ¹é…å¤±è´¥</p><h5>ç®¡é“ç¬¦å·</h5><p>ç®¡é“ç¬¦å·å…è®¸ä½ åœ¨æ£€æŸ¥æ•°æ®æµæ—¶ï¼Œç”¨é€»è¾‘ OR æ–¹å¼æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼å¼•æ“è¦ç”¨çš„ä¸¤ä¸ªæˆ–å¤šä¸ªæ¨¡å¼ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªæ¨¡å¼åŒ¹é…äº†æ•°æ®æµæ–‡æœ¬ï¼Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;The cat is asleep&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/cat|dog/{print $0}&#39;</span>
The <span class="token function">cat</span> is asleep
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The dog is asleep&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/cat|dog/{print $0}&#39;</span>
The dog is asleep
<span class="token builtin class-name">echo</span> <span class="token string">&quot;The sheep is asleep&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/cat|dog/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;He has a hat.&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/[ch]at|dog/{print $0}&#39;</span>
He has a hat.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>è¡¨è¾¾å¼åˆ†ç»„-åœ†æ‹¬å·</h5><p>å½“ä½ å°†æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åˆ†ç»„æ—¶ï¼Œè¯¥ç»„ä¼šè¢«è§†ä¸ºä¸€ä¸ªæ ‡å‡†å­—ç¬¦ã€‚å¯ä»¥åƒå¯¹æ™®é€šå­—ç¬¦ä¸€æ ·ç»™è¯¥ç»„ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;Sat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/Sat(urday)?/{print $0}&#39;</span>
Sat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;Saturday&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/Sat(urday)?/{print $0}&#39;</span>
Saturday
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“å°¾çš„ urday åˆ†ç»„ä»¥åŠé—®å·ï¼Œä½¿å¾—æ¨¡å¼èƒ½å¤ŸåŒ¹é…å®Œæ•´çš„ Saturday æˆ–ç¼©å†™ Sat</p><p>å°†åˆ†ç»„å’Œç®¡é“ç¬¦å·ä¸€èµ·ä½¿ç”¨</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;cat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/(c|b)a(b|t)/{print $0}&#39;</span>
<span class="token function">cat</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;cab&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/(c|b)a(b|t)/{print $0}&#39;</span>
cab
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bat&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/(c|b)a(b|t)/{print $0}&#39;</span>
bat
<span class="token builtin class-name">echo</span> <span class="token string">&quot;bab&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/(c|b)a(b|t)/{print $0}&#39;</span>
bab
<span class="token builtin class-name">echo</span> <span class="token string">&quot;tab&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/(c|b)a(b|t)/{print $0}&#39;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;tac&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;/(c|b)a(b|t)/{print $0}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹" aria-hidden="true">#</a> æ­£åˆ™è¡¨è¾¾å¼å®ä¾‹</h4><h5>$PATHç›®å½•æ–‡ä»¶è®¡æ•°</h5><p>é¦–å…ˆä½ å¾—å°† PATH å˜é‡è§£ææˆå•ç‹¬çš„ç›®å½•å</p><blockquote><p>echo $PATH /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</p></blockquote><p>ç”¨ç©ºæ ¼æ¥æ›¿æ¢å†’å·</p><blockquote><p>echo $PATH | sed &#39;s/ğŸ˜• /g&#39;</p><p>/usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /root/bin</p></blockquote><p>ä½¿ç”¨æ ‡å‡† for è¯­å¥ä¸­æ¥éå†æ¯ä¸ªç›®å½•</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">mypath</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/:/ /g&#39;</span><span class="token variable">)</span></span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">directory</span> <span class="token keyword">in</span> <span class="token variable">$mypath</span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">check</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> $directory<span class="token variable">)</span></span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">item</span> <span class="token keyword">in</span> <span class="token variable">$check</span>
    <span class="token keyword">do</span>
        <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
    <span class="token keyword">done</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$directory</span> - <span class="token variable">$count</span>&quot;</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[root@admin shell]# sh demo13.sh
/usr/local/sbin - 0
/usr/local/bin - 0
/usr/sbin - 832
/usr/bin - 1524
ls: æ— æ³•è®¿é—®/root/bin: æ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•
/root/bin - 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>éªŒè¯ç”µè¯å·ç </h5><p>ç”µè¯å·ç æœ‰å‡ ç§å¸¸è§çš„å½¢å¼ï¼š</p><ul><li>(123)456-7890</li><li>(123) 456-789</li><li>123-456-7890</li><li>123.456.7890</li></ul><p>ç”µè¯å·ç ä¸­å¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰å·¦åœ†æ‹¬å·ã€‚è¿™å¯ä»¥ç”¨å¦‚ä¸‹æ¨¡å¼æ¥åŒ¹é…ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>^\(?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è„±å­—ç¬¦ç”¨æ¥è¡¨æ˜æ•°æ®çš„å¼€å§‹ã€‚ç”±äºå·¦åœ†æ‹¬å·æ˜¯ä¸ªç‰¹æ®Šå­—ç¬¦ï¼Œå› æ­¤å¿…é¡»å°†å®ƒè½¬ä¹‰æˆæ™®é€šå­—ç¬¦ã€‚é—®å·è¡¨æ˜å·¦åœ†æ‹¬å·å¯èƒ½å‡ºç°ï¼Œä¹Ÿå¯èƒ½ä¸å‡ºç°ã€‚ç´§æ¥ç€å°±æ˜¯3ä½åŒºå·ã€‚åœ¨ç¾å›½ï¼ŒåŒºå·ä»¥æ•°å­—2å¼€å§‹ï¼ˆæ²¡æœ‰ä»¥æ•°å­—0æˆ–1å¼€å§‹çš„åŒºå·ï¼‰ï¼Œæœ€å¤§å¯åˆ°9ã€‚è¦åŒ¹é…åŒºå·ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹æ¨¡å¼ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[2-9][0-9]{2}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™è¦æ±‚ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯2~9çš„æ•°å­—ï¼Œåè·Ÿä»»æ„ä¸¤ä½æ•°å­—ã€‚åœ¨åŒºå·åé¢ï¼Œæ”¶å°¾çš„å³åœ†æ‹¬å·å¯èƒ½å­˜åœ¨ï¼Œä¹Ÿå¯èƒ½ä¸å­˜åœ¨ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>\)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨åŒºå·åï¼Œå­˜åœ¨å¦‚ä¸‹å¯èƒ½ï¼šæœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œæ²¡æœ‰ç©ºæ ¼ï¼Œæœ‰ä¸€æ¡å•ç ´æŠ˜çº¿æˆ–ä¸€ä¸ªç‚¹ã€‚ä½ å¯ä»¥å¯¹å®ƒä»¬ä½¿ç”¨ç®¡é“ç¬¦å·ï¼Œå¹¶ç”¨åœ†æ‹¬å·è¿›è¡Œåˆ†ç»„</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>(| |-|\.)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬ä¸€ä¸ªç®¡é“ç¬¦å·ç´§è·Ÿåœ¨å·¦åœ†æ‹¬å·åï¼Œç”¨æ¥åŒ¹é…æ²¡æœ‰ç©ºæ ¼çš„æƒ…å½¢ã€‚ä½ å¿…é¡»å°†ç‚¹å­—ç¬¦è½¬ä¹‰ï¼Œå¦åˆ™å®ƒä¼šè¢«è§£é‡Šæˆå¯åŒ¹é…ä»»æ„å­—ç¬¦ã€‚ç´§æ¥ç€æ˜¯3ä½ç”µè¯äº¤æ¢æœºå·ç ã€‚è¿™é‡Œæ²¡ä»€ä¹ˆéœ€è¦ç‰¹åˆ«æ³¨æ„çš„ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[0-9]{3}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åœ¨ç”µè¯äº¤æ¢æœºå·ç ä¹‹åï¼Œä½ å¿…é¡»åŒ¹é…ä¸€ä¸ªç©ºæ ¼ã€ä¸€æ¡å•ç ´æŠ˜çº¿æˆ–ä¸€ä¸ªç‚¹ï¼ˆè¿™æ¬¡ä¸ç”¨è€ƒè™‘åŒ¹é…æ²¡æœ‰ç©ºæ ¼çš„æƒ…å†µï¼Œå› ä¸ºåœ¨ç”µè¯äº¤æ¢æœºå·ç å’Œå…¶ä½™å·ç é—´å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>( |-|\.)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ€åï¼Œå¿…é¡»åœ¨å­—ç¬¦ä¸²å°¾éƒ¨åŒ¹é…4ä½æœ¬åœ°ç”µè¯åˆ†æœºå·ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>[0-9]{4}$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å®Œæ•´çš„æ¨¡å¼å¦‚ä¸‹ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>^\(?[2-9][0-9]{2}\)?(| |-|\.)[0-9]{3}( |-|\.)[0-9]{4}$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> isphone
<span class="token comment">#!/bin/bash</span>
<span class="token function">gawk</span> --re-interval <span class="token string">&#39;/^\(?[2-9][0-9]{2}\)?(| |-|\Â¬[0-9]{3}( |-|\.)[0-9]{4}/{print $0}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;317-555-1234&quot;</span> <span class="token operator">|</span> ./isphone
<span class="token number">317</span>-555-1234
<span class="token builtin class-name">echo</span> <span class="token string">&quot;000-555-1234&quot;</span> <span class="token operator">|</span> ./isphone
<span class="token builtin class-name">echo</span> <span class="token string">&quot;312 555-1234&quot;</span> <span class="token operator">|</span> ./isphone
<span class="token number">312</span> <span class="token number">555</span>-1234
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> phonelist
000-000-0000
<span class="token number">123</span>-456-7890
<span class="token number">212</span>-555-1234
<span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
<span class="token punctuation">(</span><span class="token number">202</span><span class="token punctuation">)</span> <span class="token number">555</span>-9876
<span class="token number">33523</span>
<span class="token number">1234567890</span>
<span class="token number">234.123</span>.4567

$ <span class="token function">cat</span> phonelist <span class="token operator">|</span> ./isphone
<span class="token number">212</span>-555-1234
<span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
<span class="token punctuation">(</span><span class="token number">202</span><span class="token punctuation">)</span> <span class="token number">555</span>-9876
<span class="token number">234.123</span>.4567
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>è§£æé‚®ä»¶åœ°å€</h5><p>é‚®ä»¶åœ°å€çš„åŸºæœ¬æ ¼å¼ä¸ºï¼š</p><blockquote><p>username@hostname</p></blockquote><p>username å€¼å¯ç”¨å­—æ¯æ•°å­—å­—ç¬¦ä»¥åŠä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š</p><ul><li>ç‚¹å·</li><li>å•ç ´æŠ˜çº¿</li><li>åŠ å·</li><li>ä¸‹åˆ’çº¿</li></ul><p>åœ¨æœ‰æ•ˆçš„é‚®ä»¶ç”¨æˆ·åä¸­ï¼Œè¿™äº›å­—ç¬¦å¯èƒ½ä»¥ä»»æ„ç»„åˆå½¢å¼å‡ºç°ã€‚é‚®ä»¶åœ°å€çš„ hostname éƒ¨åˆ†ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåŸŸåå’Œä¸€ä¸ªæœåŠ¡å™¨åç»„æˆã€‚æœåŠ¡å™¨åå’ŒåŸŸåä¹Ÿå¿…é¡»éµç…§ä¸¥æ ¼çš„å‘½åè§„åˆ™ï¼Œåªå…è®¸å­—æ¯æ•°å­—å­—ç¬¦ä»¥åŠä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š</p><ul><li>ç‚¹å·</li><li>ä¸‹åˆ’çº¿</li></ul><p>æœåŠ¡å™¨åå’ŒåŸŸåéƒ½ç”¨ç‚¹åˆ†éš”ï¼Œå…ˆæŒ‡å®šæœåŠ¡å™¨åï¼Œç´§æ¥ç€æŒ‡å®šå­åŸŸåï¼Œæœ€åæ˜¯åé¢ä¸å¸¦ç‚¹å·çš„é¡¶çº§åŸŸåã€‚ é¡¶çº§åŸŸåçš„æ•°é‡åœ¨è¿‡å»ååˆ†æœ‰é™ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ç¼–å†™è€…ä¼šå°è¯•å°†å®ƒä»¬éƒ½åŠ åˆ°éªŒè¯æ¨¡å¼ä¸­ã€‚ç„¶è€Œé—æ†¾çš„æ˜¯ï¼Œéšç€äº’è”ç½‘çš„å‘å±•ï¼Œå¯ç”¨çš„é¡¶çº§åŸŸåä¹Ÿå¢å¤šäº†ã€‚è¿™ç§æ–¹æ³•å·²ç»ä¸å†å¯è¡Œã€‚ä»å·¦ä¾§å¼€å§‹æ„å»ºè¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç”¨æˆ·åä¸­å¯ä»¥æœ‰å¤šä¸ªæœ‰æ•ˆå­—ç¬¦ã€‚è¿™ä¸ªç›¸å½“å®¹æ˜“ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>^([a-zA-Z0-9_\-\.\+]+) @
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªåˆ†ç»„æŒ‡å®šäº†ç”¨æˆ·åä¸­å…è®¸çš„å­—ç¬¦ï¼ŒåŠ å·è¡¨æ˜å¿…é¡»æœ‰è‡³å°‘ä¸€ä¸ªå­—ç¬¦ã€‚ä¸‹ä¸€ä¸ªå­—ç¬¦å¾ˆæ˜æ˜¾æ˜¯@ ï¼Œæ²¡ä»€ä¹ˆæ„å¤–çš„ã€‚ hostname æ¨¡å¼ä½¿ç”¨åŒæ ·çš„æ–¹æ³•æ¥åŒ¹é…æœåŠ¡å™¨åå’Œå­åŸŸåã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>([a-zA-Z0-9_\-\.]+)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¿™ä¸ªæ¨¡å¼å¯ä»¥åŒ¹é…æ–‡æœ¬ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>server
server.subdomain
server.subdomain.subdomain
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºé¡¶çº§åŸŸåï¼Œæœ‰ä¸€äº›ç‰¹æ®Šçš„è§„åˆ™ã€‚é¡¶çº§åŸŸååªèƒ½æ˜¯å­—æ¯å­—ç¬¦ï¼Œå¿…é¡»ä¸å°‘äºäºŒä¸ªå­—ç¬¦ï¼ˆå›½å®¶ æˆ–åœ°åŒºä»£ç ä¸­ä½¿ç”¨ï¼‰ï¼Œå¹¶ä¸”é•¿åº¦ä¸Šä¸å¾—è¶…è¿‡äº”ä¸ªå­—ç¬¦ã€‚ä¸‹é¢å°±æ˜¯é¡¶çº§åŸŸåç”¨çš„æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>\.([a-zA-Z]{2,5})$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å°†æ•´ä¸ªæ¨¡å¼æ”¾åœ¨ä¸€èµ·ä¼šç”Ÿæˆå¦‚ä¸‹æ¨¡å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>^<span class="token punctuation">(</span><span class="token punctuation">[</span>a-zA-Z0-9_<span class="token punctuation">\</span>-<span class="token punctuation">\</span>.<span class="token punctuation">\</span>+<span class="token punctuation">]</span>+<span class="token punctuation">)</span>@<span class="token punctuation">(</span><span class="token punctuation">[</span>a-zA-Z0-9_<span class="token punctuation">\</span>-<span class="token punctuation">\</span>.<span class="token punctuation">]</span>+<span class="token punctuation">)</span><span class="token punctuation">\</span>.<span class="token punctuation">(</span><span class="token punctuation">[</span>a-zA-Z<span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2,5</span><span class="token punctuation">}</span><span class="token punctuation">)</span>$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;demo@here.now&quot;</span> <span class="token operator">|</span> ./isemail
demo@here.now
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;demo@here.now.&quot;</span> <span class="token operator">|</span> ./isemail
$
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;demo@here.n&quot;</span> <span class="token operator">|</span> ./isemail
$
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;demo@here-now&quot;</span> <span class="token operator">|</span> ./isemail
$
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;demo.blum@here.now&quot;</span> <span class="token operator">|</span> ./isemail
demo.blum@here.now
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;rich_blum@here.now&quot;</span> <span class="token operator">|</span> ./isemail
rich_blum@here.now
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;demo/blum@here.now&quot;</span> <span class="token operator">|</span> ./isemail
$
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;demo#blum@here.now&quot;</span> <span class="token operator">|</span> ./isemail
$
$ <span class="token builtin class-name">echo</span> <span class="token string">&quot;demo*blum@here.now&quot;</span> <span class="token operator">|</span> ./isemail
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sed" tabindex="-1"><a class="header-anchor" href="#sed" aria-hidden="true">#</a> sed</h3><h4 id="åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€" aria-hidden="true">#</a> åŸºç¡€</h4><p>sedç¼–è¾‘å™¨è¢«ç§°ä½œæµç¼–è¾‘å™¨ï¼ˆstream editorï¼‰ï¼Œå’Œæ™®é€šçš„äº¤äº’å¼æ–‡æœ¬ç¼–è¾‘å™¨æ°å¥½ç›¸åã€‚åœ¨äº¤äº’å¼æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ï¼ˆæ¯”å¦‚vimï¼‰ï¼Œä½ å¯ä»¥ç”¨é”®ç›˜å‘½ä»¤æ¥äº¤äº’å¼åœ°æ’å…¥ã€åˆ é™¤æˆ–æ›¿æ¢æ•°æ®ä¸­çš„æ–‡æœ¬ã€‚</p><p>sedç¼–è¾‘å™¨ä¼šæ‰§è¡Œä¸‹åˆ—æ“ä½œ:</p><ul><li>(1) ä¸€æ¬¡ä»è¾“å…¥ä¸­è¯»å–ä¸€è¡Œæ•°æ®ã€‚</li><li>(2) æ ¹æ®æ‰€æä¾›çš„ç¼–è¾‘å™¨å‘½ä»¤åŒ¹é…æ•°æ®ã€‚</li><li>(3) æŒ‰ç…§å‘½ä»¤ä¿®æ”¹æµä¸­çš„æ•°æ®ã€‚</li><li>(4) å°†æ–°çš„æ•°æ®è¾“å‡ºåˆ° STDOUT ã€‚</li></ul><p>è¯­æ³•æ ¼å¼ï¼š</p><blockquote><p>sed options script file</p></blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>é€‰ é¡¹  		æ è¿°
-e script		åœ¨å¤„ç†è¾“å…¥æ—¶ï¼Œå°† script ä¸­æŒ‡å®šçš„å‘½ä»¤æ·»åŠ åˆ°å·²æœ‰çš„å‘½ä»¤ä¸­
-f file		åœ¨å¤„ç†è¾“å…¥æ—¶ï¼Œå°† file ä¸­æŒ‡å®šçš„å‘½ä»¤æ·»åŠ åˆ°å·²æœ‰çš„å‘½ä»¤ä¸­
-n		ä¸äº§ç”Ÿå‘½ä»¤è¾“å‡ºï¼Œä½¿ç”¨ print å‘½ä»¤æ¥å®Œæˆè¾“å‡º
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># echo &quot;This is a test&quot; | sed &#39;s/test/big test/&#39;</span>
This is big <span class="token builtin class-name">test</span>
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment">#  cat data1.txt</span>
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/dog/cat/&#39; data1.txt</span>
The quick brown fox jumps over the lazy cat.
The quick brown fox jumps over the lazy cat.
The quick brown fox jumps over the lazy cat.
The quick brown fox jumps over the lazy cat.

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -e &#39;s/brown/green/; s/dog/cat/&#39; data1.txt</span>
The quick green fox jumps over the lazy cat.
The quick green fox jumps over the lazy cat.
The quick green fox jumps over the lazy cat.
The quick green fox jumps over the lazy cat.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»æ–‡ä»¶ä¸­è¯»å– sed ç¼–è¾‘å™¨å‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat script1.sed</span>
s/brown/green/
s/fox/elephant/
s/dog/cat/
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -f script1.sed data1.txt</span>
The quick green elephant jumps over the lazy cat.
The quick green elephant jumps over the lazy cat.
The quick green elephant jumps over the lazy cat.
The quick green elephant jumps over the lazy cat.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ›¿æ¢æ ‡è®°</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data4.txt</span>
This is a <span class="token builtin class-name">test</span> of the <span class="token builtin class-name">test</span> script.
This is the second <span class="token builtin class-name">test</span> of the <span class="token builtin class-name">test</span> script.
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/test/trial/&#39; data4.txt</span>
This is a trial of the <span class="token builtin class-name">test</span> script.
This is the second trial of the <span class="token builtin class-name">test</span> script.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é»˜è®¤æƒ…å†µä¸‹å®ƒåªæ›¿æ¢æ¯è¡Œä¸­å‡ºç°çš„ç¬¬ä¸€å¤„ï¼›æ›¿æ¢æ ‡è®° <code>flags</code> ä¼šåœ¨æ›¿æ¢å‘½ä»¤å­—ç¬¦ä¸²ä¹‹åè®¾ç½®ã€‚</p><blockquote><p>s/pattern/replacement/flags</p></blockquote><p>æœ‰4ç§å¯ç”¨çš„æ›¿æ¢æ ‡è®°ï¼š</p><ul><li>æ•°å­—ï¼Œè¡¨æ˜æ–°æ–‡æœ¬å°†æ›¿æ¢ç¬¬å‡ å¤„æ¨¡å¼åŒ¹é…çš„åœ°æ–¹ï¼›</li><li>g ï¼Œè¡¨æ˜æ–°æ–‡æœ¬å°†ä¼šæ›¿æ¢æ‰€æœ‰åŒ¹é…çš„æ–‡æœ¬ï¼›</li><li>p ï¼Œè¡¨æ˜åŸå…ˆè¡Œçš„å†…å®¹è¦æ‰“å°å‡ºæ¥ï¼›æ‰“å°ä¸æ›¿æ¢å‘½ä»¤ä¸­æŒ‡å®šçš„æ¨¡å¼åŒ¹é…çš„è¡Œã€‚è¿™é€šå¸¸ä¼šå’Œ sed çš„ <code>-n</code> é€‰é¡¹ä¸€èµ·ä½¿ç”¨ï¼›å°†äºŒè€…é…åˆä½¿ç”¨çš„æ•ˆæœå°±æ˜¯åªè¾“å‡ºè¢«æ›¿æ¢å‘½ä»¤ä¿®æ”¹è¿‡çš„è¡Œã€‚</li><li>w file ï¼Œå°†æ›¿æ¢çš„ç»“æœå†™åˆ°æ–‡ä»¶ä¸­ã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/test/trial/2&#39; data4.txt</span>
This is a <span class="token builtin class-name">test</span> of the trial script.
This is the second <span class="token builtin class-name">test</span> of the trial script.

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/test/trial/g&#39; data4.txt</span>
This is a trial of the trial script.
This is the second trial of the trial script.

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat data5.txt</span>
This is a <span class="token builtin class-name">test</span> line.
This is a different line.
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed -n &#39;s/test/trial/p&#39; data5.txt</span>
This is a trial line.

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;s/test/trial/w test.txt&#39; data5.txt</span>
This is a trial line.
This is a different line.
<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># cat test.txt</span>
This is a trial line.

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ›¿æ¢å­—ç¬¦</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;s/\/bin\/bash/\/bin\/csh/&#39;</span> /etc/passwd
<span class="token function">sed</span> <span class="token string">&#39;s!/bin/bash!/bin/csh!&#39;</span> /etc/passwd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ„Ÿå¹å·è¢«ç”¨ä½œå­—ç¬¦ä¸²åˆ†éš”ç¬¦ï¼Œè¿™æ ·è·¯å¾„åå°±æ›´å®¹æ˜“é˜…è¯»å’Œç†è§£äº†ã€‚</p><h5>ä½¿ç”¨åœ°å€</h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨sedç¼–è¾‘å™¨ä¸­ä½¿ç”¨çš„å‘½ä»¤ä¼šä½œç”¨äºæ–‡æœ¬æ•°æ®çš„æ‰€æœ‰è¡Œã€‚å¦‚æœåªæƒ³å°†å‘½ä»¤ä½œç”¨äºç‰¹å®šè¡Œæˆ–æŸäº›è¡Œï¼Œåˆ™å¿…é¡»ç”¨è¡Œå¯»å€ï¼ˆline addressingï¼‰ã€‚</p><p>åœ¨sedç¼–è¾‘å™¨ä¸­æœ‰ä¸¤ç§å½¢å¼çš„è¡Œå¯»å€ï¼š</p><ul><li>ä»¥æ•°å­—å½¢å¼è¡¨ç¤ºè¡ŒåŒºé—´</li><li>ç”¨æ–‡æœ¬æ¨¡å¼æ¥è¿‡æ»¤å‡ºè¡Œ</li></ul><p>ä¸¤ç§å½¢å¼éƒ½ä½¿ç”¨ç›¸åŒçš„æ ¼å¼æ¥æŒ‡å®šåœ°å€ï¼š</p><blockquote><p>[address]command</p></blockquote><p>ä¹Ÿå¯ä»¥å°†ç‰¹å®šåœ°å€çš„å¤šä¸ªå‘½ä»¤åˆ†ç»„ï¼š</p><blockquote><p>address { command1 command2 command3 }</p></blockquote><ul><li>æ•°å­—æ–¹å¼çš„è¡Œå¯»å€ <code>M å•è¡ŒåŒ¹é…</code> ã€ <code>M,N åŒºé—´Måˆ°Nè¡Œ</code> ã€ <code>M,$ ä»æŸè¡Œå¼€å§‹çš„æ‰€æœ‰è¡Œ</code></li></ul><p>sedç¼–è¾‘å™¨ä¼šå°†æ–‡æœ¬æµä¸­çš„ç¬¬ä¸€è¡Œç¼–å·ä¸º1ï¼Œä»¥æ­¤ç±»ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;2s/dog/cat/&#39; data1.txt</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy dog

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;2,3s/dog/cat/&#39; data1.txt</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy dog

<span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;2,$s/dog/cat/&#39; data1.txt</span>
The quick brown fox jumps over the lazy dog
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy <span class="token function">cat</span>
The quick brown fox jumps over the lazy <span class="token function">cat</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä½¿ç”¨æ–‡æœ¬æ¨¡å¼è¿‡æ»¤å™¨</li></ul><p>æ ¼å¼ï¼š/pattern/command</p><p>ä¾‹å¦‚ï¼šåªä¿®æ”¹ç”¨æˆ·Samanthaçš„é»˜è®¤shellï¼Œå¯ä»¥ä½¿ç”¨ sed å‘½ä»¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">grep</span> Samantha /etc/passwd
Samantha:x:502:502::/home/Samantha:/bin/bash

<span class="token function">sed</span> <span class="token string">&#39;/Samantha/s/bash/csh/&#39;</span> /etc/passwd
root:x:0:0:root:/root:/bin/bash
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
Samantha:x:502:502::/home/Samantha:/bin/csh
Timothy:x:503:503::/home/Timothy:/bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å‘½ä»¤ç»„åˆ</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin shell<span class="token punctuation">]</span><span class="token comment"># sed &#39;2{</span>
<span class="token operator">&gt;</span> s/fox/elephant/
<span class="token operator">&gt;</span> s/dog/cat/
<span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token string">&#39; data1.txt
The quick brown fox jumps over the lazy dog.
The quick brown elephant jumps over the lazy cat.
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.

[root@admin shell]# sed &#39;</span><span class="token number">3</span>,<span class="token variable">${
&gt; s<span class="token operator">/</span>brown<span class="token operator">/</span>green<span class="token operator">/</span>
&gt; s<span class="token operator">/</span>lazy<span class="token operator">/</span>active<span class="token operator">/</span>
&gt; }</span>&#39; data1.txt
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.
The quick green fox jumps over the active dog.
The quick green fox jumps over the active dog.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ é™¤è¡Œ d</h5><p><code>M å•è¡ŒåŒ¹é…</code> ã€ <code>M,N åŒºé—´Måˆ°Nè¡Œ</code> ã€ <code>M,$ ä»æŸè¡Œå¼€å§‹çš„æ‰€æœ‰è¡Œ</code> ã€<code>ç»“å°¾å­—ç¬¦</code></p><p>å®ƒä¼šåˆ é™¤åŒ¹é…æŒ‡å®šå¯»å€æ¨¡å¼çš„æ‰€æœ‰è¡Œã€‚ä½¿ç”¨è¯¥å‘½ä»¤æ—¶è¦ç‰¹åˆ«å°å¿ƒï¼Œå¦‚æœä½ å¿˜è®°åŠ å…¥å¯»å€æ¨¡å¼çš„è¯ï¼Œæµä¸­çš„æ‰€æœ‰æ–‡æœ¬è¡Œéƒ½ä¼šè¢«åˆ é™¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data1.txt
The quick brown fox jumps over the lazy dog <span class="token number">1</span>
The quick brown fox jumps over the lazy dog <span class="token number">2</span>
The quick brown fox jumps over the lazy dog <span class="token number">3</span>
The quick brown fox jumps over the lazy dog <span class="token number">4</span>

<span class="token function">sed</span> <span class="token string">&#39;d&#39;</span> data1. <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> data1.txt

<span class="token function">sed</span> <span class="token string">&#39;1d&#39;</span> data1.txt <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> data1.txt
The quick brown fox jumps over the lazy dog <span class="token number">2</span>
The quick brown fox jumps over the lazy dog <span class="token number">3</span>
The quick brown fox jumps over the lazy dog <span class="token number">4</span>

<span class="token function">sed</span> <span class="token string">&#39;2,3d&#39;</span> data1.txt <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> data1.txt
The quick brown fox jumps over the lazy dog <span class="token number">1</span>
The quick brown fox jumps over the lazy dog <span class="token number">4</span>

<span class="token function">sed</span> <span class="token string">&#39;3,$d&#39;</span> data1.txt <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> data1.txt
The quick brown fox jumps over the lazy dog <span class="token number">1</span>
The quick brown fox jumps over the lazy dog <span class="token number">2</span>

<span class="token function">sed</span> <span class="token string">&#39;/dog 1/d&#39;</span> data1.txt <span class="token operator">&amp;&amp;</span> <span class="token function">cat</span> data1.txt
The quick brown fox jumps over the lazy dog <span class="token number">2</span>
The quick brown fox jumps over the lazy dog <span class="token number">3</span>
The quick brown fox jumps over the lazy dog <span class="token number">4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç‰¹æ®Šæƒ…å†µ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data7.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
This is line number <span class="token number">1</span> again.
This is text you want to keep.
This is the last line <span class="token keyword">in</span> the file.

<span class="token function">sed</span> <span class="token string">&#39;/1/,/3/d&#39;</span> data7.txt
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬äºŒä¸ªå‡ºç°æ•°å­—â€œ1â€çš„è¡Œå†æ¬¡è§¦å‘äº†åˆ é™¤å‘½ä»¤ï¼Œå› ä¸ºæ²¡æœ‰æ‰¾åˆ°åœæ­¢æ¨¡å¼ï¼Œæ‰€ä»¥å°±å°†æ•°æ®æµä¸­çš„å‰©ä½™è¡Œå…¨éƒ¨åˆ é™¤äº†ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æŒ‡å®šäº†ä¸€ä¸ªä»æœªåœ¨æ–‡æœ¬ä¸­å‡ºç°çš„åœæ­¢æ¨¡å¼ï¼Œæ˜¾ç„¶ä¼šå‡ºç°å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚</p><blockquote><p>$ sed &#39;/1/,/5/d&#39; data7.txt</p></blockquote><h5>æ’å…¥å’Œé™„åŠ æ–‡æœ¬ i a</h5><ul><li>æ’å…¥ï¼ˆ insert ï¼‰å‘½ä»¤ï¼ˆ i ï¼‰ä¼šåœ¨æŒ‡å®šè¡Œå‰å¢åŠ ä¸€ä¸ªæ–°è¡Œï¼›</li><li>é™„åŠ ï¼ˆ append ï¼‰å‘½ä»¤ï¼ˆ a ï¼‰ä¼šåœ¨æŒ‡å®šè¡Œåå¢åŠ ä¸€ä¸ªæ–°è¡Œã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;Test Line 2&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;i\Test Line 1&#39;</span>
Test Line <span class="token number">1</span>
Test Line <span class="token number">2</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;Test Line 2&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;i\Test Line 3&#39;</span>
Test Line <span class="token number">2</span>
Test Line <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ä¸€ä¸ªæ–°è¡Œæ’å…¥åˆ°æ•°æ®æµç¬¬ä¸‰è¡Œå‰ï¼Œèµ·å§‹ä½ç½®å¢åŠ ä¸€ä¸ªæ–°è¡Œ <code>1i</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;3i\This is an inserted line.&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is an inserted line.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†ä¸€ä¸ªæ–°è¡Œé™„åŠ åˆ°æ•°æ®æµä¸­ç¬¬ä¸‰è¡Œå</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;3a\This is an appended line.&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is an appended line.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å°†æ–°è¡Œé™„åŠ åˆ°æ•°æ®æµçš„æœ«å°¾</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;$a\This is an appended line.&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
This is an appended line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ä¿®æ”¹è¡Œ c</h5><p>ä¿®æ”¹ï¼ˆ change ï¼‰å‘½ä»¤å…è®¸ä¿®æ”¹æ•°æ®æµä¸­æ•´è¡Œæ–‡æœ¬çš„å†…å®¹ã€‚å®ƒè·Ÿæ’å…¥å’Œé™„åŠ å‘½ä»¤çš„å·¥ä½œæœºåˆ¶ä¸€æ ·ï¼Œä½ å¿…é¡»åœ¨ sed å‘½ä»¤ä¸­å•ç‹¬æŒ‡å®šæ–°è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;3c\This is a changed line of text.&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is a changed line of text.
This is line number <span class="token number">4</span>.

<span class="token function">sed</span> <span class="token string">&#39;/number 3/c\This is a changed line of text.&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is a changed line of text.
This is line number <span class="token number">4</span>.

<span class="token comment">#ä½ å¯ä»¥åœ¨ä¿®æ”¹å‘½ä»¤ä¸­ä½¿ç”¨åœ°å€åŒºé—´ï¼Œä½†ç»“æœæœªå¿…å¦‚æ„¿ã€‚</span>
<span class="token function">sed</span> <span class="token string">&#39;2,3c\This is a new line of text.&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is a new line of text.
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>è½¬æ¢å‘½ä»¤ y</h5><p>è½¬æ¢ï¼ˆ transform ï¼‰å‘½ä»¤ï¼ˆ y ï¼‰æ˜¯å”¯ä¸€å¯ä»¥å¤„ç†å•ä¸ªå­—ç¬¦çš„sedç¼–è¾‘å™¨å‘½ä»¤ã€‚è½¬æ¢å‘½ä»¤æ ¼å¼å¦‚ä¸‹ã€‚</p><blockquote><p>[address]y/inchars/outchars/</p></blockquote><p>è½¬æ¢å‘½ä»¤ä¼šå¯¹ inchars å’Œ outchars å€¼è¿›è¡Œä¸€å¯¹ä¸€çš„æ˜ å°„ã€‚ inchars ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¼šè¢«è½¬æ¢ä¸º outchars ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œä»¥æ­¤ç±»æ¨ã€‚è¿™ä¸ªæ˜ å°„è¿‡ç¨‹ä¼šä¸€ç›´æŒç»­åˆ°å¤„ç†å®ŒæŒ‡å®šå­—ç¬¦ï¼›å¦‚æœ inchars å’Œ outchars çš„é•¿åº¦ä¸åŒï¼Œåˆ™sedç¼–è¾‘å™¨ä¼šäº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;y/123/789/&#39;</span> data8.txt
This is line number <span class="token number">7</span>.
This is line number <span class="token number">8</span>.
This is line number <span class="token number">9</span>.
This is line number <span class="token number">4</span>.
This is line number <span class="token number">7</span> again.
This is yet another line.
This is the last line <span class="token keyword">in</span> the file.

<span class="token builtin class-name">echo</span> <span class="token string">&quot;This 1 is a test of 1 try.&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;y/123/456/&#39;</span>
This <span class="token number">4</span> is a <span class="token builtin class-name">test</span> of <span class="token number">4</span> try.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ‰“å° p = l</h5><p>æ‰“å°æ•°æ®æµä¸­çš„ä¿¡æ¯ï¼š</p><ul><li>p å‘½ä»¤ç”¨æ¥æ‰“å°æ–‡æœ¬è¡Œï¼›</li><li>= å‘½ä»¤ç”¨æ¥æ‰“å°è¡Œå·ï¼›</li><li>l ï¼ˆå°å†™çš„Lï¼‰å‘½ä»¤ç”¨æ¥åˆ—å‡ºè¡Œã€‚</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;this is a test&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;p&#39;</span>
this is a <span class="token builtin class-name">test</span>
this is a <span class="token builtin class-name">test</span>

<span class="token function">cat</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/number 3/p&#39;</span> data6.txt
This is line number <span class="token number">3</span>.

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;2,3p&#39;</span> data6.txt
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.

<span class="token comment">##ä¿®æ”¹è¡Œä¹‹å‰æ˜¾ç¤ºè¯¥è¡Œ</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/3/{
&gt; p
&gt; s/line/test/p
&gt; }&#39;</span> data6.txt
This is line number <span class="token number">3</span>.
This is <span class="token builtin class-name">test</span> number <span class="token number">3</span>.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data1.txt
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.
The quick brown fox jumps over the lazy dog.

<span class="token function">sed</span> <span class="token string">&#39;=&#39;</span> data1.txt
<span class="token number">1</span>
The quick brown fox jumps over the lazy dog.
<span class="token number">2</span>
The quick brown fox jumps over the lazy dog.
<span class="token number">3</span>
The quick brown fox jumps over the lazy dog.
<span class="token number">4</span>
The quick brown fox jumps over the lazy dog.


<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/number 4/{
&gt; =
&gt; p
&gt; }&#39;</span> data6.txt
<span class="token number">4</span>
This is line number <span class="token number">4</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data9.txt
This line contains tabs.

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;l&#39;</span> data9.txt
This<span class="token punctuation">\</span>tline<span class="token punctuation">\</span>tcontains<span class="token punctuation">\</span>ttabs.
--------------------
--------------------
<span class="token function">cat</span> data10.txt
This line contains an escape character.

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;l&#39;</span> data10.txt
This line contains an escape character. <span class="token punctuation">\</span>a$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ä½¿ç”¨ sed å¤„ç†æ–‡ä»¶ w</h5><ul><li>å†™å…¥æ–‡ä»¶</li></ul><p>w å‘½ä»¤ç”¨æ¥å‘æ–‡ä»¶å†™å…¥è¡Œã€‚è¯¥å‘½ä»¤çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><p>[address]w filename</p><p><code>filename</code> å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼›ç”¨æˆ·éƒ½å¿…é¡»æœ‰æ–‡ä»¶çš„å†™æƒé™ã€‚</p><p>å°†æ•°æ®æµä¸­çš„å‰ä¸¤è¡Œæ‰“å°åˆ°ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;1,2w test.txt&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.

<span class="token function">cat</span> test.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœè¦æ ¹æ®ä¸€äº›å…¬ç”¨çš„æ–‡æœ¬å€¼ä»ä¸»æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä»½æ•°æ®æ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data11.txt
Blum, R Browncoat
McGuiness, A Alliance
Bresnahan, C Browncoat
Harken, C Alliance

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/Browncoat/w Browncoats.txt&#39;</span> data11.txt

<span class="token function">cat</span> Browncoats.txt
Blum, R Browncoat
Bresnahan, C Browncoat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ä»æ–‡ä»¶è¯»å–æ•°æ® r</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data12.txt
This is an added line.
This is the second added line.

<span class="token function">sed</span> <span class="token string">&#39;3r data12.txt&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is an added line.
This is the second added line.
This is line number <span class="token number">4</span>.

<span class="token function">sed</span> <span class="token string">&#39;/number 2/r data12.txt&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is an added line.
This is the second added line.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.

<span class="token function">sed</span> <span class="token string">&#39;$r data12.txt&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
This is an added line.
This is the second added line.

<span class="token function">sed</span> <span class="token string">&#39;1r data12.txt&#39;</span> data6.txt
This is line number <span class="token number">1</span>.
This is line number <span class="token number">2</span>.
This is line number <span class="token number">3</span>.
This is line number <span class="token number">4</span>.
This is an added line.
This is the second added line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¯»å–å‘½ä»¤çš„å¦ä¸€ä¸ªå¾ˆé…·çš„ç”¨æ³•æ˜¯å’Œåˆ é™¤å‘½ä»¤é…åˆä½¿ç”¨ï¼šåˆ©ç”¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­çš„æ•°æ®æ¥æ›¿æ¢æ–‡ä»¶ä¸­çš„å ä½æ–‡æœ¬ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå‡å®šä½ æœ‰ä¸€ä»½å¥—ç”¨ä¿¡ä»¶ä¿å­˜åœ¨æ–‡æœ¬æ–‡ä»¶ä¸­ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> notice.std
Would the following people:
LIST
please report to the ship&#39;s captain.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¥—ç”¨ä¿¡ä»¶å°†é€šç”¨å ä½æ–‡æœ¬ LIST æ”¾åœ¨äººç‰©åå•çš„ä½ç½®ã€‚è¦åœ¨å ä½æ–‡æœ¬åæ’å…¥åå•ï¼Œåªéœ€è¯»å–å‘½ä»¤å°±è¡Œäº†ã€‚ä½†è¿™æ ·çš„è¯ï¼Œå ä½æ–‡æœ¬ä»ç„¶ä¼šç•™åœ¨è¾“å‡ºä¸­ã€‚è¦åˆ é™¤å ä½æ–‡æœ¬çš„è¯ï¼Œä½ å¯ä»¥ç”¨åˆ é™¤å‘½ä»¤ã€‚ç»“æœå¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;/LIST/{
&gt; r data11.txt
&gt; d
&gt; }&#39;</span> notice.std
Would the following people:
Blum, R Browncoat
McGuiness, A Alliance
Bresnahan, C Browncoat
Harken, C Alliance
please report to the ship&#39;s captain.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨å ä½æ–‡æœ¬å·²ç»è¢«æ›¿æ¢æˆäº†æ•°æ®æ–‡ä»¶ä¸­çš„åå•ã€‚</p><h4 id="å¤šè¡Œå‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#å¤šè¡Œå‘½ä»¤" aria-hidden="true">#</a> å¤šè¡Œå‘½ä»¤</h4><p>å¤„ç†å¤šè¡Œæ–‡æœ¬çš„ç‰¹æ®Šå‘½ä»¤ï¼š</p><ul><li>N ï¼šå°†æ•°æ®æµä¸­çš„ä¸‹ä¸€è¡ŒåŠ è¿›æ¥åˆ›å»ºä¸€ä¸ªå¤šè¡Œç»„ï¼ˆmultiline groupï¼‰æ¥å¤„ç†ã€‚</li><li>D ï¼šåˆ é™¤å¤šè¡Œç»„ä¸­çš„ä¸€è¡Œ</li><li>P ï¼šæ‰“å°å¤šè¡Œç»„ä¸­çš„ä¸€è¡Œã€‚</li></ul><h5>next å‘½ä»¤</h5><p>é¦–å…ˆéœ€è¦çœ‹ä¸€ä¸‹å•è¡Œç‰ˆæœ¬çš„ next å‘½ä»¤æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œç„¶åå°±æ¯” è¾ƒå®¹æ˜“ç†è§£å¤šè¡Œç‰ˆæœ¬çš„ next å‘½ä»¤æ˜¯å¦‚ä½•æ“ä½œçš„äº†ã€‚</p><ul><li>1ã€å•è¡Œçš„ next å‘½ä»¤ <code>n</code></li></ul><p>å°å†™çš„ n å‘½ä»¤ä¼šå‘Šè¯‰sedç¼–è¾‘å™¨ç§»åŠ¨åˆ°æ•°æ®æµä¸­çš„ä¸‹ä¸€æ–‡æœ¬è¡Œï¼Œè€Œä¸ç”¨é‡æ–°å›åˆ°å‘½ä»¤çš„æœ€å¼€å§‹å†æ‰§è¡Œä¸€éã€‚è®°ä½ï¼Œé€šå¸¸sedç¼–è¾‘å™¨åœ¨ç§»åŠ¨åˆ°æ•°æ®æµä¸­çš„ä¸‹ä¸€æ–‡æœ¬è¡Œä¹‹å‰ï¼Œä¼šåœ¨å½“å‰è¡Œä¸Šæ‰§è¡Œå®Œæ‰€æœ‰å®šä¹‰å¥½çš„å‘½ä»¤ã€‚å•è¡Œ next å‘½ä»¤æ”¹å˜äº†è¿™ä¸ªæµç¨‹ã€‚</p><p>è¿™å¬èµ·æ¥å¯èƒ½æœ‰äº›å¤æ‚ï¼Œæ²¡é”™ï¼Œæœ‰æ—¶ç¡®å®æ˜¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ æœ‰ä¸ªæ•°æ®æ–‡ä»¶ï¼Œå…±æœ‰5è¡Œå†…å®¹ï¼Œå…¶ä¸­çš„ä¸¤è¡Œæ˜¯ç©ºçš„ã€‚ç›®æ ‡æ˜¯åˆ é™¤é¦–è¡Œä¹‹åçš„ç©ºç™½è¡Œï¼Œè€Œç•™ä¸‹æœ€åä¸€è¡Œä¹‹å‰çš„ç©ºç™½è¡Œã€‚å¦‚æœå†™ä¸€ä¸ªåˆ æ‰ç©ºç™½è¡Œçš„sedè„šæœ¬ï¼Œä½ ä¼šåˆ æ‰ä¸¤ä¸ªç©ºç™½è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data1.log
This is the header line.

This is a data line.

This is the last line.
--------------------------
<span class="token function">sed</span> <span class="token string">&#39;/^$/d&#39;</span> data1.log
This is the header line.
This is a data line.
This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è§£å†³åŠæ³•æ˜¯ç”¨ n å‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;/header/{n ; d}&#39;</span> data1.log
This is the header line.
This is a data line.

This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åˆå¹¶æ–‡æœ¬è¡Œ <code>N</code></li></ul><p>äº†è§£äº†å•è¡Œç‰ˆçš„ next å‘½ä»¤ï¼Œç°åœ¨æ¥çœ‹çœ‹å¤šè¡Œç‰ˆçš„ã€‚å•è¡Œ next å‘½ä»¤ä¼šå°†æ•°æ®æµä¸­çš„ä¸‹ä¸€æ–‡æœ¬è¡Œç§»åŠ¨åˆ°sedç¼–è¾‘å™¨çš„å·¥ä½œç©ºé—´ï¼ˆç§°ä¸ºæ¨¡å¼ç©ºé—´ï¼‰ã€‚å¤šè¡Œç‰ˆæœ¬çš„ next å‘½ä»¤ï¼ˆç”¨å¤§å†™Nï¼‰ä¼šå°†ä¸‹ä¸€æ–‡æœ¬è¡Œæ·»åŠ åˆ°æ¨¡å¼ç©ºé—´ä¸­å·²æœ‰çš„æ–‡æœ¬åã€‚</p><p>è¿™æ ·çš„ä½œç”¨æ˜¯å°†æ•°æ®æµä¸­çš„ä¸¤ä¸ªæ–‡æœ¬è¡Œåˆå¹¶åˆ°åŒä¸€ä¸ªæ¨¡å¼ç©ºé—´ä¸­ã€‚æ–‡æœ¬è¡Œä»ç„¶ç”¨æ¢è¡Œç¬¦åˆ†éš”ï¼Œä½†sedç¼–è¾‘å™¨ç°åœ¨ä¼šå°†ä¸¤è¡Œæ–‡æœ¬å½“æˆä¸€è¡Œæ¥å¤„ç†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data2.txt
This is the header line.
This is the first data line.
This is the second data line.
This is the last line.

<span class="token function">sed</span> <span class="token string">&#39;/first/{ N ; s/\n/ / }&#39;</span> data2.txt
This is the header line.
This is the first data line. This is the second data line.
This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>sedç¼–è¾‘å™¨è„šæœ¬æŸ¥æ‰¾å«æœ‰å•è¯firstçš„é‚£è¡Œæ–‡æœ¬ã€‚æ‰¾åˆ°è¯¥è¡Œåï¼Œå®ƒä¼šç”¨ N å‘½ä»¤å°†ä¸‹ä¸€è¡Œåˆå¹¶åˆ°é‚£è¡Œï¼Œç„¶åç”¨æ›¿æ¢å‘½ä»¤ s å°†æ¢è¡Œç¬¦æ›¿æ¢æˆç©ºæ ¼ã€‚ç»“æœæ˜¯ï¼Œæ–‡æœ¬æ–‡ä»¶ä¸­çš„ä¸¤è¡Œåœ¨sedç¼–è¾‘å™¨çš„è¾“å‡ºä¸­æˆäº†ä¸€è¡Œã€‚</p></blockquote><p>å¦‚æœè¦åœ¨æ•°æ®æ–‡ä»¶ä¸­æŸ¥æ‰¾ä¸€ä¸ªå¯èƒ½ä¼šåˆ†æ•£åœ¨ä¸¤è¡Œä¸­çš„æ–‡æœ¬çŸ­è¯­çš„è¯ï¼Œè¿™æ˜¯ä¸ªå¾ˆå®ç”¨çš„åº”ç”¨ç¨‹åºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data3.txt
On Tuesday, the Linux System
Administrator<span class="token string">&#39;s group meeting will be held.
All System Administrators should attend.
Thank you for your attendance.

sed &#39;</span>N <span class="token punctuation">;</span> s/System Administrator/Desktop User/<span class="token string">&#39; data3.txt
On Tuesday, the Linux System
Administrator&#39;</span>s group meeting will be held.
All Desktop Users should attend.
Thank you <span class="token keyword">for</span> your attendance.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ›¿æ¢å‘½ä»¤ä¼šåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­æŸ¥æ‰¾ç‰¹å®šçš„åŒè¯çŸ­è¯­ System Administrator ã€‚å¦‚æœçŸ­è¯­åœ¨ä¸€è¡Œä¸­çš„è¯ï¼Œäº‹æƒ…å¾ˆå¥½å¤„ç†ï¼Œæ›¿æ¢å‘½ä»¤å¯ä»¥ç›´æ¥æ›¿æ¢æ–‡æœ¬ã€‚ä½†å¦‚æœçŸ­è¯­åˆ†æ•£åœ¨ä¸¤è¡Œä¸­çš„è¯ï¼Œæ›¿æ¢å‘½ä»¤å°±æ²¡æ³•è¯†åˆ«åŒ¹é…çš„æ¨¡å¼äº†ã€‚ è¿™æ—¶ N å‘½ä»¤å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;N ; s/System.Administrator/Desktop User/&#39;</span> data3.txt
On Tuesday, the Linux Desktop User&#39;s group meeting will be held.
All Desktop Users should attend.
Thank you <span class="token keyword">for</span> your attendance.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç”¨ N å‘½ä»¤å°†å‘ç°ç¬¬ä¸€ä¸ªå•è¯çš„é‚£è¡Œå’Œä¸‹ä¸€è¡Œåˆå¹¶åï¼Œå³ä½¿çŸ­è¯­å†…å‡ºç°äº†æ¢è¡Œï¼Œä½ ä»ç„¶å¯ä»¥æ‰¾åˆ°å®ƒã€‚ <strong>æ³¨æ„</strong>ï¼Œæ›¿æ¢å‘½ä»¤åœ¨ System å’Œ Administrator ä¹‹é—´ç”¨äº†é€šé…ç¬¦æ¨¡å¼ï¼ˆ.ï¼‰æ¥åŒ¹é…ç©ºæ ¼å’Œæ¢è¡Œç¬¦è¿™ä¸¤ç§æƒ…å†µã€‚ä½†å½“å®ƒåŒ¹é…äº†æ¢è¡Œç¬¦æ—¶ï¼Œå®ƒå°±ä»å­—ç¬¦ä¸²ä¸­åˆ æ‰äº†æ¢è¡Œç¬¦ï¼Œå¯¼è‡´ä¸¤è¡Œåˆå¹¶æˆä¸€è¡Œã€‚è¿™å¯èƒ½ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚</p></blockquote><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨sedç¼–è¾‘å™¨è„šæœ¬ä¸­ç”¨ä¸¤ä¸ªæ›¿æ¢å‘½ä»¤ï¼šä¸€ä¸ªç”¨æ¥åŒ¹é…çŸ­è¯­å‡ºç°åœ¨å¤šè¡Œä¸­çš„æƒ…å†µï¼Œä¸€ä¸ªç”¨æ¥åŒ¹é…çŸ­è¯­å‡ºç°åœ¨å•è¡Œä¸­çš„æƒ…å†µã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;N
&gt; s/System\nAdministrator/Desktop\nUser/
&gt; s/System Administrator/Desktop User/
&gt; &#39;</span> data3.txt
On Tuesday, the Linux Desktop
User&#39;s group meeting will be held.
All Desktop Users should attend.
Thank you <span class="token keyword">for</span> your attendance.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä½†è¿™ä¸ªè„šæœ¬ä¸­ä»æœ‰ä¸ªå°é—®é¢˜ã€‚è¿™ä¸ªè„šæœ¬æ€»æ˜¯åœ¨æ‰§è¡Œsedç¼–è¾‘å™¨å‘½ä»¤å‰å°†ä¸‹ä¸€è¡Œæ–‡æœ¬è¯»å…¥åˆ°æ¨¡å¼ç©ºé—´ã€‚å½“å®ƒåˆ°äº†æœ€åä¸€è¡Œæ–‡æœ¬æ—¶ï¼Œå°±æ²¡æœ‰ä¸‹ä¸€è¡Œå¯è¯»äº†ï¼Œæ‰€ä»¥ N å‘½ä»¤ä¼šå«sedç¼–è¾‘å™¨åœæ­¢ã€‚å¦‚æœè¦åŒ¹é…çš„æ–‡æœ¬æ­£å¥½åœ¨æ•°æ®æµçš„æœ€åä¸€è¡Œä¸Šï¼Œå‘½ä»¤å°±ä¸ä¼šå‘ç°è¦åŒ¹é…çš„æ•°æ®ã€‚</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data4.txt
On Tuesday, the Linux System
Administrator<span class="token string">&#39;s group meeting will be held.
All System Administrators should attend.

sed &#39;</span>N
<span class="token operator">&gt;</span> s/System<span class="token punctuation">\</span>nAdministrator/Desktop<span class="token punctuation">\</span>nUser/
<span class="token operator">&gt;</span> s/System Administrator/Desktop User/
<span class="token operator">&gt;</span> <span class="token string">&#39; data4.txt
On Tuesday, the Linux Desktop
User&#39;</span>s group meeting will be held.
All System Administrators should attend.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº System Administrator æ–‡æœ¬å‡ºç°åœ¨äº†æ•°æ®æµä¸­çš„æœ€åä¸€è¡Œï¼Œ N å‘½ä»¤ä¼šé”™è¿‡å®ƒï¼Œå› ä¸ºæ²¡æœ‰å…¶ä»–è¡Œå¯è¯»å…¥åˆ°æ¨¡å¼ç©ºé—´è·Ÿè¿™è¡Œåˆå¹¶ã€‚ä½ å¯ä»¥è½»æ¾åœ°è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å°†å•è¡Œå‘½ä»¤æ”¾åˆ° N å‘½ä»¤å‰é¢ï¼Œå¹¶å°†å¤šè¡Œå‘½ä»¤æ”¾åˆ° N å‘½ä»¤åé¢ï¼Œåƒè¿™æ ·ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;
&gt; s/System Administrator/Desktop User/
&gt; N
&gt; s/System\nAdministrator/Desktop\nUser/
&gt; &#39;</span> data4.txt
On Tuesday, the Linux Desktop
User&#39;s group meeting will be held.
All Desktop Users should attend.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>å¤šè¡Œåˆ é™¤å‘½ä»¤ D</h5><p>å•è¡Œåˆ é™¤å‘½ä»¤ï¼ˆ d ï¼‰ã€‚sedç¼–è¾‘å™¨ç”¨å®ƒæ¥åˆ é™¤æ¨¡å¼ç©ºé—´ä¸­çš„å½“å‰è¡Œã€‚ä½†å’Œ N å‘½ä»¤ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨å•è¡Œåˆ é™¤å‘½ä»¤å°±è¦å°å¿ƒäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;N ; /System\nAdministrator/d&#39;</span> data4.txt
All System Administrators should attend.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ é™¤å‘½ä»¤ä¼šåœ¨ä¸åŒçš„è¡Œä¸­æŸ¥æ‰¾å•è¯Systemå’ŒAdministratorï¼Œç„¶ååœ¨æ¨¡å¼ç©ºé—´ä¸­å°†ä¸¤è¡Œéƒ½åˆ æ‰ã€‚è¿™æœªå¿…æ˜¯ä½ æƒ³è¦çš„ç»“æœã€‚</p><p>sedç¼–è¾‘å™¨æä¾›äº†å¤šè¡Œåˆ é™¤å‘½ä»¤ D ï¼Œå®ƒåªåˆ é™¤æ¨¡å¼ç©ºé—´ä¸­çš„ç¬¬ä¸€è¡Œã€‚è¯¥å‘½ä»¤ä¼šåˆ é™¤åˆ°æ¢è¡Œç¬¦ï¼ˆå«æ¢è¡Œç¬¦ï¼‰ä¸ºæ­¢çš„æ‰€æœ‰å­—ç¬¦ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;N ; /System\nAdministrator/D&#39;</span> data4.txt
Administrator&#39;s group meeting will be held.
All System Administrators should attend.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ–‡æœ¬çš„ç¬¬äºŒè¡Œè¢« N å‘½ä»¤åŠ åˆ°äº†æ¨¡å¼ç©ºé—´ï¼Œä½†ä»ç„¶å®Œå¥½ã€‚å¦‚æœéœ€è¦åˆ æ‰ç›®æ ‡æ•°æ®å­—ç¬¦ä¸²æ‰€åœ¨è¡Œçš„å‰ä¸€æ–‡æœ¬è¡Œï¼Œå®ƒèƒ½æ´¾å¾—ä¸Šç”¨åœºã€‚</p><p>è¿™é‡Œæœ‰ä¸ªä¾‹å­ï¼Œå®ƒä¼šåˆ é™¤æ•°æ®æµä¸­å‡ºç°åœ¨ç¬¬ä¸€è¡Œå‰çš„ç©ºç™½è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data5.txt

This is the header line.
This is a data line.

This is the last line.

<span class="token function">sed</span> <span class="token string">&#39;/^$/{N ; /header/D}&#39;</span> data5.txt
This is the header line.
This is a data line.

This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>sedç¼–è¾‘å™¨è„šæœ¬ä¼šæŸ¥æ‰¾ç©ºç™½è¡Œï¼Œç„¶åç”¨ N å‘½ä»¤æ¥å°†ä¸‹ä¸€æ–‡æœ¬è¡Œæ·»åŠ åˆ°æ¨¡å¼ç©ºé—´ã€‚å¦‚æœæ–°çš„æ¨¡å¼ç©ºé—´å†…å®¹å«æœ‰å•è¯headerï¼Œåˆ™ D å‘½ä»¤ä¼šåˆ é™¤æ¨¡å¼ç©ºé—´ä¸­çš„ç¬¬ä¸€è¡Œã€‚å¦‚æœä¸ç»“åˆä½¿ç”¨ N å‘½ä»¤å’Œ D å‘½ä»¤ï¼Œå°±ä¸å¯èƒ½åœ¨ä¸åˆ é™¤å…¶ä»–ç©ºç™½è¡Œçš„æƒ…å†µä¸‹åªåˆ é™¤ç¬¬ä¸€ä¸ªç©ºç™½è¡Œã€‚</p></blockquote><h5>å¤šè¡Œæ‰“å°å‘½ä»¤ P</h5><p>å®ƒåªæ‰“å°å¤šè¡Œæ¨¡å¼ç©ºé—´ä¸­çš„ç¬¬ä¸€è¡Œã€‚è¿™åŒ…æ‹¬æ¨¡å¼ç©ºé—´ä¸­ç›´åˆ°æ¢è¡Œç¬¦ä¸ºæ­¢çš„æ‰€æœ‰å­—ç¬¦ã€‚</p><p>ç”¨ -n é€‰é¡¹æ¥é˜»æ­¢è„šæœ¬è¾“å‡ºæ—¶ï¼Œå®ƒå’Œæ˜¾ç¤ºæ–‡æœ¬çš„å•è¡Œ p å‘½ä»¤çš„ç”¨æ³•å¤§åŒå°å¼‚ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;N ; /System\nAdministrator/P&#39;</span> data3.txt
On Tuesday, the Linux System
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“å¤šè¡ŒåŒ¹é…å‡ºç°æ—¶ï¼Œ P å‘½ä»¤åªä¼šæ‰“å°æ¨¡å¼ç©ºé—´ä¸­çš„ç¬¬ä¸€è¡Œã€‚å¤šè¡Œ P å‘½ä»¤çš„å¼ºå¤§ä¹‹å¤„åœ¨å’Œ N å‘½ä»¤åŠ D å‘½ä»¤ç»„åˆä½¿ç”¨æ—¶æ‰èƒ½æ˜¾ç°å‡ºæ¥ã€‚</p><p>D å‘½ä»¤çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºå¼ºåˆ¶sedç¼–è¾‘å™¨è¿”å›åˆ°è„šæœ¬çš„èµ·å§‹å¤„ï¼Œå¯¹åŒä¸€æ¨¡å¼ç©ºé—´ä¸­çš„å†…å®¹é‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼ˆå®ƒä¸ä¼šä»æ•°æ®æµä¸­è¯»å–æ–°çš„æ–‡æœ¬è¡Œï¼‰ã€‚åœ¨å‘½ä»¤è„šæœ¬ä¸­åŠ å…¥ N å‘½ä»¤ï¼Œä½ å°±èƒ½å•æ­¥æ‰«è¿‡æ•´ä¸ªæ¨¡å¼ç©ºé—´ï¼Œå°†å¤šè¡Œä¸€èµ·åŒ¹é…ã€‚</p><p>æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ P å‘½ä»¤æ‰“å°å‡ºç¬¬ä¸€è¡Œï¼Œç„¶åç”¨ D å‘½ä»¤åˆ é™¤ç¬¬ä¸€è¡Œå¹¶ç»•å›åˆ°è„šæœ¬çš„èµ·å§‹å¤„ã€‚ä¸€æ—¦è¿”å›ï¼Œ N å‘½ä»¤ä¼šè¯»å–ä¸‹ä¸€è¡Œæ–‡æœ¬å¹¶é‡æ–°å¼€å§‹è¿™ä¸ªè¿‡ç¨‹ã€‚è¿™ä¸ªå¾ªç¯ä¼šä¸€ç›´ç»§ç»­ä¸‹å»ï¼Œç›´åˆ°æ•°æ®æµç»“æŸã€‚</p><h4 id="ä¿æŒç©ºé—´" tabindex="-1"><a class="header-anchor" href="#ä¿æŒç©ºé—´" aria-hidden="true">#</a> ä¿æŒç©ºé—´</h4><p>æ¨¡å¼ç©ºé—´ï¼ˆpattern spaceï¼‰æ˜¯ä¸€å—æ´»è·ƒçš„ç¼“å†²åŒºï¼Œåœ¨sedç¼–è¾‘å™¨æ‰§è¡Œå‘½ä»¤æ—¶å®ƒä¼šä¿å­˜å¾…æ£€æŸ¥çš„æ–‡æœ¬ã€‚ä½†å®ƒå¹¶ä¸æ˜¯sedç¼–è¾‘å™¨ä¿å­˜æ–‡æœ¬çš„å”¯ä¸€ç©ºé—´ã€‚</p><p>sedç¼–è¾‘å™¨æœ‰å¦ä¸€å—ç§°ä½œä¿æŒç©ºé—´ï¼ˆhold spaceï¼‰çš„ç¼“å†²åŒºåŸŸã€‚åœ¨å¤„ç†æ¨¡å¼ç©ºé—´ä¸­çš„æŸäº›è¡Œæ—¶ï¼Œå¯ä»¥ç”¨ä¿æŒç©ºé—´æ¥ä¸´æ—¶ä¿å­˜ä¸€äº›è¡Œã€‚æœ‰5æ¡å‘½ä»¤å¯ç”¨æ¥æ“ä½œä¿æŒç©ºé—´</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>å‘½ ä»¤ 		æ è¿°
h		å°†æ¨¡å¼ç©ºé—´å¤åˆ¶åˆ°ä¿æŒç©ºé—´
H		å°†æ¨¡å¼ç©ºé—´é™„åŠ åˆ°ä¿æŒç©ºé—´
g		å°†ä¿æŒç©ºé—´å¤åˆ¶åˆ°æ¨¡å¼ç©ºé—´
G		å°†ä¿æŒç©ºé—´é™„åŠ åˆ°æ¨¡å¼ç©ºé—´
x		äº¤æ¢æ¨¡å¼ç©ºé—´å’Œä¿æŒç©ºé—´çš„å†…å®¹
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™äº›å‘½ä»¤ç”¨æ¥å°†æ–‡æœ¬ä»æ¨¡å¼ç©ºé—´å¤åˆ¶åˆ°ä¿æŒç©ºé—´ã€‚è¿™å¯ä»¥æ¸…ç©ºæ¨¡å¼ç©ºé—´æ¥åŠ è½½å…¶ä»–è¦å¤„ç†çš„å­—ç¬¦ä¸²ã€‚</p><p>é€šå¸¸ï¼Œåœ¨ä½¿ç”¨ h æˆ– H å‘½ä»¤å°†å­—ç¬¦ä¸²ç§»åŠ¨åˆ°ä¿æŒç©ºé—´åï¼Œæœ€ç»ˆè¿˜è¦ç”¨ g ã€ G æˆ– x å‘½ä»¤å°†ä¿å­˜çš„å­—ç¬¦ä¸²ç§»å›æ¨¡å¼ç©ºé—´ï¼ˆå¦åˆ™ï¼Œä½ å°±ä¸ç”¨åœ¨ä¸€å¼€å§‹è€ƒè™‘ä¿å­˜å®ƒä»¬äº†ï¼‰ã€‚</p><p>ç”±äºæœ‰ä¸¤ä¸ªç¼“å†²åŒºåŸŸï¼Œå¼„æ˜ç™½å“ªè¡Œæ–‡æœ¬åœ¨å“ªä¸ªç¼“å†²åŒºåŸŸæœ‰æ—¶ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚è¿™é‡Œæœ‰ä¸ªç®€çŸ­çš„ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•ç”¨ h å’Œ g å‘½ä»¤æ¥å°†æ•°æ®åœ¨sedç¼–è¾‘å™¨ç¼“å†²ç©ºé—´ä¹‹é—´ç§»åŠ¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data2.txt
This is the header line.
This is the first data line.
This is the second data line.
This is the last line.

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/first/ {h ; p ; n ; p ; g ; p }&#39;</span> data2.txt
This is the first data line.
This is the second data line.
This is the first data line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æˆ‘ä»¬æ¥ä¸€æ­¥ä¸€æ­¥çœ‹ä¸Šé¢è¿™ä¸ªä»£ç ä¾‹å­ï¼š</p><ul><li><p>(1) sedè„šæœ¬åœ¨åœ°å€ä¸­ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¿‡æ»¤å‡ºå«æœ‰å•è¯firstçš„è¡Œï¼›</p></li><li><p>(2) å½“å«æœ‰å•è¯firstçš„è¡Œå‡ºç°æ—¶ï¼Œ h å‘½ä»¤å°†è¯¥è¡Œæ”¾åˆ°ä¿æŒç©ºé—´ï¼›</p></li><li><p>(3) p å‘½ä»¤æ‰“å°æ¨¡å¼ç©ºé—´ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªæ•°æ®è¡Œçš„å†…å®¹ï¼›</p></li><li><p>(4) n å‘½ä»¤æå–æ•°æ®æµä¸­çš„ä¸‹ä¸€è¡Œï¼ˆ This is the second data line ï¼‰ï¼Œå¹¶å°†å®ƒæ”¾åˆ°æ¨¡å¼ç©ºé—´ï¼›</p></li><li><p>(5) p å‘½ä»¤æ‰“å°æ¨¡å¼ç©ºé—´çš„å†…å®¹ï¼Œç°åœ¨æ˜¯ç¬¬äºŒä¸ªæ•°æ®è¡Œï¼›</p></li><li><p>(6) g å‘½ä»¤å°†ä¿æŒç©ºé—´çš„å†…å®¹ï¼ˆ This is the first data line ï¼‰æ”¾å›æ¨¡å¼ç©ºé—´ï¼Œæ›¿æ¢å½“å‰æ–‡æœ¬ï¼›</p></li><li><p>(7) p å‘½ä»¤æ‰“å°æ¨¡å¼ç©ºé—´çš„å½“å‰å†…å®¹ï¼Œç°åœ¨å˜å›ç¬¬ä¸€ä¸ªæ•°æ®è¡Œäº†ã€‚</p></li></ul></blockquote><p>é€šè¿‡ä½¿ç”¨ä¿æŒç©ºé—´æ¥å›ç§»åŠ¨æ–‡æœ¬è¡Œï¼Œä½ å¯ä»¥å¼ºåˆ¶è¾“å‡ºä¸­ç¬¬ä¸€ä¸ªæ•°æ®è¡Œå‡ºç°åœ¨ç¬¬äºŒä¸ªæ•°æ®è¡Œåé¢ã€‚å¦‚æœä¸¢æ‰äº†ç¬¬ä¸€ä¸ª p å‘½ä»¤ï¼Œä½ å¯ä»¥ä»¥ç›¸åçš„é¡ºåºè¾“å‡ºè¿™ä¸¤è¡Œã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/first/ {h ; n ; p ; g ; p }&#39;</span> data2.txt
This is the second data line.
This is the first data line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ˜¯ä¸ªæœ‰ç”¨çš„å¼€ç«¯ã€‚ä½ å¯ä»¥ç”¨è¿™ç§æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªsedè„šæœ¬å°†æ•´ä¸ªæ–‡ä»¶çš„æ–‡æœ¬è¡Œåè½¬ï¼ä½†è¦é‚£ä¹ˆåšçš„è¯ï¼Œä½ éœ€è¦äº†è§£sedç¼–è¾‘å™¨çš„æ’é™¤ç‰¹æ€§</p><h5>æ’é™¤å‘½ä»¤</h5><p>æ„Ÿå¹å·å‘½ä»¤ï¼ˆ ! ï¼‰ç”¨æ¥æ’é™¤ï¼ˆ negate ï¼‰å‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯è®©åŸæœ¬ä¼šèµ·ä½œç”¨çš„å‘½ä»¤ä¸èµ·ä½œç”¨ã€‚ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºäº†è¿™ä¸€ç‰¹æ€§</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;/header/!p&#39;</span> data2.txt
This is the first data line.
This is the second data line.
This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>é™¤äº†åŒ…å«å•è¯headeré‚£ä¸€è¡Œå¤–ï¼Œæ–‡ä»¶ä¸­å…¶ä»–æ‰€æœ‰çš„è¡Œéƒ½è¢«æ‰“å°å‡ºæ¥äº†ã€‚</p></blockquote><p>sedç¼–è¾‘å™¨æ— æ³•å¤„ç†æ•°æ®æµä¸­æœ€åä¸€è¡Œæ–‡æœ¬ï¼Œå› ä¸ºä¹‹åå†æ²¡æœ‰å…¶ä»–è¡Œäº†ã€‚å¯ä»¥ç”¨æ„Ÿå¹å·æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;N;
&gt; s/System\nAdministrator/Desktop\nUser/
&gt; s/System Administrator/Desktop User/
&gt; &#39;</span> data4.txt
On Tuesday, the Linux Desktop
User<span class="token string">&#39;s group meeting will be held.
All System Administrators should attend.

sed &#39;</span><span class="token variable">$!</span>N<span class="token punctuation">;</span>
<span class="token operator">&gt;</span> s/System<span class="token punctuation">\</span>nAdministrator/Desktop<span class="token punctuation">\</span>nUser/
<span class="token operator">&gt;</span> s/System Administrator/Desktop User/
<span class="token operator">&gt;</span> <span class="token string">&#39; data4.txt
On Tuesday, the Linux Desktop
User&#39;</span>s group meeting will be held.
All Desktop Users should attend.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•é…åˆä½¿ç”¨æ„Ÿå¹å·ä¸ N å‘½ä»¤ä»¥åŠä¸ç¾å…ƒç¬¦ç‰¹æ®Šåœ°å€ã€‚ç¾å…ƒç¬¦è¡¨ç¤ºæ•°æ®æµä¸­çš„æœ€åä¸€è¡Œæ–‡æœ¬ï¼Œæ‰€ä»¥å½“sedç¼–è¾‘å™¨åˆ°äº†æœ€åä¸€è¡Œæ—¶ï¼Œå®ƒæ²¡æœ‰æ‰§è¡Œ N å‘½ä»¤ï¼Œä½†å®ƒå¯¹æ‰€æœ‰å…¶ä»–è¡Œéƒ½æ‰§è¡Œäº†è¿™ä¸ªå‘½ä»¤ã€‚</p><p>ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä½ å¯ä»¥åè½¬æ•°æ®æµä¸­æ–‡æœ¬è¡Œçš„é¡ºåºã€‚è¦å®ç°è¿™ä¸ªæ•ˆæœï¼ˆå…ˆæ˜¾ç¤ºæœ€åä¸€è¡Œï¼Œæœ€åæ˜¾ç¤ºç¬¬ä¸€è¡Œï¼‰ï¼Œä½ å¾—åˆ©ç”¨ä¿æŒç©ºé—´åšä¸€äº›ç‰¹åˆ«çš„é“ºå«å·¥ä½œã€‚ ä½ å¾—åƒè¿™æ ·ä½¿ç”¨æ¨¡å¼ç©ºé—´ï¼š</p><ul><li>(1) åœ¨æ¨¡å¼ç©ºé—´ä¸­æ”¾ç½®ä¸€è¡Œï¼›</li><li>(2) å°†æ¨¡å¼ç©ºé—´ä¸­çš„è¡Œæ”¾åˆ°ä¿æŒç©ºé—´ä¸­ï¼›</li><li>(3) åœ¨æ¨¡å¼ç©ºé—´ä¸­æ”¾å…¥ä¸‹ä¸€è¡Œï¼›</li><li>(4) å°†ä¿æŒç©ºé—´é™„åŠ åˆ°æ¨¡å¼ç©ºé—´åï¼›</li><li>(5) å°†æ¨¡å¼ç©ºé—´ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ”¾åˆ°ä¿æŒç©ºé—´ä¸­ï¼›</li><li>(6)é‡å¤æ‰§è¡Œç¬¬(3)~(5)æ­¥ï¼Œç›´åˆ°æ‰€æœ‰è¡Œéƒ½ååºæ”¾åˆ°äº†ä¿æŒç©ºé—´ä¸­ï¼›</li><li>(7) æå–å¹¶æ‰“å°è¡Œã€‚</li></ul><p>åœ¨ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼Œä½ ä¸æƒ³åœ¨å¤„ç†æ—¶æ‰“å°è¡Œã€‚è¿™æ„å‘³ç€è¦ä½¿ç”¨ sed çš„ -n å‘½ä»¤è¡Œé€‰é¡¹ã€‚ä¸‹ä¸€æ­¥æ˜¯å†³å®šå¦‚ä½•å°†ä¿æŒç©ºé—´æ–‡æœ¬é™„åŠ åˆ°æ¨¡å¼ç©ºé—´æ–‡æœ¬åé¢ã€‚è¿™å¯ä»¥ç”¨ G å‘½ä»¤å®Œæˆã€‚å”¯ä¸€çš„é—®é¢˜æ˜¯ä½ ä¸æƒ³å°†ä¿æŒç©ºé—´é™„åŠ åˆ°è¦å¤„ç†çš„ç¬¬ä¸€è¡Œæ–‡æœ¬åé¢ã€‚è¿™å¯ä»¥ç”¨æ„Ÿå¹å·å‘½ä»¤è½»æ¾è§£å†³ï¼š</p><p>1!G</p><p>ä¸‹ä¸€æ­¥å°±æ˜¯å°†æ–°çš„æ¨¡å¼ç©ºé—´ï¼ˆå«æœ‰å·²åè½¬çš„è¡Œï¼‰æ”¾åˆ°ä¿æŒç©ºé—´ã€‚è¿™ä¹Ÿéå¸¸ç®€å•ï¼Œåªè¦ç”¨ h å‘½ä»¤å°±è¡Œã€‚</p><p>å°†æ¨¡å¼ç©ºé—´ä¸­çš„æ•´ä¸ªæ•°æ®æµéƒ½åè½¬äº†ä¹‹åï¼Œä½ è¦åšçš„å°±æ˜¯æ‰“å°ç»“æœã€‚å½“åˆ°è¾¾æ•°æ®æµä¸­çš„æœ€åä¸€è¡Œæ—¶ï¼Œä½ å°±çŸ¥é“å·²ç»å¾—åˆ°äº†æ¨¡å¼ç©ºé—´çš„æ•´ä¸ªæ•°æ®æµã€‚æ‰“å°ç»“æœè¦ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š</p><p>$p</p><p><img src="/assets/true-image-20220919164800283-e64f57eb.png" alt=""></p><p>è¿™äº›éƒ½æ˜¯ä½ åˆ›å»ºå¯ä»¥åè½¬è¡Œçš„sedç¼–è¾‘å™¨è„šæœ¬æ‰€éœ€çš„æ“ä½œæ­¥éª¤ã€‚ç°åœ¨å¯ä»¥è¿è¡Œä¸€ä¸‹è¯•è¯•ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data2.txt
This is the header line.
This is the first data line.
This is the second data line.
This is the last line.

<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;{1!G ; h ; $p }&#39;</span> data2.txt
This is the last line.
This is the second data line.
This is the first data line.
This is the header line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>è¯´æ˜</strong> å¯èƒ½ä½ æƒ³è¯´ï¼Œæœ‰ä¸ªLinuxå‘½ä»¤å·²ç»æœ‰åè½¬æ–‡æœ¬æ–‡ä»¶çš„åŠŸèƒ½äº†ã€‚ tac å‘½ä»¤ä¼šå€’åºæ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚ä½ ä¹Ÿè®¸å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªå‘½ä»¤çš„åå­—å¾ˆå·§å¦™ï¼Œå®ƒæ‰§è¡Œçš„æ­£å¥½æ˜¯ä¸ cat å‘½ä»¤ç›¸åçš„åŠŸèƒ½ã€‚</p><hr><h4 id="æ”¹å˜æµ" tabindex="-1"><a class="header-anchor" href="#æ”¹å˜æµ" aria-hidden="true">#</a> æ”¹å˜æµ</h4><p>é€šå¸¸ï¼Œsedç¼–è¾‘å™¨ä¼šä»è„šæœ¬çš„é¡¶éƒ¨å¼€å§‹ï¼Œä¸€ç›´æ‰§è¡Œåˆ°è„šæœ¬çš„ç»“å°¾ï¼ˆ D å‘½ä»¤æ˜¯ä¸ªä¾‹å¤–ï¼Œå®ƒä¼šå¼ºåˆ¶sedç¼–è¾‘å™¨è¿”å›åˆ°è„šæœ¬çš„é¡¶éƒ¨ï¼Œè€Œä¸è¯»å–æ–°çš„è¡Œï¼‰ã€‚sedç¼–è¾‘å™¨æä¾›äº†ä¸€ä¸ªæ–¹æ³•æ¥æ”¹å˜å‘½ä»¤è„šæœ¬çš„æ‰§è¡Œæµç¨‹ï¼Œå…¶ç»“æœä¸ç»“æ„åŒ–ç¼–ç¨‹ç±»ä¼¼ã€‚</p><h5>åˆ†æ”¯ b</h5><p>åœ¨å‰é¢ä¸€èŠ‚ä¸­ï¼Œä½ äº†è§£äº†å¦‚ä½•ç”¨æ„Ÿå¹å·å‘½ä»¤æ¥æ’é™¤ä½œç”¨åœ¨æŸè¡Œä¸Šçš„å‘½ä»¤ã€‚sedç¼–è¾‘å™¨æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥åŸºäºåœ°å€ã€åœ°å€æ¨¡å¼æˆ–åœ°å€åŒºé—´æ’é™¤ä¸€æ•´å—å‘½ä»¤ã€‚è¿™å…è®¸ä½ åªå¯¹æ•°æ®æµä¸­çš„ç‰¹å®šè¡Œæ‰§è¡Œä¸€ç»„å‘½ä»¤ã€‚ åˆ†æ”¯ï¼ˆ branch ï¼‰å‘½ä»¤ b çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><p>[ address ]b [ label ]</p><p>address å‚æ•°å†³å®šäº†å“ªäº›è¡Œçš„æ•°æ®ä¼šè§¦å‘åˆ†æ”¯å‘½ä»¤ã€‚ label å‚æ•°å®šä¹‰äº†è¦è·³è½¬åˆ°çš„ä½ç½®ã€‚å¦‚æœæ²¡æœ‰åŠ  label å‚æ•°ï¼Œè·³è½¬å‘½ä»¤ä¼šè·³è½¬åˆ°è„šæœ¬çš„ç»“å°¾ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data2.txt
This is the header line.
This is the first data line.
This is the second data line.
This is the last line.

<span class="token function">sed</span> <span class="token string">&#39;{2,3b ; s/This is/Is this/ ; s/line./test?/}&#39;</span> data2.txt

Is this the header test?
This is the first data line.
This is the second data line.
Is this the last test?
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†æ”¯å‘½ä»¤åœ¨æ•°æ®æµä¸­çš„ç¬¬2è¡Œå’Œç¬¬3è¡Œå¤„è·³è¿‡äº†ä¸¤ä¸ªæ›¿æ¢å‘½ä»¤ã€‚</p><p>è¦æ˜¯ä¸æƒ³ç›´æ¥è·³åˆ°è„šæœ¬çš„ç»“å°¾ï¼Œå¯ä»¥ä¸ºåˆ†æ”¯å‘½ä»¤å®šä¹‰ä¸€ä¸ªè¦è·³è½¬åˆ°çš„æ ‡ç­¾ã€‚æ ‡ç­¾ä»¥å†’å·å¼€å§‹ï¼Œæœ€å¤šå¯ä»¥æ˜¯7ä¸ªå­—ç¬¦é•¿åº¦ã€‚</p><p>è¦æŒ‡å®šæ ‡ç­¾ï¼Œå°†å®ƒåŠ åˆ° b å‘½ä»¤åå³å¯ã€‚ä½¿ç”¨æ ‡ç­¾å…è®¸ä½ è·³è¿‡åœ°å€åŒ¹é…å¤„çš„å‘½ä»¤ï¼Œä½†ä»ç„¶æ‰§è¡Œè„šæœ¬ä¸­çš„å…¶ä»–å‘½ä»¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;{/first/b jump1 ; s/This is the/No jump on/
&gt; :jump1
&gt; s/This is the/Jump here on/}&#39;</span> data2.txt

No jump on header line
Jump here on first data line
No jump on second data line
No jump on last line
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·³è½¬å‘½ä»¤æŒ‡å®šå¦‚æœæ–‡æœ¬è¡Œä¸­å‡ºç°äº† first ï¼Œç¨‹åºåº”è¯¥è·³åˆ°æ ‡ç­¾ä¸º jump1 çš„è„šæœ¬è¡Œã€‚å¦‚æœåˆ†æ”¯å‘½ä»¤çš„æ¨¡å¼æ²¡æœ‰åŒ¹é…ï¼Œsedç¼–è¾‘å™¨ä¼šç»§ç»­æ‰§è¡Œè„šæœ¬ä¸­çš„å‘½ä»¤ï¼ŒåŒ…æ‹¬åˆ†æ”¯æ ‡ç­¾åçš„å‘½ä»¤ï¼ˆå› æ­¤ï¼Œæ‰€æœ‰çš„æ›¿æ¢å‘½ä»¤éƒ½ä¼šåœ¨ä¸åŒ¹é…åˆ†æ”¯æ¨¡å¼çš„è¡Œä¸Šæ‰§è¡Œï¼‰ã€‚</p><p>å¦‚æœæŸè¡ŒåŒ¹é…äº†åˆ†æ”¯æ¨¡å¼ï¼Œ sedç¼–è¾‘å™¨å°±ä¼šè·³è½¬åˆ°å¸¦æœ‰åˆ†æ”¯æ ‡ç­¾çš„é‚£è¡Œã€‚å› æ­¤ï¼Œåªæœ‰æœ€åä¸€ä¸ªæ›¿æ¢å‘½ä»¤ä¼šæ‰§è¡Œã€‚</p><p>è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†è·³è½¬åˆ°sedè„šæœ¬åé¢çš„æ ‡ç­¾ä¸Šã€‚</p><p>ä¹Ÿå¯ä»¥è·³è½¬åˆ°è„šæœ¬ä¸­é å‰é¢çš„æ ‡ç­¾ä¸Šï¼Œè¿™æ ·å°±è¾¾åˆ°äº†å¾ªç¯çš„æ•ˆæœã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;This, is, a, test, to, remove, commas.&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;{
&gt; :start
&gt; s/,//1p
&gt; b start
&gt; }&#39;</span>

This is, a, test, to, remove, commas.
This is a, test, to, remove, commas.
This is a test, to, remove, commas.
This is a <span class="token builtin class-name">test</span> to, remove, commas.
This is a <span class="token builtin class-name">test</span> to remove, commas.
This is a <span class="token builtin class-name">test</span> to remove commas.
^C
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è„šæœ¬çš„æ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ é™¤æ–‡æœ¬ä¸­çš„ç¬¬ä¸€ä¸ªé€—å·ï¼Œå¹¶æ‰“å°å­—ç¬¦ä¸²ã€‚è¿™ä¸ªè„šæœ¬æœ‰ä¸ªé—®é¢˜ï¼šå®ƒæ°¸è¿œä¸ä¼šç»“æŸã€‚è¿™å°±å½¢æˆäº†ä¸€ä¸ªæ— ç©·å¾ªç¯ï¼Œä¸åœåœ°æŸ¥æ‰¾é€—å·ï¼Œç›´åˆ°ä½¿ç”¨Ctrl+Cç»„åˆé”®å‘é€ä¸€ä¸ªä¿¡å·ï¼Œæ‰‹åŠ¨åœæ­¢è¿™ä¸ªè„šæœ¬ã€‚</p><p>è¦é˜²æ­¢è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä¸ºåˆ†æ”¯å‘½ä»¤æŒ‡å®šä¸€ä¸ªåœ°å€æ¨¡å¼æ¥æŸ¥æ‰¾ã€‚å¦‚æœæ²¡æœ‰æ¨¡å¼ï¼Œè·³è½¬å°±åº”è¯¥ç»“æŸï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;This, is, a, test, to, remove, commas.&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;{
&gt; :start
&gt; s/,//1p
&gt; /,/b start
&gt; }&#39;</span>
This is, a, test, to, remove, commas.
This is a, test, to, remove, commas.
This is a test, to, remove, commas.
This is a <span class="token builtin class-name">test</span> to, remove, commas.
This is a <span class="token builtin class-name">test</span> to remove, commas.
This is a <span class="token builtin class-name">test</span> to remove commas.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç°åœ¨åˆ†æ”¯å‘½ä»¤åªä¼šåœ¨è¡Œä¸­æœ‰é€—å·çš„æƒ…å†µä¸‹è·³è½¬ã€‚åœ¨æœ€åä¸€ä¸ªé€—å·è¢«åˆ é™¤åï¼Œåˆ†æ”¯å‘½ä»¤ä¸ä¼šå†æ‰§è¡Œï¼Œè„šæœ¬ä¹Ÿå°±èƒ½æ­£å¸¸åœæ­¢äº†ã€‚</p></blockquote><h5>æµ‹è¯• t</h5><p>ç±»ä¼¼äºåˆ†æ”¯å‘½ä»¤ï¼Œæµ‹è¯•ï¼ˆ test ï¼‰å‘½ä»¤ï¼ˆ t ï¼‰ä¹Ÿå¯ä»¥ç”¨æ¥æ”¹å˜sedç¼–è¾‘å™¨è„šæœ¬çš„æ‰§è¡Œæµç¨‹ã€‚æµ‹è¯•å‘½ä»¤ä¼šæ ¹æ®æ›¿æ¢å‘½ä»¤çš„ç»“æœè·³è½¬åˆ°æŸä¸ªæ ‡ç­¾ï¼Œè€Œä¸æ˜¯æ ¹æ®åœ°å€è¿›è¡Œè·³è½¬ã€‚</p><p>å¦‚æœæ›¿æ¢å‘½ä»¤æˆåŠŸåŒ¹é…å¹¶æ›¿æ¢äº†ä¸€ä¸ªæ¨¡å¼ï¼Œæµ‹è¯•å‘½ä»¤å°±ä¼šè·³è½¬åˆ°æŒ‡å®šçš„æ ‡ç­¾ã€‚å¦‚æœæ›¿æ¢å‘½ä»¤æœªèƒ½åŒ¹é…æŒ‡å®šçš„æ¨¡å¼ï¼Œæµ‹è¯•å‘½ä»¤å°±ä¸ä¼šè·³è½¬ã€‚æµ‹è¯•å‘½ä»¤ä½¿ç”¨ä¸åˆ†æ”¯å‘½ä»¤ç›¸åŒçš„æ ¼å¼ã€‚</p><p>[ address ]t [ label ]</p><p>è·Ÿåˆ†æ”¯å‘½ä»¤ä¸€æ ·ï¼Œåœ¨æ²¡æœ‰æŒ‡å®šæ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæµ‹è¯•æˆåŠŸï¼Œsedä¼šè·³è½¬åˆ°è„šæœ¬çš„ç»“å°¾ã€‚</p><p>æµ‹è¯•å‘½ä»¤æä¾›äº†å¯¹æ•°æ®æµä¸­çš„æ–‡æœ¬æ‰§è¡ŒåŸºæœ¬çš„ if-then è¯­å¥çš„ä¸€ä¸ªä½æˆæœ¬åŠæ³•ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœå·²ç»åšäº†ä¸€ä¸ªæ›¿æ¢ï¼Œä¸éœ€è¦å†åšå¦ä¸€ä¸ªæ›¿æ¢ï¼Œé‚£ä¹ˆæµ‹è¯•å‘½ä»¤èƒ½å¸®ä¸Šå¿™ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;{
&gt; s/first/matched/
&gt; t
&gt; s/This is the/No match on/
&gt; }&#39;</span> data2.txt
No match on header line
This is the matched data line
No match on second data line
No match on last line
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç¬¬ä¸€ä¸ªæ›¿æ¢å‘½ä»¤ä¼šæŸ¥æ‰¾æ¨¡å¼æ–‡æœ¬ first ã€‚å¦‚æœåŒ¹é…äº†è¡Œä¸­çš„æ¨¡å¼ï¼Œå®ƒå°±ä¼šæ›¿æ¢æ–‡æœ¬ï¼Œè€Œä¸”æµ‹è¯•å‘½ä»¤ä¼šè·³è¿‡åé¢çš„æ›¿æ¢å‘½ä»¤ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ›¿æ¢å‘½ä»¤æœªèƒ½åŒ¹é…æ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ›¿æ¢å‘½ä»¤å°±ä¼šè¢«æ‰§è¡Œã€‚</p></blockquote><p>æœ‰äº†æµ‹è¯•å‘½ä»¤ï¼Œä½ å°±èƒ½ç»“æŸä¹‹å‰ç”¨åˆ†æ”¯å‘½ä»¤å½¢æˆçš„æ— é™å¾ªç¯:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;This, is, a, test, to, remove, commas. &quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;{
&gt; :start
&gt; s/,//1p
&gt; t start
&gt; }&#39;</span>
This is, a, test, to, remove, commas.
This is a, test, to, remove, commas.
This is a test, to, remove, commas.
This is a <span class="token builtin class-name">test</span> to, remove, commas.
This is a <span class="token builtin class-name">test</span> to remove, commas.
This is a <span class="token builtin class-name">test</span> to remove commas.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ¨¡å¼æ›¿ä»£" tabindex="-1"><a class="header-anchor" href="#æ¨¡å¼æ›¿ä»£" aria-hidden="true">#</a> æ¨¡å¼æ›¿ä»£</h4><p>ä½ å·²ç»çŸ¥é“äº†å¦‚ä½•åœ¨ sed å‘½ä»¤ä¸­ä½¿ç”¨æ¨¡å¼æ¥æ›¿ä»£æ•°æ®æµä¸­çš„æ–‡æœ¬ã€‚ç„¶è€Œåœ¨ä½¿ç”¨é€šé…ç¬¦æ—¶ï¼Œå¾ˆéš¾çŸ¥é“åˆ°åº•å“ªäº›æ–‡æœ¬ä¼šåŒ¹é…æ¨¡å¼ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡å¦‚ä½ æƒ³åœ¨è¡Œä¸­åŒ¹é…çš„å•è¯ä¸¤è¾¹ä¸Šæ”¾ä¸Šå¼•å·ã€‚å¦‚æœä½ åªæ˜¯è¦åŒ¹é…æ¨¡å¼ä¸­çš„ä¸€ä¸ªå•è¯ï¼Œé‚£å°±éå¸¸ç®€å•ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;The cat sleeps in his hat.&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/cat/&quot;cat&quot;/&#39;</span>
The <span class="token string">&quot;cat&quot;</span> sleeps <span class="token keyword">in</span> his hat.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½†å¦‚æœä½ åœ¨æ¨¡å¼ä¸­ç”¨é€šé…ç¬¦ï¼ˆ.ï¼‰æ¥åŒ¹é…å¤šä¸ªå•è¯å‘¢ï¼Ÿ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;The cat sleeps in his hat.&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/.at/&quot;.at&quot;/g&#39;</span>
The <span class="token string">&quot;.at&quot;</span> sleeps <span class="token keyword">in</span> his <span class="token string">&quot;.at&quot;</span><span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¨¡å¼å­—ç¬¦ä¸²ç”¨ç‚¹å·é€šé…ç¬¦æ¥åŒ¹é…atå‰é¢çš„ä¸€ä¸ªå­—æ¯ã€‚é—æ†¾çš„æ˜¯ï¼Œç”¨äºæ›¿ä»£çš„å­—ç¬¦ä¸²æ— æ³•åŒ¹é…å·²åŒ¹é…å•è¯ä¸­çš„é€šé…ç¬¦å­—ç¬¦ã€‚</p><h5>&amp;ç¬¦å·</h5><p>sedç¼–è¾‘å™¨æä¾›äº†ä¸€ä¸ªè§£å†³åŠæ³•ã€‚ &amp; ç¬¦å·å¯ä»¥ç”¨æ¥ä»£è¡¨æ›¿æ¢å‘½ä»¤ä¸­çš„åŒ¹é…çš„æ¨¡å¼ã€‚ä¸ç®¡æ¨¡å¼åŒ¹é…çš„æ˜¯ä»€ä¹ˆæ ·çš„æ–‡æœ¬ï¼Œä½ éƒ½å¯ä»¥åœ¨æ›¿ä»£æ¨¡å¼ä¸­ä½¿ç”¨ &amp; ç¬¦å·æ¥ä½¿ç”¨è¿™æ®µæ–‡æœ¬ã€‚è¿™æ ·å°±å¯ä»¥æ“ä½œæ¨¡å¼æ‰€åŒ¹é…åˆ°çš„ä»»ä½•å•è¯äº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;The cat sleeps in his hat.&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/.at/&quot;&amp;&quot;/g&#39;</span>
The <span class="token string">&quot;cat&quot;</span> sleeps <span class="token keyword">in</span> his <span class="token string">&quot;hat&quot;</span><span class="token builtin class-name">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æ¨¡å¼åŒ¹é…äº†å•è¯catï¼Œ&quot;cat&quot;å°±ä¼šå‡ºç°åœ¨äº†æ›¿æ¢åçš„å•è¯é‡Œã€‚å½“å®ƒåŒ¹é…äº†å•è¯hatï¼Œ&quot;hat&quot; å°±å‡ºç°åœ¨äº†æ›¿æ¢åçš„å•è¯ä¸­ã€‚</p><h5>æ›¿ä»£å•ç‹¬çš„å•è¯</h5><p>&amp; ç¬¦å·ä¼šæå–åŒ¹é…æ›¿æ¢å‘½ä»¤ä¸­æŒ‡å®šæ¨¡å¼çš„æ•´ä¸ªå­—ç¬¦ä¸²ã€‚æœ‰æ—¶ä½ åªæƒ³æå–è¿™ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚</p><p>å½“ç„¶å¯ä»¥è¿™ä¹ˆåšï¼Œåªæ˜¯è¦ç¨å¾®èŠ±ç‚¹å¿ƒæ€è€Œå·²ã€‚</p><p>sedç¼–è¾‘å™¨ç”¨åœ†æ‹¬å·æ¥å®šä¹‰æ›¿æ¢æ¨¡å¼ä¸­çš„å­æ¨¡å¼ã€‚ä½ å¯ä»¥åœ¨æ›¿ä»£æ¨¡å¼ä¸­ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦æ¥å¼•ç”¨æ¯ä¸ªå­æ¨¡å¼ã€‚æ›¿ä»£å­—ç¬¦ç”±åæ–œçº¿å’Œæ•°å­—ç»„æˆã€‚æ•°å­—è¡¨æ˜å­æ¨¡å¼çš„ä½ç½®ã€‚sedç¼–è¾‘å™¨ä¼šç»™ç¬¬ä¸€ä¸ªå­æ¨¡å¼åˆ†é…å­—ç¬¦ \1 ï¼Œç»™ç¬¬äºŒä¸ªå­æ¨¡å¼åˆ†é…å­—ç¬¦ \2 ï¼Œä¾æ­¤ç±»æ¨ã€‚</p><hr><p><strong>è­¦å‘Š</strong> å½“åœ¨æ›¿æ¢å‘½ä»¤ä¸­ä½¿ç”¨åœ†æ‹¬å·æ—¶ï¼Œå¿…é¡»ç”¨è½¬ä¹‰å­—ç¬¦å°†å®ƒä»¬æ ‡ç¤ºä¸ºåˆ†ç»„å­—ç¬¦è€Œä¸æ˜¯æ™®é€šçš„åœ†æ‹¬å·ã€‚è¿™è·Ÿè½¬ä¹‰å…¶ä»–ç‰¹æ®Šå­—ç¬¦æ­£å¥½ç›¸åã€‚</p><hr><p>æ¥çœ‹ä¸€ä¸ªåœ¨sedç¼–è¾‘å™¨è„šæœ¬ä¸­ä½¿ç”¨è¿™ä¸ªç‰¹æ€§çš„ä¾‹å­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;The System Administrator manual&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;
&gt; s/\(System\) Administrator/\1 User/&#39;</span>
The System User manual
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªæ›¿æ¢å‘½ä»¤ç”¨ä¸€å¯¹åœ†æ‹¬å·å°†å•è¯Systemæ‹¬èµ·æ¥ï¼Œå°†å…¶æ ‡ç¤ºä¸ºä¸€ä¸ªå­æ¨¡å¼ã€‚ç„¶åå®ƒåœ¨æ›¿ä»£æ¨¡å¼ä¸­ä½¿ç”¨ \1 æ¥æå–ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­æ¨¡å¼ã€‚è¿™æ²¡ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œä½†åœ¨å¤„ç†é€šé…ç¬¦æ¨¡å¼æ—¶å´ç‰¹åˆ«æœ‰ç”¨ã€‚</p><p>å¦‚æœéœ€è¦ç”¨ä¸€ä¸ªå•è¯æ¥æ›¿æ¢ä¸€ä¸ªçŸ­è¯­ï¼Œè€Œè¿™ä¸ªå•è¯åˆšå¥½æ˜¯è¯¥çŸ­è¯­çš„å­å­—ç¬¦ä¸²ï¼Œä½†é‚£ä¸ªå­å­—ç¬¦ä¸²ç¢°å·§ä½¿ç”¨äº†é€šé…ç¬¦ï¼Œè¿™æ—¶ä½¿ç”¨å­æ¨¡å¼ä¼šæ–¹ä¾¿å¾ˆå¤šã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;That furry cat is pretty&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/furry \(.at\)/\1/&#39;</span>
That <span class="token function">cat</span> is pretty

<span class="token builtin class-name">echo</span> <span class="token string">&quot;That furry hat is pretty&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s/furry \(.at\)/\1/&#39;</span>
That hat is pretty
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¸èƒ½ç”¨ &amp; ç¬¦å·ï¼Œå› ä¸ºå®ƒä¼šæ›¿æ¢æ•´ä¸ªåŒ¹é…çš„æ¨¡å¼ã€‚å­æ¨¡å¼æä¾›äº†ç­”æ¡ˆï¼Œå…è®¸ä½ é€‰æ‹©å°†æ¨¡å¼ä¸­çš„æŸéƒ¨åˆ†ä½œä¸ºæ›¿ä»£æ¨¡å¼ã€‚ å½“éœ€è¦åœ¨ä¸¤ä¸ªæˆ–å¤šä¸ªå­æ¨¡å¼é—´æ’å…¥æ–‡æœ¬æ—¶ï¼Œè¿™ä¸ªç‰¹æ€§å°¤å…¶æœ‰ç”¨ã€‚è¿™é‡Œæœ‰ä¸ªè„šæœ¬ï¼Œå®ƒä½¿ç”¨å­æ¨¡å¼åœ¨å¤§æ•°å­—ä¸­æ’å…¥é€—å·ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;1234567&quot;</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;{
&gt; :start
&gt; s/\(.*[0-9]\)\([0-9]\{3\}\)/\1,\2/
&gt; t start
&gt; }&#39;</span>
<span class="token number">1,234</span>,567
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè„šæœ¬å°†åŒ¹é…æ¨¡å¼åˆ†æˆäº†ä¸¤éƒ¨åˆ†ã€‚</p><blockquote 3=""><p>.*[0-9]</p><p>[0-9]</p></blockquote><p>è¿™ä¸ªæ¨¡å¼ä¼šæŸ¥æ‰¾ä¸¤ä¸ªå­æ¨¡å¼ã€‚ç¬¬ä¸€ä¸ªå­æ¨¡å¼æ˜¯ä»¥æ•°å­—ç»“å°¾çš„ä»»æ„é•¿åº¦çš„å­—ç¬¦ã€‚ç¬¬äºŒä¸ªå­æ¨¡å¼æ˜¯è‹¥å¹²ç»„ä¸‰ä½æ•°å­—ã€‚å¦‚æœè¿™ä¸ªæ¨¡å¼åœ¨æ–‡æœ¬ä¸­æ‰¾åˆ°äº†ï¼Œæ›¿ä»£æ–‡æœ¬ä¼šåœ¨ä¸¤ä¸ªå­æ¨¡å¼ä¹‹é—´åŠ ä¸€ä¸ªé€—å·ï¼Œæ¯ä¸ªå­æ¨¡å¼éƒ½ä¼šé€šè¿‡å…¶ä½ç½®æ¥æ ‡ç¤ºã€‚</p><p>è¿™ä¸ªè„šæœ¬ä½¿ç”¨æµ‹è¯•å‘½ä»¤æ¥éå†è¿™ä¸ªæ•°å­—ï¼Œç›´åˆ°æ”¾ç½®å¥½æ‰€æœ‰çš„é€—å·ã€‚</p><h4 id="åœ¨è„šæœ¬ä¸­ä½¿ç”¨sed" tabindex="-1"><a class="header-anchor" href="#åœ¨è„šæœ¬ä¸­ä½¿ç”¨sed" aria-hidden="true">#</a> åœ¨è„šæœ¬ä¸­ä½¿ç”¨sed</h4><h5>ä½¿ç”¨åŒ…è£…è„šæœ¬</h5><p>è¿™é‡Œæœ‰ä¸ªå°†å‘½ä»¤è¡Œå‚æ•°å˜é‡ä½œä¸ºsedè„šæœ¬è¾“å…¥çš„ä¾‹å­</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> reverse.sh
<span class="token comment">#!/bin/bash</span>
<span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;{ 1!G ; h ; $p }&#39;</span> <span class="token variable">$1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åä¸ºreverseçš„shellè„šæœ¬ç”¨sedç¼–è¾‘å™¨è„šæœ¬æ¥åè½¬æ•°æ®æµä¸­çš„æ–‡æœ¬è¡Œã€‚å®ƒä½¿ç”¨shellå‚æ•° $1 ä»å‘½ä»¤è¡Œä¸­æå–ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ­£æ˜¯éœ€è¦è¿›è¡Œåè½¬çš„æ–‡ä»¶åã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./reverse.sh data2.txt
This is the last line.
This is the second data line.
This is the first data line.
This is the header line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ä½ èƒ½åœ¨ä»»ä½•æ–‡ä»¶ä¸Šè½»æ¾ä½¿ç”¨è¿™ä¸ªsedç¼–è¾‘å™¨è„šæœ¬ï¼Œå†ä¸ç”¨æ¯æ¬¡éƒ½åœ¨å‘½ä»¤è¡Œä¸Šé‡æ–°è¾“å…¥äº†ã€‚</p><h5>é‡å®šå‘ sed çš„è¾“å‡º</h5><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œsedç¼–è¾‘å™¨ä¼šå°†è„šæœ¬çš„ç»“æœè¾“å‡ºåˆ° STDOUT ä¸Šã€‚ä½ å¯ä»¥åœ¨shellè„šæœ¬ä¸­ä½¿ç”¨å„ç§æ ‡å‡†æ–¹æ³•å¯¹sedç¼–è¾‘å™¨çš„è¾“å‡ºè¿›è¡Œé‡å®šå‘ã€‚</p><p>å¯ä»¥åœ¨è„šæœ¬ä¸­ç”¨ $() å°†sedç¼–è¾‘å™¨å‘½ä»¤çš„è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œä»¥å¤‡åç”¨ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨sedè„šæœ¬æ¥å‘æ•°å€¼è®¡ç®—ç»“æœæ·»åŠ é€—å·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> fact.sh
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">factorial</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">counter</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">number</span><span class="token operator">=</span><span class="token variable">$1</span>

<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$counter</span> <span class="token parameter variable">-le</span> <span class="token variable">$number</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
    <span class="token assign-left variable">factorial</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$factorial</span> * <span class="token variable">$counter</span> <span class="token punctuation">]</span>
    <span class="token assign-left variable">counter</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$counter</span> + <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">done</span>

<span class="token assign-left variable">result</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> $factorial <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;{
:start
s/\(.*[0-9]\)\([0-9]\{3\}\)/\1,\2/
t start
}&#39;</span><span class="token variable">)</span></span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;The result is <span class="token variable">$result</span>&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./fact.sh <span class="token number">20</span>
The result is <span class="token number">2,432</span>,902,008,176,640,000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½¿ç”¨æ™®é€šçš„é˜¶ä¹˜è®¡ç®—è„šæœ¬åï¼Œè„šæœ¬çš„ç»“æœä¼šè¢«ä½œä¸ºsedç¼–è¾‘å™¨è„šæœ¬çš„è¾“å…¥ï¼Œå®ƒä¼šç»™ç»“æœåŠ ä¸Šé€—å·ã€‚ç„¶å echo è¯­å¥ä½¿ç”¨è¿™ä¸ªå€¼äº§ç”Ÿæœ€ç»ˆç»“æœ</p><h4 id="åˆ›å»ºsedå®ç”¨å·¥å…·" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºsedå®ç”¨å·¥å…·" aria-hidden="true">#</a> åˆ›å»ºsedå®ç”¨å·¥å…·</h4><h5>åŠ å€è¡Œé—´è·</h5><p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå‘æ–‡æœ¬æ–‡ä»¶çš„è¡Œé—´æ’å…¥ç©ºç™½è¡Œçš„ç®€å•sedè„šæœ¬ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;G&#39;</span> data2.txt
This is the header line.

This is the first data line.

This is the second data line.

This is the last line.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹èµ·æ¥ç›¸å½“ç®€å•ï¼è¿™ä¸ªæŠ€å·§çš„å…³é”®åœ¨äºä¿æŒç©ºé—´çš„é»˜è®¤å€¼ã€‚è®°ä½ï¼Œ G å‘½ä»¤ä¼šç®€å•åœ°å°†ä¿æŒç©ºé—´å†…å®¹é™„åŠ åˆ°æ¨¡å¼ç©ºé—´å†…å®¹åã€‚å½“å¯åŠ¨sedç¼–è¾‘å™¨æ—¶ï¼Œä¿æŒç©ºé—´åªæœ‰ä¸€ä¸ªç©ºè¡Œã€‚å°†å®ƒé™„åŠ åˆ°å·²æœ‰è¡Œåé¢ï¼Œä½ å°±åœ¨å·²æœ‰è¡Œåé¢åˆ›å»ºäº†ä¸€ä¸ªç©ºç™½è¡Œã€‚</p><p>ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªè„šæœ¬åœ¨æ•°æ®æµçš„æœ€åä¸€è¡Œåé¢ä¹ŸåŠ äº†ä¸€ä¸ªç©ºç™½è¡Œï¼Œä½¿å¾—æ–‡ä»¶çš„æœ«å°¾ä¹Ÿäº§ç”Ÿäº†ä¸€ä¸ªç©ºç™½è¡Œã€‚å¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªç©ºç™½è¡Œï¼Œå¯ä»¥ç”¨æ’é™¤ç¬¦å·ï¼ˆ ! ï¼‰å’Œå°¾è¡Œç¬¦å·ï¼ˆ $ ï¼‰æ¥ç¡®ä¿è„šæœ¬ä¸ä¼šå°†ç©ºç™½è¡ŒåŠ åˆ°æ•°æ®æµçš„æœ€åä¸€è¡Œåé¢ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;$!G&#39;</span> data2.txt
This is the header line.

This is the first data line.

This is the second data line.

This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨çœ‹èµ·æ¥å¥½ä¸€äº›äº†ã€‚åªè¦è¯¥è¡Œä¸æ˜¯æœ€åä¸€è¡Œï¼Œ G å‘½ä»¤å°±ä¼šé™„åŠ ä¿æŒç©ºé—´å†…å®¹ã€‚å½“sedç¼–è¾‘å™¨åˆ°äº†æœ€åä¸€è¡Œæ—¶ï¼Œå®ƒä¼šè·³è¿‡ G å‘½ä»¤ã€‚</p><h5>å¯¹å¯èƒ½å«æœ‰ç©ºç™½è¡Œçš„æ–‡ä»¶åŠ å€è¡Œé—´è·</h5><p>å¦‚æœæ–‡æœ¬æ–‡ä»¶å·²ç»æœ‰ä¸€äº›ç©ºç™½è¡Œï¼Œä½†ä½ æƒ³ç»™æ‰€æœ‰è¡ŒåŠ å€è¡Œé—´è·è¦æ€ä¹ˆåŠå‘¢ï¼Ÿå¦‚æœç”¨å‰é¢çš„è„šæœ¬ï¼Œæœ‰äº›åŒºåŸŸä¼šæœ‰å¤ªå¤šçš„ç©ºç™½è¡Œï¼Œå› ä¸ºæ¯ä¸ªå·²æœ‰çš„ç©ºç™½è¡Œä¹Ÿä¼šè¢«åŠ å€</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data6.txt
This is line one.
This is line two.

This is line three.
This is line four.
$
$ <span class="token function">sed</span> <span class="token string">&#39;$!G&#39;</span> data6.txt
This is line one.

This is line two.



This is line three.

This is line four.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç°åœ¨ï¼Œåœ¨åŸæ¥ç©ºç™½è¡Œçš„ä½ç½®æœ‰äº†ä¸‰ä¸ªç©ºç™½è¡Œã€‚è¿™ä¸ªé—®é¢˜çš„è§£å†³åŠæ³•æ˜¯ï¼Œé¦–å…ˆåˆ é™¤æ•°æ®æµä¸­çš„æ‰€æœ‰ç©ºç™½è¡Œï¼Œç„¶åç”¨ G å‘½ä»¤åœ¨æ‰€æœ‰è¡Œåæ’å…¥æ–°çš„ç©ºç™½è¡Œã€‚è¦åˆ é™¤å·²æœ‰çš„ç©ºç™½è¡Œï¼Œéœ€è¦å°† d å‘½ä»¤å’Œä¸€ä¸ªåŒ¹é…ç©ºç™½è¡Œçš„æ¨¡å¼ä¸€èµ·ä½¿ç”¨ã€‚</p><blockquote><p>/^$/d</p></blockquote><p>è¿™ä¸ªæ¨¡å¼ä½¿ç”¨äº†è¡Œé¦–ç¬¦å·ï¼ˆ ^ ï¼‰å’Œè¡Œå°¾ç¬¦å·ï¼ˆ $ ï¼‰ã€‚å°†è¿™ä¸ªæ¨¡å¼åŠ åˆ°è„šæœ¬ä¸­ä¼šç”Ÿæˆæƒ³è¦çš„ç»“æœ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;/^$/d ; $!G&#39;</span> data6.txt
This is line one.

This is line two.

This is line three.

This is line four.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ç»™æ–‡ä»¶ä¸­çš„è¡Œç¼–å·</h5><p>åœ¨æŸ¥çœ‹é”™è¯¯æ¶ˆæ¯çš„è¡Œå·æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å°å·¥å…·ã€‚</p><p>ç”¨ç­‰å·æ¥æ˜¾ç¤ºæ•°æ®æµä¸­è¡Œçš„è¡Œå·ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;=&#39;</span> data2.txt
<span class="token number">1</span>
This is the header line.
<span class="token number">2</span>
This is the first data line.
<span class="token number">3</span>
This is the second data line.
<span class="token number">4</span>
This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;=&#39;</span> data2.txt <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;N; s/\n/ /&#39;</span>
<span class="token number">1</span> This is the header line.
<span class="token number">2</span> This is the first data line.
<span class="token number">3</span> This is the second data line.
<span class="token number">4</span> This is the last line.

<span class="token function">nl</span> data2.txt
<span class="token number">1</span> This is the header line.
<span class="token number">2</span> This is the first data line.
<span class="token number">3</span> This is the second data line.
<span class="token number">4</span> This is the last line.

<span class="token function">cat</span> <span class="token parameter variable">-n</span> data2.txt
<span class="token number">1</span> This is the header line.
<span class="token number">2</span> This is the first data line.
<span class="token number">3</span> This is the second data line.
<span class="token number">4</span> This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ‰“å°æœ«å°¾è¡Œ</h5><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ å·²ç»çŸ¥é“å¦‚ä½•ç”¨ p å‘½ä»¤æ¥æ‰“å°æ•°æ®æµä¸­æ‰€æœ‰çš„æˆ–è€…æ˜¯åŒ¹é…æŸä¸ªç‰¹å®šæ¨¡å¼çš„è¡Œã€‚ å¦‚æœåªéœ€å¤„ç†ä¸€ä¸ªé•¿è¾“å‡ºï¼ˆæ¯”å¦‚æ—¥å¿—æ–‡ä»¶ï¼‰ä¸­çš„æœ«å°¾å‡ è¡Œï¼Œè¦æ€ä¹ˆåŠå‘¢ï¼Ÿ ç¾å…ƒç¬¦ä»£è¡¨æ•°æ®æµä¸­æœ€åä¸€è¡Œï¼Œæ‰€ä»¥åªæ˜¾ç¤ºæœ€åä¸€è¡Œå¾ˆå®¹æ˜“ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;$p&#39;</span> data2.txt
This is the last line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆï¼Œå¦‚ä½•ç”¨ç¾å…ƒç¬¦æ¥æ˜¾ç¤ºæ•°æ®æµæœ«å°¾çš„è‹¥å¹²è¡Œå‘¢ï¼Ÿç­”æ¡ˆæ˜¯åˆ›å»ºæ»šåŠ¨çª—å£ã€‚ æ»šåŠ¨çª—å£æ˜¯æ£€éªŒæ¨¡å¼ç©ºé—´ä¸­æ–‡æœ¬è¡Œå—çš„å¸¸ç”¨æ–¹æ³•ï¼Œå®ƒä½¿ç”¨ N å‘½ä»¤å°†è¿™äº›å—åˆå¹¶èµ·æ¥ã€‚ N å‘½ä»¤å°†ä¸‹ä¸€è¡Œæ–‡æœ¬é™„åŠ åˆ°æ¨¡å¼ç©ºé—´ä¸­å·²æœ‰æ–‡æœ¬è¡Œåé¢ã€‚ä¸€æ—¦ä½ åœ¨æ¨¡å¼ç©ºé—´æœ‰äº†ä¸€ä¸ª10è¡Œçš„æ–‡æœ¬å—ï¼Œä½ å¯ä»¥ç”¨ç¾å…ƒç¬¦æ¥æ£€æŸ¥ä½ æ˜¯å¦å·²ç»å¤„äºæ•°æ®æµçš„å°¾éƒ¨ã€‚å¦‚æœä¸åœ¨ï¼Œå°±ç»§ç»­å‘æ¨¡å¼ç©ºé—´å¢åŠ è¡Œï¼ŒåŒæ—¶åˆ é™¤åŸæ¥çš„è¡Œï¼ˆè®°ä½ï¼Œ D å‘½ä»¤ä¼šåˆ é™¤æ¨¡å¼ç©ºé—´çš„ç¬¬ä¸€è¡Œï¼‰ã€‚</p><p>é€šè¿‡å¾ªç¯ N å‘½ä»¤å’Œ D å‘½ä»¤ï¼Œä½ åœ¨å‘æ¨¡å¼ç©ºé—´çš„æ–‡æœ¬è¡Œå—å¢åŠ æ–°è¡Œçš„åŒæ—¶ä¹Ÿåˆ é™¤äº†æ—§è¡Œã€‚åˆ†æ”¯å‘½ä»¤éå¸¸é€‚åˆè¿™ä¸ªå¾ªç¯ã€‚è¦ç»“æŸå¾ªç¯ï¼Œåªè¦è¯†åˆ«å‡ºæœ€åä¸€è¡Œå¹¶ç”¨ q å‘½ä»¤é€€å‡ºå°±å¯ä»¥äº†ã€‚ æœ€ç»ˆçš„sedç¼–è¾‘å™¨è„šæœ¬çœ‹èµ·æ¥å¦‚ä¸‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data7.txt
This is line <span class="token number">1</span>.
This is line <span class="token number">2</span>.
This is line <span class="token number">3</span>.
This is line <span class="token number">4</span>.
This is line <span class="token number">5</span>.
This is line <span class="token number">6</span>.
This is line <span class="token number">7</span>.
This is line <span class="token number">8</span>.
This is line <span class="token number">9</span>.
This is line <span class="token number">10</span>.
This is line <span class="token number">11</span>.
This is line <span class="token number">12</span>.
This is line <span class="token number">13</span>.
This is line <span class="token number">14</span>.
This is line <span class="token number">15</span>.

<span class="token function">sed</span> <span class="token string">&#39;{
&gt; :start
&gt; $q ; N ; 11,$D
&gt; b start
&gt; }&#39;</span> data7.txt
This is line <span class="token number">6</span>.
This is line <span class="token number">7</span>.
This is line <span class="token number">8</span>.
This is line <span class="token number">9</span>.
This is line <span class="token number">10</span>.
This is line <span class="token number">11</span>.
This is line <span class="token number">12</span>.
This is line <span class="token number">13</span>.
This is line <span class="token number">14</span>.
This is line <span class="token number">15</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè„šæœ¬ä¼šé¦–å…ˆæ£€æŸ¥è¿™è¡Œæ˜¯ä¸æ˜¯æ•°æ®æµä¸­æœ€åä¸€è¡Œã€‚å¦‚æœæ˜¯ï¼Œé€€å‡ºï¼ˆ quit ï¼‰å‘½ä»¤ä¼šåœæ­¢å¾ªç¯ã€‚ N å‘½ä»¤ä¼šå°†ä¸‹ä¸€è¡Œé™„åŠ åˆ°æ¨¡å¼ç©ºé—´ä¸­å½“å‰è¡Œä¹‹åã€‚å¦‚æœå½“å‰è¡Œåœ¨ç¬¬10è¡Œåé¢ï¼Œ 11,$D å‘½ä»¤ä¼šåˆ é™¤æ¨¡å¼ç©ºé—´ä¸­çš„ç¬¬ä¸€è¡Œã€‚è¿™å°±ä¼šåœ¨æ¨¡å¼ç©ºé—´ä¸­åˆ›å»ºå‡ºæ»‘åŠ¨çª—å£æ•ˆæœã€‚å› æ­¤ï¼Œè¿™ä¸ªsedç¨‹åºè„šæœ¬åªä¼šæ˜¾ç¤ºå‡ºdata7.txtæ–‡ä»¶æœ€å10è¡Œ</p><h5>åˆ é™¤è¡Œ</h5><ul><li>åˆ é™¤è¿ç»­çš„ç©ºç™½è¡Œ</li></ul><p>æ•°æ®æ–‡ä»¶ä¸­å‡ºç°å¤šä½™çš„ç©ºç™½è¡Œä¼šéå¸¸è®©äººè®¨åŒã€‚é€šå¸¸ï¼Œæ•°æ®æ–‡ä»¶ä¸­éƒ½ä¼šæœ‰ç©ºç™½è¡Œï¼Œä½†æœ‰æ—¶ç”±äºæ•°æ®è¡Œçš„ç¼ºå¤±ï¼Œä¼šäº§ç”Ÿè¿‡å¤šçš„ç©ºç™½è¡Œï¼ˆå°±åƒä¹‹å‰åŠ å€è¡Œé—´è·ä¾‹å­ä¸­æ‰€è§åˆ°çš„é‚£æ ·ï¼‰ã€‚</p><p>åˆ é™¤è¿ç»­ç©ºç™½è¡Œçš„æœ€ç®€å•åŠæ³•æ˜¯ç”¨åœ°å€åŒºé—´æ¥æ£€æŸ¥æ•°æ®æµã€‚åˆ é™¤è¿ç»­ç©ºç™½è¡Œçš„å…³é”®åœ¨äºåˆ›å»ºåŒ…å«ä¸€ä¸ªéç©ºç™½è¡Œå’Œä¸€ä¸ªç©ºç™½è¡Œçš„åœ°å€åŒºé—´ã€‚å¦‚æœsedç¼–è¾‘å™¨é‡åˆ°äº†è¿™ä¸ªåŒºé—´ï¼Œå®ƒä¸ä¼šåˆ é™¤è¡Œã€‚ä½†å¯¹äºä¸åŒ¹é…è¿™ä¸ªåŒºé—´çš„è¡Œï¼ˆä¸¤ä¸ªæˆ–æ›´å¤šçš„ç©ºç™½è¡Œï¼‰ï¼Œå®ƒä¼šåˆ é™¤è¿™äº›è¡Œã€‚</p><p>ä¸‹é¢æ˜¯å®Œæˆè¿™ä¸ªæ“ä½œçš„è„šæœ¬</p><blockquote><p>/./,/^$/!d</p></blockquote><p>åŒºé—´æ˜¯ /./ åˆ° /^$/ ã€‚åŒºé—´çš„å¼€å§‹åœ°å€ä¼šåŒ¹é…ä»»ä½•å«æœ‰è‡³å°‘ä¸€ä¸ªå­—ç¬¦çš„è¡Œã€‚åŒºé—´çš„ç»“æŸåœ°å€ä¼šåŒ¹é…ä¸€ä¸ªç©ºè¡Œã€‚åœ¨è¿™ä¸ªåŒºé—´å†…çš„è¡Œä¸ä¼šè¢«åˆ é™¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data8.txt
This is line one.


This is line two.

This is line three.



This is line four.

<span class="token function">sed</span> <span class="token string">&#39;/./,/^$/!d&#39;</span> data8.txt
This is line one.

This is line two.

This is line three.

This is line four.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ— è®ºæ–‡ä»¶çš„æ•°æ®è¡Œä¹‹é—´å‡ºç°äº†å¤šå°‘ç©ºç™½è¡Œï¼Œåœ¨è¾“å‡ºä¸­åªä¼šåœ¨è¡Œé—´ä¿ç•™ä¸€ä¸ªç©ºç™½è¡Œ</p><ul><li>åˆ é™¤å¼€å¤´çš„ç©ºç™½è¡Œ</li></ul><p>æ•°æ®æ–‡ä»¶å¼€å¤´æœ‰å¤šä¸ªç©ºç™½è¡Œæ—¶ä¹Ÿå¾ˆçƒ¦äººã€‚é€šå¸¸ï¼Œåœ¨å°†æ•°æ®ä»æ–‡æœ¬æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“æ—¶ï¼Œç©ºç™½è¡Œä¼šäº§ç”Ÿä¸€äº›ç©ºé¡¹ï¼Œæ¶‰åŠè¿™äº›æ•°æ®çš„è®¡ç®—éƒ½å¾—ä½œåºŸã€‚</p><p>åˆ é™¤æ•°æ®æµé¡¶éƒ¨çš„ç©ºç™½è¡Œä¸éš¾ã€‚ä¸‹é¢æ˜¯å®Œæˆè¿™ä¸ªåŠŸèƒ½çš„è„šæœ¬ã€‚</p><blockquote><p>/./,$!d</p></blockquote><p>è¿™ä¸ªè„šæœ¬ç”¨åœ°å€åŒºé—´æ¥å†³å®šå“ªäº›è¡Œè¦åˆ æ‰ã€‚è¿™ä¸ªåŒºé—´ä»å«æœ‰å­—ç¬¦çš„è¡Œå¼€å§‹ï¼Œä¸€ç›´åˆ°æ•°æ®æµç»“æŸã€‚åœ¨è¿™ä¸ªåŒºé—´å†…çš„ä»»ä½•è¡Œéƒ½ä¸ä¼šä»è¾“å‡ºä¸­åˆ é™¤ã€‚è¿™æ„å‘³ç€å«æœ‰å­—ç¬¦çš„ç¬¬ä¸€è¡Œä¹‹å‰çš„ä»»ä½•è¡Œéƒ½ä¼šåˆ é™¤ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data9.txt

This is line one.

This is line two.

<span class="token function">sed</span> <span class="token string">&#39;/./,$!d&#39;</span> data9.txt
This is line one.

This is line two.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•æ–‡ä»¶åœ¨æ•°æ®è¡Œä¹‹å‰æœ‰ä¸¤ä¸ªç©ºç™½è¡Œã€‚è¿™ä¸ªè„šæœ¬æˆåŠŸåœ°åˆ é™¤äº†å¼€å¤´çš„ä¸¤ä¸ªç©ºç™½è¡Œï¼Œä¿ç•™äº†æ•°æ®ä¸­çš„ç©ºç™½è¡Œã€‚</p><ul><li>åˆ é™¤ç»“å°¾çš„ç©ºç™½è¡Œ</li></ul><p>å¾ˆé—æ†¾ï¼Œåˆ é™¤ç»“å°¾çš„ç©ºç™½è¡Œå¹¶ä¸åƒåˆ é™¤å¼€å¤´çš„ç©ºç™½è¡Œé‚£ä¹ˆå®¹æ˜“ã€‚å°±è·Ÿæ‰“å°æ•°æ®æµçš„ç»“å°¾ä¸€æ ·ï¼Œåˆ é™¤æ•°æ®æµç»“å°¾çš„ç©ºç™½è¡Œä¹Ÿéœ€è¦èŠ±ç‚¹å¿ƒæ€ï¼Œåˆ©ç”¨å¾ªç¯æ¥å®ç°ã€‚ åœ¨å¼€å§‹è®¨è®ºå‰ï¼Œå…ˆçœ‹çœ‹è„šæœ¬æ˜¯ä»€ä¹ˆæ ·çš„</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;{
:start
/^\n*$/{$d; N; b start }
}&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data10.txt
This is the first line.
This is the second line.



<span class="token function">sed</span> <span class="token string">&#39;{
&gt; :start
&gt; /^\n*$/{$d ; N ; b start }
&gt; }&#39;</span> data10.txt
This is the first line.
This is the second line.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ é™¤ HTML æ ‡ç­¾</h5><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>cat data11.txt
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>This is the page title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
This is the <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>first<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span> line in the Web page.
This should provide some <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>useful<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span>
information to use in our sed script.
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;s/&lt;[^&gt;]*&gt;//g&#39;</span> data11.txt

This is the page title


This is the first line <span class="token keyword">in</span> the Web page.
This should provide some useful
information to use <span class="token keyword">in</span> our <span class="token function">sed</span> script.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥åŠ ä¸€æ¡åˆ é™¤å‘½ä»¤æ¥åˆ é™¤å¤šä½™çš„ç©ºç™½è¡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token string">&#39;s/&lt;[^&gt;]*&gt;//g ; /^$/d&#39;</span> data11.txt
This is the page title
This is the first line <span class="token keyword">in</span> the Web page.
This should provide some useful
information to use <span class="token keyword">in</span> our <span class="token function">sed</span> script.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="gawk" tabindex="-1"><a class="header-anchor" href="#gawk" aria-hidden="true">#</a> gawk</h3><p>è™½ç„¶sedç¼–è¾‘å™¨æ˜¯éå¸¸æ–¹ä¾¿è‡ªåŠ¨ä¿®æ”¹æ–‡æœ¬æ–‡ä»¶çš„å·¥å…·ï¼Œä½†å…¶ä¹Ÿæœ‰è‡ªèº«çš„é™åˆ¶ã€‚é€šå¸¸ä½ éœ€è¦ä¸€ä¸ªç”¨æ¥å¤„ç†æ–‡ä»¶ä¸­çš„æ•°æ®çš„æ›´é«˜çº§å·¥å…·ï¼Œå®ƒèƒ½æä¾›ä¸€ä¸ªç±»ç¼–ç¨‹ç¯å¢ƒæ¥ä¿®æ”¹å’Œé‡æ–°ç»„ç»‡æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚è¿™æ­£æ˜¯gawkèƒ½å¤Ÿåšåˆ°çš„ã€‚</p><hr><p><strong>è¯´æ˜</strong> åœ¨æ‰€æœ‰çš„å‘è¡Œç‰ˆä¸­éƒ½æ²¡æœ‰é»˜è®¤å®‰è£…gawkç¨‹åºã€‚å¦‚æœä½ æ‰€ç”¨çš„Linuxå‘è¡Œç‰ˆä¸­æ²¡æœ‰åŒ…å«gawk.</p><hr><p>gawkç¨‹åºæ˜¯Unixä¸­çš„åŸå§‹awkç¨‹åºçš„GNUç‰ˆæœ¬ã€‚gawkç¨‹åºè®©æµç¼–è¾‘è¿ˆä¸Šäº†ä¸€ä¸ªæ–°çš„å°é˜¶ï¼Œå®ƒæä¾›äº†ä¸€ç§ç¼–ç¨‹è¯­è¨€è€Œä¸åªæ˜¯ç¼–è¾‘å™¨å‘½ä»¤ã€‚åœ¨gawkç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä½ å¯ä»¥åšä¸‹é¢çš„äº‹æƒ…ï¼š</p><ul><li>å®šä¹‰å˜é‡æ¥ä¿å­˜æ•°æ®ï¼›</li><li>ä½¿ç”¨ç®—æœ¯å’Œå­—ç¬¦ä¸²æ“ä½œç¬¦æ¥å¤„ç†æ•°æ®ï¼›</li><li>ä½¿ç”¨ç»“æ„åŒ–ç¼–ç¨‹æ¦‚å¿µï¼ˆæ¯”å¦‚ if-then è¯­å¥å’Œå¾ªç¯ï¼‰æ¥ä¸ºæ•°æ®å¤„ç†å¢åŠ å¤„ç†é€»è¾‘ï¼›</li><li>é€šè¿‡æå–æ•°æ®æ–‡ä»¶ä¸­çš„æ•°æ®å…ƒç´ ï¼Œå°†å…¶é‡æ–°æ’åˆ—æˆ–æ ¼å¼åŒ–ï¼Œç”Ÿæˆæ ¼å¼åŒ–æŠ¥å‘Šã€‚</li></ul><p>gawkç¨‹åºçš„æŠ¥å‘Šç”Ÿæˆèƒ½åŠ›é€šå¸¸ç”¨æ¥ä»å¤§æ–‡æœ¬æ–‡ä»¶ä¸­æå–æ•°æ®å…ƒç´ ï¼Œå¹¶å°†å®ƒä»¬æ ¼å¼åŒ–æˆå¯è¯»çš„ æŠ¥å‘Šã€‚å…¶ä¸­æœ€å®Œç¾çš„ä¾‹å­æ˜¯æ ¼å¼åŒ–æ—¥å¿—æ–‡ä»¶ã€‚åœ¨æ—¥å¿—æ–‡ä»¶ä¸­æ‰¾å‡ºé”™è¯¯è¡Œä¼šå¾ˆéš¾ï¼Œgawkç¨‹åºå¯ä»¥è®© ä½ ä»æ—¥å¿—æ–‡ä»¶ä¸­è¿‡æ»¤å‡ºéœ€è¦çš„æ•°æ®å…ƒç´ ï¼Œç„¶åä½ å¯ä»¥å°†å…¶æ ¼å¼åŒ–ï¼Œä½¿å¾—é‡è¦çš„æ•°æ®æ›´æ˜“äºé˜…è¯»ã€‚</p><h4 id="åŸºç¡€-1" tabindex="-1"><a class="header-anchor" href="#åŸºç¡€-1" aria-hidden="true">#</a> åŸºç¡€</h4><p>gawkå‘½ä»¤æ ¼å¼</p><blockquote><p>gawk options program file</p></blockquote><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>é€‰ é¡¹  		æ è¿°
-F fs		æŒ‡å®šè¡Œä¸­åˆ’åˆ†æ•°æ®å­—æ®µçš„å­—æ®µåˆ†éš”ç¬¦
-f file		ä»æŒ‡å®šçš„æ–‡ä»¶ä¸­è¯»å–ç¨‹åº
-v var=value		å®šä¹‰gawkç¨‹åºä¸­çš„ä¸€ä¸ªå˜é‡åŠå…¶é»˜è®¤å€¼
-mf N		æŒ‡å®šè¦å¤„ç†çš„æ•°æ®æ–‡ä»¶ä¸­çš„æœ€å¤§å­—æ®µæ•°
-mr N		æŒ‡å®šæ•°æ®æ–‡ä»¶ä¸­çš„æœ€å¤§æ•°æ®è¡Œæ•°
-W keyword		æŒ‡å®šgawkçš„å…¼å®¹æ¨¡å¼æˆ–è­¦å‘Šç­‰çº§
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ä»å‘½ä»¤è¡Œè¯»å–ç¨‹åºè„šæœ¬</h5><p>gawkç¨‹åºè„šæœ¬ç”¨ä¸€å¯¹èŠ±æ‹¬å·æ¥å®šä¹‰ã€‚ä½ å¿…é¡»å°†è„šæœ¬å‘½ä»¤æ”¾åˆ°ä¸¤ä¸ªèŠ±æ‹¬å·ï¼ˆ {} ï¼‰ä¸­ã€‚å¦‚æœä½  é”™è¯¯åœ°ä½¿ç”¨äº†åœ†æ‹¬å·æ¥åŒ…å«gawkè„šæœ¬ï¼Œå°±ä¼šå¾—åˆ°ä¸€æ¡ç±»ä¼¼äºä¸‹é¢çš„é”™è¯¯æç¤ºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;(print &quot;Hello World!&quot;}&#39;</span>
gawk: <span class="token punctuation">(</span>print <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">}</span>
gawk: ^ syntax error
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”±äº gawk å‘½ä»¤è¡Œå‡å®šè„šæœ¬æ˜¯å•ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä½ è¿˜å¿…é¡»å°†è„šæœ¬æ”¾åˆ°å•å¼•å·ä¸­ã€‚ä¸‹é¢çš„ä¾‹å­åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šäº†ä¸€ä¸ªç®€å•çš„gawkç¨‹åºè„šæœ¬ï¼š</p><blockquote><p>gawk &#39;{print &quot;Hello World!&quot;}&#39;</p></blockquote><p>è¿™ä¸ªç¨‹åºè„šæœ¬å®šä¹‰äº†ä¸€ä¸ªå‘½ä»¤ï¼š print å‘½ä»¤ã€‚è¿™ä¸ªå‘½ä»¤åå‰¯å…¶å®ï¼šå®ƒä¼šå°†æ–‡æœ¬æ‰“å°åˆ° STDOUT ã€‚å¦‚æœå°è¯•è¿è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œä½ å¯èƒ½ä¼šæœ‰äº›å¤±æœ›ï¼Œå› ä¸ºä»€ä¹ˆéƒ½ä¸ä¼šå‘ç”Ÿã€‚åŸå› åœ¨äºæ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸ŠæŒ‡å®šæ–‡ä»¶åï¼Œæ‰€ä»¥gawkç¨‹åºä¼šä» STDIN æ¥æ”¶æ•°æ®ã€‚åœ¨è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼Œå®ƒä¼šä¸€ç›´ç­‰å¾…ä» STDIN è¾“å…¥çš„æ–‡æœ¬ã€‚</p><p>å¦‚æœä½ è¾“å…¥ä¸€è¡Œæ–‡æœ¬å¹¶æŒ‰ä¸‹å›è½¦é”®ï¼Œgawkä¼šå¯¹è¿™è¡Œæ–‡æœ¬è¿è¡Œä¸€éç¨‹åºè„šæœ¬ã€‚è·Ÿsedç¼–è¾‘å™¨ä¸€æ ·ï¼Œgawkç¨‹åºä¼šé’ˆå¯¹æ•°æ®æµä¸­çš„æ¯è¡Œæ–‡æœ¬æ‰§è¡Œç¨‹åºè„šæœ¬ã€‚ç”±äºç¨‹åºè„šæœ¬è¢«è®¾ä¸ºæ˜¾ç¤ºä¸€è¡Œå›ºå®šçš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œå› æ­¤ä¸ç®¡ä½ åœ¨æ•°æ®æµä¸­è¾“å…¥ä»€ä¹ˆæ–‡æœ¬ï¼Œéƒ½ä¼šå¾—åˆ°åŒæ ·çš„æ–‡æœ¬è¾“å‡ºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">gawk</span> <span class="token string">&#39;{print &quot;Hello World!&quot;}&#39;</span>
This is a <span class="token builtin class-name">test</span>
Hello World<span class="token operator">!</span>
hello
Hello World<span class="token operator">!</span>
This is another <span class="token builtin class-name">test</span>
Hello World<span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¦ç»ˆæ­¢è¿™ä¸ªgawkç¨‹åºï¼Œä½ å¿…é¡»è¡¨æ˜æ•°æ®æµå·²ç»ç»“æŸäº†ã€‚bash shellæä¾›äº†ä¸€ä¸ªç»„åˆé”®æ¥ç”ŸæˆEOFï¼ˆEnd-of-Fileï¼‰å­—ç¬¦ã€‚Ctrl+Dç»„åˆé”®ä¼šåœ¨bashä¸­äº§ç”Ÿä¸€ä¸ªEOFå­—ç¬¦ã€‚è¿™ä¸ªç»„åˆé”®èƒ½å¤Ÿç»ˆæ­¢è¯¥gawkç¨‹åºå¹¶è¿”å›åˆ°å‘½ä»¤è¡Œç•Œé¢æç¤ºç¬¦ä¸‹</p><h5>ä½¿ç”¨æ•°æ®å­—æ®µå˜é‡</h5><p>gawkçš„ä¸»è¦ç‰¹æ€§ä¹‹ä¸€æ˜¯å…¶å¤„ç†æ–‡æœ¬æ–‡ä»¶ä¸­æ•°æ®çš„èƒ½åŠ›ã€‚å®ƒä¼šè‡ªåŠ¨ç»™ä¸€è¡Œä¸­çš„æ¯ä¸ªæ•°æ®å…ƒç´ åˆ†é…ä¸€ä¸ªå˜é‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œgawkä¼šå°†å¦‚ä¸‹å˜é‡åˆ†é…ç»™å®ƒåœ¨æ–‡æœ¬è¡Œä¸­å‘ç°çš„æ•°æ®å­—æ®µï¼š</p><ul><li>$0 ä»£è¡¨æ•´ä¸ªæ–‡æœ¬è¡Œï¼›</li><li>$1 ä»£è¡¨æ–‡æœ¬è¡Œä¸­çš„ç¬¬1ä¸ªæ•°æ®å­—æ®µï¼›</li><li>$2 ä»£è¡¨æ–‡æœ¬è¡Œä¸­çš„ç¬¬2ä¸ªæ•°æ®å­—æ®µï¼›</li><li>$n ä»£è¡¨æ–‡æœ¬è¡Œä¸­çš„ç¬¬nä¸ªæ•°æ®å­—æ®µã€‚</li></ul><p>gawkç¨‹åºè¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œåªæ˜¾ç¤ºç¬¬1ä¸ªæ•°æ®å­—æ®µçš„å€¼</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data2.txt
One line of <span class="token builtin class-name">test</span> text.
Two lines of <span class="token builtin class-name">test</span> text.
Three lines of <span class="token builtin class-name">test</span> text.

<span class="token function">gawk</span> <span class="token string">&#39;{print $1}&#39;</span> data2.txt
One
Two
Three
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä½ è¦è¯»å–é‡‡ç”¨äº†å…¶ä»–å­—æ®µåˆ†éš”ç¬¦çš„æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ -F é€‰é¡¹æŒ‡å®š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> -F: <span class="token string">&#39;{print $1}&#39;</span> /etc/passwd
root
bin
daemon
adm
lp
<span class="token function">sync</span>
<span class="token function">shutdown</span>
<span class="token function">halt</span>
mail
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åœ¨ç¨‹åºè„šæœ¬ä¸­ä½¿ç”¨å¤šä¸ªå‘½ä»¤</h5><p>å¦‚æœä¸€ç§ç¼–ç¨‹è¯­è¨€åªèƒ½æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼Œé‚£ä¹ˆå®ƒä¸ä¼šæœ‰å¤ªå¤§ç”¨å¤„ã€‚gawkç¼–ç¨‹è¯­è¨€å…è®¸ä½ å°†å¤šæ¡å‘½ä»¤ç»„åˆæˆä¸€ä¸ªæ­£å¸¸çš„ç¨‹åºã€‚è¦åœ¨å‘½ä»¤è¡Œä¸Šçš„ç¨‹åºè„šæœ¬ä¸­ä½¿ç”¨å¤šæ¡å‘½ä»¤ï¼Œåªè¦åœ¨å‘½ä»¤ä¹‹é—´æ”¾ä¸ªåˆ†å·å³å¯</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">&quot;My name is Rich&quot;</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;{$4=&quot;Christine&quot;; print $0}&#39;</span>
My name is Christine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç¬¬ä¸€æ¡å‘½ä»¤ä¼šç»™å­—æ®µå˜é‡ $4 èµ‹å€¼ã€‚ç¬¬äºŒæ¡å‘½ä»¤ä¼šæ‰“å°æ•´ä¸ªæ•°æ®å­—æ®µã€‚æ³¨æ„ï¼Œ gawkç¨‹åºåœ¨è¾“å‡ºä¸­å·²ç»å°†åŸæ–‡æœ¬ä¸­çš„ç¬¬å››ä¸ªæ•°æ®å­—æ®µæ›¿æ¢æˆäº†æ–°å€¼</p></blockquote><p>ä¹Ÿå¯ä»¥ç”¨æ¬¡æç¤ºç¬¦ä¸€æ¬¡ä¸€è¡Œåœ°è¾“å…¥ç¨‹åºè„šæœ¬å‘½ä»¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;{
&gt; $4=&quot;Christine&quot;
&gt; print $0}&#39;</span>
My name is Rich
My name is Christine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨ä½ ç”¨äº†è¡¨ç¤ºèµ·å§‹çš„å•å¼•å·åï¼Œbash shellä¼šä½¿ç”¨æ¬¡æç¤ºç¬¦æ¥æç¤ºä½ è¾“å…¥æ›´å¤šæ•°æ®ã€‚ä½ å¯ä»¥æ¯æ¬¡åœ¨æ¯è¡ŒåŠ ä¸€æ¡å‘½ä»¤ï¼Œç›´åˆ°è¾“å…¥äº†ç»“å°¾çš„å•å¼•å·ã€‚å› ä¸ºæ²¡æœ‰åœ¨å‘½ä»¤è¡Œä¸­æŒ‡å®šæ–‡ä»¶åï¼Œgawkç¨‹åºä¼šä» STDIN ä¸­è·å¾—æ•°æ®ã€‚å½“è¿è¡Œè¿™ä¸ªç¨‹åºçš„æ—¶å€™ï¼Œå®ƒä¼šç­‰ç€è¯»å–æ¥è‡ª STDIN çš„æ–‡æœ¬ã€‚è¦é€€å‡ºç¨‹åºï¼Œåªéœ€æŒ‰ä¸‹Ctrl+Dç»„åˆé”®æ¥è¡¨æ˜æ•°æ®ç»“æŸã€‚</p><h5>ä»æ–‡ä»¶ä¸­è¯»å–ç¨‹åº</h5><p>è·Ÿsedç¼–è¾‘å™¨ä¸€æ ·ï¼Œgawkç¼–è¾‘å™¨å…è®¸å°†ç¨‹åºå­˜å‚¨åˆ°æ–‡ä»¶ä¸­ï¼Œç„¶åå†åœ¨å‘½ä»¤è¡Œä¸­å¼•ç”¨</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> script2.gawk
<span class="token punctuation">{</span>print <span class="token variable">$1</span> <span class="token string">&quot;&#39;s home directory is &quot;</span> <span class="token variable">$6</span><span class="token punctuation">}</span>

<span class="token function">gawk</span> -F: <span class="token parameter variable">-f</span> script2.gawk /etc/passwd
root<span class="token string">&#39;s home directory is /root
bin&#39;</span>s home directory is /bin
daemon<span class="token string">&#39;s home directory is /sbin
adm&#39;</span>s home directory is /var/adm
lp<span class="token string">&#39;s home directory is /var/spool/lpd
[...]
Christine&#39;</span>s home directory is /home/Christine
Samantha<span class="token string">&#39;s home directory is /home/Samantha
Timothy&#39;</span>s home directory is /home/Timothy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯ä»¥åœ¨ç¨‹åºæ–‡ä»¶ä¸­æŒ‡å®šå¤šæ¡å‘½ä»¤ã€‚è¦è¿™ä¹ˆåšçš„è¯ï¼Œåªè¦ä¸€æ¡å‘½ä»¤æ”¾ä¸€è¡Œå³å¯ï¼Œä¸éœ€è¦ç”¨åˆ†å·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> script3.gawk
<span class="token punctuation">{</span>
text <span class="token operator">=</span> <span class="token string">&quot;&#39;s home directory is &quot;</span>
print <span class="token variable">$1</span> text <span class="token variable">$6</span>
<span class="token punctuation">}</span>

<span class="token function">gawk</span> -F: <span class="token parameter variable">-f</span> script3.gawk /etc/passwd
root<span class="token string">&#39;s home directory is /root
bin&#39;</span>s home directory is /bin
daemon<span class="token string">&#39;s home directory is /sbin
adm&#39;</span>s home directory is /var/adm
lp<span class="token string">&#39;s home directory is /var/spool/lpd
[...]
Christine&#39;</span>s home directory is /home/Christine
Samantha<span class="token string">&#39;s home directory is /home/Samantha
Timothy&#39;</span>s home directory is /home/Timothy
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åœ¨å¤„ç†æ•°æ®å‰è¿è¡Œè„šæœ¬</h5><p>gawkè¿˜å…è®¸æŒ‡å®šç¨‹åºè„šæœ¬ä½•æ—¶è¿è¡Œã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œgawkä¼šä»è¾“å…¥ä¸­è¯»å–ä¸€è¡Œæ–‡æœ¬ï¼Œç„¶åé’ˆå¯¹è¯¥è¡Œçš„æ•°æ®æ‰§è¡Œç¨‹åºè„šæœ¬ã€‚æœ‰æ—¶å¯èƒ½éœ€è¦åœ¨å¤„ç†æ•°æ®å‰è¿è¡Œè„šæœ¬ï¼Œæ¯”å¦‚ä¸ºæŠ¥å‘Šåˆ›å»ºæ ‡é¢˜ã€‚ BEGINå…³é”®å­—å°±æ˜¯ç”¨æ¥åšè¿™ä¸ªçš„ã€‚å®ƒä¼šå¼ºåˆ¶gawkåœ¨è¯»å–æ•°æ®å‰æ‰§è¡Œ BEGIN å…³é”®å­—åæŒ‡å®šçš„ç¨‹åºè„šæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN {print &quot;Hello World!&quot;}&#39;</span>
Hello World<span class="token operator">!</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ¬¡ print å‘½ä»¤ä¼šåœ¨è¯»å–æ•°æ®å‰æ˜¾ç¤ºæ–‡æœ¬ã€‚ä½†åœ¨å®ƒæ˜¾ç¤ºäº†æ–‡æœ¬åï¼Œå®ƒä¼šå¿«é€Ÿé€€å‡ºï¼Œä¸ç­‰å¾…ä»»ä½•æ•°æ®ã€‚å¦‚æœæƒ³ä½¿ç”¨æ­£å¸¸çš„ç¨‹åºè„šæœ¬ä¸­å¤„ç†æ•°æ®ï¼Œå¿…é¡»ç”¨å¦ä¸€ä¸ªè„šæœ¬åŒºåŸŸæ¥å®šä¹‰ç¨‹åº</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data3.txt
Line <span class="token number">1</span>
Line <span class="token number">2</span>
Line <span class="token number">3</span>

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN {print &quot;The data3 File Contents:&quot;}
&gt; {print $0}&#39;</span> data3.txt
The data3 File Contents:
Line <span class="token number">1</span>
Line <span class="token number">2</span>
Line <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨gawkæ‰§è¡Œäº†BEGINè„šæœ¬åï¼Œå®ƒä¼šç”¨ç¬¬äºŒæ®µè„šæœ¬æ¥å¤„ç†æ–‡ä»¶æ•°æ®ã€‚è¿™ä¹ˆåšæ—¶è¦å°å¿ƒï¼Œä¸¤æ®µè„šæœ¬ä»ç„¶è¢«è®¤ä¸ºæ˜¯ gawk å‘½ä»¤è¡Œä¸­çš„ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ã€‚ä½ éœ€è¦ç›¸åº”åœ°åŠ ä¸Šå•å¼•å·</p><h5>åœ¨å¤„ç†æ•°æ®åè¿è¡Œè„šæœ¬</h5><p>ä¸ BEGIN å…³é”®å­—ç±»ä¼¼ï¼Œ END å…³é”®å­—å…è®¸ä½ æŒ‡å®šä¸€ä¸ªç¨‹åºè„šæœ¬ï¼Œgawkä¼šåœ¨è¯»å®Œæ•°æ®åæ‰§è¡Œå®ƒ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN {print &quot;The data3 File Contents:&quot;}
&gt; {print $0}
&gt; END {print &quot;End of File&quot;}&#39;</span> data3.txt
The data3 File Contents:
Line <span class="token number">1</span>
Line <span class="token number">2</span>
Line <span class="token number">3</span>
End of File
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“gawkç¨‹åºæ‰“å°å®Œæ–‡ä»¶å†…å®¹åï¼Œå®ƒä¼šæ‰§è¡ŒENDè„šæœ¬ä¸­çš„å‘½ä»¤ã€‚è¿™æ˜¯åœ¨å¤„ç†å®Œæ‰€æœ‰æ­£å¸¸æ•°æ®åç»™æŠ¥å‘Šæ·»åŠ é¡µè„šçš„æœ€ä½³æ–¹æ³•ã€‚ å¯ä»¥å°†æ‰€æœ‰è¿™äº›å†…å®¹æ”¾åˆ°ä¸€èµ·ç»„æˆä¸€ä¸ªæ¼‚äº®çš„å°ç¨‹åºè„šæœ¬æ–‡ä»¶ï¼Œç”¨å®ƒä»ä¸€ä¸ªç®€å•çš„æ•°æ®æ–‡ä»¶ä¸­åˆ›å»ºä¸€ä»½å®Œæ•´çš„æŠ¥å‘Š:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> script4.gawk
BEGIN <span class="token punctuation">{</span>
print <span class="token string">&quot;The latest list of users and shells&quot;</span>
print <span class="token string">&quot; UserID <span class="token entity" title="\t">\t</span> Shell&quot;</span>
print <span class="token string">&quot;-------- <span class="token entity" title="\t">\t</span> -------&quot;</span>
<span class="token assign-left variable">FS</span><span class="token operator">=</span><span class="token string">&quot;:&quot;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">{</span>
print <span class="token variable">$1</span> <span class="token string">&quot; <span class="token entity" title="\t">\t</span> &quot;</span> <span class="token variable">$7</span>
<span class="token punctuation">}</span>

END <span class="token punctuation">{</span>
print <span class="token string">&quot;This concludes the listing&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè„šæœ¬ç”¨BEGINè„šæœ¬æ¥ä¸ºæŠ¥å‘Šåˆ›å»ºæ ‡é¢˜ã€‚å®ƒè¿˜å®šä¹‰äº†ä¸€ä¸ªå«ä½œ FS çš„ç‰¹æ®Šå˜é‡ã€‚è¿™æ˜¯å®šä¹‰å­—æ®µåˆ†éš”ç¬¦çš„å¦ä¸€ç§æ–¹æ³•ã€‚è¿™æ ·ä½ å°±ä¸ç”¨ä¾é è„šæœ¬ç”¨æˆ·åœ¨å‘½ä»¤è¡Œé€‰é¡¹ä¸­å®šä¹‰å­—æ®µåˆ†éš”ç¬¦äº†ã€‚ ä¸‹é¢æ˜¯è¿™ä¸ªgawkç¨‹åºè„šæœ¬çš„è¾“å‡ºï¼ˆæœ‰éƒ¨åˆ†åˆ èŠ‚ï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token parameter variable">-f</span> script4.gawk /etc/passwd
The latest list of <span class="token function">users</span> and shells
UserID Shell
---------------
root /bin/bash
bin /sbin/nologin
daemon /sbin/nologin
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
Christine /bin/bash
mysql /bin/bash
Samantha /bin/bash
Timothy /bin/bash
This concludes the listing
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸é¢„æƒ³çš„ä¸€æ ·ï¼ŒBEGINè„šæœ¬åˆ›å»ºäº†æ ‡é¢˜ï¼Œç¨‹åºè„šæœ¬å¤„ç†ç‰¹å®šæ•°æ®æ–‡ä»¶ï¼ˆ/etc/passwdï¼‰ä¸­çš„ä¿¡æ¯ï¼ŒENDè„šæœ¬ç”Ÿæˆé¡µè„šã€‚è¿™ä¸ªç®€å•çš„è„šæœ¬è®©ä½ å°è¯•äº†ä¸€æŠŠgawkçš„å¼ºå¤§å¨åŠ›ã€‚</p><h4 id="ä½¿ç”¨å˜é‡" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å˜é‡" aria-hidden="true">#</a> ä½¿ç”¨å˜é‡</h4><h5>å†…å»ºå˜é‡</h5><ul><li>å­—æ®µå’Œè®°å½•åˆ†éš”ç¬¦å˜é‡</li></ul><p>æ•°æ®å­—æ®µæ˜¯ç”±å­—æ®µåˆ†éš”ç¬¦æ¥åˆ’å®šçš„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå­—æ®µåˆ†éš”ç¬¦æ˜¯ä¸€ä¸ªç©ºç™½å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç©ºæ ¼ç¬¦æˆ–è€…åˆ¶è¡¨ç¬¦ã€‚</p><p>å†…å»ºå˜é‡ FS æ˜¯ä¸€ç»„å†…å»ºå˜é‡ä¸­çš„ä¸€ä¸ªï¼Œè¿™ç»„å˜é‡ç”¨äºæ§åˆ¶gawkå¦‚ä½•å¤„ç†è¾“å…¥è¾“å‡ºæ•°æ®ä¸­çš„å­—æ®µå’Œè®°å½•ï¼›</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>å˜ é‡  		æ è¿°
FIELDWIDTHS		ç”±ç©ºæ ¼åˆ†éš”çš„ä¸€åˆ—æ•°å­—ï¼Œå®šä¹‰äº†æ¯ä¸ªæ•°æ®å­—æ®µç¡®åˆ‡å®½åº¦
FS		è¾“å…¥å­—æ®µåˆ†éš”ç¬¦
RS		è¾“å…¥è®°å½•åˆ†éš”ç¬¦
OFS		è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦
ORS		è¾“å‡ºè®°å½•åˆ†éš”ç¬¦
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å˜é‡ FS æ¥å®šä¹‰è®°å½•ä¸­çš„å­—æ®µåˆ†éš”ç¬¦ã€‚å˜é‡ OFS å…·å¤‡ç›¸åŒçš„åŠŸèƒ½ï¼Œåªä¸è¿‡æ˜¯ç”¨åœ¨ print å‘½ä»¤çš„è¾“å‡ºä¸Šã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œgawkå°† OFS è®¾æˆä¸€ä¸ªç©ºæ ¼ï¼Œæ‰€ä»¥å¦‚æœä½ ç”¨å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data1
data11,data12,data13,data14,data15
data21,data22,data23,data24,data25
data31,data32,data33,data34,data35

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;} {print $1,$2,$3}&#39;</span> data1
data11 data12 data13
data21 data22 data23
data31 data32 data33
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>print å‘½ä»¤ä¼šè‡ªåŠ¨å°† OFS å˜é‡çš„å€¼æ”¾ç½®åœ¨è¾“å‡ºä¸­çš„æ¯ä¸ªå­—æ®µé—´ã€‚é€šè¿‡è®¾ç½® OFS å˜é‡ï¼Œå¯ä»¥åœ¨è¾“å‡ºä¸­ä½¿ç”¨ä»»æ„å­—ç¬¦ä¸²æ¥åˆ†éš”å­—æ®µ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;; OFS=&quot;-&quot;} {print $1,$2,$3}&#39;</span> data1
data11-data12-data13
data21-data22-data23
data31-data32-data33

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;; OFS=&quot;--&quot;} {print $1,$2,$3}&#39;</span> data1
data11--data12--data13
data21--data22--data23
data31--data32--data33

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;; OFS=&quot;&lt;--&gt;&quot;} {print $1,$2,$3}&#39;</span> data1
data1<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>--<span class="token operator">&gt;</span>data1<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>--<span class="token operator">&gt;</span>data13
data2<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>--<span class="token operator">&gt;</span>data2<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>--<span class="token operator">&gt;</span>data23
data3<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>--<span class="token operator">&gt;</span>data3<span class="token operator"><span class="token file-descriptor important">2</span>&lt;</span>--<span class="token operator">&gt;</span>data33
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>FIELDWIDTHS å˜é‡å…è®¸ä½ ä¸ä¾é å­—æ®µåˆ†éš”ç¬¦æ¥è¯»å–è®°å½•ã€‚åœ¨ä¸€äº›åº”ç”¨ç¨‹åºä¸­ï¼Œæ•°æ®å¹¶æ²¡æœ‰ä½¿ç”¨å­—æ®µåˆ†éš”ç¬¦ï¼Œè€Œæ˜¯è¢«æ”¾ç½®åœ¨äº†è®°å½•ä¸­çš„ç‰¹å®šåˆ—ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¿…é¡»è®¾å®š FIELDWIDTHS å˜é‡æ¥åŒ¹é…æ•°æ®åœ¨è®°å½•ä¸­çš„ä½ç½®ã€‚</p><p>ä¸€æ—¦è®¾ç½®äº† FIELDWIDTH å˜é‡ï¼Œgawkå°±ä¼šå¿½ç•¥ FS å˜é‡ï¼Œå¹¶æ ¹æ®æä¾›çš„å­—æ®µå®½åº¦æ¥è®¡ç®—å­—æ®µã€‚</p><p>ä¸‹é¢æ˜¯ä¸ªé‡‡ç”¨å­—æ®µå®½åº¦è€Œéå­—æ®µåˆ†éš”ç¬¦çš„ä¾‹å­ï¼Œæ¯ä¸ªè®°å½•ä¸­çš„æ•°å­—ä¸²ä¼šæ ¹ æ®å·²å®šä¹‰å¥½çš„å­—æ®µé•¿åº¦æ¥åˆ†å‰²ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data1b
<span class="token number">1005.3247596</span>.37
<span class="token number">115</span>-2.349194.00
05810.1298100.1

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FIELDWIDTHS=&quot;3 5 2 5&quot;}{print $1,$2,$3,$4}&#39;</span> data1b
<span class="token number">100</span> <span class="token number">5.324</span> <span class="token number">75</span> <span class="token number">96.37</span>
<span class="token number">115</span> <span class="token parameter variable">-2.34</span> <span class="token number">91</span> <span class="token number">94.00</span>
058 <span class="token number">10.12</span> <span class="token number">98</span> <span class="token number">100.1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>è­¦å‘Š</strong> ä¸€å®šè¦è®°ä½ï¼Œä¸€æ—¦è®¾å®šäº† FIELDWIDTHS å˜é‡çš„å€¼ï¼Œå°±ä¸èƒ½å†æ”¹å˜äº†ã€‚è¿™ç§æ–¹æ³•å¹¶ä¸é€‚ç”¨äºå˜é•¿çš„å­—æ®µã€‚</p><hr><p>å˜é‡ RS å’Œ ORS å®šä¹‰äº†gawkç¨‹åºå¦‚ä½•å¤„ç†æ•°æ®æµä¸­çš„å­—æ®µã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œgawkå°† RS å’Œ ORS è®¾ä¸ºæ¢è¡Œç¬¦ã€‚é»˜è®¤çš„ RS å€¼è¡¨æ˜ï¼Œè¾“å…¥æ•°æ®æµä¸­çš„æ¯è¡Œæ–°æ–‡æœ¬å°±æ˜¯ä¸€æ¡æ–°çºªå½•ã€‚</p><p>æœ‰æ—¶ï¼Œä½ ä¼šåœ¨æ•°æ®æµä¸­ç¢°åˆ°å æ®å¤šè¡Œçš„å­—æ®µã€‚</p><p>å…¸å‹çš„ä¾‹å­æ˜¯åŒ…å«åœ°å€å’Œç”µè¯å·ç çš„æ•°æ®ï¼Œå…¶ä¸­åœ°å€å’Œç”µè¯å·ç å„å ä¸€è¡Œã€‚</p><p>æŠŠ RS å˜é‡è®¾ç½®æˆç©ºå­—ç¬¦ä¸²ï¼Œç„¶ååœ¨æ•°æ®è®°å½•é—´ç•™ä¸€ä¸ªç©ºç™½è¡Œã€‚gawkä¼šæŠŠæ¯ä¸ªç©ºç™½è¡Œå½“ä½œä¸€ä¸ªè®°å½•åˆ†éš”ç¬¦ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data2
Riley Mullen
<span class="token number">123</span> Main Street
Chicago, IL <span class="token number">60601</span>
<span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234

Frank Williams
<span class="token number">456</span> Oak Street
Indianapolis, IN <span class="token number">46201</span>
<span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876

Haley Snell
<span class="token number">4231</span> Elm Street
Detroit, MI <span class="token number">48201</span>
<span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;\n&quot;; RS=&quot;&quot;} {print $1,$4}&#39;</span> data2
Riley Mullen <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>æ•°æ®å˜é‡</li></ul><p>é™¤äº†å­—æ®µå’Œè®°å½•åˆ†éš”ç¬¦å˜é‡å¤–ï¼Œgawkè¿˜æä¾›äº†å…¶ä»–ä¸€äº›å†…å»ºå˜é‡æ¥å¸®åŠ©ä½ äº†è§£æ•°æ®å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Œå¹¶æå–shellç¯å¢ƒçš„ä¿¡æ¯ã€‚</p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>å˜ é‡  		æ è¿°
ARGC		å½“å‰å‘½ä»¤è¡Œå‚æ•°ä¸ªæ•°
ARGIND		å½“å‰æ–‡ä»¶åœ¨ ARGV ä¸­çš„ä½ç½®
ARGV<span class="token punctuation">[</span>n<span class="token punctuation">]</span>		åŒ…å«å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç»„
CONVFMT		æ•°å­—çš„è½¬æ¢æ ¼å¼ï¼ˆå‚è§ printf è¯­å¥ï¼‰ï¼Œé»˜è®¤å€¼ä¸º <span class="token comment">%.6 g</span>
ENVIRON		å½“å‰shellç¯å¢ƒå˜é‡åŠå…¶å€¼ç»„æˆçš„å…³è”æ•°ç»„
ERRNO		å½“è¯»å–æˆ–å…³é—­è¾“å…¥æ–‡ä»¶å‘ç”Ÿé”™è¯¯æ—¶çš„ç³»ç»Ÿé”™è¯¯å·
FILENAME		ç”¨ä½œgawkè¾“å…¥æ•°æ®çš„æ•°æ®æ–‡ä»¶çš„æ–‡ä»¶å
IGNORECASE		è®¾æˆéé›¶å€¼æ—¶ï¼Œå¿½ç•¥ gawk å‘½ä»¤ä¸­å‡ºç°çš„å­—ç¬¦ä¸²çš„å­—ç¬¦å¤§å°å†™
NF		å«æœ‰æ•°æ®æ–‡ä»¶ä¸­æœ€åä¸€ä¸ªæ•°æ®å­—æ®µçš„æ•°å­—å€¼ã€‚
NR		å·²å¤„ç†è¿‡çš„è®°å½•æ€»æ•°
FNR		å½“å‰æ•°æ®æ–‡ä»¶ä¸­çš„æ•°æ®è¡Œæ•°ï¼ˆè®°å½•æ•°ï¼‰
OFMT		æ•°å­—çš„è¾“å‡ºæ ¼å¼ï¼Œé»˜è®¤å€¼ä¸º <span class="token comment">%.6 g</span>
RLENGTH		ç”± match å‡½æ•°æ‰€åŒ¹é…çš„å­å­—ç¬¦ä¸²çš„é•¿åº¦
RSTART		ç”± match å‡½æ•°æ‰€åŒ¹é…çš„å­å­—ç¬¦ä¸²çš„èµ·å§‹ä½ç½®
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{print ARGC,ARGV[1]}&#39;</span> data1
<span class="token number">2</span> data1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ARGC å˜é‡è¡¨æ˜å‘½ä»¤è¡Œä¸Šæœ‰ä¸¤ä¸ªå‚æ•°ã€‚è¿™åŒ…æ‹¬ gawk å‘½ä»¤å’Œ data1 å‚æ•°ï¼ˆè®°ä½ï¼Œç¨‹åºè„šæœ¬å¹¶ä¸ç®—å‚æ•°ï¼‰ã€‚</p><p>ARGV æ•°ç»„ä»ç´¢å¼• 0 å¼€å§‹ï¼Œä»£è¡¨çš„æ˜¯å‘½ä»¤ã€‚ç¬¬ä¸€ä¸ªæ•°ç»„å€¼æ˜¯ gawk å‘½ä»¤åçš„ç¬¬ä¸€ä¸ªå‘½ä»¤è¡Œå‚æ•°ã€‚</p><hr><p>ENVIRON è·å– shell ç¯å¢ƒå˜é‡</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;
&gt; BEGIN{
&gt; print ENVIRON[&quot;HOME&quot;]
&gt; print ENVIRON[&quot;PATH&quot;]
&gt; }&#39;</span>
/home/rich
/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>è·Ÿè¸ªæ•°æ®å­—æ®µå’Œè®°å½•æ—¶ï¼Œå˜é‡ <code>FNR</code> ã€ <code>NF</code> å’Œ <code>NR</code> ç”¨èµ·æ¥å°±éå¸¸æ–¹ä¾¿ã€‚æœ‰æ—¶ä½ å¹¶ä¸çŸ¥é“è®°å½•ä¸­åˆ°åº•æœ‰å¤šå°‘ä¸ªæ•°æ®å­—æ®µã€‚</p><p><code>NF</code> å˜é‡å¯ä»¥è®©ä½ åœ¨ä¸çŸ¥é“å…·ä½“ä½ç½®çš„æƒ…å†µä¸‹æŒ‡å®šè®°å½•ä¸­çš„æœ€åä¸€ä¸ªæ•°æ®å­—æ®µã€‚<code>FNR</code> å˜é‡çš„å€¼åœ¨ gawk å¤„ç†ç¬¬äºŒä¸ªæ•°æ®æ–‡ä»¶æ—¶è¢«é‡ç½®äº†ï¼Œè€Œ <code>NR</code> å˜é‡åˆ™åœ¨å¤„ç†ç¬¬äºŒä¸ªæ•°æ®æ–‡ä»¶æ—¶ç»§ç»­è®¡æ•°ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;:&quot;; OFS=&quot;:&quot;} {print $1,$NF}&#39;</span> /etc/passwd
testy:/bin/csh
mark:/bin/bash
dan:/bin/bash
mike:/bin/bash
test:/bin/bash

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;}{print $1,&quot;FNR=&quot;FNR}&#39;</span> data1 data1
data11 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">1</span>
data21 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">2</span>
data31 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">3</span>
data11 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">1</span>
data21 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">2</span>
data31 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">3</span>

<span class="token function">gawk</span> <span class="token string">&#39;
&gt; BEGIN {FS=&quot;,&quot;}
&gt; {print $1,&quot;FNR=&quot;FNR,&quot;NR=&quot;NR}
&gt; END{print &quot;There were&quot;,NR,&quot;records processed&quot;}&#39;</span> data1 data1
data11 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">1</span>
data21 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">2</span>
data31 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">3</span>
data11 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">4</span>
data21 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">5</span>
data31 <span class="token assign-left variable">FNR</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">NR</span><span class="token operator">=</span><span class="token number">6</span>
There were <span class="token number">6</span> records processed
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p><strong>è¯´æ˜</strong> åœ¨ä½¿ç”¨gawkæ—¶ä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œgawkè„šæœ¬é€šå¸¸ä¼šæ¯”shellè„šæœ¬ä¸­çš„å…¶ä»–éƒ¨åˆ†è¿˜è¦å¤§ä¸€äº›ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œåœ¨æœ¬ç« çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨shellçš„å¤šè¡Œç‰¹æ€§ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œäº†gawkè„šæœ¬ã€‚åœ¨shellè„šæœ¬ä¸­ä½¿ç”¨gawkæ—¶ï¼Œåº”è¯¥å°†ä¸åŒçš„ gawk å‘½ä»¤æ”¾åˆ°ä¸åŒçš„è¡Œï¼Œè¿™æ ·ä¼šæ¯”è¾ƒå®¹æ˜“é˜…è¯»å’Œç†è§£ï¼Œä¸è¦åœ¨shellè„šæœ¬ä¸­å°†æ‰€æœ‰çš„å‘½ä»¤éƒ½å¡åˆ°åŒä¸€è¡Œã€‚è¿˜æœ‰ï¼Œå¦‚æœä½ å‘ç°åœ¨ä¸åŒçš„shellè„šæœ¬ä¸­ç”¨åˆ°äº†åŒæ ·çš„gawkè„šæœ¬ï¼Œè®°ç€å°†è¿™æ®µgawkè„šæœ¬æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œå¹¶ç”¨ <code>-f</code> å‚æ•°æ¥åœ¨shellè„šæœ¬ä¸­å¼•ç”¨å®ƒ.</p><hr><h5>è‡ªå®šä¹‰å˜é‡</h5><p>è‡ªå®šä¹‰å˜é‡åå¯ä»¥æ˜¯ä»»æ„æ•°ç›®çš„å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œä½†ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚é‡è¦çš„æ˜¯ï¼Œè¦è®°ä½ gawk å˜é‡ååŒºåˆ†å¤§å°å†™ã€‚</p><ul><li>åœ¨è„šæœ¬ä¸­ç»™å˜é‡èµ‹å€¼</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;
&gt; BEGIN{
&gt; testing=&quot;This is a test&quot;
&gt; print testing
&gt; }&#39;</span>
This is a <span class="token builtin class-name">test</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>gawk å˜é‡å¯ä»¥ä¿å­˜æ•°å€¼æˆ–æ–‡æœ¬å€¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;
&gt; BEGIN{
&gt; testing=&quot;This is a test&quot;
&gt; print testing
&gt; testing=45
&gt; print testing
&gt; }&#39;</span>
This is a <span class="token builtin class-name">test</span>
<span class="token number">45</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>èµ‹å€¼è¯­å¥è¿˜å¯ä»¥åŒ…å«æ•°å­¦ç®—å¼æ¥å¤„ç†æ•°å­—å€¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{x=4; x= x * 2 + 3; print x}&#39;</span>
<span class="token number">11</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨å‘½ä»¤è¡Œä¸Šç»™å˜é‡èµ‹å€¼</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> script1
BEGIN<span class="token punctuation">{</span>FS<span class="token operator">=</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>print <span class="token variable">$n</span><span class="token punctuation">}</span>

<span class="token function">gawk</span> <span class="token parameter variable">-f</span> script1 <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token number">2</span> data1
data12
data22
data32

<span class="token function">gawk</span> <span class="token parameter variable">-f</span> script1 <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token number">3</span> data1
data13
data23
data33
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ¥å®šä¹‰å˜é‡å€¼ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ã€‚åœ¨ä½ è®¾ç½®äº†å˜é‡åï¼Œè¿™ä¸ªå€¼åœ¨ä»£ç çš„ BEGIN éƒ¨åˆ†ä¸å¯ç”¨ã€‚å¯ä»¥ç”¨ -v å‘½ä»¤è¡Œå‚æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒå…è®¸ä½ åœ¨ BEGIN ä»£ç ä¹‹å‰è®¾å®šå˜é‡ã€‚åœ¨å‘½ä»¤è¡Œä¸Šï¼Œ-v å‘½ä»¤è¡Œå‚æ•°å¿…é¡»æ”¾åœ¨è„šæœ¬ä»£ç ä¹‹å‰ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> script2
BEGIN<span class="token punctuation">{</span>print <span class="token string">&quot;The starting value is&quot;</span>,n<span class="token punctuation">;</span> <span class="token assign-left variable">FS</span><span class="token operator">=</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>print <span class="token variable">$n</span><span class="token punctuation">}</span>

<span class="token function">gawk</span> <span class="token parameter variable">-f</span> script2 <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token number">3</span> data1
The starting value is
data13
data23
data33

<span class="token function">gawk</span> <span class="token parameter variable">-v</span> <span class="token assign-left variable">n</span><span class="token operator">=</span><span class="token number">3</span> <span class="token parameter variable">-f</span> script2 data1
The starting value is <span class="token number">3</span>
data13
data23
data33
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¤„ç†æ•°ç»„" tabindex="-1"><a class="header-anchor" href="#å¤„ç†æ•°ç»„" aria-hidden="true">#</a> å¤„ç†æ•°ç»„</h4><h5>å®šä¹‰æ•°ç»„å˜é‡</h5><p>æ•°ç»„å˜é‡èµ‹å€¼çš„æ ¼å¼å¦‚ä¸‹ï¼š</p><blockquote><p>var[index] = element</p></blockquote><p>å…¶ä¸­ var æ˜¯å˜é‡åï¼Œ index æ˜¯å…³è”æ•°ç»„çš„ç´¢å¼•å€¼ï¼Œ element æ˜¯æ•°æ®å…ƒç´ å€¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>capital<span class="token punctuation">[</span><span class="token string">&quot;Illinois&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Springfield&quot;</span>
capital<span class="token punctuation">[</span><span class="token string">&quot;Indiana&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Indianapolis&quot;</span>
capital<span class="token punctuation">[</span><span class="token string">&quot;Ohio&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;Columbus&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¼•ç”¨æ•°ç»„å˜é‡æ—¶ï¼Œå¿…é¡»åŒ…å«ç´¢å¼•å€¼æ¥æå–ç›¸åº”çš„æ•°æ®å…ƒç´ å€¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{
&gt; capital[&quot;Illinois&quot;] = &quot;Springfield&quot;
&gt; print capital[&quot;Illinois&quot;]
&gt; }&#39;</span>
Springfield
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å¼•ç”¨æ•°ç»„å˜é‡æ—¶ï¼Œä¼šå¾—åˆ°æ•°æ®å…ƒç´ çš„å€¼ã€‚æ•°æ®å…ƒç´ å€¼æ˜¯æ•°å­—å€¼æ—¶ä¹Ÿä¸€æ ·ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{
&gt; var[1] = 34
&gt; var[2] = 3
&gt; total = var[1] + var[2]
&gt; print total
&gt; }&#39;</span>
<span class="token number">37</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>éå†æ•°ç»„å˜é‡</h5><p>å¯ä»¥ç”¨ for è¯­å¥çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚</p><blockquote><p>for (var in array)</p><p>{</p><p>â€‹ statements</p><p>}</p><p>for è¯­å¥ä¼šåœ¨æ¯æ¬¡å¾ªç¯æ—¶å°†å…³è”æ•°ç»„ array çš„ä¸‹ä¸€ä¸ªç´¢å¼•å€¼èµ‹ç»™å˜é‡ var ï¼Œç„¶åæ‰§è¡Œä¸€é statements .</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{
&gt; var[&quot;a&quot;] = 1
&gt; var[&quot;g&quot;] = 2
&gt; var[&quot;m&quot;] = 3
&gt; var[&quot;u&quot;] = 4
&gt; for (test in var)
&gt; {
&gt; print &quot;Index:&quot;,test,&quot; - Value:&quot;,var[test]
&gt; }
&gt; }&#39;</span>
Index: u - Value: <span class="token number">4</span>
Index: m - Value: <span class="token number">3</span>
Index: a - Value: <span class="token number">1</span>
Index: g - Value: <span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ é™¤æ•°ç»„å˜é‡</h5><p>ä»å…³è”æ•°ç»„ä¸­åˆ é™¤æ•°ç»„ç´¢å¼•è¦ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å‘½ä»¤ã€‚</p><blockquote><p>delete array[index]</p></blockquote><p>åˆ é™¤å‘½ä»¤ä¼šä»æ•°ç»„ä¸­åˆ é™¤å…³è”ç´¢å¼•å€¼å’Œç›¸å…³çš„æ•°æ®å…ƒç´ å€¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{
&gt; var[&quot;a&quot;] = 1
&gt; var[&quot;g&quot;] = 2
&gt; for (test in var)
&gt; {
&gt; print &quot;Index:&quot;,test,&quot; - Value:&quot;,var[test]
&gt; }
&gt; delete var[&quot;g&quot;]
&gt; print &quot;---&quot;
&gt; for (test in var)
&gt; print &quot;Index:&quot;,test,&quot; - Value:&quot;,var[test]
&gt; }&#39;</span>

Index: a - Value: <span class="token number">1</span>
Index: g - Value: <span class="token number">2</span>
---
Index: a - Value: <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨æ¨¡å¼" aria-hidden="true">#</a> ä½¿ç”¨æ¨¡å¼</h4><h5>æ­£åˆ™è¡¨è¾¾å¼</h5><p>åœ¨ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¿…é¡»å‡ºç°åœ¨å®ƒè¦æ§åˆ¶çš„ç¨‹åºè„šæœ¬çš„å·¦èŠ±æ‹¬å·å‰ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;} /11/{print $1}&#39;</span> data1
data11

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;} /,d/{print $1}&#39;</span> data1
data11
data21
data31
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>1 æ­£åˆ™è¡¨è¾¾å¼ /11/ åŒ¹é…äº†æ•°æ®å­—æ®µä¸­å«æœ‰å­—ç¬¦ä¸² 11 çš„è®°å½•</p></li><li><p>2 åŒ¹é…äº†ç”¨ä½œå­—æ®µåˆ†éš”ç¬¦çš„é€—å·ã€‚è¿™ä¹Ÿå¹¶ä¸æ€»æ˜¯ä»¶å¥½äº‹ã€‚å®ƒå¯èƒ½ä¼šé€  æˆå¦‚ä¸‹é—®é¢˜ï¼šå½“è¯•å›¾åŒ¹é…æŸä¸ªæ•°æ®å­—æ®µä¸­çš„ç‰¹å®šæ•°æ®æ—¶ï¼Œè¿™äº›æ•°æ®åˆå‡ºç°åœ¨å…¶ä»–æ•°æ®å­—æ®µä¸­ã€‚å¦‚æœéœ€è¦ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æŸä¸ªç‰¹å®šçš„æ•°æ®å®ä¾‹ï¼Œåº”è¯¥ä½¿ç”¨åŒ¹é…æ“ä½œç¬¦ã€‚</p></li></ul><h5>åŒ¹é…æ“ä½œç¬¦</h5><p>åŒ¹é…æ“ä½œç¬¦ï¼ˆmatching operatorï¼‰å…è®¸å°†æ­£åˆ™è¡¨è¾¾å¼é™å®šåœ¨è®°å½•ä¸­çš„ç‰¹å®šæ•°æ®å­—æ®µã€‚åŒ¹é…æ“ä½œç¬¦æ˜¯æ³¢æµªçº¿ï¼ˆ ~ ï¼‰ã€‚å¯ä»¥æŒ‡å®šåŒ¹é…æ“ä½œç¬¦ã€æ•°æ®å­—æ®µå˜é‡ä»¥åŠè¦åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>$1 ~ /^data/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>$1 å˜é‡ä»£è¡¨è®°å½•ä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®å­—æ®µã€‚è¿™ä¸ªè¡¨è¾¾å¼ä¼šè¿‡æ»¤å‡ºç¬¬ä¸€ä¸ªå­—æ®µä»¥æ–‡æœ¬ data å¼€å¤´çš„æ‰€æœ‰è®°å½•ã€‚</p><p>ä¸‹é¢æ˜¯åœ¨gawkç¨‹åºè„šæœ¬ä¸­ä½¿ç”¨åŒ¹é…æ“ä½œç¬¦çš„ä¾‹å­ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;} $2 ~ /^data2/{print $0}&#39;</span> data1
data21,data22,data23,data24,data25
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åŒ¹é…æ“ä½œç¬¦ä¼šç”¨æ­£åˆ™è¡¨è¾¾å¼ /^data2/ æ¥æ¯”è¾ƒç¬¬äºŒä¸ªæ•°æ®å­—æ®µï¼Œè¯¥æ­£åˆ™è¡¨è¾¾å¼æŒ‡æ˜å­—ç¬¦ä¸²è¦ä»¥æ–‡æœ¬ data2 å¼€å¤´ã€‚</p><p>è¿™å¯æ˜¯ä»¶å¼ºå¤§çš„å·¥å…·ï¼Œgawkç¨‹åºè„šæœ¬ä¸­ç»å¸¸ç”¨å®ƒåœ¨æ•°æ®æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šçš„æ•°æ®å…ƒç´ ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ <span class="token function">gawk</span> -F: <span class="token string">&#39;$1 ~ /rich/{print $1,$NF}&#39;</span> /etc/passwd
rich /bin/bash
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªä¾‹å­ä¼šåœ¨ç¬¬ä¸€ä¸ªæ•°æ®å­—æ®µä¸­æŸ¥æ‰¾æ–‡æœ¬ rich ã€‚å¦‚æœåœ¨è®°å½•ä¸­æ‰¾åˆ°äº†è¿™ä¸ªæ¨¡å¼ï¼Œå®ƒä¼šæ‰“å°è¯¥è®°å½•çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ•°æ®å­—æ®µå€¼ã€‚</p><p>ä½ ä¹Ÿå¯ä»¥ç”¨ ! ç¬¦å·æ¥æ’é™¤æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token variable">$1</span> <span class="token operator">!</span>~ /expression/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¦‚æœè®°å½•ä¸­æ²¡æœ‰æ‰¾åˆ°åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ–‡æœ¬ï¼Œç¨‹åºè„šæœ¬å°±ä¼šä½œç”¨åˆ°è®°å½•æ•°æ®ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> â€“F: <span class="token string">&#39;$1 !~ /rich/{print $1,$NF}&#39;</span> /etc/passwd

root /bin/bash
daemon /bin/sh
bin /bin/sh
sys /bin/sh
--- output truncated ---
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œgawkç¨‹åºè„šæœ¬ä¼šæ‰“å°/etc/passwdæ–‡ä»¶ä¸­ä¸ç”¨æˆ·ID rich ä¸åŒ¹é…çš„ç”¨æˆ·IDå’Œç™»å½•shellã€‚</p><h5>æ•°å­¦è¡¨è¾¾å¼</h5><p>é™¤äº†æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨åŒ¹é…æ¨¡å¼ä¸­ç”¨æ•°å­¦è¡¨è¾¾å¼ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨åŒ¹é…æ•°æ®å­—æ®µä¸­çš„æ•°å­—å€¼æ—¶éå¸¸æ–¹ä¾¿ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³æ˜¾ç¤ºæ‰€æœ‰å±äºrootç”¨æˆ·ç»„ï¼ˆç»„IDä¸º 0 ï¼‰çš„ç³»ç»Ÿç”¨æˆ·ï¼Œå¯ä»¥ç”¨è¿™ä¸ªè„šæœ¬ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> -F: <span class="token string">&#39;$4 == 0{print $1}&#39;</span> /etc/passwd
root
<span class="token function">sync</span>
<span class="token function">shutdown</span>
<span class="token function">halt</span>
operator
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™æ®µè„šæœ¬ä¼šæŸ¥çœ‹ç¬¬å››ä¸ªæ•°æ®å­—æ®µå«æœ‰å€¼ 0 çš„è®°å½•ã€‚åœ¨è¿™ä¸ªLinuxç³»ç»Ÿä¸­ï¼Œæœ‰äº”ä¸ªç”¨æˆ·è´¦æˆ·å±äºrootç”¨æˆ·ç»„ã€‚</p><p>å¯ä»¥ä½¿ç”¨ä»»ä½•å¸¸è§çš„æ•°å­¦æ¯”è¾ƒè¡¨è¾¾å¼ã€‚</p><ul><li>x == y ï¼šå€¼xç­‰äºyã€‚</li><li>x &lt;= y ï¼šå€¼xå°äºç­‰äºyã€‚</li><li>x &lt; y ï¼šå€¼xå°äºyã€‚</li><li>x &gt;= y ï¼šå€¼xå¤§äºç­‰äºyã€‚</li><li>x &gt; y ï¼šå€¼xå¤§äºyã€‚</li></ul><p>ä¹Ÿå¯ä»¥å¯¹æ–‡æœ¬æ•°æ®ä½¿ç”¨è¡¨è¾¾å¼ï¼Œä½†å¿…é¡»å°å¿ƒã€‚è·Ÿæ­£åˆ™è¡¨è¾¾å¼ä¸åŒï¼Œè¡¨è¾¾å¼å¿…é¡»å®Œå…¨åŒ¹é…ã€‚æ•°æ®å¿…é¡»è·Ÿæ¨¡å¼ä¸¥æ ¼åŒ¹é…ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> -F, <span class="token string">&#39;$1 == &quot;data&quot;{print $1}&#39;</span> data1
<span class="token function">gawk</span> -F, <span class="token string">&#39;$1 == &quot;data11&quot;{print $1}&#39;</span> data1
data11
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸€ä¸ªæµ‹è¯•æ²¡æœ‰åŒ¹é…ä»»ä½•è®°å½•ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ•°æ®å­—æ®µçš„å€¼ä¸åœ¨ä»»ä½•è®°å½•ä¸­ã€‚ç¬¬äºŒä¸ªæµ‹è¯•ç”¨å€¼ data11 åŒ¹é…äº†ä¸€æ¡è®°å½•ã€‚</p><h4 id="ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤-1" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤-1" aria-hidden="true">#</a> ä½¿ç”¨ç»“æ„åŒ–å‘½ä»¤</h4><h5>if</h5><p>æ ¼å¼</p><blockquote><p>if (condition)</p><p>â€‹ statement1</p><p>æˆ–è€…</p><p>if (condition) statement1</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data4
<span class="token number">10</span>
<span class="token number">5</span>
<span class="token number">13</span>
<span class="token number">50</span>
<span class="token number">34</span>
<span class="token function">gawk</span> <span class="token string">&#39;{if ($1 &gt; 20) print $1}&#39;</span> data4
<span class="token number">50</span>
<span class="token number">34</span>

<span class="token function">gawk</span> <span class="token string">&#39;{
&gt; if ($1 &gt; 20)
&gt; {
&gt; x = $1 * 2
&gt; print x
&gt; }
&gt; }&#39;</span> data4
<span class="token number">100</span>
<span class="token number">68</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼Œä¸èƒ½å¼„æ·· if è¯­å¥çš„èŠ±æ‹¬å·å’Œç”¨æ¥è¡¨ç¤ºç¨‹åºè„šæœ¬å¼€å§‹å’Œç»“æŸçš„èŠ±æ‹¬å·ã€‚å¦‚æœå¼„æ··äº†ï¼Œgawkç¨‹åºèƒ½å¤Ÿå‘ç°ä¸¢å¤±äº†èŠ±æ‹¬å·ï¼Œå¹¶äº§ç”Ÿä¸€æ¡é”™è¯¯æ¶ˆæ¯</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">gawk</span> <span class="token string">&#39;{
&gt; if ($1 &gt; 20)
&gt; {
&gt; x = $1 * 2
&gt; print x
&gt; }&#39;</span> data4
gawk: cmd. line:6: <span class="token punctuation">}</span>
gawk: cmd. line:6: ^ unexpected newline or end of string
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;{
&gt; if ($1 &gt; 20)
&gt; {
&gt; x = $1 * 2
&gt; print x
&gt; } else
&gt; {
&gt; x = $1 / 2
&gt; print x
&gt; }}&#39;</span> data4
<span class="token number">5</span>
<span class="token number">2.5</span>
<span class="token number">6.5</span>
<span class="token number">100</span>
<span class="token number">68</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>if (condition) statement1; else statement2</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;{if ($1 &gt; 20) print $1 * 2; else print $1 / 2}&#39;</span> data4
<span class="token number">5</span>
<span class="token number">2.5</span>
<span class="token number">6.5</span>
<span class="token number">100</span>
<span class="token number">68</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>while</h5><blockquote><p>while (condition)</p><p>{</p><p>â€‹ statements</p><p>}</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> data5
<span class="token number">130</span> <span class="token number">120</span> <span class="token number">135</span>
<span class="token number">160</span> <span class="token number">113</span> <span class="token number">140</span>
<span class="token number">145</span> <span class="token number">170</span> <span class="token number">215</span>

<span class="token function">gawk</span> <span class="token string">&#39;{
&gt; total = 0
&gt; i = 1
&gt; while (i &lt; 4)
&gt; {
&gt; total += $i
&gt; i++
&gt; }
&gt; avg = total / 3
&gt; print &quot;Average:&quot;,avg
&gt; }&#39;</span> data5
Average: <span class="token number">128.333</span>
Average: <span class="token number">137.667</span>
Average: <span class="token number">176.667</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>while è¯­å¥ä¼šéå†è®°å½•ä¸­çš„æ•°æ®å­—æ®µï¼Œå°†æ¯ä¸ªå€¼éƒ½åŠ åˆ° total å˜é‡ä¸Šï¼Œå¹¶å°†è®¡æ•°å™¨å˜é‡ i å¢å€¼ã€‚</p><p>å½“è®¡æ•°å™¨å€¼ç­‰äº 4 æ—¶ï¼Œ while çš„æ¡ä»¶å˜æˆäº† FALSE ï¼Œå¾ªç¯ç»“æŸï¼Œç„¶åæ‰§è¡Œè„šæœ¬ä¸­çš„ä¸‹ä¸€æ¡è¯­å¥</p></blockquote><p>gawkç¼–ç¨‹è¯­è¨€æ”¯æŒåœ¨ while å¾ªç¯ä¸­ä½¿ç”¨ break è¯­å¥å’Œ continue è¯­å¥ï¼Œå…è®¸ä½ ä»å¾ªç¯ä¸­è·³å‡ºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;{
&gt; total = 0
&gt; i = 1
&gt; while (i &lt; 4)
&gt; {
&gt; total += $i
&gt; if (i == 2)
&gt; break
&gt; i++
&gt; }
&gt; avg = total / 2
&gt; print &quot;The average of the first two data elements is:&quot;,avg
&gt; }&#39;</span> data5
The average of the first two data elements is: <span class="token number">125</span>
The average of the first two data elements is: <span class="token number">136.5</span>
The average of the first two data elements is: <span class="token number">157.5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>do-while</h5><p>ä¼šåœ¨æ£€æŸ¥æ¡ä»¶è¯­å¥ä¹‹å‰æ‰§è¡Œå‘½ä»¤ã€‚</p><blockquote><p>do { statements } while (condition)</p></blockquote><p>è¿™ç§æ ¼å¼ä¿è¯äº†è¯­å¥ä¼šåœ¨æ¡ä»¶è¢«æ±‚å€¼ä¹‹å‰è‡³å°‘æ‰§è¡Œä¸€æ¬¡ã€‚å½“éœ€è¦åœ¨æ±‚å€¼æ¡ä»¶å‰æ‰§è¡Œè¯­å¥æ—¶ï¼Œè¿™ä¸ªç‰¹æ€§éå¸¸æ–¹ä¾¿ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;{
&gt; total = 0
&gt; i = 1
&gt; do
&gt; {
&gt; total += $i
&gt; i++
&gt; } while (total &lt; 150)
&gt; print total }&#39;</span> data5
<span class="token number">250</span>
<span class="token number">160</span>
<span class="token number">315</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>è¿™ä¸ªè„šæœ¬ä¼šè¯»å–æ¯æ¡è®°å½•çš„æ•°æ®å­—æ®µå¹¶å°†å®ƒä»¬åŠ åœ¨ä¸€èµ·ï¼Œç›´åˆ°ç´¯åŠ ç»“æœè¾¾åˆ°150ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ•°æ®å­—æ®µå¤§äº150ï¼ˆå°±åƒåœ¨ç¬¬äºŒæ¡è®°å½•ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼‰ï¼Œåˆ™è„šæœ¬ä¼šä¿è¯åœ¨æ¡ä»¶è¢«æ±‚å€¼å‰è‡³å°‘è¯»å–ç¬¬ä¸€ä¸ªæ•°æ®å­—æ®µçš„å†…å®¹ã€‚</p></blockquote><h5>for</h5><p>for( variable assignment; condition; iteration process)</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;{
&gt; total = 0
&gt; for (i = 1; i &lt; 4; i++)
&gt; {
&gt; total += $i
&gt; }
&gt; avg = total / 3
&gt; print &quot;Average:&quot;,avg
&gt; }&#39;</span> data5
Average: <span class="token number">128.333</span>
Average: <span class="token number">137.667</span>
Average: <span class="token number">176.667</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ ¼å¼åŒ–æ‰“å°-printf" tabindex="-1"><a class="header-anchor" href="#æ ¼å¼åŒ–æ‰“å°-printf" aria-hidden="true">#</a> æ ¼å¼åŒ–æ‰“å° printf</h4><p>å‘½ä»¤çš„æ ¼å¼ï¼š</p><blockquote><p>printf &quot;format string&quot;, var1, var2 . . .</p><p>format string æ˜¯æ ¼å¼åŒ–è¾“å‡ºçš„å…³é”®ã€‚å®ƒä¼šç”¨æ–‡æœ¬å…ƒç´ å’Œæ ¼å¼åŒ–æŒ‡å®šç¬¦æ¥å…·ä½“æŒ‡å®šå¦‚ä½•å‘ˆç°æ ¼å¼åŒ–è¾“å‡ºã€‚ç¬¬ä¸€ä¸ªæ ¼å¼åŒ–æŒ‡å®šç¬¦å¯¹åº”åˆ—å‡ºçš„ ç¬¬ä¸€ä¸ªå˜é‡ï¼Œç¬¬äºŒä¸ªå¯¹åº”ç¬¬äºŒä¸ªå˜é‡ï¼Œä¾æ­¤ç±»æ¨ã€‚</p></blockquote><p>æ ¼å¼åŒ–æŒ‡å®šç¬¦é‡‡ç”¨å¦‚ä¸‹æ ¼å¼ï¼š</p><blockquote><p>%[modifier]control-letter</p></blockquote><p>å…¶ä¸­ control-letter æ˜¯ä¸€ä¸ªå•å­—ç¬¦ä»£ç ï¼Œç”¨äºæŒ‡æ˜æ˜¾ç¤ºä»€ä¹ˆç±»å‹çš„æ•°æ®ï¼Œè€Œ modifier åˆ™å®šä¹‰äº†å¯é€‰çš„æ ¼å¼åŒ–ç‰¹æ€§ã€‚</p><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>æ§åˆ¶å­—æ¯ 		æ è¿°
c		å°†ä¸€ä¸ªæ•°ä½œä¸ºASCIIå­—ç¬¦æ˜¾ç¤º
d		æ˜¾ç¤ºä¸€ä¸ªæ•´æ•°å€¼
i		æ˜¾ç¤ºä¸€ä¸ªæ•´æ•°å€¼ï¼ˆè·Ÿdä¸€æ ·ï¼‰
e		ç”¨ç§‘å­¦è®¡æ•°æ³•æ˜¾ç¤ºä¸€ä¸ªæ•°
f		æ˜¾ç¤ºä¸€ä¸ªæµ®ç‚¹å€¼
g		ç”¨ç§‘å­¦è®¡æ•°æ³•æˆ–æµ®ç‚¹æ•°æ˜¾ç¤ºï¼ˆé€‰æ‹©è¾ƒçŸ­çš„æ ¼å¼ï¼‰
o		æ˜¾ç¤ºä¸€ä¸ªå…«è¿›åˆ¶å€¼
s		æ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²
x		æ˜¾ç¤ºä¸€ä¸ªåå…­è¿›åˆ¶å€¼
X		æ˜¾ç¤ºä¸€ä¸ªåå…­è¿›åˆ¶å€¼ï¼Œä½†ç”¨å¤§å†™å­—æ¯A~F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› æ­¤ï¼Œå¦‚æœä½ éœ€è¦æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œå¯ä»¥ç”¨æ ¼å¼åŒ–æŒ‡å®šç¬¦ %s ã€‚å¦‚æœä½ éœ€è¦æ˜¾ç¤ºä¸€ä¸ªæ•´æ•°å€¼ï¼Œå¯ä»¥ç”¨ %d æˆ– %i ï¼ˆ %d æ˜¯åè¿›åˆ¶æ•°çš„Cé£æ ¼æ˜¾ç¤ºæ–¹å¼ï¼‰ã€‚å¦‚æœä½ è¦ç”¨ç§‘å­¦è®¡æ•°æ³•æ˜¾ç¤ºå¾ˆå¤§çš„å€¼ï¼Œå°±ç”¨ %e æ ¼å¼åŒ–æŒ‡å®šç¬¦</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{
x = 10 * 100
printf &quot;The answer is: %e\n&quot;, x
}&#39;</span>
The answer is: <span class="token number">1</span>.000000e+03
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é™¤äº†æ§åˆ¶å­—æ¯å¤–ï¼Œè¿˜æœ‰3ç§ä¿®é¥°ç¬¦å¯ä»¥ç”¨æ¥è¿›ä¸€æ­¥æ§åˆ¶è¾“å‡ºã€‚</p><ul><li>width ï¼šæŒ‡å®šäº†è¾“å‡ºå­—æ®µæœ€å°å®½åº¦çš„æ•°å­—å€¼ã€‚å¦‚æœè¾“å‡ºçŸ­äºè¿™ä¸ªå€¼ï¼Œprintf ä¼šå°†æ–‡æœ¬å³å¯¹é½ï¼Œå¹¶ç”¨ç©ºæ ¼è¿›è¡Œå¡«å……ã€‚å¦‚æœè¾“å‡ºæ¯”æŒ‡å®šçš„å®½åº¦è¿˜è¦é•¿ï¼Œåˆ™æŒ‰ç…§å®é™…çš„é•¿åº¦è¾“å‡ºã€‚</li><li>prec ï¼šè¿™æ˜¯ä¸€ä¸ªæ•°å­—å€¼ï¼ŒæŒ‡å®šäº†æµ®ç‚¹æ•°ä¸­å°æ•°ç‚¹åé¢ä½æ•°ï¼Œæˆ–è€…æ–‡æœ¬å­—ç¬¦ä¸²ä¸­æ˜¾ç¤ºçš„æœ€å¤§å­—ç¬¦æ•°ã€‚</li><li>-ï¼ˆå‡å·ï¼‰ï¼šæŒ‡æ˜åœ¨å‘æ ¼å¼åŒ–ç©ºé—´ä¸­æ”¾å…¥æ•°æ®æ—¶é‡‡ç”¨å·¦å¯¹é½è€Œä¸æ˜¯å³å¯¹é½ã€‚</li></ul><p>åœ¨ä½¿ç”¨ printf è¯­å¥æ—¶ï¼Œä½ å¯ä»¥å®Œå…¨æ§åˆ¶è¾“å‡ºæ ·å¼ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;\n&quot;; RS=&quot;&quot;} {print $1,$4}&#39;</span> data2
Riley Mullen <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;\n&quot;; RS=&quot;&quot;} {printf &quot;%s %s\n&quot;, $1, $4}&#39;</span> data2
Riley Mullen <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨æ„</strong>ï¼Œä½ éœ€è¦åœ¨ printf å‘½ä»¤çš„æœ«å°¾æ‰‹åŠ¨æ·»åŠ æ¢è¡Œç¬¦æ¥ç”Ÿæˆæ–°è¡Œã€‚æ²¡æ·»åŠ çš„è¯ï¼Œ printf å‘½ä»¤ä¼šç»§ç»­åœ¨åŒä¸€è¡Œæ‰“å°åç»­è¾“å‡ºã€‚</p><p>å¦‚æœéœ€è¦ç”¨å‡ ä¸ªå•ç‹¬çš„ printf å‘½ä»¤åœ¨åŒä¸€è¡Œä¸Šæ‰“å°å¤šä¸ªè¾“å‡ºï¼Œè¿™å°±ä¼šéå¸¸æœ‰ç”¨ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;} {printf &quot;%s &quot;, $1} END{printf &quot;\n&quot;}&#39;</span> data1
data11 data21 data31
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”¨ä¿®é¥°ç¬¦æ¥æ ¼å¼åŒ–ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²å€¼:</p><blockquote><p>é€šè¿‡æ·»åŠ ä¸€ä¸ªå€¼ä¸º 16 çš„ä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬å¼ºåˆ¶ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²çš„è¾“å‡ºå®½åº¦ä¸º16ä¸ªå­—ç¬¦ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œprintf å‘½ä»¤ä½¿ç”¨å³å¯¹é½æ¥å°†æ•°æ®æ”¾åˆ°æ ¼å¼åŒ–ç©ºé—´ä¸­ã€‚è¦æ”¹æˆå·¦å¯¹é½ï¼Œåªéœ€ç»™ä¿®é¥°ç¬¦åŠ ä¸€ä¸ªå‡å·å³å¯ã€‚</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;\n&quot;; RS=&quot;&quot;} {printf &quot;%16s %s\n&quot;, $1, $4}&#39;</span> data2
  Riley Mullen <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
    Haley Snell <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
    
<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{FS=&quot;\n&quot;; RS=&quot;&quot;} {printf &quot;%-16s %s\n&quot;, $1, $4}&#39;</span> data2
Riley Mullen <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤„ç†æµ®ç‚¹å€¼</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;{
&gt; total = 0
&gt; for (i = 1; i &lt; 4; i++)
&gt; {
&gt; total += $i
&gt; }
&gt; avg = total / 3
&gt; printf &quot;Average: %5.1f\n&quot;,avg
&gt; }&#39;</span> data5
Average: <span class="token number">128.3</span>
Average: <span class="token number">137.7</span>
Average: <span class="token number">176.7</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ä½¿ç”¨ %5.1f æ ¼å¼æŒ‡å®šç¬¦æ¥å¼ºåˆ¶ printf å‘½ä»¤å°†æµ®ç‚¹å€¼è¿‘ä¼¼åˆ°å°æ•°ç‚¹åä¸€ä½ã€‚</p></blockquote><h4 id="ä½¿ç”¨å‡½æ•°" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å‡½æ•°" aria-hidden="true">#</a> ä½¿ç”¨å‡½æ•°</h4><h5>æ•°å­¦å‡½æ•°</h5><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>å‡½ æ•° 		 æ è¿°
atan2(x, y)		x/yçš„åæ­£åˆ‡ï¼Œxå’Œyä»¥å¼§åº¦ä¸ºå•ä½
cos(x)		xçš„ä½™å¼¦ï¼Œxä»¥å¼§åº¦ä¸ºå•ä½
exp(x)		xçš„æŒ‡æ•°å‡½æ•°
int(x)		xçš„æ•´æ•°éƒ¨åˆ†ï¼Œå–é è¿‘é›¶ä¸€ä¾§çš„å€¼
log(x)		xçš„è‡ªç„¶å¯¹æ•°
rand( )		æ¯”0å¤§æ¯”1å°çš„éšæœºæµ®ç‚¹å€¼
sin(x)		xçš„æ­£å¼¦ï¼Œxä»¥å¼§åº¦ä¸ºå•ä½
sqrt(x)		xçš„å¹³æ–¹æ ¹
srand(x)		ä¸ºè®¡ç®—éšæœºæ•°æŒ‡å®šä¸€ä¸ªç§å­å€¼
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>x <span class="token operator">=</span> int<span class="token punctuation">(</span><span class="token number">10</span> * rand<span class="token punctuation">(</span><span class="token punctuation">))</span>

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{x=exp(100); print x}&#39;</span>
<span class="token number">26881171418161356094253400435962903554686976</span>

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{x=exp(1000); print x}&#39;</span>
gawk: warning: exp argument <span class="token number">1000</span> is out of range
inf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>ç¬¬ä¸€ä¸ªä¾‹å­ä¼šè®¡ç®—eçš„100æ¬¡å¹‚ï¼Œè™½ç„¶æ•°å€¼å¾ˆå¤§ï¼Œä½†å°šåœ¨ç³»ç»Ÿçš„åŒºé—´å†…ã€‚ç¬¬äºŒä¸ªä¾‹å­å°è¯•è®¡ç®—eçš„1000æ¬¡å¹‚ï¼Œå·²ç»è¶…å‡ºäº†ç³»ç»Ÿçš„æ•°å€¼åŒºé—´ï¼Œæ‰€ä»¥å°±ç”Ÿæˆäº†ä¸€æ¡é”™è¯¯æ¶ˆæ¯ã€‚</p></blockquote><p>gawkè¿˜æ”¯æŒä¸€äº›æŒ‰ä½æ“ä½œæ•°æ®çš„å‡½æ•°ã€‚</p><ul><li>and(v1, v2) ï¼šæ‰§è¡Œå€¼ v1 å’Œ v2 çš„æŒ‰ä½ä¸è¿ç®—ã€‚</li><li>compl(val) ï¼šæ‰§è¡Œ val çš„è¡¥è¿ç®—ã€‚</li><li>lshift(val, count) ï¼šå°†å€¼ val å·¦ç§» count ä½ã€‚</li><li>or(v1, v2) ï¼šæ‰§è¡Œå€¼ v1 å’Œ v2 çš„æŒ‰ä½æˆ–è¿ç®—ã€‚</li><li>rshift(val, count) ï¼šå°†å€¼ val å³ç§» count ä½ã€‚</li><li>xor(v1, v2) ï¼šæ‰§è¡Œå€¼ v1 å’Œ v2 çš„æŒ‰ä½å¼‚æˆ–è¿ç®—ã€‚</li></ul><p>ä½æ“ä½œå‡½æ•°åœ¨å¤„ç†æ•°æ®ä¸­çš„äºŒè¿›åˆ¶å€¼æ—¶éå¸¸æœ‰ç”¨ã€‚</p><h5>å­—ç¬¦ä¸²å‡½æ•°</h5><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>å‡½ æ•°  		æ è¿°
asort(s <span class="token punctuation">[</span>,d<span class="token punctuation">]</span>)		å°†æ•°ç»„sæŒ‰æ•°æ®å…ƒç´ å€¼æ’åºã€‚ç´¢å¼•å€¼ä¼šè¢«æ›¿æ¢æˆè¡¨ç¤ºæ–°çš„æ’åºé¡ºåºçš„è¿ç»­æ•°å­—ã€‚å¦å¤–ï¼Œå¦‚æœæŒ‡å®šäº†dï¼Œåˆ™æ’åºåçš„æ•°ç»„ä¼šå­˜å‚¨åœ¨æ•°ç»„dä¸­

asorti(s <span class="token punctuation">[</span>,d<span class="token punctuation">]</span>)		å°†æ•°ç»„sæŒ‰ç´¢å¼•å€¼æ’åºã€‚ç”Ÿæˆçš„æ•°ç»„ä¼šå°†ç´¢å¼•å€¼ä½œä¸ºæ•°æ®å…ƒç´ å€¼ï¼Œç”¨è¿ç»­æ•°å­—ç´¢å¼•æ¥è¡¨æ˜æ’åºé¡ºåºã€‚å¦å¤–å¦‚æœæŒ‡å®šäº†dï¼Œæ’åºåçš„æ•°ç»„ä¼šå­˜å‚¨åœ¨æ•°ç»„dä¸­

gensub(r, s, h <span class="token punctuation">[</span>, t<span class="token punctuation">]</span>)		æŸ¥æ‰¾å˜é‡<span class="token equation string">$0æˆ–ç›®æ ‡å­—ç¬¦ä¸²tï¼ˆå¦‚æœæä¾›äº†çš„è¯ï¼‰æ¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼rã€‚å¦‚æœhæ˜¯ä¸€ä¸ªä»¥gæˆ–Gå¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œå°±ç”¨sæ›¿æ¢æ‰åŒ¹é…çš„æ–‡æœ¬ã€‚å¦‚æœhæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå®ƒè¡¨ç¤ºè¦æ›¿æ¢æ‰ç¬¬hå¤„råŒ¹é…çš„åœ°æ–¹

gsub(r, s [,t])		æŸ¥æ‰¾å˜é‡$</span>0æˆ–ç›®æ ‡å­—ç¬¦ä¸²tï¼ˆå¦‚æœæä¾›äº†çš„è¯ï¼‰æ¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼rã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±å…¨éƒ¨æ›¿æ¢æˆå­—ç¬¦ä¸²s

index(s, t)		è¿”å›å­—ç¬¦ä¸²tåœ¨å­—ç¬¦ä¸²sä¸­çš„ç´¢å¼•å€¼ï¼Œå¦‚æœæ²¡æ‰¾åˆ°çš„è¯è¿”å› 0

length(<span class="token punctuation">[</span>s<span class="token punctuation">]</span>)		è¿”å›å­—ç¬¦ä¸²sçš„é•¿åº¦ï¼›å¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œè¿”å›<span class="token equation string">$0çš„é•¿åº¦

match(s, r [,a])		è¿”å›å­—ç¬¦ä¸²sä¸­æ­£åˆ™è¡¨è¾¾å¼rå‡ºç°ä½ç½®çš„ç´¢å¼•ã€‚å¦‚æœæŒ‡å®šäº†æ•°ç»„aï¼Œå®ƒä¼šå­˜å‚¨sä¸­åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„é‚£éƒ¨åˆ†

split(s, a [,r])		å°†sç”¨ FS å­—ç¬¦æˆ–æ­£åˆ™è¡¨è¾¾å¼rï¼ˆå¦‚æœæŒ‡å®šäº†çš„è¯ï¼‰åˆ†å¼€æ”¾åˆ°æ•°ç»„aä¸­ã€‚è¿”å›å­—æ®µçš„æ€»æ•°

sprintf(format,variables)		ç”¨æä¾›çš„formatå’Œvariablesè¿”å›ä¸€ä¸ªç±»ä¼¼äºprintfè¾“å‡ºçš„å­—ç¬¦ä¸²

sub(r, s [,t])		åœ¨å˜é‡$</span>0æˆ–ç›®æ ‡å­—ç¬¦ä¸²tä¸­æŸ¥æ‰¾æ­£åˆ™è¡¨è¾¾å¼rçš„åŒ¹é…ã€‚å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±ç”¨å­—ç¬¦ä¸²sæ›¿æ¢æ‰ç¬¬ä¸€å¤„åŒ¹é…

substr(s, i <span class="token punctuation">[</span>,n<span class="token punctuation">]</span>)		è¿”å›sä¸­ä»ç´¢å¼•å€¼iå¼€å§‹çš„nä¸ªå­—ç¬¦ç»„æˆçš„å­å­—ç¬¦ä¸²ã€‚å¦‚æœæœªæä¾›nï¼Œåˆ™è¿”å›så‰©ä¸‹çš„éƒ¨åˆ†

tolower(s)		å°†sä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢æˆå°å†™

toupper(s)		å°†sä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢æˆå¤§å†™
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{x = &quot;testing&quot;; print toupper(x); print length(x) }&#39;</span>
TESTING
<span class="token number">7</span>

<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{
&gt; var[&quot;a&quot;] = 1
&gt; var[&quot;g&quot;] = 2
&gt; var[&quot;m&quot;] = 3
&gt; var[&quot;u&quot;] = 4
&gt; asort(var, test)
&gt; for (i in test)
&gt; print &quot;Index:&quot;,i,&quot; - value:&quot;,test[i]
&gt; }&#39;</span>
Index: <span class="token number">4</span> - value: <span class="token number">4</span>
Index: <span class="token number">1</span> - value: <span class="token number">1</span>
Index: <span class="token number">2</span> - value: <span class="token number">2</span>
Index: <span class="token number">3</span> - value: <span class="token number">3</span>


<span class="token function">gawk</span> <span class="token string">&#39;BEGIN{ FS=&quot;,&quot;}{
&gt; split($0, var)
&gt; print var[1], var[5]
&gt; }&#39;</span> data1
data11 data15
data21 data25
data31 data35
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ—¶é—´å‡½æ•°</h5><div class="language-tex line-numbers-mode" data-ext="tex"><pre class="language-tex"><code>mktime(datespec)		å°†ä¸€ä¸ªæŒ‰YYYY MM DD HH MM SS <span class="token punctuation">[</span>DST<span class="token punctuation">]</span>æ ¼å¼æŒ‡å®šçš„æ—¥æœŸè½¬æ¢æˆæ—¶é—´æˆ³å€¼ â‘ 

strftime(format<span class="token punctuation">[</span>,timestamp<span class="token punctuation">]</span>)		å°†å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³æˆ–timestampï¼ˆå¦‚æœæä¾›äº†çš„è¯ï¼‰è½¬åŒ–æ ¼å¼åŒ–æ—¥æœŸï¼ˆé‡‡ç”¨shellå‡½æ•°date()çš„æ ¼å¼ï¼‰

systime( )		è¿”å›å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;BEGIN{
&gt; date = systime()
&gt; day = strftime(&quot;%A, %B %d, %Y&quot;, date)
&gt; print day
&gt; }&#39;</span>
Friday, December <span class="token number">26</span>, <span class="token number">2014</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>å®šä¹‰å‡½æ•°</h5><p>è¦å®šä¹‰è‡ªå·±çš„å‡½æ•°ï¼Œå¿…é¡»ç”¨ function å…³é”®å­—ã€‚</p><blockquote><p>function name([variables]) { statements }</p></blockquote><p>å‡½æ•°åå¿…é¡»èƒ½å¤Ÿå”¯ä¸€æ ‡è¯†å‡½æ•°ã€‚å¯ä»¥åœ¨è°ƒç”¨çš„gawkç¨‹åºä¸­ä¼ ç»™è¿™ä¸ªå‡½æ•°ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token keyword">function</span> <span class="token function-name function">printthird</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    print <span class="token variable">$3</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> myrand<span class="token punctuation">(</span>limit<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> int<span class="token punctuation">(</span>limit * rand<span class="token punctuation">(</span><span class="token punctuation">))</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>ä½¿ç”¨è‡ªå®šä¹‰å‡½æ•°</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">gawk</span> <span class="token string">&#39;
&gt; function myprint()
&gt; {
&gt; printf &quot;%-16s - %s\n&quot;, $1, $4
&gt; }
&gt; BEGIN{FS=&quot;\n&quot;; RS=&quot;&quot;}
&gt; {
&gt; myprint()
&gt; }&#39;</span> data2

Riley Mullen - <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams - <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell - <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ›å»ºå‡½æ•°åº“</h5><p>é¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ‰€æœ‰gawkå‡½æ•°çš„æ–‡ä»¶</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> funclib
<span class="token keyword">function</span> <span class="token function-name function">myprint</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">printf</span> <span class="token string">&quot;%-16s - %s<span class="token entity" title="\n">\n</span>&quot;</span>, <span class="token variable">$1</span>, <span class="token variable">$4</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> myrand<span class="token punctuation">(</span>limit<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token builtin class-name">return</span> int<span class="token punctuation">(</span>limit * rand<span class="token punctuation">(</span><span class="token punctuation">))</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function-name function">printthird</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    print <span class="token variable">$3</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>funclibæ–‡ä»¶å«æœ‰ä¸‰ä¸ªå‡½æ•°å®šä¹‰ã€‚éœ€è¦ä½¿ç”¨ -f å‘½ä»¤è¡Œå‚æ•°æ¥ä½¿ç”¨å®ƒä»¬ã€‚å¾ˆé—æ†¾ï¼Œä¸èƒ½å°† -f å‘½ä»¤è¡Œå‚æ•°å’Œå†…è”gawkè„šæœ¬æ”¾åˆ°ä¸€èµ·ä½¿ç”¨ï¼Œä¸è¿‡å¯ä»¥åœ¨åŒä¸€ä¸ªå‘½ä»¤è¡Œä¸­ä½¿ç”¨å¤šä¸ª -f å‚æ•°ã€‚</p><p>å› æ­¤ï¼Œè¦ä½¿ç”¨åº“ï¼Œåªè¦åˆ›å»ºä¸€ä¸ªå«æœ‰ä½ çš„gawkç¨‹åºçš„æ–‡ä»¶ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œä¸ŠåŒæ—¶æŒ‡å®šåº“æ–‡ä»¶å’Œç¨‹åºæ–‡ä»¶å°±è¡Œäº†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> script4
BEGIN<span class="token punctuation">{</span> <span class="token assign-left variable">FS</span><span class="token operator">=</span><span class="token string">&quot;<span class="token entity" title="\n">\n</span>&quot;</span><span class="token punctuation">;</span> <span class="token assign-left variable">RS</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>
myprint<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">gawk</span> <span class="token parameter variable">-f</span> funclib <span class="token parameter variable">-f</span> script4 data2
Riley Mullen - <span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">)</span><span class="token number">555</span>-1234
Frank Williams - <span class="token punctuation">(</span><span class="token number">317</span><span class="token punctuation">)</span><span class="token number">555</span>-9876
Haley Snell - <span class="token punctuation">(</span><span class="token number">313</span><span class="token punctuation">)</span><span class="token number">555</span>-4938
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬æ‰‹è¾¹æœ‰ä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«äº†ä¸¤æ”¯é˜Ÿä¼ï¼ˆæ¯é˜Ÿä¸¤åé€‰æ‰‹ï¼‰çš„ä¿é¾„çƒæ¯”èµ›å¾—åˆ†æƒ…å†µã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> scores.txt
Rich Blum,team1,100,115,95
Barbara Blum,team1,110,115,100
Christine Bresnahan,team2,120,115,118
Tim Bresnahan,team2,125,112,116
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä½é€‰æ‰‹éƒ½æœ‰ä¸‰åœºæ¯”èµ›çš„æˆç»©ï¼Œè¿™äº›æˆç»©éƒ½ä¿å­˜åœ¨æ•°æ®æ–‡ä»¶ä¸­ï¼Œæ¯ä½é€‰æ‰‹ç”±ä½äºç¬¬äºŒåˆ—çš„é˜Ÿåæ¥æ ‡è¯†ã€‚ä¸‹é¢çš„è„šæœ¬å¯¹æ¯é˜Ÿçš„æˆç»©è¿›è¡Œäº†æ’åºï¼Œå¹¶è®¡ç®—äº†æ€»åˆ†å’Œå¹³å‡åˆ†ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> bowling.sh
<span class="token comment">#!/bin/bash</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">team</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">gawk</span> â€“F, <span class="token string">&#39;{print $2}&#39;</span> scores.txt <span class="token operator">|</span> <span class="token function">uniq</span><span class="token variable">)</span></span>
<span class="token keyword">do</span>
    <span class="token function">gawk</span> â€“v <span class="token assign-left variable">team</span><span class="token operator">=</span><span class="token variable">$team</span> <span class="token string">&#39;BEGIN{FS=&quot;,&quot;; total=0}
    {
        if ($2==team)
        {
            total += $3 + $4 + $5;
        }
    }
    END {
        avg = total / 6;
        print &quot;Total for&quot;, team, &quot;is&quot;, total, &quot;,the average is&quot;,avg
    }&#39;</span> scores.txt
<span class="token keyword">done</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>./bowling.sh
Total <span class="token keyword">for</span> team1 is <span class="token number">635</span>, the average is <span class="token number">105.833</span>
Total <span class="token keyword">for</span> team2 is <span class="token number">706</span>, the average is <span class="token number">117.667</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ä½¿ç”¨å…¶ä»–-shell" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨å…¶ä»–-shell" aria-hidden="true">#</a> ä½¿ç”¨å…¶ä»– shell</h3><h4 id="ç†è§£dash-shell" tabindex="-1"><a class="header-anchor" href="#ç†è§£dash-shell" aria-hidden="true">#</a> ç†è§£dash shell</h4><h4 id="dash-shellè„šæœ¬ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#dash-shellè„šæœ¬ç¼–ç¨‹" aria-hidden="true">#</a> dash shellè„šæœ¬ç¼–ç¨‹</h4><h4 id="zsh-shellä»‹ç»" tabindex="-1"><a class="header-anchor" href="#zsh-shellä»‹ç»" aria-hidden="true">#</a> zsh shellä»‹ç»</h4><h4 id="zshè„šæœ¬ç¼–ç¨‹" tabindex="-1"><a class="header-anchor" href="#zshè„šæœ¬ç¼–ç¨‹" aria-hidden="true">#</a> zshè„šæœ¬ç¼–ç¨‹</h4><h2 id="åˆ›å»ºå®ç”¨çš„è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºå®ç”¨çš„è„šæœ¬" aria-hidden="true">#</a> åˆ›å»ºå®ç”¨çš„è„šæœ¬</h2><h3 id="ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·" tabindex="-1"><a class="header-anchor" href="#ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·" aria-hidden="true">#</a> ç¼–å†™ç®€å•çš„è„šæœ¬å®ç”¨å·¥å…·</h3><h4 id="å½’æ¡£" tabindex="-1"><a class="header-anchor" href="#å½’æ¡£" aria-hidden="true">#</a> å½’æ¡£</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> Files_To_Backup
/home/Christine/Project
/home/Christine/Downloads
/home/Does_not_exist
/home/Christine/Documents

<span class="token function">useradd</span> Christine

<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /archive/hourly

<span class="token function">cp</span> Files_To_Backup /archive/
<span class="token function">cp</span> Files_To_Backup /archive/hourly/

<span class="token function">groupadd</span> Archivers
<span class="token function">chgrp</span> Archivers /archive

<span class="token function">usermod</span> <span class="token parameter variable">-aG</span> Archivers Christine

<span class="token function">chmod</span> <span class="token number">775</span> /archive

<span class="token function">ls</span> <span class="token parameter variable">-l</span> /archive

<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/Christine/<span class="token punctuation">{</span>Project,Downloads,Documents<span class="token punctuation">}</span>
<span class="token function">mkdir</span> /home/Does_not_exist
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ›å»ºæŒ‰æ—¥å½’æ¡£çš„è„šæœ¬</h5><p>Daily_Archive.sh è„šæœ¬å†…å®¹å¦‚ä¸‹</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#</span>
<span class="token comment"># Daily_Archive - å½’æ¡£æŒ‡å®šæ–‡ä»¶å’Œç›®å½•</span>
<span class="token comment">########################################################</span>
<span class="token comment"># æ”¶é›†å½“å‰æ—¥æœŸ</span>
<span class="token assign-left variable">DATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y%m%d<span class="token variable">)</span></span>
<span class="token comment"># è®¾ç½®å­˜æ¡£æ–‡ä»¶å</span>
<span class="token assign-left variable">FILE</span><span class="token operator">=</span>archive-<span class="token variable">$DATE</span>.tar.gz
<span class="token comment"># è®¾ç½®é…ç½®å’Œç›®æ ‡æ–‡ä»¶</span>
<span class="token assign-left variable">CONFIG_FILE</span><span class="token operator">=</span>/archive/Files_To_Backup
<span class="token assign-left variable">DESTINATION</span><span class="token operator">=</span>/archive/<span class="token variable">$FILE</span>
<span class="token comment">######### Main Script #########################</span>
<span class="token comment"># æ£€æŸ¥å¤‡ä»½é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">$CONFIG_FILE</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># ç¡®ä¿é…ç½®æ–‡ä»¶ä»ç„¶å­˜åœ¨</span>
  <span class="token comment"># å¦‚æœå®ƒå­˜åœ¨ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œç»§ç»­ã€‚</span>
  <span class="token builtin class-name">echo</span>
<span class="token keyword">else</span> <span class="token comment"># å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘å‡ºé”™è¯¯å¹¶é€€å‡ºè„šæœ¬ã€‚</span>
  <span class="token builtin class-name">echo</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$CONFIG_FILE</span> ä¸å­˜åœ¨.&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;ç”±äºç¼ºå°‘é…ç½®æ–‡ä»¶ï¼Œå¤‡ä»½æœªå®Œæˆ&quot;</span>
  <span class="token builtin class-name">echo</span>
  <span class="token builtin class-name">exit</span>
<span class="token keyword">fi</span>
<span class="token comment"># å»ºç«‹æ‰€æœ‰è¦å¤‡ä»½çš„æ–‡ä»¶çš„åç§°</span>
<span class="token assign-left variable">FILE_NO</span><span class="token operator">=</span><span class="token number">1</span>              <span class="token comment"># ä»é…ç½®æ–‡ä»¶çš„ç¬¬ 1 è¡Œå¼€å§‹ã€‚</span>
<span class="token builtin class-name">exec</span> <span class="token operator">&lt;</span><span class="token variable">$CONFIG_FILE</span>     <span class="token comment"># å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°é…ç½®æ–‡ä»¶çš„åç§°</span>
<span class="token builtin class-name">read</span> FILE_NAME         <span class="token comment"># è¯»å–ç¬¬ä¸€æ¡è®°å½•</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token comment"># åˆ›å»ºè¦å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨</span>
  <span class="token comment"># ç¡®ä¿æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">$FILE_NAME</span> <span class="token parameter variable">-o</span> <span class="token parameter variable">-d</span> <span class="token variable">$FILE_NAME</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™å°†å…¶åç§°æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚</span>
    <span class="token assign-left variable">FILE_LIST</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$FILE_LIST</span> <span class="token variable">$FILE_NAME</span>&quot;</span>
  <span class="token keyword">else</span>
    <span class="token comment"># å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå‘å‡ºè­¦å‘Š</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE_NAME</span>, ä¸å­˜åœ¨.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;æ˜¾ç„¶ï¼Œæˆ‘ä¸ä¼šå°†å…¶åŒ…å«åœ¨æ­¤å­˜æ¡£ä¸­.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å®ƒåœ¨ç½‘ä¸Šåˆ—å‡º <span class="token variable">$FILE_NO</span> é…ç½®æ–‡ä»¶çš„.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ç»§ç»­å»ºç«‹å­˜æ¡£åˆ—è¡¨...&quot;</span>
    <span class="token builtin class-name">echo</span>
  <span class="token keyword">fi</span>
  <span class="token assign-left variable">FILE_NO</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$FILE_NO <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span> <span class="token comment"># å°† LineFile ç¼–å·åŠ ä¸€ã€‚</span>
  <span class="token builtin class-name">read</span> FILE_NAME            <span class="token comment"># é˜…è¯»ä¸‹ä¸€æ¡è®°å½•</span>
<span class="token keyword">done</span>
<span class="token comment">#######################################</span>
<span class="token comment"># å¤‡ä»½æ–‡ä»¶å¹¶å‹ç¼©å­˜æ¡£</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å­˜æ¡£...&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token function">tar</span> <span class="token parameter variable">-czf</span> <span class="token variable">$DESTINATION</span> <span class="token variable">$FILE_LIST</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
<span class="token builtin class-name">echo</span> <span class="token string">&quot;å­˜æ¡£å®Œæˆ&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç”Ÿæˆçš„å­˜æ¡£æ–‡ä»¶æ˜¯: <span class="token variable">$DESTINATION</span>&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">exit</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># sh Daily_Archive.sh</span>

å¼€å§‹å­˜æ¡£<span class="token punctuation">..</span>.

å­˜æ¡£å®Œæˆ
ç”Ÿæˆçš„å­˜æ¡£æ–‡ä»¶æ˜¯: /archive/archive-20220922.tar.gz

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>åˆ›å»ºæŒ‰å°æ—¶å½’æ¡£çš„è„šæœ¬</h5><p>Hourly_Archive.sh è„šæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># è®¾ç½®é…ç½®æ–‡ä»¶</span>
<span class="token assign-left variable">CONFIG_FILE</span><span class="token operator">=</span>/archive/hourly/Files_To_Backup
<span class="token comment"># è®¾ç½®åŸºæœ¬å­˜æ¡£ç›®æ ‡ä½ç½®</span>
<span class="token assign-left variable">BASEDEST</span><span class="token operator">=</span>/archive/hourly
<span class="token comment"># æ”¶é›†å½“å‰æ—¥æœŸã€æœˆä»½å’Œæ—¶é—´</span>
<span class="token assign-left variable">YERS</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y<span class="token variable">)</span></span>
<span class="token assign-left variable">MONTH</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%m<span class="token variable">)</span></span>
<span class="token assign-left variable">DAY</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%d<span class="token variable">)</span></span>
<span class="token assign-left variable">TIME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%k%M<span class="token variable">)</span></span>
<span class="token comment"># åˆ›å»ºå­˜æ¡£ç›®æ ‡ç›®å½•</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$BASEDEST</span>/<span class="token variable">$YERS</span>/<span class="token variable">$MONTH</span>/<span class="token variable">$DAY</span>
<span class="token comment"># æ„å»ºå­˜æ¡£ç›®æ ‡æ–‡ä»¶å</span>
<span class="token assign-left variable">DESTINATION</span><span class="token operator">=</span><span class="token variable">$BASEDEST</span>/<span class="token variable">$YERS</span>/<span class="token variable">$MONTH</span>/<span class="token variable">$DAY</span>/archive-<span class="token variable">$TIME</span>.tar.gz
<span class="token comment">########## Main Script ####################</span>
<span class="token comment"># æ£€æŸ¥å¤‡ä»½é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">$CONFIG_FILE</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># ç¡®ä¿é…ç½®æ–‡ä»¶ä»ç„¶å­˜åœ¨</span>
  <span class="token comment"># å¦‚æœå®ƒå­˜åœ¨ï¼Œä»€ä¹ˆä¹Ÿä¸åšï¼Œç»§ç»­ã€‚</span>
  <span class="token builtin class-name">echo</span>
<span class="token keyword">else</span> <span class="token comment"># å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å‘å‡ºé”™è¯¯å¹¶é€€å‡ºè„šæœ¬ã€‚</span>
  <span class="token builtin class-name">echo</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$CONFIG_FILE</span> ä¸å­˜åœ¨.&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;ç”±äºç¼ºå°‘é…ç½®æ–‡ä»¶ï¼Œå¤‡ä»½æœªå®Œæˆ&quot;</span>
  <span class="token builtin class-name">echo</span>
  <span class="token builtin class-name">exit</span>
<span class="token keyword">fi</span>
<span class="token comment"># å»ºç«‹æ‰€æœ‰è¦å¤‡ä»½çš„æ–‡ä»¶çš„åç§°</span>
<span class="token assign-left variable">FILE_NO</span><span class="token operator">=</span><span class="token number">1</span>              <span class="token comment"># ä»é…ç½®æ–‡ä»¶çš„ç¬¬ 1 è¡Œå¼€å§‹ã€‚</span>
<span class="token builtin class-name">exec</span> <span class="token operator">&lt;</span><span class="token variable">$CONFIG_FILE</span>     <span class="token comment"># å°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°é…ç½®æ–‡ä»¶çš„åç§°</span>
<span class="token builtin class-name">read</span> FILE_NAME         <span class="token comment"># è¯»å–ç¬¬ä¸€æ¡è®°å½•</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token comment"># åˆ›å»ºè¦å¤‡ä»½çš„æ–‡ä»¶åˆ—è¡¨</span>
  <span class="token comment"># ç¡®ä¿æ–‡ä»¶æˆ–ç›®å½•å­˜åœ¨</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">$FILE_NAME</span> <span class="token parameter variable">-o</span> <span class="token parameter variable">-d</span> <span class="token variable">$FILE_NAME</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token comment"># å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™å°†å…¶åç§°æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚</span>
    <span class="token assign-left variable">FILE_LIST</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$FILE_LIST</span> <span class="token variable">$FILE_NAME</span>&quot;</span>
  <span class="token keyword">else</span>
    <span class="token comment"># å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå‘å‡ºè­¦å‘Š</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$FILE_NAME</span>, ä¸å­˜åœ¨.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;æ˜¾ç„¶ï¼Œæˆ‘ä¸ä¼šå°†å…¶åŒ…å«åœ¨æ­¤å­˜æ¡£ä¸­.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å®ƒåœ¨ç½‘ä¸Šåˆ—å‡º <span class="token variable">$FILE_NO</span> é…ç½®æ–‡ä»¶çš„.&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ç»§ç»­å»ºç«‹å­˜æ¡£åˆ—è¡¨...&quot;</span>
    <span class="token builtin class-name">echo</span>
  <span class="token keyword">fi</span>
  <span class="token assign-left variable">FILE_NO</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$FILE_NO <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span> <span class="token comment"># å°† LineFile ç¼–å·åŠ ä¸€ã€‚</span>
  <span class="token builtin class-name">read</span> FILE_NAME            <span class="token comment"># é˜…è¯»ä¸‹ä¸€æ¡è®°å½•</span>
<span class="token keyword">done</span>
<span class="token comment">#######################################</span>
<span class="token comment"># å¤‡ä»½æ–‡ä»¶å¹¶å‹ç¼©å­˜æ¡£</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å­˜æ¡£...&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token function">tar</span> <span class="token parameter variable">-czf</span> <span class="token variable">$DESTINATION</span> <span class="token variable">$FILE_LIST</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
<span class="token builtin class-name">echo</span> <span class="token string">&quot;å­˜æ¡£å®Œæˆ&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç”Ÿæˆçš„å­˜æ¡£æ–‡ä»¶æ˜¯: <span class="token variable">$DESTINATION</span>&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">exit</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># sh Hourly_Archive.sh</span>

å¼€å§‹å­˜æ¡£<span class="token punctuation">..</span>.

å­˜æ¡£å®Œæˆ
ç”Ÿæˆçš„å­˜æ¡£æ–‡ä»¶æ˜¯: /archive/hourly/2022/09/22/archive-1825.tar.gz

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç®¡ç†ç”¨æˆ·è´¦æˆ·" tabindex="-1"><a class="header-anchor" href="#ç®¡ç†ç”¨æˆ·è´¦æˆ·" aria-hidden="true">#</a> ç®¡ç†ç”¨æˆ·è´¦æˆ·</h4><h5>éœ€è¦çš„åŠŸèƒ½</h5><p>åˆ é™¤è´¦æˆ·åœ¨ç®¡ç†è´¦æˆ·å·¥ä½œä¸­æ¯”è¾ƒå¤æ‚ã€‚åœ¨åˆ é™¤è´¦æˆ·æ—¶ï¼Œè‡³å°‘éœ€è¦4ä¸ªæ­¥éª¤ï¼š</p><ul><li>(1) è·å¾—æ­£ç¡®çš„å¾…åˆ é™¤ç”¨æˆ·è´¦æˆ·åï¼›</li><li>(2) æ€æ­»æ­£åœ¨ç³»ç»Ÿä¸Šè¿è¡Œçš„å±äºè¯¥è´¦æˆ·çš„è¿›ç¨‹ï¼›</li><li>(3) ç¡®è®¤ç³»ç»Ÿä¸­å±äºè¯¥è´¦æˆ·çš„æ‰€æœ‰æ–‡ä»¶ï¼›</li><li>(4) åˆ é™¤è¯¥ç”¨æˆ·è´¦æˆ·ã€‚</li></ul><h5>åˆ›å»ºè„šæœ¬</h5><p>å®Œæ•´çš„ <a href="http://delete-user.sh" target="_blank" rel="noopener noreferrer">delete-user.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è„šæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#Delete_User - è‡ªåŠ¨æ‰§è¡Œåˆ é™¤å¸æˆ·çš„ 4 ä¸ªæ­¥éª¤</span>
<span class="token comment">###############################################################</span>
<span class="token comment"># å®šä¹‰å‡½æ•°</span>
<span class="token comment">#####################################################</span>
<span class="token keyword">function</span> <span class="token function-name function">get_answer</span> <span class="token punctuation">{</span>
  <span class="token builtin class-name">unset</span> ANSWER
  <span class="token assign-left variable">ASK_COUNT</span><span class="token operator">=</span><span class="token number">0</span>
  <span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">&quot;<span class="token variable">$ANSWER</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span> <span class="token comment">#è™½ç„¶æ²¡æœ‰ç»™å‡ºç­”æ¡ˆï¼Œä½†è¯·ç»§ç»­è¯¢é—®ã€‚</span>
    <span class="token assign-left variable">ASK_COUNT</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>$ASK_COUNT <span class="token operator">+</span> <span class="token number">1</span><span class="token variable">))</span></span>
    <span class="token keyword">case</span> <span class="token variable">$ASK_COUNT</span> <span class="token keyword">in</span> <span class="token comment">#å¦‚æœç”¨æˆ·åœ¨åˆ†é…çš„æ—¶é—´å†…æ²¡æœ‰ç»™å‡ºç­”æ¡ˆ</span>
    <span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;è¯·å›ç­”é—®é¢˜&quot;</span>
      <span class="token builtin class-name">echo</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token number">3</span><span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;æœ€åä¸€æ¬¡å°è¯•...è¯·å›ç­”é—®é¢˜&quot;</span>
      <span class="token builtin class-name">echo</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token number">4</span><span class="token punctuation">)</span>
      <span class="token builtin class-name">echo</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;æ—¢ç„¶ä½ æ‹’ç»å›ç­”è¿™ä¸ªé—®é¢˜...&quot;</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;é€€å‡ºç¨‹åº.&quot;</span>
      <span class="token builtin class-name">echo</span>
      <span class="token builtin class-name">exit</span>
      <span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">esac</span>
    <span class="token builtin class-name">echo</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> <span class="token string">&quot;<span class="token variable">$LINE2</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment">#æ‰“å° 2 è¡Œ</span>
      <span class="token builtin class-name">echo</span> <span class="token variable">$LINE1</span>
      <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token variable">$LINE2</span><span class="token string">&quot; <span class="token entity" title="\c">\c</span>&quot;</span>
    <span class="token keyword">else</span> <span class="token comment">#æ‰“å° 1 è¡Œ</span>
      <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token variable">$LINE1</span><span class="token string">&quot; <span class="token entity" title="\c">\c</span>&quot;</span>
    <span class="token keyword">fi</span>
    <span class="token comment"># åœ¨è¶…æ—¶å‰å…è®¸ 60 ç§’å›ç­”</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-t</span> <span class="token number">60</span> ANSWER
  <span class="token keyword">done</span>
  <span class="token comment"># åšä¸€äº›å˜é‡æ¸…ç†</span>
  <span class="token builtin class-name">unset</span> LINE1
  <span class="token builtin class-name">unset</span> LINE2
<span class="token punctuation">}</span>

<span class="token comment">#####################################################</span>
<span class="token keyword">function</span> <span class="token function-name function">process_answer</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token variable">$ANSWER</span> <span class="token keyword">in</span>
  y <span class="token operator">|</span> Y <span class="token operator">|</span> YES <span class="token operator">|</span> <span class="token function">yes</span> <span class="token operator">|</span> Yes <span class="token operator">|</span> yEs <span class="token operator">|</span> yeS <span class="token operator">|</span> YEs <span class="token operator">|</span> yES<span class="token punctuation">)</span>
    <span class="token comment"># å¦‚æœç”¨æˆ·å›ç­”â€œæ˜¯â€ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšã€‚</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  *<span class="token punctuation">)</span>
    <span class="token comment"># å¦‚æœç”¨æˆ·å›ç­”â€œæ˜¯â€ä»¥å¤–çš„ä»»ä½•å†…å®¹ï¼Œåˆ™é€€å‡ºè„šæœ¬</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$EXIT_LINE1</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$EXIT_LINE2</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">exit</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
  <span class="token comment"># åšä¸€äº›å˜é‡æ¸…ç†</span>
  <span class="token builtin class-name">unset</span> EXIT_LINE1
  <span class="token builtin class-name">unset</span> EXIT_LINE2
<span class="token punctuation">}</span>

<span class="token comment">##############################################</span>
<span class="token comment">############# Main Script ####################</span>
<span class="token comment"># è·å–è¦æ£€æŸ¥çš„ç”¨æˆ·å¸æˆ·åç§°</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç¬¬ 1 æ­¥ - ç¡®å®šè¦åˆ é™¤çš„ç”¨æˆ·å¸æˆ·åç§°&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token assign-left variable">LINE1</span><span class="token operator">=</span><span class="token string">&quot;è¯·è¾“å…¥ç”¨æˆ·çš„ç”¨æˆ·å &quot;</span>
<span class="token assign-left variable">LINE2</span><span class="token operator">=</span><span class="token string">&quot;æ‚¨å¸Œæœ›ä»ç³»ç»Ÿä¸­åˆ é™¤çš„å¸æˆ·:&quot;</span>
get_answer
<span class="token assign-left variable">USER_ACCOUNT</span><span class="token operator">=</span><span class="token variable">$ANSWER</span>
<span class="token comment"># ä¸è„šæœ¬ç”¨æˆ·ä»”ç»†æ£€æŸ¥è¿™æ˜¯æ­£ç¡®çš„ç”¨æˆ·å¸æˆ·</span>
<span class="token assign-left variable">LINE1</span><span class="token operator">=</span><span class="token string">&quot; <span class="token variable">$USER_ACCOUNT</span> æ˜¯ç”¨æˆ·å¸æˆ· &quot;</span>
<span class="token assign-left variable">LINE2</span><span class="token operator">=</span><span class="token string">&quot;ä½ æƒ³ä»ç³»ç»Ÿä¸­åˆ é™¤? [y/n]&quot;</span>
get_answer
<span class="token comment"># è°ƒç”¨è¿‡ç¨‹åº”ç­”å‡½æ•°ï¼šå¦‚æœç”¨æˆ·å›ç­”â€œæ˜¯â€ä»¥å¤–çš„ä»»ä½•å†…å®¹ï¼Œåˆ™é€€å‡ºè„šæœ¬</span>
<span class="token assign-left variable">EXIT_LINE1</span><span class="token operator">=</span><span class="token string">&quot;å› ä¸º <span class="token variable">$USER_ACCOUNT</span> ä¸æ˜¯è´¦æˆ· &quot;</span>
<span class="token assign-left variable">EXIT_LINE2</span><span class="token operator">=</span><span class="token string">&quot;æ‚¨è¦åˆ é™¤çš„ï¼Œæˆ‘ä»¬å°†ç¦»å¼€è„šæœ¬...&quot;</span>
 
<span class="token comment">################################################################</span>
<span class="token comment"># æ£€æŸ¥ USER_ACCOUNT æ˜¯å¦çœŸçš„æ˜¯ç³»ç»Ÿä¸Šçš„å¸æˆ·</span>
<span class="token assign-left variable">USER_ACCOUNT_RECORD</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /etc/passwd <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-w</span> $USER_ACCOUNT<span class="token variable">)</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> <span class="token comment"># å¦‚æœæ²¡æœ‰æ‰¾åˆ°è´¦å·ï¼Œé€€å‡ºè„šæœ¬</span>
  <span class="token builtin class-name">echo</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;è´¦æˆ·, <span class="token variable">$USER_ACCOUNT</span>, æœªæ‰¾åˆ°. &quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;Leaving the script...&quot;</span>
  <span class="token builtin class-name">echo</span>
  <span class="token builtin class-name">exit</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;æˆ‘æ‰¾åˆ°äº†è¿™ä¸ªè®°å½•:&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$USER_ACCOUNT_RECORD</span>
<span class="token assign-left variable">LINE1</span><span class="token operator">=</span><span class="token string">&quot;è¿™æ˜¯æ­£ç¡®çš„ç”¨æˆ·å¸æˆ·å—? [y/n]&quot;</span>
get_answer
<span class="token comment"># è°ƒç”¨ process_answer å‡½æ•°ï¼šå¦‚æœç”¨æˆ·å›ç­”â€œæ˜¯â€ä»¥å¤–çš„ä»»ä½•å†…å®¹ï¼Œåˆ™é€€å‡ºè„šæœ¬</span>
<span class="token assign-left variable">EXIT_LINE1</span><span class="token operator">=</span><span class="token string">&quot;å› ä¸ºå¸æˆ· , <span class="token variable">$USER_ACCOU</span>      NT, æœªæ‰¾åˆ°. &quot;</span>
<span class="token assign-left variable">EXIT_LINE2</span><span class="token operator">=</span><span class="token string">&quot;æ‚¨è¦åˆ é™¤çš„ï¼Œæˆ‘ä»¬å°†ç¦»å¼€è„šæœ¬...&quot;</span>
process_answer
<span class="token comment">##################################################################</span>
<span class="token comment">##################################################################</span>
<span class="token comment">##################################################################</span>
<span class="token comment"># æœç´¢å±äºç”¨æˆ·å¸æˆ·çš„ä»»ä½•æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç¬¬ 2 æ­¥ - åœ¨å±äºç”¨æˆ·å¸æˆ·çš„ç³»ç»Ÿä¸ŠæŸ¥æ‰¾è¿›ç¨‹&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token function">ps</span> <span class="token parameter variable">-u</span> <span class="token variable">$USER_ACCOUNT</span> <span class="token operator">&gt;</span>/dev/null <span class="token comment">#ç”¨æˆ·è¿›ç¨‹æ˜¯å¦æ­£åœ¨è¿è¡Œ?</span>
<span class="token keyword">case</span> <span class="token variable">$?</span> <span class="token keyword">in</span>
<span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token comment"># æ²¡æœ‰ä¸ºæ­¤ç”¨æˆ·å¸æˆ·è¿è¡Œçš„è¿›ç¨‹</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;æ­¤å¸æˆ·å½“å‰æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹&quot;</span>
  <span class="token builtin class-name">echo</span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token comment"># ä¸ºæ­¤ç”¨æˆ·å¸æˆ·è¿è¡Œçš„è¿›ç¨‹ã€‚è¯¢é—®è„šæœ¬ç”¨æˆ·æ˜¯å¦å¸Œæœ›æˆ‘ä»¬ç»ˆæ­¢è¿›ç¨‹ã€‚</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">$USER_ACCOUNT</span> æœ‰ä»¥ä¸‹è¿›ç¨‹æ­£åœ¨è¿è¡Œ: &quot;</span>
  <span class="token builtin class-name">echo</span>
  <span class="token function">ps</span> <span class="token parameter variable">-u</span> <span class="token variable">$USER_ACCOUNT</span>
  <span class="token assign-left variable">LINE1</span><span class="token operator">=</span><span class="token string">&quot;ä½ æƒ³è®©æˆ‘æ€æ­»è¿›ç¨‹å—? [y/n]&quot;</span>
  get_answer
  <span class="token keyword">case</span> <span class="token variable">$ANSWER</span> <span class="token keyword">in</span>
  y <span class="token operator">|</span> Y <span class="token operator">|</span> YES <span class="token operator">|</span> <span class="token function">yes</span> <span class="token operator">|</span> Yes <span class="token operator">|</span> yEs <span class="token operator">|</span> yeS <span class="token operator">|</span> YEs <span class="token operator">|</span> yES<span class="token punctuation">)</span> <span class="token comment"># å¦‚æœç”¨æˆ·å›ç­”â€œæ˜¯â€ï¼Œ</span>
    <span class="token comment"># æ€æ­»ç”¨æˆ·å¸æˆ·è¿›ç¨‹</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;æ€æ­»è¿›ç¨‹...&quot;</span>
    <span class="token comment"># åˆ—å‡ºåœ¨å˜é‡ COMMAND_1 ä¸­è¿è¡Œä»£ç çš„ç”¨æˆ·è¿›ç¨‹</span>
    <span class="token assign-left variable">COMMAND_1</span><span class="token operator">=</span><span class="token string">&quot;ps -u <span class="token variable">$USER_ACCOUNT</span> --no-heading&quot;</span>
    <span class="token comment"># åˆ›å»ºå‘½ä»¤ä»¥åœ¨å˜é‡ COMMAND 3 ä¸­ç»ˆæ­¢è¿›ç¨‹</span>
    <span class="token assign-left variable">COMMAND_3</span><span class="token operator">=</span><span class="token string">&quot;xargs -d <span class="token entity" title="\\">\\</span>n /usr/bin/sudo /bin/kill -9&quot;</span>
    <span class="token comment"># é€šè¿‡ç®¡é“å‘½ä»¤ä¸€èµ·æ€æ­»è¿›ç¨‹</span>
    <span class="token variable">$COMMAND_1</span> <span class="token operator">|</span> <span class="token function">gawk</span> <span class="token string">&#39;{print $1}&#39;</span> <span class="token operator">|</span> <span class="token variable">$COMMAND_3</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Process(es) killed.&quot;</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  *<span class="token punctuation">)</span> <span class="token comment"># å¦‚æœç”¨æˆ·å›ç­”â€œæ˜¯â€ä»¥å¤–çš„ä»»ä½•å†…å®¹ï¼Œè¯·ä¸è¦æ€æ­»ã€‚</span>
    <span class="token builtin class-name">echo</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ä¸ä¼šæ€æ­»è¿›ç¨‹&quot;</span>
    <span class="token builtin class-name">echo</span>
    <span class="token punctuation">;</span><span class="token punctuation">;</span>
  <span class="token keyword">esac</span>
  <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token comment">#################################################################</span>
<span class="token comment">#################################################################</span>
<span class="token comment">#################################################################</span>
<span class="token comment"># åˆ›å»ºç”¨æˆ·å¸æˆ·æ‹¥æœ‰çš„æ‰€æœ‰æ–‡ä»¶çš„æŠ¥å‘Š</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç¬¬ 3 æ­¥ - åœ¨ç³»ç»Ÿä¸ŠæŸ¥æ‰¾å±äºç”¨æˆ·å¸æˆ·çš„æ–‡ä»¶&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;åˆ›å»ºæ‰€æœ‰æ–‡ä»¶çš„æŠ¥å‘Š <span class="token variable">$USER_ACCOUNT</span>.&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;å»ºè®®æ‚¨å¤‡ä»½å­˜æ¡£è¿™äº›æ–‡ä»¶,&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç„¶ååšä¸¤ä»¶äº‹ä¹‹ä¸€:&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; 1) åˆ é™¤æ–‡ä»¶&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; 2) å°†æ–‡ä»¶çš„æ‰€æœ‰æƒæ›´æ”¹ä¸ºå½“å‰ç”¨æˆ·å¸æˆ·.&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;è¯·ç¨ç­‰ã€‚å¯èƒ½è¿˜è¦ç­‰ä¸€ä¸‹...&quot;</span>
<span class="token assign-left variable">REPORT_DATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%y%m%d<span class="token variable">)</span></span>
<span class="token assign-left variable">REPORT_FILE</span><span class="token operator">=</span><span class="token variable">$USER_ACCOUNT</span><span class="token string">&quot;_Files_&quot;</span><span class="token variable">$REPORT_DATE</span><span class="token string">&quot;.rpt&quot;</span>
<span class="token function">find</span> / <span class="token parameter variable">-user</span> <span class="token variable">$USER_ACCOUNT</span> <span class="token operator">&gt;</span><span class="token variable">$REPORT_FILE</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;æŠ¥å‘Šå®Œæˆ.&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;æŠ¥å‘Šåç§°: <span class="token variable">$REPORT_FILE</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;æŠ¥å‘Šåœ°ç‚¹: <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token comment">#################################################################</span>
<span class="token comment">#################################################################</span>
<span class="token comment">#################################################################</span>
<span class="token comment"># åˆ é™¤ç”¨æˆ·å¸æˆ·</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç¬¬ 4 æ­¥ - åˆ é™¤ç”¨æˆ·å¸æˆ·&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token assign-left variable">LINE1</span><span class="token operator">=</span><span class="token string">&quot;åˆ é™¤ <span class="token variable">$USER_ACCOUNT</span>&#39;s ç³»ç»Ÿè´¦æˆ·? [y/n]&quot;</span>
get_answer
<span class="token comment"># è°ƒç”¨ process_answer å‡½æ•°ï¼šå¦‚æœç”¨æˆ·å›ç­”â€œæ˜¯â€ä»¥å¤–çš„ä»»ä½•å†…å®¹ï¼Œåˆ™é€€å‡ºè„šæœ¬</span>
<span class="token assign-left variable">EXIT_LINE1</span><span class="token operator">=</span><span class="token string">&quot;ç”±äºæ‚¨ä¸å¸Œæœ›åˆ é™¤ç”¨æˆ·å¸æˆ·,&quot;</span>
<span class="token assign-left variable">EXIT_LINE2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$USER_ACCOUNT</span> æ­¤æ—¶ï¼Œé€€å‡ºè„šæœ¬...&quot;</span>
process_answer
<span class="token function">userdel</span> <span class="token variable">$USER_ACCOUNT</span> <span class="token comment">#åˆ é™¤ç”¨æˆ·å¸æˆ·</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;ç”¨æˆ·å¸å·, <span class="token variable">$USER_ACCOUNT</span>,å·²è¢«åˆ é™¤&quot;</span>
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">exit</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>è¿è¡Œè„šæœ¬</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># sh delete-user.sh</span>
ç¬¬ <span class="token number">1</span> æ­¥ - ç¡®å®šè¦åˆ é™¤çš„ç”¨æˆ·å¸æˆ·åç§°


è¯·è¾“å…¥ç”¨æˆ·çš„ç”¨æˆ·å
æ‚¨å¸Œæœ›ä»ç³»ç»Ÿä¸­åˆ é™¤çš„å¸æˆ·: user2

user2 æ˜¯ç”¨æˆ·å¸æˆ·
ä½ æƒ³ä»ç³»ç»Ÿä¸­åˆ é™¤? <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> y

æˆ‘æ‰¾åˆ°äº†è¿™ä¸ªè®°å½•:
user2:x:1005:1005::/home/user2:/bin/bash

è¿™æ˜¯æ­£ç¡®çš„ç”¨æˆ·å¸æˆ·å—? <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> y

ç¬¬ <span class="token number">2</span> æ­¥ - åœ¨å±äºç”¨æˆ·å¸æˆ·çš„ç³»ç»Ÿä¸ŠæŸ¥æ‰¾è¿›ç¨‹

æ­¤å¸æˆ·å½“å‰æ²¡æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹


ç¬¬ <span class="token number">3</span> æ­¥ - åœ¨ç³»ç»Ÿä¸ŠæŸ¥æ‰¾å±äºç”¨æˆ·å¸æˆ·çš„æ–‡ä»¶

åˆ›å»ºæ‰€æœ‰æ–‡ä»¶çš„æŠ¥å‘Š user2.

å»ºè®®æ‚¨å¤‡ä»½å­˜æ¡£è¿™äº›æ–‡ä»¶,
ç„¶ååšä¸¤ä»¶äº‹ä¹‹ä¸€:
 <span class="token number">1</span><span class="token punctuation">)</span> åˆ é™¤æ–‡ä»¶
 <span class="token number">2</span><span class="token punctuation">)</span> å°†æ–‡ä»¶çš„æ‰€æœ‰æƒæ›´æ”¹ä¸ºå½“å‰ç”¨æˆ·å¸æˆ·.

è¯·ç¨ç­‰ã€‚å¯èƒ½è¿˜è¦ç­‰ä¸€ä¸‹<span class="token punctuation">..</span>.

æŠ¥å‘Šå®Œæˆ.
æŠ¥å‘Šåç§°: user2_Files_220922.rpt
æŠ¥å‘Šåœ°ç‚¹: /root


ç¬¬ <span class="token number">4</span> æ­¥ - åˆ é™¤ç”¨æˆ·å¸æˆ·


åˆ é™¤ user2&#39;s ç³»ç»Ÿè´¦æˆ·? <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> y

ç”¨æˆ·å¸å·, user2,å·²è¢«åˆ é™¤

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># cat user2_Files_220922.rpt</span>
/home/user2
/home/user2/.bash_logout
/home/user2/.bash_profile
/home/user2/.bashrc
/home/user2/.mozilla
/home/user2/.mozilla/extensions
/home/user2/.mozilla/plugins
/home/user2/.bash_history
/var/spool/mail/user2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ç›‘æµ‹ç£ç›˜ç©ºé—´" tabindex="-1"><a class="header-anchor" href="#ç›‘æµ‹ç£ç›˜ç©ºé—´" aria-hidden="true">#</a> ç›‘æµ‹ç£ç›˜ç©ºé—´</h4><h5>éœ€è¦çš„åŠŸèƒ½</h5><p>ä½ è¦ç”¨åˆ°çš„ç¬¬ä¸€ä¸ªå·¥å…·æ˜¯ du å‘½ä»¤ã€‚è¯¥å‘½ä»¤èƒ½å¤Ÿæ˜¾ç¤ºå‡ºå•ä¸ªæ–‡ä»¶å’Œç›®å½•çš„ç£ç›˜ä½¿ç”¨æƒ…å†µã€‚ -s é€‰é¡¹ç”¨æ¥æ€»ç»“ç›®å½•ä¸€çº§çš„æ•´ä½“ä½¿ç”¨çŠ¶å†µã€‚è¿™åœ¨è®¡ç®—å•ä¸ªç”¨æˆ·ä½¿ç”¨çš„æ€»ä½“ç£ç›˜ç©ºé—´æ—¶å¾ˆæ–¹ä¾¿ã€‚ä¸‹é¢çš„ä¾‹å­æ˜¯ä½¿ç”¨ du å‘½ä»¤æ€»ç»“/homeç›®å½•ä¸‹æ¯ä¸ªç”¨æˆ·çš„$HOMEç›®å½•çš„ç£ç›˜å ç”¨æƒ…å†µã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># du -s /home/*</span>
<span class="token number">12</span>      /home/barbara
<span class="token number">12</span>      /home/christine
<span class="token number">108</span>     /home/shell
<span class="token number">942476</span>  /home/soft
<span class="token number">12</span>      /home/tim
<span class="token number">16</span>      /home/user1
<span class="token number">16</span>      /home/user2

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># du -s /var/log/*</span>
<span class="token number">6308</span>    /var/log/anaconda
<span class="token number">988</span>     /var/log/ansible.log
<span class="token number">12980</span>   /var/log/audit
<span class="token number">0</span>       /var/log/boot.log
<span class="token number">12</span>      /var/log/boot.log-20220914
<span class="token number">12</span>      /var/log/boot.log-20220915
<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">]</span>

<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># du -S /var/log/*</span>
<span class="token number">6308</span>    /var/log/anaconda
<span class="token number">988</span>     /var/log/ansible.log
<span class="token number">12980</span>   /var/log/audit

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>-S ï¼ˆå¤§å†™çš„Sï¼‰é€‰é¡¹èƒ½æ›´é€‚åˆæˆ‘ä»¬çš„ç›®çš„ï¼Œå®ƒä¸ºæ¯ä¸ªç›®å½•å’Œå­ç›®å½•åˆ†åˆ«æä¾›äº†æ€»è®¡ä¿¡æ¯ã€‚è¿™æ ·ä½ å°±èƒ½å¿«é€Ÿåœ°å®šä½é—®é¢˜çš„æ ¹æºã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># Big_Users - åœ¨å„ç§ç›®å½•ä¸­æŸ¥æ‰¾å¤§ç£ç›˜ç©ºé—´ç”¨æˆ·</span>
<span class="token comment">###############################################################</span>
<span class="token assign-left variable">CHECK_DIRECTORIES</span><span class="token operator">=</span><span class="token string">&quot; /var/log /home&quot;</span> <span class="token comment">#è¦æ£€æŸ¥çš„ç›®å½•</span>
<span class="token comment">############## Main Script #################################</span>
<span class="token assign-left variable">DATE</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> <span class="token string">&#39;+%Y%m%d&#39;</span><span class="token variable">)</span></span>          <span class="token comment">#æŠ¥å‘Šæ–‡ä»¶çš„æ—¥æœŸ</span>
<span class="token builtin class-name">exec</span> <span class="token operator">&gt;</span>disk_space_<span class="token variable">$DATE</span>.rpt      <span class="token comment">#åˆ¶ä½œæŠ¥å‘Šæ–‡ä»¶ STDOUT</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;åå¤§ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡&quot;</span> <span class="token comment">#æŠ¥å‘Šæ ‡é¢˜</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;æ¥è‡ª <span class="token variable">$CHECK_DIRECTORIES</span> ç›®å½•&quot;</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">DIR_CHECK</span> <span class="token keyword">in</span> <span class="token variable">$CHECK_DIRECTORIES</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;The <span class="token variable">$DIR_CHECK</span> ç›®å½•:&quot;</span>
  <span class="token comment"># åœ¨æ­¤ç›®å½•ä¸­åˆ›å»ºå‰ååç£ç›˜ç©ºé—´ç”¨æˆ·çš„åˆ—è¡¨</span>
  <span class="token function">du</span> <span class="token parameter variable">-S</span> <span class="token variable">$DIR_CHECK</span> <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>/dev/null <span class="token operator">|</span>
    <span class="token function">sort</span> <span class="token parameter variable">-rn</span> <span class="token operator">|</span>
    <span class="token function">sed</span> <span class="token string">&#39;{11,$D; =}&#39;</span> <span class="token operator">|</span>
    <span class="token function">sed</span> <span class="token string">&#39;N; s/\n/ /&#39;</span> <span class="token operator">|</span>
    <span class="token function">gawk</span> <span class="token string">&#39;{printf $1 &quot;:&quot; &quot;\t&quot; $2 &quot;\t&quot; $3 &quot;\n&quot;}&#39;</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">exit</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># chmod +x disk-info.sh</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># sh disk-info.sh</span>
<span class="token punctuation">[</span>root@admin ~<span class="token punctuation">]</span><span class="token comment"># cat disk_space_20220922.rpt</span>
åå¤§ç£ç›˜ç©ºé—´ä½¿ç”¨ç‡
æ¥è‡ª  /var/log /home ç›®å½•

The /var/log ç›®å½•:
<span class="token number">1</span>:      <span class="token number">13196</span>   /var/log/audit
<span class="token number">2</span>:      <span class="token number">6308</span>    /var/log/anaconda
<span class="token number">3</span>:      <span class="token number">6212</span>    /var/log
<span class="token number">4</span>:      <span class="token number">2232</span>    /var/log/sa
<span class="token number">5</span>:      <span class="token number">100</span>     /var/log/tuned
<span class="token number">6</span>:      <span class="token number">24</span>      /var/log/tomcat
<span class="token number">7</span>:      <span class="token number">8</span>       /var/log/pki
<span class="token number">8</span>:      <span class="token number">0</span>       /var/log/sssd
<span class="token number">9</span>:      <span class="token number">0</span>       /var/log/samba/old
<span class="token number">10</span>:     <span class="token number">0</span>       /var/log/samba

The /home ç›®å½•:
<span class="token number">1</span>:      <span class="token number">942476</span>  /home/soft
<span class="token number">2</span>:      <span class="token number">108</span>     /home/shell
<span class="token number">3</span>:      <span class="token number">16</span>      /home/user2
<span class="token number">4</span>:      <span class="token number">16</span>      /home/user1
<span class="token number">5</span>:      <span class="token number">12</span>      /home/tim
<span class="token number">6</span>:      <span class="token number">12</span>      /home/christine
<span class="token number">7</span>:      <span class="token number">12</span>      /home/barbara
<span class="token number">8</span>:      <span class="token number">0</span>       /home/user2/.mozilla/plugins
<span class="token number">9</span>:      <span class="token number">0</span>       /home/user2/.mozilla/extensions
<span class="token number">10</span>:     <span class="token number">0</span>       /home/user2/.mozilla
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="åˆ›å»ºä¸æ•°æ®åº“ã€webåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸æ•°æ®åº“ã€webåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬" aria-hidden="true">#</a> åˆ›å»ºä¸æ•°æ®åº“ã€WebåŠç”µå­é‚®ä»¶ç›¸å…³çš„è„šæœ¬</h3><h4 id="mysql-æ•°æ®åº“" tabindex="-1"><a class="header-anchor" href="#mysql-æ•°æ®åº“" aria-hidden="true">#</a> MySQL æ•°æ®åº“</h4><h5>å‘mysqlæœåŠ¡å™¨å‘é€å‘½ä»¤</h5><p>æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼š</p><ul><li>å‘é€å•ä¸ªå‘½ä»¤å¹¶é€€å‡ºï¼›</li><li>å‘é€å¤šä¸ªå‘½ä»¤ã€‚</li></ul><p>è¦å‘é€å•ä¸ªå‘½ä»¤ï¼Œä½ å¿…é¡»å°†å‘½ä»¤ä½œä¸º mysql å‘½ä»¤è¡Œçš„ä¸€éƒ¨åˆ†ã€‚å¯¹äº mysql å‘½ä»¤ï¼Œå¯ä»¥ç”¨ -e é€‰é¡¹ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">cat</span> mtest1
<span class="token comment">#!/bin/bas</span>
<span class="token assign-left variable">MYSQL</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> mysql<span class="token variable">)</span></span>
<span class="token variable">$MYSQL</span> mytest <span class="token parameter variable">-u</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;select * from employees&#39;</span>

$ ./mtest1
+-------+----------+------------+---------+
<span class="token operator">|</span> empid <span class="token operator">|</span> lastname <span class="token operator">|</span> firstname <span class="token operator">|</span> salary <span class="token operator">|</span>
+-------+----------+------------+---------+
<span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> Blum <span class="token operator">|</span> Rich <span class="token operator">|</span> <span class="token number">25000</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> Blum <span class="token operator">|</span> Barbara <span class="token operator">|</span> <span class="token number">45000</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> Blum <span class="token operator">|</span> Katie Jane <span class="token operator">|</span> <span class="token number">34500</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">4</span> <span class="token operator">|</span> Blum <span class="token operator">|</span> Jessica <span class="token operator">|</span> <span class="token number">52340</span> <span class="token operator">|</span>
+-------+----------+------------+---------+

<span class="token function">cat</span> mtest2
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">MYSQL</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> mysql<span class="token variable">)</span></span>
<span class="token variable">$MYSQL</span> mytest <span class="token parameter variable">-u</span> <span class="token builtin class-name">test</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF
show tables;
select * from employees where salary &gt; 40000;
EOF</span>

$ ./mtest2
Tables_in_test
employees

empid lastname firstname salary
<span class="token number">2</span> Blum Barbara <span class="token number">45000</span>
<span class="token number">4</span> Blum Jessica <span class="token number">52340</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> mtest3
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">MYSQL</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> mysql<span class="token variable">)</span></span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">4</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;Usage: mtest3 empid lastname firstname salary&quot;</span>
<span class="token keyword">else</span>
    <span class="token assign-left variable">statement</span><span class="token operator">=</span><span class="token string">&quot;INSERT INTO employees VALUES (<span class="token variable">$1</span>, &#39;<span class="token variable">$2</span>&#39;, &#39;<span class="token variable">$3</span>&#39;, <span class="token variable">$4</span>)&quot;</span>
    <span class="token variable">$MYSQL</span> mytest <span class="token parameter variable">-u</span> <span class="token builtin class-name">test</span> <span class="token operator">&lt;&lt;</span> <span class="token string">EOF
    <span class="token variable">$statement</span>
EOF</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span>
    <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> Data successfully added
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> Problem adding data
    <span class="token keyword">fi</span>
<span class="token keyword">fi</span>

$ ./mtest3
Usage: mtest3 empid lastname firstname salary

$ ./mtest3 <span class="token number">5</span> Blum Jasper <span class="token number">100000</span>
Data added successfully

$ ./mtest3 <span class="token number">5</span> Blum Jasper <span class="token number">100000</span>
ERROR <span class="token number">1062</span> <span class="token punctuation">(</span><span class="token number">23000</span><span class="token punctuation">)</span> at line <span class="token number">1</span>: Duplicate entry <span class="token string">&#39;5&#39;</span> <span class="token keyword">for</span> key <span class="token number">1</span>
Problem adding data
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>æ ¼å¼åŒ–æ•°æ®</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> <span class="token function">cat</span> mtest4
<span class="token comment">#!/bin/bash</span>
<span class="token assign-left variable">MYSQL</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">which</span> mysql<span class="token variable">)</span></span>
<span class="token assign-left variable">dbs</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>$MYSQL mytest <span class="token parameter variable">-u</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-Bse</span> <span class="token string">&#39;show databases&#39;</span><span class="token variable">)</span></span>
<span class="token keyword">for</span> <span class="token for-or-select variable">db</span> <span class="token keyword">in</span> <span class="token variable">$dbs</span>
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token variable">$db</span>
<span class="token keyword">done</span>

$ ./mtest4
information_schema
<span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>-B</code> é€‰é¡¹æŒ‡å®šmysqlç¨‹åºå·¥ä½œåœ¨æ‰¹å¤„ç†æ¨¡å¼è¿è¡Œï¼Œ <code>-s</code> ï¼ˆ silent ï¼‰é€‰é¡¹ç”¨äºç¦æ­¢è¾“å‡ºåˆ—æ ‡é¢˜å’Œæ ¼å¼åŒ–ç¬¦å·</p><p>å¯ä»¥ç”¨ -X å‘½ä»¤è¡Œé€‰é¡¹æ¥è¾“å‡º</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql mytest <span class="token parameter variable">-u</span> <span class="token builtin class-name">test</span> <span class="token parameter variable">-X</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;select * from employees where empid = 1&#39;</span>
<span class="token operator">&lt;</span>?xml <span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span>?<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>resultset <span class="token assign-left variable">statement</span><span class="token operator">=</span><span class="token string">&quot;select * from employees&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>row<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>field <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;empid&quot;</span><span class="token operator">&gt;</span><span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/field<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>field <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;lastname&quot;</span><span class="token operator">&gt;</span>Blum<span class="token operator">&lt;</span>/field<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>field <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;firstname&quot;</span><span class="token operator">&gt;</span>Rich<span class="token operator">&lt;</span>/field<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>field <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">&quot;salary&quot;</span><span class="token operator">&gt;</span><span class="token number">2500</span><span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>/field<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/row<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/resultset<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/topjf/topjf/edit/main/docs/linux/shell.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: topjfk@163.com">jinfang</span><!--]--><!--]--></div></div></footer><!----><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2023 topjf</div></footer></div><!--]--><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-30d3d221.js" defer></script>
  </body>
</html>
