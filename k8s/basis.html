<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://topjf.github.io/k8s/basis.html"><meta property="og:site_name" content="topjf"><meta property="og:title" content="k8s åŸºç¡€ç¯‡"><meta property="og:description" content="ä¸­æ–‡ç¤¾åŒº: https://www.kubernetes.org.cn/ å®˜æ–¹æ–‡æ¡£: https://kubernetes.io/zh/docs/home/ ç¤¾åŒºæ–‡æ¡£: http://docs.kubernetes.org.cn/ https://feisky.gitbooks.io/kubernetes/content/ å†å²ç‰ˆæœ¬ Release H..."><meta property="og:type" content="article"><meta property="og:image" content="https://topjf.github.io/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2022-12-16T06:02:03.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="k8s åŸºç¡€ç¯‡"><meta property="article:tag" content="Linux"><meta property="article:tag" content="k8s"><meta property="article:published_time" content="2020-04-20T00:00:00.000Z"><meta property="article:modified_time" content="2022-12-16T06:02:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"k8s åŸºç¡€ç¯‡","image":["https://topjf.github.io/"],"datePublished":"2020-04-20T00:00:00.000Z","dateModified":"2022-12-16T06:02:03.000Z","author":[]}</script><script type="text/javascript" src="/script/demo.js"></script><link rel="stylesheet" href="/iconfont/iconfont.css"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>k8s åŸºç¡€ç¯‡ | topjf</title><meta name="description" content="ä¸­æ–‡ç¤¾åŒº: https://www.kubernetes.org.cn/ å®˜æ–¹æ–‡æ¡£: https://kubernetes.io/zh/docs/home/ ç¤¾åŒºæ–‡æ¡£: http://docs.kubernetes.org.cn/ https://feisky.gitbooks.io/kubernetes/content/ å†å²ç‰ˆæœ¬ Release H...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-41a36a5c.css" as="style"><link rel="stylesheet" href="/assets/style-41a36a5c.css">
    <link rel="modulepreload" href="/assets/app-30d3d221.js"><link rel="modulepreload" href="/assets/framework-ed4f969a.js"><link rel="modulepreload" href="/assets/basis.html-fef53049.js"><link rel="modulepreload" href="/assets/basis.html-c3ec7753.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="topjf"><!----><span class="site-name hide-in-pad">topjf</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="å¿«é€Ÿå¯¼èˆª"><span class="font-icon icon iconfont icon-arrow" style=""></span>å¿«é€Ÿå¯¼èˆª<!----></a></div><div class="nav-item hide-in-mobile"><a href="/all/all.html" class="nav-link" aria-label="é¢è¯•å®å…¸"><span class="font-icon icon iconfont icon-overflow" style=""></span>é¢è¯•å®å…¸<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä¸ªäººä¸­å¿ƒ"><span class="title"><span class="font-icon icon iconfont icon-anonymous" style=""></span>ä¸ªäººä¸­å¿ƒ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article" class="nav-link" aria-label="æ–‡ç« "><span class="font-icon icon iconfont icon-note" style=""></span>æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/category" class="nav-link" aria-label="åˆ†ç±»"><span class="font-icon icon iconfont icon-categoryselected" style=""></span>åˆ†ç±»<!----></a></li><li class="dropdown-item"><a href="/tag" class="nav-link" aria-label="æ ‡ç­¾"><span class="font-icon icon iconfont icon-list" style=""></span>æ ‡ç­¾<!----></a></li><li class="dropdown-item"><a href="/encrypted" class="nav-link" aria-label="åŠ å¯†æ–‡ç« "><span class="font-icon icon iconfont icon-command" style=""></span>åŠ å¯†æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/star" class="nav-link" aria-label="æ”¶è—æ–‡ç« "><span class="font-icon icon iconfont icon-like" style=""></span>æ”¶è—æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/timeline" class="nav-link" aria-label="æ—¶é—´çº¿"><span class="font-icon icon iconfont icon-time" style=""></span>æ—¶é—´çº¿<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç½‘ç«™ç›¸å…³"><span class="title"><span class="font-icon icon iconfont icon-info" style=""></span>ç½‘ç«™ç›¸å…³</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/about/about-this.html" class="nav-link" aria-label="å…³äºæœ¬ç«™"><span class="font-icon icon iconfont icon-people" style=""></span>å…³äºæœ¬ç«™<!----></a></li><li class="dropdown-item"><a href="/history/history.html" class="nav-link" aria-label="ç½‘ç«™å†å²"><span class="font-icon icon iconfont icon-time" style=""></span>ç½‘ç«™å†å²<!----></a></li><li class="dropdown-item"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress Theme Hope æ–‡æ¡£" class="nav-link"><span class="font-icon icon iconfont icon-creative" style=""></span>VuePress Theme Hope æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/topjf/topjf" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/k8s/basis.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="k8s åŸºç¡€ç¯‡"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s åŸºç¡€ç¯‡<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#_1-ã€æ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1ï¼‰ã€æ¦‚å¿µ"><!---->1ï¼‰ã€æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#ä¸ºä»€ä¹ˆéœ€è¦-kubernetes-å®ƒèƒ½åšä»€ä¹ˆ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸ºä»€ä¹ˆéœ€è¦ Kubernetesï¼Œå®ƒèƒ½åšä»€ä¹ˆ?"><!---->ä¸ºä»€ä¹ˆéœ€è¦ Kubernetesï¼Œå®ƒèƒ½åšä»€ä¹ˆ?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#ç®€ä»‹-è°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç®€ä»‹ï¼šè°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©"><!---->ç®€ä»‹ï¼šè°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#ç»„ä»¶æ¶æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç»„ä»¶æ¶æ„"><!---->ç»„ä»¶æ¶æ„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#node-ç»„ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Node ç»„ä»¶"><!---->Node ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#_3-ã€é›†ç¾¤å®‰è£…-ç¯å¢ƒé…ç½®æ­å»º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3ï¼‰ã€é›†ç¾¤å®‰è£…+ç¯å¢ƒé…ç½®æ­å»º"><!---->3ï¼‰ã€é›†ç¾¤å®‰è£…+ç¯å¢ƒé…ç½®æ­å»º<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#kubectl-å¿«æ·é”®-alias" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="kubectl å¿«æ·é”®ï¼ˆaliasï¼‰"><!---->kubectl å¿«æ·é”®ï¼ˆaliasï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#éƒ¨ç½²æ­¥éª¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="éƒ¨ç½²æ­¥éª¤"><!---->éƒ¨ç½²æ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#ç¯å¢ƒå‡†å¤‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¯å¢ƒå‡†å¤‡"><!---->ç¯å¢ƒå‡†å¤‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£…-dockerå’Œ-kubeadmã€kubeletã€kubectl" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£… Dockerå’Œ kubeadmã€kubeletã€kubectl"><!---->Aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£… Dockerå’Œ kubeadmã€kubeletã€kubectl<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#bã€master-éƒ¨ç½²-kubernetes" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Bã€Master éƒ¨ç½² Kubernetes"><!---->Bã€Master éƒ¨ç½² Kubernetes<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#cã€å°†ä»èŠ‚ç‚¹-node-åŠ å…¥-kubernetes-master-é›†ç¾¤ä¸­" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Cã€å°†ä»èŠ‚ç‚¹ï¼ˆnodeï¼‰åŠ å…¥ Kubernetes ï¼ˆMasterï¼‰é›†ç¾¤ä¸­"><!---->Cã€å°†ä»èŠ‚ç‚¹ï¼ˆnodeï¼‰åŠ å…¥ Kubernetes ï¼ˆMasterï¼‰é›†ç¾¤ä¸­<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#dã€master-éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶-flannel" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Dã€master éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶ Flannel"><!---->Dã€master éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶ Flannel<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#eã€å¯è§†åŒ–æŸ¥çœ‹-kubernetesèµ„æº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Eã€å¯è§†åŒ–æŸ¥çœ‹ Kubernetesèµ„æº"><!---->Eã€å¯è§†åŒ–æŸ¥çœ‹ Kubernetesèµ„æº<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#_4-ã€k8s-å…¥é—¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4ï¼‰ã€k8s å…¥é—¨"><!---->4ï¼‰ã€k8s å…¥é—¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#kubectl-get-po" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="kubectl get po"><!---->kubectl get po<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#kubectl-get-svc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="kubectl get svc"><!---->kubectl get svc<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#kubectl-get-rc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="kubectl get rc"><!---->kubectl get rc<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#kubectl-get-deploy" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="kubectl get deploy"><!---->kubectl get deploy<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#kubectl-get-rs" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="kubectl get rs"><!---->kubectl get rs<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#aã€åŸºæœ¬å‘½ä»¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Aã€åŸºæœ¬å‘½ä»¤"><!---->Aã€åŸºæœ¬å‘½ä»¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#bã€yaml-åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Bã€yaml &amp; åŸºæœ¬ä½¿ç”¨"><!---->Bã€yaml &amp; åŸºæœ¬ä½¿ç”¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/k8s/basis.html#cã€deployment-service-æ¦‚å¿µ" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Cã€Deployment &amp; service æ¦‚å¿µ"><!---->Cã€Deployment &amp; service æ¦‚å¿µ<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/k8s/setting-alias.html" class="nav-link sidebar-link sidebar-page" aria-label="è®¾ç½®docker-k8så¿«æ·æŒ‡ä»¤"><img class="icon" src="/icons/k8s/k8s_16x16.png">è®¾ç½®docker-k8så¿«æ·æŒ‡ä»¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/ingress.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s Ingress"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s Ingress<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/helm.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s è½¯ä»¶ç®¡ç†å·¥å…·-Helm"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s è½¯ä»¶ç®¡ç†å·¥å…·-Helm<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/rancher.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-Rancher"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-Rancher<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/kube-sphere.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-KubeSphere"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-KubeSphere<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/kubeoperator.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-KubeOperator"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-KubeOperator<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/kuboard.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-Kuboard"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s å¯è§†åŒ–ç®¡ç†å·¥å…·-Kuboard<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/pod-yaml.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s Pod-yamlç¯‡"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s Pod-yamlç¯‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/nfs-pv-pvc-config-secret.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s nfs-pv-pvc-ConfigMap-secret"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s nfs-pv-pvc-ConfigMap-secret<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/install-application.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s å®‰è£…å¸¸ç”¨è½¯ä»¶"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s å®‰è£…å¸¸ç”¨è½¯ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/k8s/deploys.html" class="nav-link sidebar-link sidebar-page" aria-label="k8s æµæ°´çº¿éƒ¨ç½²"><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s æµæ°´çº¿éƒ¨ç½²<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><img class="icon" src="/icons/k8s/k8s_16x16.png">k8s åŸºç¡€ç¯‡</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/article" target="_blank" rel="noopener noreferrer">topjf</a></span><span property="author" content="topjf"></span></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category6 clickable" role="navigation">kubernetes</span><meta property="articleSection" content="kubernetes"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag0 clickable" role="navigation">Linux</span><span class="page-tag-item tag7 clickable" role="navigation">k8s</span><meta property="keywords" content="Linux,k8s"></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-04-20T00:00:00.000Z"></span><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 6810 å­—</span><meta property="wordCount" content="6810"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 23 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT23M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#_1-ã€æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level2">1ï¼‰ã€æ¦‚å¿µ</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#ä¸ºä»€ä¹ˆéœ€è¦-kubernetes-å®ƒèƒ½åšä»€ä¹ˆ" class="router-link-active router-link-exact-active toc-link level3">ä¸ºä»€ä¹ˆéœ€è¦ Kubernetesï¼Œå®ƒèƒ½åšä»€ä¹ˆ?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#ç®€ä»‹-è°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©" class="router-link-active router-link-exact-active toc-link level3">ç®€ä»‹ï¼šè°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#ç»„ä»¶æ¶æ„" class="router-link-active router-link-exact-active toc-link level3">ç»„ä»¶æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#node-ç»„ä»¶" class="router-link-active router-link-exact-active toc-link level3">Node ç»„ä»¶</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#_3-ã€é›†ç¾¤å®‰è£…-ç¯å¢ƒé…ç½®æ­å»º" class="router-link-active router-link-exact-active toc-link level2">3ï¼‰ã€é›†ç¾¤å®‰è£…+ç¯å¢ƒé…ç½®æ­å»º</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#kubectl-å¿«æ·é”®-alias" class="router-link-active router-link-exact-active toc-link level3">kubectl å¿«æ·é”®ï¼ˆaliasï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#éƒ¨ç½²æ­¥éª¤" class="router-link-active router-link-exact-active toc-link level3">éƒ¨ç½²æ­¥éª¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#ç¯å¢ƒå‡†å¤‡" class="router-link-active router-link-exact-active toc-link level3">ç¯å¢ƒå‡†å¤‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£…-dockerå’Œ-kubeadmã€kubeletã€kubectl" class="router-link-active router-link-exact-active toc-link level3">Aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£… Dockerå’Œ kubeadmã€kubeletã€kubectl</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#bã€master-éƒ¨ç½²-kubernetes" class="router-link-active router-link-exact-active toc-link level3">Bã€Master éƒ¨ç½² Kubernetes</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#cã€å°†ä»èŠ‚ç‚¹-node-åŠ å…¥-kubernetes-master-é›†ç¾¤ä¸­" class="router-link-active router-link-exact-active toc-link level3">Cã€å°†ä»èŠ‚ç‚¹ï¼ˆnodeï¼‰åŠ å…¥ Kubernetes ï¼ˆMasterï¼‰é›†ç¾¤ä¸­</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#dã€master-éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶-flannel" class="router-link-active router-link-exact-active toc-link level3">Dã€master éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶ Flannel</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#eã€å¯è§†åŒ–æŸ¥çœ‹-kubernetesèµ„æº" class="router-link-active router-link-exact-active toc-link level3">Eã€å¯è§†åŒ–æŸ¥çœ‹ Kubernetesèµ„æº</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#_4-ã€k8s-å…¥é—¨" class="router-link-active router-link-exact-active toc-link level2">4ï¼‰ã€k8s å…¥é—¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#kubectl-get-po" class="router-link-active router-link-exact-active toc-link level3">kubectl get po</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#kubectl-get-svc" class="router-link-active router-link-exact-active toc-link level3">kubectl get svc</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#kubectl-get-rc" class="router-link-active router-link-exact-active toc-link level3">kubectl get rc</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#kubectl-get-deploy" class="router-link-active router-link-exact-active toc-link level3">kubectl get deploy</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#kubectl-get-rs" class="router-link-active router-link-exact-active toc-link level3">kubectl get rs</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#aã€åŸºæœ¬å‘½ä»¤" class="router-link-active router-link-exact-active toc-link level3">Aã€åŸºæœ¬å‘½ä»¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#bã€yaml-åŸºæœ¬ä½¿ç”¨" class="router-link-active router-link-exact-active toc-link level3">Bã€yaml &amp; åŸºæœ¬ä½¿ç”¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/k8s/basis.html#cã€deployment-service-æ¦‚å¿µ" class="router-link-active router-link-exact-active toc-link level3">Cã€Deployment &amp; service æ¦‚å¿µ</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!-- more --><h1>ä¸€ã€K8S åŸºç¡€æ­å»º</h1><p>ä¸­æ–‡ç¤¾åŒº: <a href="https://www.kubernetes.org.cn/" target="_blank" rel="noopener noreferrer">https://www.kubernetes.org.cn/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å®˜æ–¹æ–‡æ¡£: <a href="https://kubernetes.io/zh/docs/home/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/zh/docs/home/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ç¤¾åŒºæ–‡æ¡£: <a href="http://docs.kubernetes.org.cn/" target="_blank" rel="noopener noreferrer">http://docs.kubernetes.org.cn/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://feisky.gitbooks.io/kubernetes/content/" target="_blank" rel="noopener noreferrer">https://feisky.gitbooks.io/kubernetes/content/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://kubernetes.io/releases/" target="_blank" rel="noopener noreferrer">å†å²ç‰ˆæœ¬ Release History<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/kubernetes/kubernetes/tree/master/CHANGELOG" target="_blank" rel="noopener noreferrer">å®¢æˆ·ç«¯ä¸‹è½½ github<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>é…ç½®SSHã€é…ç½®k8sç¯å¢ƒã€å®‰è£…dockerã€å®‰è£…k8sã€åˆå§‹åŒ–k8sé›†ç¾¤ï¼ˆåŠ å…¥èŠ‚ç‚¹ï¼‰ã€ç½‘ç»œæ’ä»¶fiannelã€å®‰è£…ingressè´Ÿè½½å‡è¡¡ã€é…ç½®nfs</p><p><img src="/assets/true-image-20220830090744821-39666014.png" alt=""></p><h2 id="_1-ã€æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#_1-ã€æ¦‚å¿µ" aria-hidden="true">#</a> 1ï¼‰ã€æ¦‚å¿µ</h2><p><img src="/assets/true-1625452569657-833e64b2-1403-4fb6-9ee3-1e166504ccf0-5d65f964.png" alt=""></p><p><strong>ä¼ ç»Ÿéƒ¨ç½²æ—¶ä»£</strong></p><p><strong>è™šæ‹ŸåŒ–éƒ¨ç½²æ—¶ä»£</strong></p><p><strong>å®¹å™¨éƒ¨ç½²æ—¶ä»£</strong></p><p>å¥½å¤„ï¼š</p><ul><li>æ•æ·åº”ç”¨ç¨‹åºçš„åˆ›å»ºå’Œéƒ¨ç½²ï¼šä¸ä½¿ç”¨ VM é•œåƒç›¸æ¯”ï¼Œæé«˜äº†å®¹å™¨é•œåƒåˆ›å»ºçš„ç®€ä¾¿æ€§å’Œæ•ˆç‡ã€‚</li><li>æŒç»­å¼€å‘ã€é›†æˆå’Œéƒ¨ç½²ï¼šé€šè¿‡å¿«é€Ÿç®€å•çš„å›æ»š(ç”±äºé•œåƒä¸å¯å˜æ€§)ï¼Œæä¾›å¯é ä¸”é¢‘ç¹çš„å®¹å™¨é•œåƒæ„å»ºå’Œéƒ¨ç½²ã€‚</li><li>å…³æ³¨å¼€å‘ä¸è¿ç»´çš„åˆ†ç¦»ï¼šåœ¨æ„å»º/å‘å¸ƒæ—¶è€Œä¸æ˜¯åœ¨éƒ¨ç½²æ—¶åˆ›å»ºåº”ç”¨ç¨‹åºå®¹å™¨é•œåƒï¼Œä»è€Œå°†åº”ç”¨ç¨‹åºä¸åŸºç¡€æ¶æ„åˆ†ç¦»ã€‚</li><li>å¯è§‚å¯Ÿæ€§ä¸ä»…å¯ä»¥æ˜¾ç¤ºæ“ä½œç³»ç»Ÿçº§åˆ«çš„ä¿¡æ¯å’ŒæŒ‡æ ‡ï¼Œè¿˜å¯ä»¥æ˜¾ç¤ºåº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µå’Œå…¶ä»–æŒ‡æ ‡ä¿¡å·ã€‚</li><li>è·¨å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§çš„ç¯å¢ƒä¸€è‡´æ€§ï¼šåœ¨ä¾¿æºå¼è®¡ç®—æœºä¸Šä¸åœ¨äº‘ä¸­ç›¸åŒåœ°è¿è¡Œã€‚</li><li>äº‘å’Œæ“ä½œç³»ç»Ÿåˆ†å‘çš„å¯ç§»æ¤æ€§ï¼šå¯åœ¨ Ubuntuã€RHELã€CoreOSã€æœ¬åœ°ã€Google Kubernetes Engine å’Œå…¶ä»–ä»»ä½•åœ°æ–¹è¿è¡Œã€‚</li><li>ä»¥åº”ç”¨ç¨‹åºä¸ºä¸­å¿ƒçš„ç®¡ç†ï¼šæé«˜æŠ½è±¡çº§åˆ«ï¼Œä»åœ¨è™šæ‹Ÿç¡¬ä»¶ä¸Šè¿è¡Œ OS åˆ°ä½¿ç”¨é€»è¾‘èµ„æºåœ¨ OS ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºã€‚</li><li>æ¾æ•£è€¦åˆã€åˆ†å¸ƒå¼ã€å¼¹æ€§ã€è§£æ”¾çš„å¾®æœåŠ¡ï¼šåº”ç”¨ç¨‹åºè¢«åˆ†è§£æˆè¾ƒå°çš„ç‹¬ç«‹éƒ¨åˆ†ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€éƒ¨ç½²å’Œç®¡ç† - è€Œä¸æ˜¯åœ¨ä¸€å°å¤§å‹å•æœºä¸Šæ•´ä½“è¿è¡Œã€‚</li><li>èµ„æºéš”ç¦»ï¼šå¯é¢„æµ‹çš„åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚</li><li>èµ„æºåˆ©ç”¨ï¼šé«˜æ•ˆç‡å’Œé«˜å¯†åº¦</li></ul><h3 id="ä¸ºä»€ä¹ˆéœ€è¦-kubernetes-å®ƒèƒ½åšä»€ä¹ˆ" tabindex="-1"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦-kubernetes-å®ƒèƒ½åšä»€ä¹ˆ" aria-hidden="true">#</a> <a href="https://v1-18.docs.kubernetes.io/zh/docs/concepts/overview/what-is-kubernetes/#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-kubernetes-%E5%AE%83%E8%83%BD%E5%81%9A%E4%BB%80%E4%B9%88" target="_blank" rel="noopener noreferrer">ä¸ºä»€ä¹ˆéœ€è¦ Kubernetesï¼Œå®ƒèƒ½åšä»€ä¹ˆ?<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h3><h3 id="ç®€ä»‹-è°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©" tabindex="-1"><a class="header-anchor" href="#ç®€ä»‹-è°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©" aria-hidden="true">#</a> ç®€ä»‹ï¼šè°ƒåº¦ã€è‡ªåŠ¨ä¿®å¤ã€æ°´å¹³ä¼¸ç¼©</h3><p><img src="/assets/true-image-20211119152904883-a62af16d.png" alt=""></p><p><img src="/assets/true-image-20211119152923933-0a728a1d.png" alt=""></p><p><img src="/assets/true-image-20211119152942908-0b9d7bba.png" alt=""></p><h3 id="ç»„ä»¶æ¶æ„" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶æ¶æ„" aria-hidden="true">#</a> ç»„ä»¶æ¶æ„</h3><p><img src="/assets/true-1625452728905-e72041a2-cf1b-4b24-a327-7f0c3974a931-e8cfbf57.png" alt=""></p><h4 id="kube-apiserver" tabindex="-1"><a class="header-anchor" href="#kube-apiserver" aria-hidden="true">#</a> kube-apiserver</h4><p>API æœåŠ¡å™¨æ˜¯ Kubernetes <a href="https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-control-plane" target="_blank" rel="noopener noreferrer">æ§åˆ¶é¢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>çš„ç»„ä»¶ï¼Œ è¯¥ç»„ä»¶å…¬å¼€äº† Kubernetes APIã€‚</p><h4 id="etcd" tabindex="-1"><a class="header-anchor" href="#etcd" aria-hidden="true">#</a> etcd</h4><p>etcd æ˜¯å…¼å…·ä¸€è‡´æ€§å’Œé«˜å¯ç”¨æ€§çš„é”®å€¼æ•°æ®åº“ï¼Œå¯ä»¥ä½œä¸ºä¿å­˜ Kubernetes æ‰€æœ‰é›†ç¾¤æ•°æ®çš„åå°æ•°æ®åº“ã€‚</p><h4 id="kube-scheduler" tabindex="-1"><a class="header-anchor" href="#kube-scheduler" aria-hidden="true">#</a> kube-scheduler</h4><p>æ§åˆ¶å¹³é¢ç»„ä»¶ï¼Œè´Ÿè´£ç›‘è§†æ–°åˆ›å»ºçš„ã€æœªæŒ‡å®šè¿è¡Œ<a href="https://kubernetes.io/zh/docs/concepts/architecture/nodes/" target="_blank" rel="noopener noreferrer">èŠ‚ç‚¹ï¼ˆnodeï¼‰<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>çš„ <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" target="_blank" rel="noopener noreferrer">Pods<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œé€‰æ‹©èŠ‚ç‚¹è®© Pod åœ¨ä¸Šé¢è¿è¡Œã€‚</p><h4 id="kube-controller-manager" tabindex="-1"><a class="header-anchor" href="#kube-controller-manager" aria-hidden="true">#</a> kube-controller-manager</h4><p>åœ¨ä¸»èŠ‚ç‚¹ä¸Šè¿è¡Œ <a href="https://kubernetes.io/zh/docs/concepts/architecture/controller/" target="_blank" rel="noopener noreferrer">æ§åˆ¶å™¨<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> çš„ç»„ä»¶</p><blockquote><p>è¿™äº›æ§åˆ¶å™¨åŒ…æ‹¬:</p><ul><li>èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: è´Ÿè´£åœ¨èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶è¿›è¡Œé€šçŸ¥å’Œå“åº”</li><li>ä»»åŠ¡æ§åˆ¶å™¨ï¼ˆJob controllerï¼‰: ç›‘æµ‹ä»£è¡¨ä¸€æ¬¡æ€§ä»»åŠ¡çš„ Job å¯¹è±¡ï¼Œç„¶ååˆ›å»º Pods æ¥è¿è¡Œè¿™äº›ä»»åŠ¡ç›´è‡³å®Œæˆ</li><li>ç«¯ç‚¹æ§åˆ¶å™¨ï¼ˆEndpoints Controllerï¼‰: å¡«å……ç«¯ç‚¹(Endpoints)å¯¹è±¡(å³åŠ å…¥ Service ä¸ Pod)</li><li>æœåŠ¡å¸æˆ·å’Œä»¤ç‰Œæ§åˆ¶å™¨ï¼ˆService Account &amp; Token Controllersï¼‰: ä¸ºæ–°çš„å‘½åç©ºé—´åˆ›å»ºé»˜è®¤å¸æˆ·å’Œ API è®¿é—®ä»¤ç‰Œ</li></ul></blockquote><h4 id="cloud-controller-manager" tabindex="-1"><a class="header-anchor" href="#cloud-controller-manager" aria-hidden="true">#</a> cloud-controller-manager</h4><p>äº‘æ§åˆ¶å™¨ç®¡ç†å™¨æ˜¯æŒ‡åµŒå…¥ç‰¹å®šäº‘çš„æ§åˆ¶é€»è¾‘çš„ <a href="https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-control-plane" target="_blank" rel="noopener noreferrer">æ§åˆ¶å¹³é¢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ç»„ä»¶</p><blockquote><p>ä¸‹é¢çš„æ§åˆ¶å™¨éƒ½åŒ…å«å¯¹äº‘å¹³å°é©±åŠ¨çš„ä¾èµ–ï¼š</p><ul><li>èŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: ç”¨äºåœ¨èŠ‚ç‚¹ç»ˆæ­¢å“åº”åæ£€æŸ¥äº‘æä¾›å•†ä»¥ç¡®å®šèŠ‚ç‚¹æ˜¯å¦å·²è¢«åˆ é™¤</li><li>è·¯ç”±æ§åˆ¶å™¨ï¼ˆRoute Controllerï¼‰: ç”¨äºåœ¨åº•å±‚äº‘åŸºç¡€æ¶æ„ä¸­è®¾ç½®è·¯ç”±</li><li>æœåŠ¡æ§åˆ¶å™¨ï¼ˆService Controllerï¼‰: ç”¨äºåˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤äº‘æä¾›å•†è´Ÿè½½å‡è¡¡å™¨</li></ul></blockquote><h3 id="node-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#node-ç»„ä»¶" aria-hidden="true">#</a> Node ç»„ä»¶</h3><h4 id="kubelet" tabindex="-1"><a class="header-anchor" href="#kubelet" aria-hidden="true">#</a> kubelet</h4><p>ä¸€ä¸ªåœ¨é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰ä¸Šè¿è¡Œçš„ä»£ç†ã€‚ å®ƒä¿è¯å®¹å™¨containerséƒ½ è¿è¡Œåœ¨ Pod ä¸­ã€‚</p><h4 id="kube-proxy" tabindex="-1"><a class="header-anchor" href="#kube-proxy" aria-hidden="true">#</a> kube-proxy</h4><p>æ˜¯é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ç½‘ç»œä»£ç†</p><p><img src="/assets/true-1626605698082-bf4351dd-6751-44b7-aaf7-7608c847ea42-0e83a11e.png" alt=""></p><h2 id="_3-ã€é›†ç¾¤å®‰è£…-ç¯å¢ƒé…ç½®æ­å»º" tabindex="-1"><a class="header-anchor" href="#_3-ã€é›†ç¾¤å®‰è£…-ç¯å¢ƒé…ç½®æ­å»º" aria-hidden="true">#</a> 3ï¼‰ã€é›†ç¾¤å®‰è£…+ç¯å¢ƒé…ç½®æ­å»º</h2><h3 id="kubectl-å¿«æ·é”®-alias" tabindex="-1"><a class="header-anchor" href="#kubectl-å¿«æ·é”®-alias" aria-hidden="true">#</a> kubectl å¿«æ·é”®ï¼ˆaliasï¼‰</h3><h4 id="k8s" tabindex="-1"><a class="header-anchor" href="#k8s" aria-hidden="true">#</a> k8s<a name="k8s-alias"></a></h4><p><a href="https://blog.csdn.net/qq_42476834/article/details/117373828" target="_blank" rel="noopener noreferrer">å¿«æ·é”®è®¾ç½® åŸæ–‡é“¾æ¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>vim ~/.bashrc</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>
<span class="token comment"># .bashrc</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">rm</span><span class="token operator">=</span><span class="token string">&#39;rm -i&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">cp</span><span class="token operator">=</span><span class="token string">&#39;cp -i&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">mv</span><span class="token operator">=</span><span class="token string">&#39;mv -i&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">rmf</span><span class="token operator">=</span><span class="token string">&#39;rm -rf&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">ll</span><span class="token operator">=</span><span class="token string">&#39;ls -l&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">la</span><span class="token operator">=</span><span class="token string">&#39;ls -all&#39;</span>

<span class="token comment"># Source global definitions</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> /etc/bashrc <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
	<span class="token builtin class-name">.</span> /etc/bashrc
<span class="token keyword">fi</span>


<span class="token builtin class-name">alias</span> <span class="token assign-left variable">getgroup</span><span class="token operator">=</span><span class="token string">&#39;cat /etc/group&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">getpasswd</span><span class="token operator">=</span><span class="token string">&#39;cat /etc/passwd&#39;</span>

<span class="token builtin class-name">alias</span> <span class="token assign-left variable">stdk</span><span class="token operator">=</span><span class="token string">&#39;systemctl start docker&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">restdk</span><span class="token operator">=</span><span class="token string">&#39;systemctl restart docker&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">stopdk</span><span class="token operator">=</span><span class="token string">&#39;systemctl stop docker&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">enabledk</span><span class="token operator">=</span><span class="token string">&#39;systemctl enable docker&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">disabledk</span><span class="token operator">=</span><span class="token string">&#39;systemctl disable docker&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">statusdk</span><span class="token operator">=</span><span class="token string">&#39;systemctl status kubectl&#39;</span>

<span class="token builtin class-name">alias</span> <span class="token assign-left variable">stk8s</span><span class="token operator">=</span><span class="token string">&#39;systemctl start kubectl&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">restk8s</span><span class="token operator">=</span><span class="token string">&#39;systemctl restart kubectl&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">stopk8s</span><span class="token operator">=</span><span class="token string">&#39;systemctl stop kubectl&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">enablek8s</span><span class="token operator">=</span><span class="token string">&#39;systemctl enable kubectl&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">disablek8s</span><span class="token operator">=</span><span class="token string">&#39;systemctl disable kubectl&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">statusk8s</span><span class="token operator">=</span><span class="token string">&#39;systemctl status kubectl&#39;</span>


<span class="token comment">########k8s############</span>
<span class="token comment">###########k8s-åˆ›å»ºä¸åˆ é™¤</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">k</span><span class="token operator">=</span><span class="token string">&#39;kubectl&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kaf</span><span class="token operator">=</span><span class="token string">&#39;kubectl apply -f&#39;</span> <span class="token comment">#ä½¿ç”¨yamlåˆ›å»ºapps</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kdf</span><span class="token operator">=</span><span class="token string">&#39;kubectl delete -f&#39;</span> <span class="token comment">#åˆ é™¤yamlåˆ›å»ºapps</span>
<span class="token comment">###########k8s-èµ„æºä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kg</span><span class="token operator">=</span><span class="token string">&#39;kubectl get&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgnodes</span><span class="token operator">=</span><span class="token string">&#39;kubectl get nodes -o wide&#39;</span> <span class="token comment">#è·å–nodeèµ„æºä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpods</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pods -o wide&#39;</span> <span class="token comment">#è·å–podsèµ„æºä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgingress</span><span class="token operator">=</span><span class="token string">&#39;kubectl get ingress -owide&#39;</span> <span class="token comment">#è·å–ingressèµ„æºä¿¡æ¯</span>
<span class="token comment">###########k8s-åç§°ç©ºé—´</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgns</span><span class="token operator">=</span><span class="token string">&#39;kubectl get ns&#39;</span> <span class="token comment">#è·å–æ‰€æœ‰åç§°ç©ºé—´</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgall</span><span class="token operator">=</span><span class="token string">&#39;kubectl get all -o wide&#39;</span> <span class="token comment">#è·å–æ‰€æœ‰apps-pod-service</span>
<span class="token comment">###########k8s-svcæœåŠ¡ä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgsvc</span><span class="token operator">=</span><span class="token string">&#39;kubectl get svc&#39;</span>
<span class="token builtin class-name">alias</span> kgsvc-n<span class="token operator">=</span><span class="token string">&#39;kubectl get svc -n $1&#39;</span> <span class="token comment">#è‡ªå®šä¹‰åç§°ç©ºé—´çš„svcæŸ¥è¯¢</span>
<span class="token builtin class-name">alias</span> kgsvc-k8s<span class="token operator">=</span><span class="token string">&#39;kubectl get svc -n kube-system -o wide&#39;</span> <span class="token comment">#è·å–k8sæœåŠ¡</span>
<span class="token builtin class-name">alias</span> kgsvc-ing<span class="token operator">=</span><span class="token string">&#39;kubectl get svc -n ingress-nginx -o wide&#39;</span> <span class="token comment">#è·å–ingressæœåŠ¡</span>
<span class="token comment">###########k8s-podä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpod</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pod --show-labels&#39;</span> <span class="token comment">#æŸ¥çœ‹k8sçš„podä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> kgpod-show<span class="token operator">=</span><span class="token string">&#39;kubectl get pod --show-labels&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpodw</span><span class="token operator">=</span><span class="token string">&#39;watch kubectl get pod -n kube-system -o wide&#39;</span>	<span class="token comment">#ç›‘æ§k8s-podçš„kube-systemè¿›åº¦</span>
<span class="token comment">###########k8s-podsä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpodsallns</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pods --all-namespaces -o wide&#39;</span> <span class="token comment">#è·å–podsæ‰€æœ‰åç§°ç©ºé—´</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kgpodsn</span><span class="token operator">=</span><span class="token string">&#39;kubectl get pods -o wide -n $1&#39;</span> <span class="token comment">#æŸ¥çœ‹è¾“å…¥çš„ã€kgpodsallnsã€‘åç§°ç©ºé—´ä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> kgpodsn-k8s<span class="token operator">=</span><span class="token string">&#39;kubectl get pods -n kube-system -o wide&#39;</span> <span class="token comment">#æŸ¥çœ‹åç§°ç©ºé—´kube-systemçš„ä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> kgpodsn-ingressnginx<span class="token operator">=</span><span class="token string">&#39;kubectl get pods -n ingress-nginx -o wide&#39;</span> <span class="token comment">#æŸ¥çœ‹åç§°ç©ºé—´ingress-nginxçš„ä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> kgpodsn-node<span class="token operator">=</span><span class="token string">&#39;kubectl get pods -n kube-system -o wide | grep $1&#39;</span> <span class="token comment">#æŸ¥çœ‹nodeå­èŠ‚ç‚¹çš„podä¿¡æ¯</span>
<span class="token comment">###########k8s-describeä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> kdesc-node<span class="token operator">=</span><span class="token string">&#39;kubectl describe node $1&#39;</span> <span class="token comment">#ä¼ å…¥nodeä¸»æœºåç§°</span>
<span class="token builtin class-name">alias</span> kdesc-pod<span class="token operator">=</span><span class="token string">&#39;kubectl describe pod -n $1&#39;</span> <span class="token comment">#ä¼ å…¥åç§°ç©ºé—´</span>
<span class="token comment">###########k8s-logä¿¡æ¯</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">klog</span><span class="token operator">=</span><span class="token string">&#39;kubectl logs -n $1&#39;</span> <span class="token comment">#ä¼ å…¥åç§°ç©ºé—´</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">klog</span><span class="token operator">=</span><span class="token string">&#39;kubectl logs $1&#39;</span> <span class="token comment">#ä¼ å…¥svcçš„åç§°ã€tomcat-b8cdc6f6b-7ngdxã€‘</span>
<span class="token comment">###########k8s-ç³»ç»Ÿæ“ä½œéƒ¨åˆ†</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">ks</span><span class="token operator">=</span><span class="token string">&#39;kubectl set&#39;</span> <span class="token comment">#è®¾ç½®åº”ç”¨èµ„æº</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">ke</span><span class="token operator">=</span><span class="token string">&#39;kubectl edit&#39;</span> <span class="token comment">#ç¼–è¾‘èµ„æº</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kc</span><span class="token operator">=</span><span class="token string">&#39;kubectl create&#39;</span> <span class="token comment">#åˆ›å»ºèµ„æº</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kd</span><span class="token operator">=</span><span class="token string">&#39;kubectl delete&#39;</span> <span class="token comment">#åˆ é™¤</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">krollout</span><span class="token operator">=</span><span class="token string">&#39;kubectl rollout&#39;</span> <span class="token comment">#è¾“å‡ºã€æŸ¥çœ‹ã€å›æ»š</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">klabel</span><span class="token operator">=</span><span class="token string">&#39;kubectl label&#39;</span> <span class="token comment">#æ›´æ–°èµ„æºå¯¹è±¡çš„label</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">kpatch</span><span class="token operator">=</span><span class="token string">&#39;kubectl patch&#39;</span> <span class="token comment">#æ›´æ–°èµ„æºå¯¹è±¡å­—æ®µ</span>
<span class="token comment">###########k8s-å¿«æ·é”®æç¤º</span>
<span class="token builtin class-name">source</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>kubectl completion <span class="token function">bash</span><span class="token punctuation">)</span>

<span class="token comment">########docker############</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkse</span><span class="token operator">=</span><span class="token string">&#39;docker search&#39;</span>      <span class="token comment">#é•œåƒåç§°</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dklogin</span><span class="token operator">=</span><span class="token string">&#39;docker login&#39;</span>    <span class="token comment">#ç™»å½•è¿œç¨‹é•œåƒä»“åº“</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkpull</span><span class="token operator">=</span><span class="token string">&#39;docker pull&#39;</span>      <span class="token comment">#é•œåƒåç§°</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkcommit</span><span class="token operator">=</span><span class="token string">&#39;docker commit&#39;</span>  <span class="token comment">#æäº¤å®¹å™¨ä¸ºé•œåƒ         [-a=&#39;ä½œè€…&#39; -m=&#39;å¤‡æ³¨&#39; è¿è¡Œæ—¶å®¹å™¨ID æ–°é•œåƒåç§°]</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkb</span><span class="token operator">=</span><span class="token string">&#39;docker build&#39;</span>        <span class="token comment">#fileæ–‡ä»¶æ„å»ºé•œåƒ       [-f [DockerFileæ–‡ä»¶] -t [è®¾ç½®æ ‡ç­¾]:ç‰ˆæœ¬ . ]</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dktag</span><span class="token operator">=</span><span class="token string">&#39;docker tag&#39;</span>        <span class="token comment">#è®¾ç½®é•œåƒä¸ºé˜¿é‡Œ|xxæ ‡ç­¾  [å®¹å™¨ID [è®¾ç½®æ ‡ç­¾]:version]</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkpush</span><span class="token operator">=</span><span class="token string">&#39;docker push&#39;</span>      <span class="token comment">#é•œåƒæäº¤åˆ°ä»“åº“         [è¾“å…¥è®¾ç½®å¥½çš„æ ‡ç­¾:verison]</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dki</span><span class="token operator">=</span><span class="token string">&#39;docker images&#39;</span>       <span class="token comment">#é•œåƒåç§°oré•œåƒId</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkrmi</span><span class="token operator">=</span><span class="token string">&#39;docker rmi&#39;</span>        <span class="token comment">#é•œåƒåç§°oré•œåƒId</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkrmif</span><span class="token operator">=</span><span class="token string">&#39;docker rmi -f&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkrmia</span><span class="token operator">=</span><span class="token string">&#39;docker rmi \$(docker images -q)&#39;</span> <span class="token comment">#è‡ªåŠ¨åˆ é™¤æ²¡æœ‰å¯åŠ¨çš„é•œåƒ</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkps</span><span class="token operator">=</span><span class="token string">&#39;docker ps&#39;</span>  <span class="token comment">#åœ¨è¿è¡Œçš„å®¹å™¨</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkpsa</span><span class="token operator">=</span><span class="token string">&#39;docker ps -a&#39;</span>      <span class="token comment">#å…¨éƒ¨å®¹å™¨</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkstart</span><span class="token operator">=</span><span class="token string">&#39;docker start&#39;</span>    <span class="token comment">#å®¹å™¨åç§°orå®¹å™¨Id</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkrestart</span><span class="token operator">=</span><span class="token string">&#39;docker restart&#39;</span>  <span class="token comment">#å®¹å™¨åç§°orå®¹å™¨Id</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkstop</span><span class="token operator">=</span><span class="token string">&#39;docker stop&#39;</span>      <span class="token comment">#stop å®¹å™¨åç§°orå®¹å™¨Id</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkkill</span><span class="token operator">=</span><span class="token string">&#39;docker kill&#39;</span>      <span class="token comment">#docker kill å®¹å™¨ID or å®¹å™¨å</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkrm</span><span class="token operator">=</span><span class="token string">&#39;docker rm&#39;</span>  <span class="token comment">#docker rm å®¹å™¨id</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkrmf</span><span class="token operator">=</span><span class="token string">&#39;docker rm -f&#39;</span>      <span class="token comment">#å®¹å™¨ID1  å®¹å™¨ID2 ä¸­é—´ç©ºæ ¼éš”å¼€</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkrma</span><span class="token operator">=</span><span class="token string">&#39;docker rm \$(docker ps -a -q)&#39;</span>      <span class="token comment">#è‡ªåŠ¨åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dkcp</span><span class="token operator">=</span><span class="token string">&#39;docker cp&#39;</span>
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">dklogs</span><span class="token operator">=</span><span class="token string">&#39;docker logs&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="éƒ¨ç½²æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#éƒ¨ç½²æ­¥éª¤" aria-hidden="true">#</a> éƒ¨ç½²æ­¥éª¤</h3><div class="language-ABAP line-numbers-mode" data-ext="ABAP"><pre class="language-ABAP"><code>1.åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£… Dockerå’Œ kubeadm
2.éƒ¨ç½² Kubernetes Master
3.éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶
4.éƒ¨ç½² Kubernetes Nodeï¼Œå°†èŠ‚ç‚¹åŠ å…¥ Kubernetesé›†ç¾¤ä¸­
5.éƒ¨ç½²å¯è§†åŒ–ç®¡ç† Kubernetes èµ„æº
6.éƒ¨ç½²ç¨‹åº
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/true-image-20211119155506746-20363ed0.png" alt=""></p><h3 id="ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#ç¯å¢ƒå‡†å¤‡" aria-hidden="true">#</a> ç¯å¢ƒå‡†å¤‡</h3><h4 id="vmware" tabindex="-1"><a class="header-anchor" href="#vmware" aria-hidden="true">#</a> VMware</h4><h4 id="åˆ›å»ºè™šæ‹Ÿæœº" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºè™šæ‹Ÿæœº" aria-hidden="true">#</a> åˆ›å»ºè™šæ‹Ÿæœº</h4><p><img src="/assets/true-image-20211212160128007-b96c229b.png" alt=""></p><p>å®‰è£… net-tools å·¥å…·</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> net-tools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æœ¬æœºæ·»åŠ hostsï¼šC:\Windows\System32\drivers\etc</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>192.168.100.130 tomcat.k8s.com
192.168.100.130 nginx.k8s.com
# k8s-å¯è§†åŒ–ç®¡ç†å·¥å…·-KubeSphere
192.168.100.130 ks.k8s.com
# k8s-å¯è§†åŒ–ç®¡ç†å·¥å…·-KubeOperator
192.168.100.130 ko.k8s.com
192.168.100.130 master
192.168.100.131 node1
192.168.100.132 node2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ·»åŠ  vim /etc/hosts</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.100.130 master
192.168.100.131 node1
192.168.100.132 node2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>systemctl restart network.service //é‡å¯ç½‘ç»œæœåŠ¡ï¼Œ</p><p>ping -c 3 master-120 &amp;&amp; ping -c 3 node-121 &amp;&amp; ping -c 3 node-122 &amp;&amp; ping -c 3 node-123</p></blockquote><p>ç”¨æˆ·ï¼šaï¼Œå¯†ç ï¼š123456aï¼Œ è®¾ç½®ä¸»æœºåç§°ï¼š hostnamectl set-hostname</p><h4 id="å¼€å¯-ssh-è¿œç¨‹ç™»å½•" tabindex="-1"><a class="header-anchor" href="#å¼€å¯-ssh-è¿œç¨‹ç™»å½•" aria-hidden="true">#</a> å¼€å¯ ssh è¿œç¨‹ç™»å½•<a name="ssh"></a></h4><p><a href="https://blog.csdn.net/qq_42476834/article/details/124766896" target="_blank" rel="noopener noreferrer">å…·ä½“å‚è€ƒæ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/#PermitRootLogin yes/PermitRootLogin yes/g&#39;</span> /etc/ssh/sshd_config
ç™»å½•masterã€node1ã€node2ã€node3
ssh-keygen <span class="token parameter variable">-t</span> rsa	ï¼ˆssh-keygenè¿™é‡Œä¸€è·¯å›è½¦å°±è¡Œï¼‰
    
ssh-copy-id <span class="token parameter variable">-i</span> ~/.ssh/id_rsa.pub root@192.168.100.130 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
ssh-copy-id <span class="token parameter variable">-i</span> ~/.ssh/id_rsa.pub root@192.168.100.131 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
ssh-copy-id <span class="token parameter variable">-i</span> ~/.ssh/id_rsa.pub root@192.168.100.132 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
ssh-copy-id <span class="token parameter variable">-i</span> ~/.ssh/id_rsa.pub a@192.168.100.130 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
ssh-copy-id <span class="token parameter variable">-i</span> ~/.ssh/id_rsa.pub a@192.168.100.131 <span class="token operator">&amp;&amp;</span> <span class="token punctuation">\</span>
ssh-copy-id <span class="token parameter variable">-i</span> ~/.ssh/id_rsa.pub a@192.168.100.132

å…å¯†ç™»å½•æµ‹è¯•
<span class="token function">ssh</span> <span class="token number">192.168</span>.100.130
<span class="token function">ssh</span> <span class="token number">192.168</span>.100.131
<span class="token function">ssh</span> <span class="token number">192.168</span>.100.132
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œshè„šæœ¬ï¼š<a href="http://k8s-init.sh" target="_blank" rel="noopener noreferrer">k8s-init.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œ<a href="http://k8s-docker.sh" target="_blank" rel="noopener noreferrer">k8s-docker.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œ<a href="http://k8s-install.sh" target="_blank" rel="noopener noreferrer">k8s-install.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="å¼€å¯ipvsæ”¯æŒ" tabindex="-1"><a class="header-anchor" href="#å¼€å¯ipvsæ”¯æŒ" aria-hidden="true">#</a> å¼€å¯IPVSæ”¯æŒ</h4><p>vim /etc/sysconfig/modules/ipvs.modules</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysconfig/modules/ipvs.modules</span>
#!/bin/bash
ipvs_modules=&quot;ip_vs ip_vs_lc ip_vs_wlc ip_vs_rr ip_vs_wrr ip_vs_lblc ip_vs_lblcr ip_vs_dh ip_vs_sh ip_vs_fo ip_vs_nq ip_vs_sed ip_vs_ftp nf_conntrack&quot;
for kernel_module in <span class="token variable">${ipvs_modules}</span>; do
  /sbin/modinfo -F filename <span class="token variable">${kernel_module}</span> &gt; /dev/null 2&gt;&amp;1
  if [ <span class="token variable">$?</span> -eq 0 ]; then
    /sbin/modprobe <span class="token variable">${kernel_module}</span>
  fi
done
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>chmod 755 /etc/sysconfig/modules/ipvs.modules</p><p>sh /etc/sysconfig/modules/ipvs.modules</p><p>lsmod | grep ip_vs</p></blockquote><h4 id="å°†æ¡¥æ¥çš„ipv4æµé‡ä¼ é€’åˆ°iptablesçš„é“¾" tabindex="-1"><a class="header-anchor" href="#å°†æ¡¥æ¥çš„ipv4æµé‡ä¼ é€’åˆ°iptablesçš„é“¾" aria-hidden="true">#</a> å°†æ¡¥æ¥çš„IPv4æµé‡ä¼ é€’åˆ°iptablesçš„é“¾</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/modules-load.d/k8s.conf</span>
br_netfilter
EOF</span>

<span class="token comment"># cat /usr/lib/sysctl.d/00-system.conf ä¸ä¹‹ç›¸åŒ</span>
<span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysctl.d/k8s.conf</span>
# For binary values, 0 is disabled, 1 is enabled
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
vm.swappiness=0
EOF</span>

<span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysctl.d/k8s.conf</span>
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
vm.swappiness=0
EOF</span>

modprobe br_netfilter
<span class="token function">sysctl</span> <span class="token parameter variable">-p</span> /etc/sysctl.d/k8s.conf
<span class="token function">sysctl</span> <span class="token parameter variable">--system</span>

<span class="token comment">#ä¿®æ”¹/etc/sysctl.d/10-network-security.conf</span>
<span class="token comment">#ä¸ /usr/lib/sysctl.d/50-default.conf ç±»ä¼¼</span>
<span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/sysctl.d/10-network-security.conf</span>
net.ipv4.conf.default.rp_filter=1
net.ipv4.conf.all.rp_filter=1
EOF</span>
<span class="token comment">#ç„¶åä½¿ä¹‹ç”Ÿæ•ˆ</span>
<span class="token function">sysctl</span> <span class="token parameter variable">--system</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="æ—¶é—´åŒæ­¥" tabindex="-1"><a class="header-anchor" href="#æ—¶é—´åŒæ­¥" aria-hidden="true">#</a> æ—¶é—´åŒæ­¥</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  yum <span class="token function">install</span> <span class="token parameter variable">-y</span> chrony
  systemctl <span class="token builtin class-name">enable</span> chronyd
  systemctl start chronyd
  timedatectl set-ntp <span class="token boolean">true</span>
è®¾ç½®æ—¶åŒºï¼štimedatectl set-timezone Asia/Shanghai
timedatectl status
æ£€æŸ¥ ntp-server æ˜¯å¦å¯ç”¨ï¼šchronyc activity <span class="token parameter variable">-v</span>
---------------------------------------
  yum <span class="token parameter variable">-y</span> <span class="token function">install</span> ntpdate <span class="token operator">&amp;&amp;</span> yum <span class="token function">install</span> ntpsec-ntpdate
  ntpdate time.windows.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£…-dockerå’Œ-kubeadmã€kubeletã€kubectl" tabindex="-1"><a class="header-anchor" href="#aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£…-dockerå’Œ-kubeadmã€kubeletã€kubectl" aria-hidden="true">#</a> Aã€åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£… Dockerå’Œ kubeadmã€kubeletã€kubectl</h3><h4 id="å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#å‡†å¤‡" aria-hidden="true">#</a> å‡†å¤‡</h4><p><a href="https://kubernetes.io/zh/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">å®‰è£…å·¥å…·<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼š<a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">docker<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€kubeadmç®¡ç†ã€kukeletä»£ç†ã€kubectlå‘½ä»¤è¡Œ</p><h4 id="_1ã€å®‰è£…docker" tabindex="-1"><a class="header-anchor" href="#_1ã€å®‰è£…docker" aria-hidden="true">#</a> 1ã€å®‰è£…docker</h4><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/engine/install/centos/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>å¸è½½çš„æ—§ç‰ˆæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  yum remove <span class="token function">docker</span> docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>åä¸ºå®‰è£…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">1</span>ã€è‹¥æ‚¨å®‰è£…è¿‡dockerï¼Œéœ€è¦å…ˆåˆ æ‰ï¼Œä¹‹åå†å®‰è£…ä¾èµ–:
  yum remove <span class="token function">docker</span> docker-common docker-selinux docker-engine
  yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils device-mapper-persistent-data lvm2
<span class="token number">2</span>ã€ä¸‹è½½repoæ–‡ä»¶
  <span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/docker-ce.repo https://repo.huaweicloud.com/docker-ce/linux/centos/docker-ce.repo
æ›¿æ¢ä¸ºï¼š
  <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s+download.docker.com+repo.huaweicloud.com/docker-ce+&#39;</span> /etc/yum.repos.d/docker-ce.repo
<span class="token number">3</span>ã€æ›´æ–°ç´¢å¼•æ–‡ä»¶å¹¶å®‰è£…
  yum clean all <span class="token operator">&amp;&amp;</span>   yum makecache fast
yum list docker-ce.x86_64 <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>
  yum <span class="token function">install</span> <span class="token parameter variable">-y</span> docker-ce
<span class="token number">4</span>ã€å¼€å¯DockeræœåŠ¡
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é˜¿é‡Œå®‰è£…</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·</span>
  yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils device-mapper-persistent-data lvm2
<span class="token comment"># Step 2: æ·»åŠ è½¯ä»¶æºä¿¡æ¯</span>
  yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
<span class="token comment"># Step 3</span>
  <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s+download.docker.com+mirrors.aliyun.com/docker-ce+&#39;</span> /etc/yum.repos.d/docker-ce.repo
<span class="token comment"># Step 4: æ›´æ–°å¹¶å®‰è£…Docker-CE</span>
  yum clean all <span class="token operator">&amp;&amp;</span>   yum makecache fast
yum list docker-ce.x86_64 <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>
  yum <span class="token parameter variable">-y</span> <span class="token function">install</span> docker-ce-<span class="token punctuation">[</span>VERSION<span class="token punctuation">]</span>
<span class="token comment"># Step 4: å¼€å¯DockeræœåŠ¡</span>
  <span class="token function">service</span> <span class="token function">docker</span> start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>systemctl docker</code></p><p><code>systemctl restart docker</code></p><p><code>systemctl stop docker</code></p><p><code>systemctl enable docker</code></p><p><code>systemctl disable docker</code></p><p><code>systemctl status docker</code></p><p><code>usermod -aG docker a</code> #érootç”¨æˆ·</p><p>è®¾ç½®åŠ é€Ÿ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token parameter variable">-su</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/docker/daemon.json</span>
{
  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],
  &quot;log-driver&quot;: &quot;json-file&quot;,
  &quot;log-opts&quot;: {
    &quot;max-size&quot;: &quot;100m&quot;
  },
  &quot;storage-driver&quot;: &quot;overlay2&quot;,
  &quot;registry-mirrors&quot;: [
    &quot;https://04eo9xup.mirror.aliyuncs.com&quot;,
    &quot;https://098cc8006500f4db0f2fc01937bbce40.mirror.swr.myhuaweicloud.com&quot;
  ],
}
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  systemctl daemon-reload
  systemctl restart <span class="token function">docker</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>dockeré…ç½®httpä»£ç†ï¼ˆå¯é€‰ï¼‰</strong></p><p>é¦–å…ˆ, ä½¿ç”¨<code>systemctl status docker</code>å‘½ä»¤æŸ¥è¯¢<code>docker.service</code>æ–‡ä»¶çš„è·¯å¾„, åœ¨æˆ‘çš„ç¯å¢ƒä¸­å®ƒçš„æ–‡ä»¶è·¯å¾„æ˜¯<code>/lib/systemd/system/docker.service</code>; ç„¶åç¼–è¾‘è¿™ä¸ªæ–‡ä»¶, æ·»åŠ å¦‚ä¸‹å†…å®¹:</p><p>vim /lib/systemd/system/docker.service</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>Service<span class="token punctuation">]</span>
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;HTTP_PROXY=http://127.0.0.1:10809&quot;</span>
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;HTTPS_PROXY=http://127.0.0.1:10809&quot;</span> 
<span class="token assign-left variable">Environment</span><span class="token operator">=</span><span class="token string">&quot;NO_PROXY=localhost,127.0.0.0/8,192.168.0.0/16,10.0.0.0/8&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><hr><h4 id="_2ã€æ·»åŠ -é˜¿é‡Œkubernetes-ä»“åº“æº-æ¨è" tabindex="-1"><a class="header-anchor" href="#_2ã€æ·»åŠ -é˜¿é‡Œkubernetes-ä»“åº“æº-æ¨è" aria-hidden="true">#</a> 2ã€æ·»åŠ  é˜¿é‡Œkubernetes ä»“åº“æºï¼ˆæ¨èï¼‰</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/yum.repos.d/kubernetes.repo</span>
[kubernetes]
name=Kubernetes
baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
enabled=1
gpgcheck=1
repo_gpgcheck=0
gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€æ·»åŠ -åä¸ºkubernetes-ä»“åº“æº-ä»“åº“ç»´æŠ¤å¤ªæ…¢äº†" tabindex="-1"><a class="header-anchor" href="#_3ã€æ·»åŠ -åä¸ºkubernetes-ä»“åº“æº-ä»“åº“ç»´æŠ¤å¤ªæ…¢äº†" aria-hidden="true">#</a> 3ã€æ·»åŠ  åä¸ºkubernetes ä»“åº“æºï¼ˆä»“åº“ç»´æŠ¤å¤ªæ…¢äº†ï¼‰</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">&gt;</span> /etc/yum.repos.d/kubernetes.repo</span>
[kubernetes]
name=Kubernetes
baseurl=https://repo.huaweicloud.com/kubernetes/yum/repos/kubernetes-el7-x86_64
enabled=1
gpgcheck=1
repo_gpgcheck=0
gpgkey=https://repo.huaweicloud.com/kubernetes/yum/doc/yum-key.gpg https://repo.huaweicloud.com/kubernetes/yum/doc/rpm-package-key.gpg
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4ã€æ›´æ–°ç´¢å¼•æ–‡ä»¶å¹¶å®‰è£…-kubernetes" tabindex="-1"><a class="header-anchor" href="#_4ã€æ›´æ–°ç´¢å¼•æ–‡ä»¶å¹¶å®‰è£…-kubernetes" aria-hidden="true">#</a> 4ã€æ›´æ–°ç´¢å¼•æ–‡ä»¶å¹¶å®‰è£… <strong>kubernetes</strong></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum <span class="token parameter variable">-y</span> update <span class="token operator">&amp;&amp;</span> yum repolist all
yum list kubelet	yum list kube*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>failure: repodata/repomd.xml from kubernetes: [Errno 256] No more mirrors to try.</code></p><p>æš‚æ—¶ç¦ç”¨å­˜å‚¨åº“ï¼š<code>yum --disablerepo=kubernetes</code></p><p>æ°¸ä¹…ç¦ç”¨å­˜å‚¨åº“ï¼š<code>yum-config-manager --disable kubernetes or subscription-manager repos --disable=kubernetes</code></p><p>å¦‚æœä¸å¯ç”¨ï¼Œåˆ™è·³è¿‡ï¼š<code>yum-config-manager --save --setopt=kubernetes.skip_if_unavailable=true</code></p><h4 id="_5ã€master-å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_5ã€master-å®‰è£…" aria-hidden="true">#</a> 5ã€master å®‰è£…</h4><p><strong>å‡çº§0ï¼Œæ–°å®‰è£…0ï¼Œé™çº§3ï¼Œåˆ é™¤0ï¼Œæœªå‡çº§25</strong></p><div class="language-ABAP line-numbers-mode" data-ext="ABAP"><pre class="language-ABAP"><code>apt-get install -y kubeadm=1.23.8-0 kubelet=1.23.8-0 kubectl=1.23.8-0

yum install kubeadm-1.23.8-0 kubelet-1.23.8-0 kubectl-1.23.8-0
yum install --nogpgcheck kubelet-1.23.8-0 kubeadm-1.23.8-0 kubectl-1.23.8-0
åä¸ºï¼šyum install kubeadm-1.23.8-0 kubelet-1.23.8-0 kubectl-1.23.8-0 --disableexcludes=kubernetes
é˜¿é‡Œï¼šyum install kubeadm-1.23.8-0 kubelet-1.23.8-0 kubectl-1.23.8-0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5ã€node-èŠ‚ç‚¹å®‰è£…" tabindex="-1"><a class="header-anchor" href="#_5ã€node-èŠ‚ç‚¹å®‰è£…" aria-hidden="true">#</a> 5ã€node èŠ‚ç‚¹å®‰è£…</h4><blockquote><p>yum install kubeadm-1.23.8-0 kubelet-1.23.8-0 kubectl-1.23.8-0</p></blockquote><h4 id="_6ã€åˆ›å»ºk8sè½¯è¿æ¥" tabindex="-1"><a class="header-anchor" href="#_6ã€åˆ›å»ºk8sè½¯è¿æ¥" aria-hidden="true">#</a> 6ã€åˆ›å»ºk8sè½¯è¿æ¥</h4><p>æ‰§è¡Œï¼š<code>ln -s /usr/bin/kube* /usr/local/bin/</code></p><h4 id="å¯åŠ¨-k8s" tabindex="-1"><a class="header-anchor" href="#å¯åŠ¨-k8s" aria-hidden="true">#</a> å¯åŠ¨ k8s</h4><blockquote><p>systemctl enable kubelet systemctl disable kubelet</p><p>systemctl start kubelet systemctl stop kubelet</p><p>systemctl status kubelet</p><p>å‘ç°ï¼š<code>kubelet.service - kubelet: The Kubernetes Node Agent</code>ï¼Œå±äºæ­£å¸¸ï¼Œk8sè¿˜æ²¡æœ‰é…ç½®</p></blockquote><p><a href="https://kubernetes.io/releases/" target="_blank" rel="noopener noreferrer">ç‰ˆæœ¬ History<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> <a href="https://github.com/kubernetes/kubernetes/tree/master/CHANGELOG" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/kubernetes/tree/master/CHANGELOG<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="bã€master-éƒ¨ç½²-kubernetes" tabindex="-1"><a class="header-anchor" href="#bã€master-éƒ¨ç½²-kubernetes" aria-hidden="true">#</a> Bã€Master éƒ¨ç½² Kubernetes</h3><p>ç¼–è¾‘ master_images.shï¼šè®¾ç½®éœ€è¦çš„é•œåƒï¼Œä»“åº“åœ°å€,<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">å®˜ç½‘dockeré•œåƒæœç´¢<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><blockquote><p><a href="https://hub.docker.com/u/aiotceo" target="_blank" rel="noopener noreferrer">https://hub.docker.com/u/aiotceo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ã€<a href="https://hub.docker.com/u/mirrorgooglecontainers" target="_blank" rel="noopener noreferrer">https://hub.docker.com/u/mirrorgooglecontainers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="http://swr.myhuaweicloud.com/iivey" target="_blank" rel="noopener noreferrer">swr.myhuaweicloud.com/iivey<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="http://registry.cn-chengdu.aliyuncs.com/k8sjf" target="_blank" rel="noopener noreferrer">registry.cn-chengdu.aliyuncs.com/k8sjf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="http://registry.aliyuncs.com/google_containers" target="_blank" rel="noopener noreferrer">registry.aliyuncs.com/google_containers<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h4 id="è®¾ç½®k8sé•œåƒä»“åº“æº" tabindex="-1"><a class="header-anchor" href="#è®¾ç½®k8sé•œåƒä»“åº“æº" aria-hidden="true">#</a> è®¾ç½®k8sé•œåƒä»“åº“æº</h4><div class="language-ABAP line-numbers-mode" data-ext="ABAP"><pre class="language-ABAP"><code>#æŸ¥çœ‹å®‰è£…k8sçš„ç›¸å…³ä¿¡æ¯
kubeadm config print init-defaults
#æŸ¥è¯¢éœ€è¦çš„é•œåƒ
kubeadm config images list
------------------
#è®¾ç½®k8sé•œåƒä»“åº“ä¸ºï¼Œå¦‚æœä¸ç¡®å®šï¼Œå¯ä»¥è®¾ç½®ä¸º registry.aliyuncs.com/google_containers
kubeadm config images list --kubernetes-version=v1.23.8 --image-repository registry.cn-chengdu.aliyuncs.com/k8sjf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰€éœ€é•œåƒç‰ˆæœ¬ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>------------å®˜æ–¹éœ€è¦
kube-apiserver:v1.23.8
kube-controller-manager:v1.23.8
kube-scheduler:v1.23.8
kube-proxy:v1.23.8
pause:3.6
etcd:3.5.1-0
coredns:v1.8.6
------------å…¶ä»–éœ€è¦
flannel:v0.19.0
flannelcni-flannel-cni-plugin:v1.1.0
nginx-ingress-controller:v1.3.0
kube-webhook-certgen:v1.1.1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> login <span class="token parameter variable">--username</span><span class="token operator">=</span>å°ç‰› registry.cn-chengdu.aliyuncs.com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="master-kubeadm-åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#master-kubeadm-åˆå§‹åŒ–" aria-hidden="true">#</a> master -&gt; kubeadm åˆå§‹åŒ–<a name="kubeadm init"></a></h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubeadm init <span class="token punctuation">\</span>
--apiserver-advertise-address<span class="token operator">=</span><span class="token number">192.168</span>.100.130 <span class="token punctuation">\</span>
--control-plane-endpoint<span class="token operator">=</span><span class="token number">192.168</span>.100.130 <span class="token punctuation">\</span>
--image-repository registry.cn-chengdu.aliyuncs.com/k8sjf <span class="token punctuation">\</span>
--kubernetes-version v1.23.8 <span class="token punctuation">\</span>
--service-cidr<span class="token operator">=</span><span class="token number">10.96</span>.0.0/16 <span class="token punctuation">\</span>
--pod-network-cidr<span class="token operator">=</span><span class="token number">10.244</span>.0.0/16
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="å¾—åˆ°-kubeadm-join" tabindex="-1"><a class="header-anchor" href="#å¾—åˆ°-kubeadm-join" aria-hidden="true">#</a> å¾—åˆ° kubeadm join</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>æ‚¨çš„Kubernetesæ§åˆ¶å¹³é¢å·²æˆåŠŸåˆå§‹åŒ–ï¼
è¦å¼€å§‹ä½¿ç”¨ç¾¤é›†ï¼Œæ‚¨éœ€è¦ä»¥æ™®é€šç”¨æˆ·èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token environment constant">$HOME</span>/.kube
    <span class="token function">sudo</span> <span class="token function">cp</span> <span class="token parameter variable">-i</span> /etc/kubernetes/admin.conf <span class="token environment constant">$HOME</span>/.kube/config
    <span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-u</span><span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> <span class="token parameter variable">-g</span><span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config

æˆ–è€…ï¼Œå¦‚æœæ‚¨æ˜¯rootç”¨æˆ·ï¼Œåˆ™å¯ä»¥è¿è¡Œï¼š
  <span class="token builtin class-name">export</span> <span class="token assign-left variable">KUBECONFIG</span><span class="token operator">=</span>/etc/kubernetes/admin.conf
  
æ‚¨ç°åœ¨åº”è¯¥åœ¨é›†ç¾¤ä¸Šéƒ¨ç½²ä¸€ä¸ªpodç½‘ç»œã€‚
ä½¿ç”¨ä¸‹åˆ—é€‰é¡¹ä¹‹ä¸€è¿è¡Œâ€œkubectl apply-f<span class="token punctuation">[</span>podnetwork<span class="token punctuation">]</span>.yamlâ€ï¼š
https://kubernetes.io/docs/concepts/cluster-administration/addons/

<span class="token comment">##### master</span>
ç°åœ¨ï¼Œæ‚¨å¯ä»¥é€šè¿‡å¤åˆ¶è¯ä¹¦é¢å‘æœºæ„æ¥åŠ å…¥ä»»æ„æ•°é‡çš„æ§åˆ¶å¹³é¢èŠ‚ç‚¹
å’Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœåŠ¡å¸æˆ·å¯†é’¥ï¼Œç„¶åä»¥rootç”¨æˆ·èº«ä»½è¿è¡Œä»¥ä¸‹æ“ä½œï¼š
kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.100.130:6443 <span class="token parameter variable">--token</span> wmgb01.rwvu0csqrn5ayt1k <span class="token punctuation">\</span>
        --discovery-token-ca-cert-hash sha256:e542e830faf3e7e5ed7449989279c288800600260f327a7fd42627bc27f39bb0 <span class="token punctuation">\</span>
        --control-plane

ç„¶åï¼Œåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šä»¥rootèº«ä»½è¿è¡Œä»¥ä¸‹æ“ä½œï¼Œå¯ä»¥åŠ å…¥ä»»æ„æ•°é‡çš„å·¥ä½œèŠ‚ç‚¹ï¼š
<span class="token comment">###### node</span>
<span class="token function">su</span> root
kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.100.130:6443 <span class="token parameter variable">--token</span> wmgb01.rwvu0csqrn5ayt1k <span class="token punctuation">\</span>
        --discovery-token-ca-cert-hash sha256:e542e830faf3e7e5ed7449989279c288800600260f327a7fd42627bc27f39bb0

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="kubectl-å‘½ä»¤çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½-æ‰€æœ‰çš„èŠ‚ç‚¹" tabindex="-1"><a class="header-anchor" href="#kubectl-å‘½ä»¤çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½-æ‰€æœ‰çš„èŠ‚ç‚¹" aria-hidden="true">#</a> kubectl å‘½ä»¤çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼ˆæ‰€æœ‰çš„èŠ‚ç‚¹ï¼‰</h4><blockquote><p>echo &quot;source &lt;(kubectl completion bash)&quot; &gt;&gt; ~/.bashrc</p></blockquote><h4 id="é‡å¯åå‡ºç°-the-connection-to-the-server-localhost-8080-was-refused-did-you-specify-the-right-host-or-port" tabindex="-1"><a class="header-anchor" href="#é‡å¯åå‡ºç°-the-connection-to-the-server-localhost-8080-was-refused-did-you-specify-the-right-host-or-port" aria-hidden="true">#</a> é‡å¯åå‡ºç°ï¼š<code>The connection to the server localhost:8080 was refused - did you specify the right host or port?</code></h4><blockquote><p>è§£å†³ï¼š<a href="https://blog.csdn.net/qq_42476834/article/details/124730955" target="_blank" rel="noopener noreferrer">https://blog.csdn.net/qq_42476834/article/details/124730955<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="#ssh">sshå…å¯†ç™»å½•è®¿é—®</a></p></blockquote><h4 id="å°†ä¸»èŠ‚ç‚¹-master-ä¸­çš„-etc-kubernetes-admin-conf-æ–‡ä»¶æ‹·è´åˆ°ä»èŠ‚ç‚¹-node-ç›¸åŒç›®å½•ä¸‹" tabindex="-1"><a class="header-anchor" href="#å°†ä¸»èŠ‚ç‚¹-master-ä¸­çš„-etc-kubernetes-admin-conf-æ–‡ä»¶æ‹·è´åˆ°ä»èŠ‚ç‚¹-node-ç›¸åŒç›®å½•ä¸‹" aria-hidden="true">#</a> å°†ä¸»èŠ‚ç‚¹ï¼ˆmasterï¼‰ä¸­çš„â€œ/etc/kubernetes/admin.confâ€æ–‡ä»¶æ‹·è´åˆ°ä»èŠ‚ç‚¹ï¼ˆnodeï¼‰ç›¸åŒç›®å½•ä¸‹</h4><blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>scp /etc/kubernetes/admin.conf root@192.168.100.131:/etc/kubernetes/ &amp;&amp; \
scp /etc/kubernetes/admin.conf root@192.168.100.132:/etc/kubernetes/

echo &quot;export KUBECONFIG=/etc/kubernetes/admin.conf&quot; &gt;&gt; ~/.bash_profile
scp ~/.bash_profile root@192.168.100.131:/root/ &amp;&amp; \
scp ~/.bash_profile root@192.168.100.132:/root/

source ~/.bash_profile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><h4 id="è§£å†³ç«¯å£å ç”¨-kubeadm-reset" tabindex="-1"><a class="header-anchor" href="#è§£å†³ç«¯å£å ç”¨-kubeadm-reset" aria-hidden="true">#</a> è§£å†³ç«¯å£å ç”¨ï¼škubeadm reset</h4><h3 id="cã€å°†ä»èŠ‚ç‚¹-node-åŠ å…¥-kubernetes-master-é›†ç¾¤ä¸­" tabindex="-1"><a class="header-anchor" href="#cã€å°†ä»èŠ‚ç‚¹-node-åŠ å…¥-kubernetes-master-é›†ç¾¤ä¸­" aria-hidden="true">#</a> Cã€å°†ä»èŠ‚ç‚¹ï¼ˆnodeï¼‰åŠ å…¥ Kubernetes ï¼ˆMasterï¼‰é›†ç¾¤ä¸­</h3><p>su root åœ¨æ¯ä¸ªæ ¹èŠ‚ç‚¹ä¸Šè¿è¡Œä»¥ä¸‹æ“ä½œï¼š</p><p>[æŸ¥çœ‹ kubeadm init](#kubeadm init)</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">su</span> root
kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.100.130:6443 <span class="token parameter variable">--token</span> wmgb01.rwvu0csqrn5ayt1k <span class="token punctuation">\</span>
        --discovery-token-ca-cert-hash sha256:e542e830faf3e7e5ed7449989279c288800600260f327a7fd42627bc27f39bb0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@node-121 ~<span class="token punctuation">]</span><span class="token comment"># kubeadm join 192.168.100.130:6443 --token 971p07.4h9ljb93kcm471bd --discovery-token-ca-cert-hash sha256:2f02b1e11049f9cbe3784ed6a78f1f7f4fc794d421eabe642335bc55393ea61b</span>

<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> è¿›è¡Œé£è¡Œå‰æ£€æŸ¥
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> ä»é›†ç¾¤ä¸­è¯»å–é…ç½®<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> ä»…ä¾›å‚è€ƒï¼šæ‚¨å¯ä»¥æŸ¥çœ‹æ­¤é…ç½®æ–‡ä»¶<span class="token string">&#39;kubectl -n kube-system get cm kubeadm-config -o yaml&#39;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> å°† kubelet é…ç½®å†™å…¥æ–‡ä»¶ <span class="token string">&quot;/var/lib/kubelet/config.yaml&quot;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> å°†å¸¦æœ‰æ ‡å¿—çš„ kubelet ç¯å¢ƒæ–‡ä»¶å†™å…¥æ–‡ä»¶ <span class="token string">&quot;/var/lib/kubelet/kubeadm-flags.env&quot;</span>
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> å¯åŠ¨ kubelet
<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> ç­‰å¾… kubelet æ‰§è¡Œ TLS Bootstrap<span class="token punctuation">..</span>.

æ­¤èŠ‚ç‚¹å·²åŠ å…¥é›†ç¾¤ï¼š
* è¯ä¹¦ç­¾åè¯·æ±‚å·²å‘é€åˆ° apiserver å¹¶æ”¶åˆ°å“åº”ã€‚
* Kubelet  è¢«å‘ŠçŸ¥æ–°çš„å®‰å…¨è¿æ¥ç»†èŠ‚ã€‚

Run <span class="token string">&#39;kubectl get nodes&#39;</span> åœ¨æ§åˆ¶å¹³é¢ä¸ŠæŸ¥çœ‹è¯¥èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="kubeadm-config-ç•¥è¿‡-å˜¿å˜¿å˜¿" tabindex="-1"><a class="header-anchor" href="#kubeadm-config-ç•¥è¿‡-å˜¿å˜¿å˜¿" aria-hidden="true">#</a> kubeadm-configï¼ˆç•¥è¿‡ å˜¿å˜¿å˜¿ï¼‰</h4><p>kubectl -n kube-system get cm kubeadm-config -o yaml &gt; /etc/kubernetes/kubeadm-config.yaml</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code>apiVersion<span class="token operator">:</span> v1
data<span class="token operator">:</span>
  ClusterConfiguration<span class="token operator">:</span> |
    apiServer<span class="token operator">:</span>
      extraArgs<span class="token operator">:</span>
        authorization-mode<span class="token operator">:</span> Node<span class="token punctuation">,</span>RBAC
      timeoutForControlPlane<span class="token operator">:</span> 4m0s
    apiVersion<span class="token operator">:</span> kubeadm.k8s.io/v1beta3
    certificatesDir<span class="token operator">:</span> /etc/kubernetes/pki
    clusterName<span class="token operator">:</span> kubernetes
    controlPlaneEndpoint<span class="token operator">:</span> <span class="token number">192.168</span>.<span class="token number">100.130</span><span class="token operator">:</span><span class="token number">6443</span>
    controllerManager<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    dns<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    etcd<span class="token operator">:</span>
      local<span class="token operator">:</span>
        dataDir<span class="token operator">:</span> /var/lib/etcd
    imageRepository<span class="token operator">:</span> registry.cn-chengdu.aliyuncs.com/k8sjf
    kind<span class="token operator">:</span> ClusterConfiguration
    kubernetesVersion<span class="token operator">:</span> v1.<span class="token number">23.8</span>
    networking<span class="token operator">:</span>
      dnsDomain<span class="token operator">:</span> cluster.local
      podSubnet<span class="token operator">:</span> <span class="token number">10.244</span>.<span class="token number">0.0</span>/<span class="token number">16</span>
      serviceSubnet<span class="token operator">:</span> <span class="token number">10.96</span>.<span class="token number">0.0</span>/<span class="token number">16</span>
    scheduler<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
kind<span class="token operator">:</span> ConfigMap
metadata<span class="token operator">:</span>
  creationTimestamp<span class="token operator">:</span> <span class="token string">&quot;2022-08-27T07:05:29Z&quot;</span>
  name<span class="token operator">:</span> kubeadm-config
  namespace<span class="token operator">:</span> kube-system
  resourceVersion<span class="token operator">:</span> <span class="token string">&quot;199&quot;</span>
  uid<span class="token operator">:</span> 45ddd51c-8ef3-4f86<span class="token number">-8406</span>-3d1a11d5e4c5
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="tokenè¿‡æœŸ-é‡æ–°è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#tokenè¿‡æœŸ-é‡æ–°è®¾ç½®" aria-hidden="true">#</a> tokenè¿‡æœŸï¼Œé‡æ–°è®¾ç½®</h4><blockquote><p>kubeadm token list</p><p>kubeadm token create --print-join-command</p><p>kubeadm token create --ttl 0 --print-join-command</p></blockquote><h3 id="dã€master-éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶-flannel" tabindex="-1"><a class="header-anchor" href="#dã€master-éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶-flannel" aria-hidden="true">#</a> Dã€master éƒ¨ç½²å®¹å™¨ç½‘ç»œæ’ä»¶ Flannel</h3><p><img src="/assets/true-image-20220827152630437-3effd2a5.png" alt=""></p><p>å‚è€ƒï¼š<a href="https://kubernetes.io/zh/docs/concepts/cluster-administration/addons/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/zh/docs/concepts/cluster-administration/addons/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Flannel çš„ç¼ºç‚¹ä¹‹ä¸€æ˜¯ç¼ºä¹é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚é…ç½®ç½‘ç»œç­–ç•¥å’Œé˜²ç«å¢™çš„èƒ½åŠ›ã€‚å› æ­¤ Flannel æ˜¯ Kubernetes é›†ç¾¤ç½‘ç»œçš„ä¸€ä¸ªå¾ˆå¥½çš„å…¥é—¨çº§é€‰æ‹©ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ æ­£åœ¨å¯»æ‰¾é«˜çº§ç½‘ç»œåŠŸèƒ½ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»– CNI é€‰é¡¹ï¼Œä¾‹å¦‚ Calicoã€‚</p><h4 id="é…ç½®ç½‘ç»œç­–ç•¥-flannel" tabindex="-1"><a class="header-anchor" href="#é…ç½®ç½‘ç»œç­–ç•¥-flannel" aria-hidden="true">#</a> é…ç½®ç½‘ç»œç­–ç•¥ Flannel</h4><p>rootç”¨æˆ·ï¼šä½¿ç”¨<a href="https://github.com/flannel-io/flannel#deploying-flannel-manually" target="_blank" rel="noopener noreferrer">Flannel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> é…ç½®ï¼Œæ‰§è¡Œï¼š</p><blockquote><p><a href="https://gitee.com/k8s_s/flannel/blob/master/Documentation/kube-flannel.yml" target="_blank" rel="noopener noreferrer">https://gitee.com/k8s_s/flannel/blob/master/Documentation/kube-flannel.yml<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://gitee.com/k8s_s/flannel/blob/v0.17.0/Documentation/kube-flannel.yml" target="_blank" rel="noopener noreferrer">https://gitee.com/k8s_s/flannel/blob/v0.17.0/Documentation/kube-flannel.yml<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://gitee.com/k8s_s/flannel/blob/v0.19.1/Documentation/kube-flannel.yml" target="_blank" rel="noopener noreferrer">https://gitee.com/k8s_s/flannel/blob/v0.19.1/Documentation/kube-flannel.yml<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>kubectl apply -f kube-flannel-0.19.1.yml</p><p>åˆ é™¤ï¼škubectl delete -f kube-flannel-0.19.1.yml</p></blockquote><h5>kube-flannel.yml é•œåƒç‰ˆæœ¬</h5><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code>ï¼ˆflannelç‰ˆæœ¬ï¼‰<span class="token punctuation">---</span>ï¼ˆflannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>pluginé•œåƒç‰ˆæœ¬ï¼‰<span class="token punctuation">---</span>ï¼ˆflannelé•œåƒç‰ˆæœ¬ï¼‰
<span class="token comment">### v0.15.1-v0.16.1ï¼šï¼šï¼šï¼šï¼šï¼šv1.0.0ã€v0.15.1</span>
<span class="token comment">### v0.16.2-v0.16.3ï¼šï¼šï¼šï¼šï¼šï¼šv1.0.1ã€v0.16.1</span>
<span class="token comment">### v0.17.0ï¼šï¼šï¼šï¼šï¼šï¼šv1.0.1ã€v0.16.3</span>
<span class="token comment">### v0.18.0ï¼šï¼šï¼šï¼šï¼šï¼šv1.1.0ã€v0.18.0</span>
<span class="token comment">### v0.18.1ï¼šï¼šï¼šï¼šï¼šï¼šv1.1.0ã€v0.18.1</span>
<span class="token comment">### v0.19.0ï¼šï¼šï¼šï¼šï¼šï¼šv1.1.0ã€v0.18.1</span>
<span class="token comment">### v0.19.1ï¼šï¼šï¼šï¼šï¼šï¼šv1.1.0ã€v0.19.0</span>

dkpull rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.1.0
dkpull rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">:</span>v0.19.0

docker tag rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.1.0 registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/k8sjf/flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.1.0
docker push registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/k8sjf/flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.1.0
docker rmi rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.1.0
<span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span>
docker tag rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">:</span>v0.19.0 registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/k8sjf/flannel<span class="token punctuation">:</span>v0.19.0
docker push registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/k8sjf/flannel<span class="token punctuation">:</span>v0.19.0
docker rmi rancher/mirrored<span class="token punctuation">-</span>flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">:</span>v0.19.0

imageä¿®æ”¹ï¼š
registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/k8sjf/flannelcni<span class="token punctuation">-</span>flannel<span class="token punctuation">-</span>cni<span class="token punctuation">-</span>plugin<span class="token punctuation">:</span>v1.1.0
registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/k8sjf/flannel<span class="token punctuation">:</span>v0.19.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="kubectl-å‘½ä»¤åŸºç¡€" tabindex="-1"><a class="header-anchor" href="#kubectl-å‘½ä»¤åŸºç¡€" aria-hidden="true">#</a> <a href="https://blog.csdn.net/qq_42476834/article/details/121781274" target="_blank" rel="noopener noreferrer">kubectl å‘½ä»¤åŸºç¡€<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><h4 id="æŸ¥çœ‹" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹" aria-hidden="true">#</a> æŸ¥çœ‹</h4><p>åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„Podä¿¡æ¯</p><p>åˆ—å‡ºPodä»¥åŠè¿è¡ŒPodèŠ‚ç‚¹ä¿¡æ¯ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get pods</span>
No resources found <span class="token keyword">in</span> default namespace.
<span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get pods -o wide</span>
No resources found <span class="token keyword">in</span> default namespace.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹æ‰€ä»¥èŠ‚ç‚¹ kg nodes</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kg nodes</span>
NAME         STATUS   ROLES                  AGE   VERSION
master-120   Ready    control-plane,master   63m   v1.23.8
node-121     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 58m   v1.23.8
node-122     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 58m   v1.23.8
node-123     Ready    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>                 58m   v1.23.8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹å‘½åç©ºé—´ kubectl get ns</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get ns</span>
NAME              STATUS   AGE
default           Active   63m
kube-node-lease   Active   63m
kube-public       Active   63m
kube-system       Active   63m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹ pod å‘½åç©ºé—´ kubectl get pods --all-namespaces -owide</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># kubectl get pods --all-namespaces</span>
NAMESPACE      NAME                             READY   STATUS    RESTARTS   AGE
kube-flannel   kube-flannel-ds-kfd89            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m50s
kube-flannel   kube-flannel-ds-n8fr9            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m50s
kube-flannel   kube-flannel-ds-tfj78            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m50s
kube-system    coredns-687d9f64f-b8cvf          <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55m
kube-system    coredns-687d9f64f-d99x9          <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55m
kube-system    etcd-master                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55m
kube-system    kube-apiserver-master            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55m
kube-system    kube-controller-manager-master   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55m
kube-system    kube-proxy-6v2v9                 <span class="token number">1</span>/1     Running   <span class="token number">0</span>          51m
kube-system    kube-proxy-8z62f                 <span class="token number">1</span>/1     Running   <span class="token number">0</span>          52m
kube-system    kube-proxy-ch88v                 <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55m
kube-system    kube-scheduler-master            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          55m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl get pods -n kube-system</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 kubelet<span class="token punctuation">]</span><span class="token comment"># kubectl get pods -n kube-flannel</span>
NAME                                 READY   STATUS    RESTARTS   AGE
kube-flannel-ds-44l8g                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
kube-flannel-ds-cf2zd                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
kube-flannel-ds-tkbnh                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
kube-flannel-ds-wxhk4                <span class="token number">1</span>/1     Running   <span class="token number">0</span>          48m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl get pods -n kube-system -o wide</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># kubectl get pods -n kube-flannel -o wide</span>
NAME                    READY   STATUS    RESTARTS   AGE     IP                NODE     NOMINATED NODE   READINESS GATES
kube-flannel-ds-kfd89   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m15s   <span class="token number">192.168</span>.100.132   node2    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-flannel-ds-n8fr9   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m15s   <span class="token number">192.168</span>.100.130   master   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
kube-flannel-ds-tfj78   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m15s   <span class="token number">192.168</span>.100.131   node1    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>kube-flannel-ds-xxxx å¿…é¡»è¿è¡ŒOK</strong></p><h3 id="eã€å¯è§†åŒ–æŸ¥çœ‹-kubernetesèµ„æº" tabindex="-1"><a class="header-anchor" href="#eã€å¯è§†åŒ–æŸ¥çœ‹-kubernetesèµ„æº" aria-hidden="true">#</a> Eã€å¯è§†åŒ–æŸ¥çœ‹ Kubernetesèµ„æº</h3><p>æ–‡æ¡£ï¼š<a href="https://kuboard.cn/install/install-k8s-dashboard.html" target="_blank" rel="noopener noreferrer">https://kuboard.cn/install/install-k8s-dashboard.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_1ã€dashboard-ä¸æ¨è" tabindex="-1"><a class="header-anchor" href="#_1ã€dashboard-ä¸æ¨è" aria-hidden="true">#</a> 1ã€dashboardï¼ˆä¸æ¨èï¼‰</h4><blockquote><p><a href="https://github.com/kubernetes/dashboard/releases/tag/v2.4.0" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/dashboard/releases/tag/v2.4.0<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>kubectl apply -f <a href="https://gitee.com/k8s_s/dashboard1/blob/v2.4.0/aio/deploy/recommended.yaml" target="_blank" rel="noopener noreferrer">https://gitee.com/k8s_s/dashboard1/blob/v2.4.0/aio/deploy/recommended.yaml<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> -o yaml &gt; dashboard.yaml</p></blockquote><h4 id="_2ã€kubesphere-æ¨è" tabindex="-1"><a class="header-anchor" href="#_2ã€kubesphere-æ¨è" aria-hidden="true">#</a> 2ã€KubeSphereï¼ˆæ¨èï¼‰</h4><p><a href="./kube-sphere">è·³è½¬åˆ° KubeSphere å®‰è£…</a></p><p><a href="https://github.com/kubesphere/kubesphere" target="_blank" rel="noopener noreferrer">github kubesphere<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ï¼Œstar: 9.8+K</p><h4 id="_3ã€kuboard" tabindex="-1"><a class="header-anchor" href="#_3ã€kuboard" aria-hidden="true">#</a> 3ã€Kuboard</h4><p><a href="https://kuboard.cn/overview/" target="_blank" rel="noopener noreferrer">https://kuboard.cn/overview/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://github.com/eip-work/kuboard-press" target="_blank" rel="noopener noreferrer">Github kuboard<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> stars 14.5+K</p><h4 id="_4ã€kubeoperator" tabindex="-1"><a class="header-anchor" href="#_4ã€kubeoperator" aria-hidden="true">#</a> 4ã€KubeOperator</h4><hr><hr><h2 id="_4-ã€k8s-å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#_4-ã€k8s-å…¥é—¨" aria-hidden="true">#</a> 4ï¼‰ã€k8s å…¥é—¨</h2><p>åæœŸç›´æ¥åˆ°è¿™é‡Œå¼€å§‹å§ï¼š<a href="#apps+expose-port"> ä½¿ç”¨ [apps +æš´éœ²Service port] çš„ yaml æ ¼å¼ </a></p><p><strong>èµ„æºåŒ…æ‹¬(ä¸åŒºåˆ†å¤§å°å†™)ï¼špodï¼ˆpoï¼‰ï¼Œserviceï¼ˆsvcï¼‰ï¼Œreplication controllerï¼ˆrcï¼‰ï¼Œdeploymentï¼ˆdeployï¼‰ï¼Œreplica setï¼ˆrsï¼‰</strong></p><p>å…·ä½“å‘½ä»¤è¯·çœ‹ï¼š<a href="#k8s-alias">k8s-alias</a></p><h3 id="kubectl-get-po" tabindex="-1"><a class="header-anchor" href="#kubectl-get-po" aria-hidden="true">#</a> kubectl get po</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get po</span>
NAME                      READY   STATUS    RESTARTS      AGE
nginx-689b55fcd-2c8v8     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
nginx-689b55fcd-5qpkp     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
nginx-689b55fcd-gpdqz     <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
tomcat-549f8d66bc-bln66   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
tomcat-549f8d66bc-rqhvm   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
tomcat-549f8d66bc-zkc94   <span class="token number">1</span>/1     Running   <span class="token number">1</span> <span class="token punctuation">(</span>19h ago<span class="token punctuation">)</span>   19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubectl-get-svc" tabindex="-1"><a class="header-anchor" href="#kubectl-get-svc" aria-hidden="true">#</a> kubectl get svc</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get svc</span>
NAME         TYPE        CLUSTER-IP     EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>    AGE
kubernetes   ClusterIP   <span class="token number">10.96</span>.0.1      <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP    29h
nginx        ClusterIP   <span class="token number">10.96</span>.99.230   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8000</span>/TCP   19h
tomcat       ClusterIP   <span class="token number">10.96</span>.102.96   <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">8001</span>/TCP   19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubectl-get-rc" tabindex="-1"><a class="header-anchor" href="#kubectl-get-rc" aria-hidden="true">#</a> kubectl get rc</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>No resources found <span class="token keyword">in</span> default namespace.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="kubectl-get-deploy" tabindex="-1"><a class="header-anchor" href="#kubectl-get-deploy" aria-hidden="true">#</a> kubectl get deploy</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get deploy</span>
NAME     READY   UP-TO-DATE   AVAILABLE   AGE
nginx    <span class="token number">3</span>/3     <span class="token number">3</span>            <span class="token number">3</span>           19h
tomcat   <span class="token number">3</span>/3     <span class="token number">3</span>            <span class="token number">3</span>           19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="kubectl-get-rs" tabindex="-1"><a class="header-anchor" href="#kubectl-get-rs" aria-hidden="true">#</a> kubectl get rs</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master-120 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get rs</span>
NAME                DESIRED   CURRENT   READY   AGE
nginx-689b55fcd     <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>       19h
tomcat-549f8d66bc   <span class="token number">3</span>         <span class="token number">3</span>         <span class="token number">3</span>       19h
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="aã€åŸºæœ¬å‘½ä»¤" tabindex="-1"><a class="header-anchor" href="#aã€åŸºæœ¬å‘½ä»¤" aria-hidden="true">#</a> Aã€åŸºæœ¬å‘½ä»¤</h3><h4 id="_1ã€åˆ›å»ºapps-create-deployment" tabindex="-1"><a class="header-anchor" href="#_1ã€åˆ›å»ºapps-create-deployment" aria-hidden="true">#</a> 1ã€åˆ›å»ºappsï¼šcreate deployment</h4><p>masterå®‰è£…tomcat</p><h5>kubectl create deployment tomcat6 --image=tomcat:6.0.53-jre8</h5><h4 id="_2ã€æŸ¥çœ‹-kg-all" tabindex="-1"><a class="header-anchor" href="#_2ã€æŸ¥çœ‹-kg-all" aria-hidden="true">#</a> 2ã€æŸ¥çœ‹ kg all</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>a1@node01:~/k8s$ kubectl get all
NAME                           READY   STATUS              RESTARTS  		 AGE
pod/tomcat6-56fcc999cb-47vfm   <span class="token number">0</span>/1     ContainerCreating      <span class="token number">0</span>      		 23s
NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>   		 AGE
service/kubernetes   ClusterIP   <span class="token number">10.96</span>.0.1    <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>        <span class="token number">443</span>/TCP  		 115m
NAME                      READY   UP-TO-DATE   AVAILABLE   					AGE
deployment.apps/tomcat6   <span class="token number">0</span>/1     	 <span class="token number">1</span>             <span class="token number">0</span>           				23s
NAME                                 DESIRED   CURRENT   READY  			AGE
replicaset.apps/tomcat6-56fcc999cb   <span class="token number">1</span>         <span class="token number">1</span>         <span class="token number">0</span>      			23s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3ã€æŸ¥çœ‹è¯¦ç»†-kg-all-o-wide" tabindex="-1"><a class="header-anchor" href="#_3ã€æŸ¥çœ‹è¯¦ç»†-kg-all-o-wide" aria-hidden="true">#</a> 3ã€æŸ¥çœ‹è¯¦ç»† kg all -o wide</h4><p>tomcat6åœ¨èŠ‚ç‚¹node2---dockerä¸‹è½½é•œåƒok</p><p><img src="/assets/true-image-20211207225032232-3bba15e0.png" alt=""></p><p>åœ¨node2æŸ¥çœ‹</p><p><img src="/assets/true-image-20211207225209670-bf5d087d.png" alt=""></p><p><img src="/assets/true-image-20211207225504118-12031911.png" alt=""></p><h4 id="_4ã€æŸ¥çœ‹-kg-pod-o-wide" tabindex="-1"><a class="header-anchor" href="#_4ã€æŸ¥çœ‹-kg-pod-o-wide" aria-hidden="true">#</a> 4ã€æŸ¥çœ‹ kg pod -o wide</h4><p><img src="/assets/true-image-20211207225722559-14ab1f0f.png" alt=""></p><h5>node02æ¨¡æ‹Ÿå®•æœºï¼Œçœ‹çœ‹k8sæ€ä¹ˆå¤„ç†ï¼ˆdkstopä¸node02å…³æœºï¼‰</h5><p><img src="/assets/true-image-20211207230129356-334ba033.png" alt=""></p><p>å‘ç°node2èŠ‚ç‚¹å·²ç»ä¸è¡Œäº†ï¼Œå…¨éƒ¨å‹åŠ›åˆ°äº†node3</p><p><img src="/assets/true-image-20211207231251942-978d3211.png" alt=""></p><p><img src="/assets/true-image-20211207231314338-8657278e.png" alt=""></p><h5>é‡å¯ node02</h5><p><img src="/assets/true-image-20211207231849655-a4121ffd.png" alt=""></p><h4 id="_5ã€æš´éœ²-port-expose" tabindex="-1"><a class="header-anchor" href="#_5ã€æš´éœ²-port-expose" aria-hidden="true">#</a> 5ã€æš´éœ² port ï¼šexpose</h4><blockquote><p>expose (-f FILENAME | TYPE NAME) [--port=port] [--protocol=TCP|UDP] [--target-port=number-or-name] [--name=name] [--external-ip=external-ip-of-service] [--type=type]</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl expose rc nginx <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8080</span>
kubectl expose deploy tomcat6 <span class="token parameter variable">--port</span><span class="token operator">=</span><span class="token number">80</span> --target-port<span class="token operator">=</span><span class="token number">8080</span> <span class="token parameter variable">--type</span><span class="token operator">=</span>NodePort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/true-image-20211208174133284-2ae5eec0.png" alt=""></p><p><img src="/assets/true-image-20211208175833308-14204af3.png" alt=""></p><p><a href="http://192.168.100.131:31002/" target="_blank" rel="noopener noreferrer">http://192.168.100.131:31002/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="_6ã€ä¿®æ”¹-port-edit" tabindex="-1"><a class="header-anchor" href="#_6ã€ä¿®æ”¹-port-edit" aria-hidden="true">#</a> 6ã€ä¿®æ”¹ portï¼šedit</h4><blockquote><p>kubectl edit svc tomcat6 ###ä¿®æ”¹appåº”ç”¨æœåŠ¡çš„port</p><p>kubectl edit deploy tomcat6 ### ä¿®æ”¹appåº”ç”¨</p></blockquote><h4 id="_7ã€æ‰©å®¹æˆ–ç¼©å®¹-scale" tabindex="-1"><a class="header-anchor" href="#_7ã€æ‰©å®¹æˆ–ç¼©å®¹-scale" aria-hidden="true">#</a> 7ã€æ‰©å®¹æˆ–ç¼©å®¹ï¼šscale</h4><blockquote><p>scale [--resource-version=version] [--current-replicas=count] --replicas=COUNT (-f FILENAME | TYPE NAME)</p></blockquote><p>å°†åä¸ºtomcat6ä¸­çš„podå‰¯æœ¬æ•°è®¾ç½®ä¸º3ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>kubectl scale --replicas=3 deployment tomcat6
kg pods -o wide
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/assets/true-image-20211208180527896-6d163569.png" alt=""></p><p>å¦‚æœå½“å‰å‰¯æœ¬æ•°ä¸º2ï¼Œåˆ™å°†å…¶æ‰©å±•è‡³3ã€‚</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>kubectl scale --current-replicas=2 --replicas=3 deployment/tomcat6
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_8ã€åˆ é™¤ä»¥-create-deployment-éƒ¨ç½²çš„-appsã€service-delete" tabindex="-1"><a class="header-anchor" href="#_8ã€åˆ é™¤ä»¥-create-deployment-éƒ¨ç½²çš„-appsã€service-delete" aria-hidden="true">#</a> 8ã€åˆ é™¤ä»¥ create deployment éƒ¨ç½²çš„(appsã€service) delete</h4><blockquote><p>kubectl get all</p><p>kubectl delete deployment.apps/tomcat6</p><p>kubectl delete service/tomcat6</p></blockquote><p><img src="/assets/true-image-20211208181306441-82c92871.png" alt=""></p><h4 id="_9ã€éƒ¨ç½²-åˆ é™¤ä»¥-yaml-éƒ¨ç½²çš„å®ä¾‹" tabindex="-1"><a class="header-anchor" href="#_9ã€éƒ¨ç½²-åˆ é™¤ä»¥-yaml-éƒ¨ç½²çš„å®ä¾‹" aria-hidden="true">#</a> 9ã€éƒ¨ç½²&amp;åˆ é™¤ä»¥ yaml éƒ¨ç½²çš„å®ä¾‹</h4><p><a href="#xxx.yaml">æŸ¥çœ‹ xxx.yaml</a></p><h5>kubectl apply -f xxx.yaml</h5><h5>kubectl delete -f xxx.yaml</h5><hr><hr><h3 id="bã€yaml-åŸºæœ¬ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#bã€yaml-åŸºæœ¬ä½¿ç”¨" aria-hidden="true">#</a> Bã€yaml &amp; åŸºæœ¬ä½¿ç”¨</h3><p><a href="https://kubernetes.io/zh/docs/reference/kubectl/overview/" target="_blank" rel="noopener noreferrer">https://kubernetes.io/zh/docs/reference/kubectl/overview/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>åæœŸä½¿ç”¨ï¼š<a href="#apps+expose-port"># apps+expose-port</a>ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ <a href="#%E5%88%9D%E7%BA%A7%E4%BD%BF%E7%94%A8yaml%E5%88%9B%E5%BB%BAapps"># åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps</a></p><h4 id="pod-æ¨¡ç‰ˆ" tabindex="-1"><a class="header-anchor" href="#pod-æ¨¡ç‰ˆ" aria-hidden="true">#</a> Pod æ¨¡ç‰ˆ</h4><p>ä¸€èˆ¬ä¸ä¼šè‡ªå·±åˆ›å»º</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat9<span class="token punctuation">-</span><span class="token number">02</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat9<span class="token punctuation">-</span><span class="token number">02</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat9<span class="token punctuation">-</span><span class="token number">02</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="deployment-æ¨¡ç‰ˆ" tabindex="-1"><a class="header-anchor" href="#deployment-æ¨¡ç‰ˆ" aria-hidden="true">#</a> Deployment æ¨¡ç‰ˆ</h4><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601<span class="token punctuation">-</span>deployment
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token comment">#replicaså¤åˆ¶å‡ ä»½</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span> 
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token comment">#Podæ¨¡æ¿</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx<span class="token punctuation">-</span>deployment
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
  <span class="token comment">#Podæ¨¡æ¿</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
 	<span class="token comment">#Podæ¨¡æ¿è§„çº¦ï¼šspec-æŒ‡ç¤º Pods è¿è¡Œä¸€ä¸ª nginx å®¹å™¨</span>
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>1.14.2
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">80</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="service-æ¨¡ç‰ˆ" tabindex="-1"><a class="header-anchor" href="#service-æ¨¡ç‰ˆ" aria-hidden="true">#</a> Service æ¨¡ç‰ˆ</h4><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601<span class="token punctuation">-</span>xxx<span class="token punctuation">-</span>jp3sk
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token comment">#- NodePort: 30965</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1ã€åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps-åæœŸä¸ä½¿ç”¨è¿™ç§æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_1ã€åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps-åæœŸä¸ä½¿ç”¨è¿™ç§æ–¹å¼" aria-hidden="true">#</a> 1ã€åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps<a name="åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps"></a>ï¼ˆåæœŸä¸ä½¿ç”¨è¿™ç§æ–¹å¼ï¼‰</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># ä½¿ç”¨ example-service.yaml ä¸­çš„å®šä¹‰åˆ›å»ºæœåŠ¡ã€‚</span>
kubectl apply <span class="token parameter variable">-f</span> example-service.yaml

<span class="token comment"># ä½¿ç”¨ example-controller.yaml ä¸­çš„å®šä¹‰åˆ›å»º replication controllerã€‚</span>
kubectl apply <span class="token parameter variable">-f</span> example-controller.yaml

<span class="token comment"># ä½¿ç”¨ &lt;directory&gt; è·¯å¾„ä¸‹çš„ä»»æ„ .yaml, .yml, æˆ– .json æ–‡ä»¶ åˆ›å»ºå¯¹è±¡ã€‚</span>
kubectl apply <span class="token parameter variable">-f</span> <span class="token operator">&lt;</span>directory<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹å¹¶ä¿å­˜ Deployment çš„ yaml æ–‡ä»¶ï¼ˆ--dry-runï¼‰</p><blockquote><p>--dry-runï¼šä»…æŸ¥çœ‹ä¸è¿è¡Œ</p><p>kubectl create deployment æœåŠ¡åç§°--image=é•œåƒåç§° --dry-run -o yaml &gt; ä¿å­˜ç›®æ ‡</p><p>kubectl create deployment tomcat6 --image=tomcat:6.0.53-jre8 --dry-run -o yaml &gt; tomcat6.yaml</p></blockquote><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ›å»º Deployment appsï¼škubectl apply -f tomcat6.yaml</p><p>kubectl get deployments</p><p>æ›´æ–° Deployment</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl <span class="token builtin class-name">set</span> image deployment.v1.apps/tomcat6 <span class="token assign-left variable">tomcat</span><span class="token operator">=</span>tomcat:9.0.53-jre8
æˆ–
kubectl <span class="token builtin class-name">set</span> image deployment/tomcat6 <span class="token assign-left variable">tomcat</span><span class="token operator">=</span>tomcat:9.0.53-jre8
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å›æ»š Deployment</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>kubectl <span class="token builtin class-name">set</span> image deployment/tomcat6 <span class="token assign-left variable">tomcat</span><span class="token operator">=</span>tomcat:9.0.53-jre8 <span class="token parameter variable">--record</span><span class="token operator">=</span>true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æš´éœ² service ç«¯å£ï¼škubectl expose deploy tomcat6 --port=80 --target-port=8080 --type=NodePort</p><p>æŸ¥çœ‹ Podï¼ˆkg all ï¼Œkg pods -o wideï¼Œkg pod xx -o yamlï¼‰</p><p><img src="/assets/true-image-20211208212559503-c73b0cb9.png" alt=""></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
    <span class="token key atrule">pod-template-hash</span><span class="token punctuation">:</span> 56fcc999cb
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6<span class="token punctuation">-</span>56fcc999cb<span class="token punctuation">-</span>nm2nx
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">ownerReferences</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
    <span class="token key atrule">blockOwnerDeletion</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">controller</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">kind</span><span class="token punctuation">:</span> ReplicaSet
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6<span class="token punctuation">-</span>56fcc999cb
    <span class="token key atrule">uid</span><span class="token punctuation">:</span> 28633fd6<span class="token punctuation">-</span>b3ee<span class="token punctuation">-</span>45aa<span class="token punctuation">-</span>93d5<span class="token punctuation">-</span>fb8931735029
  <span class="token key atrule">resourceVersion</span><span class="token punctuation">:</span> <span class="token string">&quot;47929&quot;</span>
  <span class="token key atrule">uid</span><span class="token punctuation">:</span> 59333abe<span class="token punctuation">-</span>6a24<span class="token punctuation">-</span>4995<span class="token punctuation">-</span>888b<span class="token punctuation">-</span>88577fef9559
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
<span class="token punctuation">...</span> <span class="token punctuation">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è‡ªå·±åˆ›å»º podï¼ˆ.yamlï¼‰æ–‡ä»¶</p><p>Pod é€šå¸¸ä¸æ˜¯ç›´æ¥åˆ›å»ºçš„ï¼Œè€Œæ˜¯ä½¿ç”¨å·¥ä½œè´Ÿè½½èµ„æºåˆ›å»ºçš„ã€‚</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Pod
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
  	<span class="token comment">#å®ä¾‹åç§°</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat601
  <span class="token comment">#å®¹å™¨åç§°  </span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span>  tomcat6<span class="token punctuation">-</span>xxx<span class="token punctuation">-</span>wzfj2
  <span class="token comment">#å‘½åç©ºé—´</span>
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token comment">#å®¹å™¨</span>
  <span class="token key atrule">containers</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat601
  <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
    <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl apply -f myPod.yaml</p><p>æŸ¥çœ‹ Serviceï¼ˆkg svc tomcat6 -o yamlï¼‰</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">creationTimestamp</span><span class="token punctuation">:</span> <span class="token string">&quot;2021-12-08T13:41:18Z&quot;</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token key atrule">resourceVersion</span><span class="token punctuation">:</span> <span class="token string">&quot;48461&quot;</span>
  <span class="token key atrule">uid</span><span class="token punctuation">:</span> b4ebfb65<span class="token punctuation">-</span>4e0c<span class="token punctuation">-</span>478a<span class="token punctuation">-</span>8e85<span class="token punctuation">-</span>f03acef2d166
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">clusterIP</span><span class="token punctuation">:</span> 10.96.126.87
  <span class="token key atrule">clusterIPs</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 10.96.126.87
  <span class="token key atrule">externalTrafficPolicy</span><span class="token punctuation">:</span> Cluster
  <span class="token key atrule">internalTrafficPolicy</span><span class="token punctuation">:</span> Cluster
  <span class="token key atrule">ipFamilies</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> IPv4
  <span class="token key atrule">ipFamilyPolicy</span><span class="token punctuation">:</span> SingleStack
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">31005</span> <span class="token comment">#æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨port</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">sessionAffinity</span><span class="token punctuation">:</span> None
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
<span class="token key atrule">status</span><span class="token punctuation">:</span>
  <span class="token key atrule">loadBalancer</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹ Deployment-appsï¼ˆkg deploy tomcat6 -o yamlï¼‰</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
  <span class="token punctuation">...</span>
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat6
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">image</span><span class="token punctuation">:</span> tomcat<span class="token punctuation">:</span>6.0.53<span class="token punctuation">-</span>jre8
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
        <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
        <span class="token key atrule">terminationMessagePath</span><span class="token punctuation">:</span> /dev/termination<span class="token punctuation">-</span>log
        <span class="token key atrule">terminationMessagePolicy</span><span class="token punctuation">:</span> File
   <span class="token punctuation">...</span>.
<span class="token key atrule">status</span><span class="token punctuation">:</span>
    <span class="token punctuation">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹ Deployment ä¸Šçº¿çŠ¶æ€<code>kubectl rollout status deployment/nginx-deployment</code></p><p>æ ¡éªŒï¼š<a href="http://192.168.100.130:80/" target="_blank" rel="noopener noreferrer">http://192.168.100.130:80/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="/assets/true-image-20211208215629869-bcbbe5ba.png" alt=""></p><h4 id="_2ã€ä½¿ç”¨-apps-æš´éœ²service-port-çš„-yaml-æ ¼å¼-ä½¿ç”¨è¿™ä¸ª-ä¸ä½¿ç”¨-åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps-æ¨è" tabindex="-1"><a class="header-anchor" href="#_2ã€ä½¿ç”¨-apps-æš´éœ²service-port-çš„-yaml-æ ¼å¼-ä½¿ç”¨è¿™ä¸ª-ä¸ä½¿ç”¨-åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps-æ¨è" aria-hidden="true">#</a> 2ã€ä½¿ç”¨ [apps +æš´éœ²Service port] çš„ yaml æ ¼å¼ï¼ˆä½¿ç”¨è¿™ä¸ªï¼Œä¸ä½¿ç”¨<a href="#%E5%88%9D%E7%BA%A7%E4%BD%BF%E7%94%A8yaml%E5%88%9B%E5%BB%BAapps"># åˆçº§ä½¿ç”¨yamlåˆ›å»ºapps</a>ï¼‰=<mark><mark><mark><mark>æ¨è</mark></mark></mark></mark>==<a name="apps+expose-port"></a></h4><p>=<mark><mark><mark><mark>æ¨è</mark></mark></mark></mark>==</p><h5>å®‰è£… Deploymentï¼ˆapps ï¼‰ä¸æš´éœ²Serviceï¼ˆexpose-port ï¼‰åœ¨åŒä¸€ä¸ªyamlæ–‡ä»¶é‡Œè®¾ç½®ï¼Œé€šè¿‡<code>---</code>åˆ†éš”</h5><p>=<mark><mark><mark><mark>æ¨è</mark></mark></mark></mark>==</p><p>xxx.yaml<a name="xxx.yaml"></a></p><details class="hint-container details"><summary>ç‚¹å‡»æŸ¥çœ‹ä»£ç </summary><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
        <span class="token key atrule">image</span><span class="token punctuation">:</span> registry.cn<span class="token punctuation">-</span>chengdu.aliyuncs.com/k8sjf/tomcat<span class="token punctuation">:</span>9.0.62<span class="token punctuation">-</span>jre11<span class="token punctuation">-</span>temurin<span class="token punctuation">-</span>focal
        <span class="token key atrule">ports</span><span class="token punctuation">:</span>
        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> IfNotPresent
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> default
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>
    <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP
    <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> tomcat
  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p><img src="/assets/true-image-20211208220838638-2e1ae245.png" alt=""></p><h3 id="cã€deployment-service-æ¦‚å¿µ" tabindex="-1"><a class="header-anchor" href="#cã€deployment-service-æ¦‚å¿µ" aria-hidden="true">#</a> Cã€Deployment &amp; service æ¦‚å¿µ</h3><p><img src="/assets/components-of-kubernetes-cd7b9b2d.svg" alt=""></p><h4 id="pod-service" tabindex="-1"><a class="header-anchor" href="#pod-service" aria-hidden="true">#</a> pod &amp; service</h4><p><img src="/assets/true-image-20211208203943489-deb54355.png" alt=""></p><p><img src="/assets/true-image-20211208205239059-d6141b29.png" alt=""></p><p>å°†ä¸€ç»„podå…¬å¼€ä¸ºç½‘ç»œæœåŠ¡ï¼Œé€šè¿‡serviceä»£ç†ï¼Œå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡</p><p><img src="/assets/true-2839691-20220421215548249-23947997-511eeaed.png" alt=""></p><h4 id="clusterip" tabindex="-1"><a class="header-anchor" href="#clusterip" aria-hidden="true">#</a> ClusterIP</h4><p>æ­¤æ–¹å¼åªèƒ½åœ¨é›†ç¾¤å†…è®¿é—®</p><h4 id="label-selector" tabindex="-1"><a class="header-anchor" href="#label-selector" aria-hidden="true">#</a> label &amp; selector</h4><p><img src="/assets/true-image-20211208205421842-64437e36.png" alt=""></p><p>é€šè®¯1</p><p><img src="/assets/true-image-20211208205753063-e288e4ab.png" alt=""></p><p>é€šè®¯2</p><p><img src="/assets/true-image-20211208205714089-4904c227.png" alt=""></p><h4 id="è¯´æ˜" tabindex="-1"><a class="header-anchor" href="#è¯´æ˜" aria-hidden="true">#</a> è¯´æ˜ï¼š</h4><blockquote><p>ä¸€ä¸ªé›†ç¾¤åå¤šå°msterã€nodeï¼Œä¸€ä¸ªèŠ‚ç‚¹nodeï¼Œé‡Œé¢æœ‰å¤šä¸ªPodï¼Œä¸€ä¸ªPodé‡Œå¯èƒ½æœ‰å¤šä¸ªæœåŠ¡ï¼Œå„ä¸ªPodé€šè¿‡serviceæš´éœ²portç»™å…¶ä»–Podã€nodeä¹‹é—´æ˜¯äº’é€šï¼Œé€šè¿‡controlleræ¥ç®¡ç†ä½¿ç”¨Podèµ„æºã€‚</p></blockquote><p>node -&gt; pod -&gt; service -&gt; controller</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/topjf/topjf/edit/main/docs/k8s/basis.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: topjfk@163.com">jinfang</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><!----><a href="/k8s/setting-alias.html" class="nav-link next" aria-label="è®¾ç½®docker-k8så¿«æ·æŒ‡ä»¤"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">è®¾ç½®docker-k8så¿«æ·æŒ‡ä»¤<img class="icon" src="/icons/k8s/k8s_16x16.png"></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2023 topjf</div></footer></div><!--]--><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-30d3d221.js" defer></script>
  </body>
</html>
