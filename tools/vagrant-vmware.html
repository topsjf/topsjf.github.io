<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://topjf.github.io/tools/vagrant-vmware.html"><meta property="og:site_name" content="topjf"><meta property="og:title" content="è™šæ‹Ÿæœºæ‰¹é‡å¤„ç†vagrant_vmware"><meta property="og:description" content="ä¸€ã€å®‰è£… centos7.9 æ¨¡æ¿ å®‰è£…ï¼šç•¥ç•¥ç•¥ç•¥ æ­¥éª¤ï¼š 1. æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬ 2. è®¾ç½®sudoæƒé™ 3. å›½å†…yumæº 4. å‡çº§å†…æ ¸ 5. å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinux 6. é…ç½®ç½‘å¡ 7. ç¦ç”¨è¯¥å¯é¢„æµ‹å‘½åè§„åˆ™ 8. é‡æ–°ç”ŸæˆGRUBé…ç½®å¹¶æ›´æ–°å†…æ ¸å‚æ•° 1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬ 2ã€è®¾ç½®sudoæƒé™ 1ã€su root 2ã€..."><meta property="og:type" content="article"><meta property="og:image" content="https://topjf.github.io/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2022-12-16T06:02:03.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="è™šæ‹Ÿæœºæ‰¹é‡å¤„ç†vagrant_vmware"><meta property="article:tag" content="vmware"><meta property="article:tag" content="vagrant_vmware"><meta property="article:published_time" content="2020-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2022-12-16T06:02:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"è™šæ‹Ÿæœºæ‰¹é‡å¤„ç†vagrant_vmware","image":["https://topjf.github.io/"],"datePublished":"2020-01-01T00:00:00.000Z","dateModified":"2022-12-16T06:02:03.000Z","author":[]}</script><script type="text/javascript" src="/script/demo.js"></script><link rel="stylesheet" href="/iconfont/iconfont.css"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>è™šæ‹Ÿæœºæ‰¹é‡å¤„ç†vagrant_vmware | topjf</title><meta name="description" content="ä¸€ã€å®‰è£… centos7.9 æ¨¡æ¿ å®‰è£…ï¼šç•¥ç•¥ç•¥ç•¥ æ­¥éª¤ï¼š 1. æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬ 2. è®¾ç½®sudoæƒé™ 3. å›½å†…yumæº 4. å‡çº§å†…æ ¸ 5. å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinux 6. é…ç½®ç½‘å¡ 7. ç¦ç”¨è¯¥å¯é¢„æµ‹å‘½åè§„åˆ™ 8. é‡æ–°ç”ŸæˆGRUBé…ç½®å¹¶æ›´æ–°å†…æ ¸å‚æ•° 1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬ 2ã€è®¾ç½®sudoæƒé™ 1ã€su root 2ã€...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-41a36a5c.css" as="style"><link rel="stylesheet" href="/assets/style-41a36a5c.css">
    <link rel="modulepreload" href="/assets/app-30d3d221.js"><link rel="modulepreload" href="/assets/framework-ed4f969a.js"><link rel="modulepreload" href="/assets/vagrant-vmware.html-24072413.js"><link rel="modulepreload" href="/assets/vagrant-vmware.html-2879de18.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="topjf"><!----><span class="site-name hide-in-pad">topjf</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="å¿«é€Ÿå¯¼èˆª"><span class="font-icon icon iconfont icon-arrow" style=""></span>å¿«é€Ÿå¯¼èˆª<!----></a></div><div class="nav-item hide-in-mobile"><a href="/all/all.html" class="nav-link" aria-label="é¢è¯•å®å…¸"><span class="font-icon icon iconfont icon-overflow" style=""></span>é¢è¯•å®å…¸<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä¸ªäººä¸­å¿ƒ"><span class="title"><span class="font-icon icon iconfont icon-anonymous" style=""></span>ä¸ªäººä¸­å¿ƒ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article" class="nav-link" aria-label="æ–‡ç« "><span class="font-icon icon iconfont icon-note" style=""></span>æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/category" class="nav-link" aria-label="åˆ†ç±»"><span class="font-icon icon iconfont icon-categoryselected" style=""></span>åˆ†ç±»<!----></a></li><li class="dropdown-item"><a href="/tag" class="nav-link" aria-label="æ ‡ç­¾"><span class="font-icon icon iconfont icon-list" style=""></span>æ ‡ç­¾<!----></a></li><li class="dropdown-item"><a href="/encrypted" class="nav-link" aria-label="åŠ å¯†æ–‡ç« "><span class="font-icon icon iconfont icon-command" style=""></span>åŠ å¯†æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/star" class="nav-link" aria-label="æ”¶è—æ–‡ç« "><span class="font-icon icon iconfont icon-like" style=""></span>æ”¶è—æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/timeline" class="nav-link" aria-label="æ—¶é—´çº¿"><span class="font-icon icon iconfont icon-time" style=""></span>æ—¶é—´çº¿<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç½‘ç«™ç›¸å…³"><span class="title"><span class="font-icon icon iconfont icon-info" style=""></span>ç½‘ç«™ç›¸å…³</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/about/about-this.html" class="nav-link" aria-label="å…³äºæœ¬ç«™"><span class="font-icon icon iconfont icon-people" style=""></span>å…³äºæœ¬ç«™<!----></a></li><li class="dropdown-item"><a href="/history/history.html" class="nav-link" aria-label="ç½‘ç«™å†å²"><span class="font-icon icon iconfont icon-time" style=""></span>ç½‘ç«™å†å²<!----></a></li><li class="dropdown-item"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress Theme Hope æ–‡æ¡£" class="nav-link"><span class="font-icon icon iconfont icon-creative" style=""></span>VuePress Theme Hope æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/topjf/topjf" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/tools/java.html" class="nav-link sidebar-link sidebar-page" aria-label="jdkå®‰è£…ä¸é…ç½®"><span class="font-icon icon iconfont icon-edit" style=""></span>jdkå®‰è£…ä¸é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/maven.html" class="nav-link sidebar-link sidebar-page" aria-label="mavenç®¡ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>mavenç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/gradle.html" class="nav-link sidebar-link sidebar-page" aria-label="gradleç®¡ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>gradleç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/idea.html" class="nav-link sidebar-link sidebar-page" aria-label="idea"><span class="font-icon icon iconfont icon-edit" style=""></span>idea<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/eclipse.html" class="nav-link sidebar-link sidebar-page" aria-label="eclipse"><span class="font-icon icon iconfont icon-edit" style=""></span>eclipse<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/nodejs-setting.html" class="nav-link sidebar-link sidebar-page" aria-label="nodejsé…ç½®"><span class="font-icon icon iconfont icon-edit" style=""></span>nodejsé…ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/rsync.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux æ•°æ®åŒæ­¥å·¥å…·"><span class="font-icon icon iconfont icon-edit" style=""></span>Linux æ•°æ®åŒæ­¥å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/tools/vagrant-vmware.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="è™šæ‹Ÿæœºæ‰¹é‡å¤„ç†vagrant_vmware"><span class="font-icon icon iconfont icon-edit" style=""></span>è™šæ‹Ÿæœºæ‰¹é‡å¤„ç†vagrant_vmware<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#ä¸€ã€å®‰è£…-centos7-9-æ¨¡æ¿" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸€ã€å®‰è£… centos7.9 æ¨¡æ¿"><!---->ä¸€ã€å®‰è£… centos7.9 æ¨¡æ¿<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#æ­¥éª¤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­¥éª¤ï¼š"><!---->æ­¥éª¤ï¼š<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬"><!---->1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_2ã€è®¾ç½®sudoæƒé™" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2ã€è®¾ç½®sudoæƒé™"><!---->2ã€è®¾ç½®sudoæƒé™<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_3ã€å›½å†…yumæº-ä½¿ç”¨åä¸º" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3ã€å›½å†…yumæºï¼ˆä½¿ç”¨åä¸ºï¼‰"><!---->3ã€å›½å†…yumæºï¼ˆä½¿ç”¨åä¸ºï¼‰<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-base-repo" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CentOS-Base.repo"><!---->CentOS-Base.repo<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#elrepo-repo" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="elrepo.repo"><!---->elrepo.repo<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬"><!---->4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-å†…æ ¸å‡çº§" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="centos å†…æ ¸å‡çº§"><!---->centos å†…æ ¸å‡çº§<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬"><!---->å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ " class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ "><!---->5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ <!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_6ã€é…ç½®ç½‘å¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6ã€é…ç½®ç½‘å¡"><!---->6ã€é…ç½®ç½‘å¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬-vim-root-first-sh" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬ï¼švim /root/first.sh"><!---->7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬ï¼švim /root/first.sh<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_8ã€ç¦ç”¨-grub-è§„åˆ™" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8ã€ç¦ç”¨ grub è§„åˆ™"><!---->8ã€ç¦ç”¨ grub è§„åˆ™<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_9ã€å®‰è£…å¯¹windowæ ¼å¼çš„-sh-è„šæœ¬è½¬ç -dos2unix" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9ã€å®‰è£…å¯¹windowæ ¼å¼çš„ sh è„šæœ¬è½¬ç  dos2unix"><!---->9ã€å®‰è£…å¯¹windowæ ¼å¼çš„ sh è„šæœ¬è½¬ç  dos2unix<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#äºŒã€vagrant" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒã€Vagrant"><!---->äºŒã€Vagrant<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_1ã€centos7-9-åŸºæœ¬é…ç½®" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1ã€centos7.9 åŸºæœ¬é…ç½®"><!---->1ã€centos7.9 åŸºæœ¬é…ç½®<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_2ã€vagrantfile-æ–‡ä»¶" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2ã€Vagrantfile æ–‡ä»¶"><!---->2ã€Vagrantfile æ–‡ä»¶<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_3ã€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3ã€"><!---->3ã€<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#vagrant-box-æ‰“åŒ…" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Vagrant Box æ‰“åŒ…"><!---->Vagrant Box æ‰“åŒ…<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#æƒé™é…ç½®å…¬é’¥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æƒé™é…ç½®å…¬é’¥"><!---->æƒé™é…ç½®å…¬é’¥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#é…ç½®ç½‘å¡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="é…ç½®ç½‘å¡"><!---->é…ç½®ç½‘å¡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#æ‰“åŒ…box" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ‰“åŒ…BOX"><!---->æ‰“åŒ…BOX<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#äºŒã€vmrun" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äºŒã€vmrun"><!---->äºŒã€vmrun<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#æ ¼å¼-vmrun-èº«ä»½éªŒè¯æ ‡å¿—-å‘½ä»¤-å‚æ•°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ ¼å¼ï¼švmrun [èº«ä»½éªŒè¯æ ‡å¿—] å‘½ä»¤ [å‚æ•°]"><!---->æ ¼å¼ï¼švmrun [èº«ä»½éªŒè¯æ ‡å¿—] å‘½ä»¤ [å‚æ•°]<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#ç¤ºä¾‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ç¤ºä¾‹"><!---->ç¤ºä¾‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#æ­¥éª¤-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="æ­¥éª¤"><!---->æ­¥éª¤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#è„šæœ¬-auto-vm-sh" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è„šæœ¬ï¼šauto_VM.sh"><!---->è„šæœ¬ï¼šauto_VM.sh<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#è„šæœ¬-first-sh" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="è„šæœ¬ï¼šfirst.sh"><!---->è„šæœ¬ï¼šfirst.sh<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#start-å-é€šè¿‡-å˜‰å®¾-set-ip1-bat-çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœº-ipã€hostname" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="start åï¼Œé€šè¿‡ å˜‰å®¾ï¼ˆset_ip1.batï¼‰ çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœºï¼ˆipã€hostnameï¼‰"><!---->start åï¼Œé€šè¿‡ å˜‰å®¾ï¼ˆset_ip1.batï¼‰ çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœºï¼ˆipã€hostnameï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#ä¸‰ã€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ä¸‰ã€"><!---->ä¸‰ã€<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#å››ã€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å››ã€"><!---->å››ã€<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#äº”ã€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="äº”ã€"><!---->äº”ã€<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#å…­ã€" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="å…­ã€"><!---->å…­ã€<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-database" style=""></span><span class="title">æ•°æ®åº“ç®¡ç†å·¥å…·</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/tools/database/CHINER.html" class="nav-link sidebar-link sidebar-page" aria-label="CHINERæ•°æ®åº“å»ºæ¨¡å·¥å…·"><span class="font-icon icon iconfont icon-edit" style=""></span>CHINERæ•°æ®åº“å»ºæ¨¡å·¥å…·<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/database/datagrip.html" class="nav-link sidebar-link sidebar-page" aria-label="datagripæ•°æ®åº“ç®¡ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>datagripæ•°æ®åº“ç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/database/DBeaver.html" class="nav-link sidebar-link sidebar-page" aria-label="DBeaveræ•°æ®åº“ç®¡ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>DBeaveræ•°æ®åº“ç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/database/screw.html" class="nav-link sidebar-link sidebar-page" aria-label="screwä¸€é”®ç”Ÿæˆæ•°æ®åº“æ–‡æ¡£"><span class="font-icon icon iconfont icon-edit" style=""></span>screwä¸€é”®ç”Ÿæˆæ•°æ®åº“æ–‡æ¡£<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-git" style=""></span><span class="title">Git</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/tools/git/git-intro.html" class="nav-link sidebar-link sidebar-page" aria-label="Git å…¥é—¨"><span class="font-icon icon iconfont icon-edit" style=""></span>Git å…¥é—¨<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/github-tips.html" class="nav-link sidebar-link sidebar-page" aria-label="Github å°æŠ€å·§"><span class="font-icon icon iconfont icon-edit" style=""></span>Github å°æŠ€å·§<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/deploy-gh-pages.html" class="nav-link sidebar-link sidebar-page" aria-label="Github è‡ªåŠ¨éƒ¨ç½²WEBé¡¹ç›®"><span class="font-icon icon iconfont icon-edit" style=""></span>Github è‡ªåŠ¨éƒ¨ç½²WEBé¡¹ç›®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/gitlab.html" class="nav-link sidebar-link sidebar-page" aria-label="gitlabä»“åº“ç®¡ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>gitlabä»“åº“ç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/git-setting.html" class="nav-link sidebar-link sidebar-page" aria-label="gité…ç½®"><span class="font-icon icon iconfont icon-edit" style=""></span>gité…ç½®<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-edit" style=""></span>è™šæ‹Ÿæœºæ‰¹é‡å¤„ç†vagrant_vmware</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/article" target="_blank" rel="noopener noreferrer">topjf</a></span><span property="author" content="topjf"></span></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category8 clickable" role="navigation">å¼€å‘å·¥å…·</span><meta property="articleSection" content="å¼€å‘å·¥å…·"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag0 clickable" role="navigation">vmware</span><span class="page-tag-item tag0 clickable" role="navigation">vagrant_vmware</span><meta property="keywords" content="vmware,vagrant_vmware"></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-01-01T00:00:00.000Z"></span><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 7441 å­—</span><meta property="wordCount" content="7441"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 25 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT25M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#ä¸€ã€å®‰è£…-centos7-9-æ¨¡æ¿" class="router-link-active router-link-exact-active toc-link level2">ä¸€ã€å®‰è£… centos7.9 æ¨¡æ¿</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#æ­¥éª¤" class="router-link-active router-link-exact-active toc-link level2">æ­¥éª¤ï¼š</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬" class="router-link-active router-link-exact-active toc-link level2">1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_2ã€è®¾ç½®sudoæƒé™" class="router-link-active router-link-exact-active toc-link level2">2ã€è®¾ç½®sudoæƒé™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_3ã€å›½å†…yumæº-ä½¿ç”¨åä¸º" class="router-link-active router-link-exact-active toc-link level2">3ã€å›½å†…yumæºï¼ˆä½¿ç”¨åä¸ºï¼‰</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-base-repo" class="router-link-active router-link-exact-active toc-link level3">CentOS-Base.repo</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#elrepo-repo" class="router-link-active router-link-exact-active toc-link level3">elrepo.repo</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" class="router-link-active router-link-exact-active toc-link level2">4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-å†…æ ¸å‡çº§" class="router-link-active router-link-exact-active toc-link level3">centos å†…æ ¸å‡çº§</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" class="router-link-active router-link-exact-active toc-link level3">å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ " class="router-link-active router-link-exact-active toc-link level2">5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ </a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_6ã€é…ç½®ç½‘å¡" class="router-link-active router-link-exact-active toc-link level2">6ã€é…ç½®ç½‘å¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬-vim-root-first-sh" class="router-link-active router-link-exact-active toc-link level2">7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬ï¼švim /root/first.sh</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_8ã€ç¦ç”¨-grub-è§„åˆ™" class="router-link-active router-link-exact-active toc-link level2">8ã€ç¦ç”¨ grub è§„åˆ™</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_9ã€å®‰è£…å¯¹windowæ ¼å¼çš„-sh-è„šæœ¬è½¬ç -dos2unix" class="router-link-active router-link-exact-active toc-link level2">9ã€å®‰è£…å¯¹windowæ ¼å¼çš„ sh è„šæœ¬è½¬ç  dos2unix</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#äºŒã€vagrant" class="router-link-active router-link-exact-active toc-link level2">äºŒã€Vagrant</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_1ã€centos7-9-åŸºæœ¬é…ç½®" class="router-link-active router-link-exact-active toc-link level3">1ã€centos7.9 åŸºæœ¬é…ç½®</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_2ã€vagrantfile-æ–‡ä»¶" class="router-link-active router-link-exact-active toc-link level3">2ã€Vagrantfile æ–‡ä»¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_3ã€" class="router-link-active router-link-exact-active toc-link level3">3ã€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#vagrant-box-æ‰“åŒ…" class="router-link-active router-link-exact-active toc-link level3">Vagrant Box æ‰“åŒ…</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#æƒé™é…ç½®å…¬é’¥" class="router-link-active router-link-exact-active toc-link level3">æƒé™é…ç½®å…¬é’¥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#é…ç½®ç½‘å¡" class="router-link-active router-link-exact-active toc-link level3">é…ç½®ç½‘å¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#æ‰“åŒ…box" class="router-link-active router-link-exact-active toc-link level3">æ‰“åŒ…BOX</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#äºŒã€vmrun" class="router-link-active router-link-exact-active toc-link level2">äºŒã€vmrun</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#æ ¼å¼-vmrun-èº«ä»½éªŒè¯æ ‡å¿—-å‘½ä»¤-å‚æ•°" class="router-link-active router-link-exact-active toc-link level3">æ ¼å¼ï¼švmrun [èº«ä»½éªŒè¯æ ‡å¿—] å‘½ä»¤ [å‚æ•°]</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#ç¤ºä¾‹" class="router-link-active router-link-exact-active toc-link level3">ç¤ºä¾‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#æ­¥éª¤-1" class="router-link-active router-link-exact-active toc-link level3">æ­¥éª¤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#è„šæœ¬-auto-vm-sh" class="router-link-active router-link-exact-active toc-link level3">è„šæœ¬ï¼šauto_VM.sh</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#è„šæœ¬-first-sh" class="router-link-active router-link-exact-active toc-link level3">è„šæœ¬ï¼šfirst.sh</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#start-å-é€šè¿‡-å˜‰å®¾-set-ip1-bat-çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœº-ipã€hostname" class="router-link-active router-link-exact-active toc-link level3">start åï¼Œé€šè¿‡ å˜‰å®¾ï¼ˆset_ip1.batï¼‰ çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœºï¼ˆipã€hostnameï¼‰</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#ä¸‰ã€" class="router-link-active router-link-exact-active toc-link level2">ä¸‰ã€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#å››ã€" class="router-link-active router-link-exact-active toc-link level2">å››ã€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#äº”ã€" class="router-link-active router-link-exact-active toc-link level2">äº”ã€</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#å…­ã€" class="router-link-active router-link-exact-active toc-link level2">å…­ã€</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!-- more --><h2 id="ä¸€ã€å®‰è£…-centos7-9-æ¨¡æ¿" tabindex="-1"><a class="header-anchor" href="#ä¸€ã€å®‰è£…-centos7-9-æ¨¡æ¿" aria-hidden="true">#</a> ä¸€ã€å®‰è£… centos7.9 æ¨¡æ¿</h2><p><em>å®‰è£…ï¼šç•¥ç•¥ç•¥ç•¥</em></p><h2 id="æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤" aria-hidden="true">#</a> æ­¥éª¤ï¼š</h2><ol><li>æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬</li><li>è®¾ç½®sudoæƒé™</li><li>å›½å†…yumæº</li><li>å‡çº§å†…æ ¸</li><li>å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinux</li><li>é…ç½®ç½‘å¡</li><li>ç¦ç”¨è¯¥å¯é¢„æµ‹å‘½åè§„åˆ™</li><li>é‡æ–°ç”ŸæˆGRUBé…ç½®å¹¶æ›´æ–°å†…æ ¸å‚æ•°</li></ol><h2 id="_1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬" aria-hidden="true">#</a> 1ã€æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># cat /etc/redhat-release</span>
CentOS Linux release <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2ã€è®¾ç½®sudoæƒé™" tabindex="-1"><a class="header-anchor" href="#_2ã€è®¾ç½®sudoæƒé™" aria-hidden="true">#</a> 2ã€è®¾ç½®sudoæƒé™</h2><p>1ã€su root</p><p>2ã€chmod u+w /etc/sudoers</p><p>3ã€vim /etc/sudoers</p><blockquote><p>root ALL=(ALL) ALL</p><p>a ALL=(ALL) ALL</p></blockquote><p>4ã€æ’¤é”€sudoersæ–‡ä»¶å†™æƒé™ï¼Œå‘½ä»¤ï¼š</p><p>chmod u-w /etc/sudoers</p><p>5ã€åˆ‡æ¢ç”¨æˆ· su a</p><h2 id="_3ã€å›½å†…yumæº-ä½¿ç”¨åä¸º" tabindex="-1"><a class="header-anchor" href="#_3ã€å›½å†…yumæº-ä½¿ç”¨åä¸º" aria-hidden="true">#</a> 3ã€å›½å†…yumæºï¼ˆä½¿ç”¨åä¸ºï¼‰</h2><p><a href="https://developer.aliyun.com/mirror/?spm=a2c6h.13651102.0.0.44e61b11ewNwcu&amp;serviceType=mirror&amp;tag=%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer">é˜¿é‡Œé•œåƒç«™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://mirrors.huaweicloud.com/home" target="_blank" rel="noopener noreferrer">åä¸ºé•œåƒç«™<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="centos-base-repo" tabindex="-1"><a class="header-anchor" href="#centos-base-repo" aria-hidden="true">#</a> CentOS-Base.repo</h3><h4 id="centos7" tabindex="-1"><a class="header-anchor" href="#centos7" aria-hidden="true">#</a> centos7</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å¤‡ä»½</span>
<span class="token function">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
<span class="token comment"># é…ç½®ä¸‹è½½</span>
<span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/CentOS-Base-huawei.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo

yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum <span class="token parameter variable">-y</span> update <span class="token operator">&amp;&amp;</span> yum repolist all

-----------------------------------CentOS-Base.repo--------------------------------------
<span class="token punctuation">[</span>base<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Base - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#å‘å¸ƒæ›´æ–°</span>
<span class="token punctuation">[</span>updates<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Updates - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/updates/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#å¯èƒ½æœ‰ç”¨çš„é™„åŠ è½¯ä»¶åŒ…</span>
<span class="token punctuation">[</span>extras<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Extras - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/extras/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#æ‰©å±•ç°æœ‰è½¯ä»¶åŒ…åŠŸèƒ½çš„é™„åŠ è½¯ä»¶åŒ…</span>
<span class="token punctuation">[</span>centosplus<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Plus - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/centosplus/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<span class="token comment"># é˜¿é‡Œ</span>
<span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">curl</span> <span class="token parameter variable">-o</span> /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">wget</span> http://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;/mirrors.cloud.aliyuncs.com/d&#39;</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;/mirrors.aliyuncs.com/d&#39;</span> /etc/yum.repos.d/CentOS-Base.repo

yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum <span class="token parameter variable">-y</span> update <span class="token operator">&amp;&amp;</span> yum repolist all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu" aria-hidden="true">#</a> ubuntu</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>åä¸ºï¼š
<span class="token function">cp</span> <span class="token parameter variable">-a</span> /etc/apt/sources.list /etc/apt/sources.list.bak

å°†http://archive.ubuntu.comå’Œhttp://security.ubuntu.comæ›¿æ¢æˆhttp://repo.huaweicloud.comï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹å‘½ä»¤ï¼š
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s@http://.*archive.ubuntu.com@http://repo.huaweicloud.com@g&quot;</span> /etc/apt/sources.list
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s@http://.*security.ubuntu.com@http://repo.huaweicloud.com@g&quot;</span> /etc/apt/sources.list

æ‰§è¡Œ yum update æ›´æ–°ç´¢å¼•
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
é˜¿é‡Œï¼š
æ›¿æ¢é»˜è®¤çš„http://archive.ubuntu.com/ä¸ºmirrors.aliyun.com

deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse

<span class="token comment"># deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span>
<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span>

deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse

æ‰§è¡Œ yum update æ›´æ–°ç´¢å¼•
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="elrepo-repo" tabindex="-1"><a class="header-anchor" href="#elrepo-repo" aria-hidden="true">#</a> elrepo.repo</h3><h4 id="åä¸º" tabindex="-1"><a class="header-anchor" href="#åä¸º" aria-hidden="true">#</a> åä¸º</h4><p><a href="https://mirrors.huaweicloud.com/home" target="_blank" rel="noopener noreferrer">https://mirrors.huaweicloud.com/home<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> æœç´¢ epel</p><p>1 æŸ¥çœ‹ï¼šyum list | grep epel-release</p><p>=== epel-release.noarch 7-11 extras</p><p>2 å®‰è£…ï¼šyum install -y epel-release yum remove -y epel-release</p><p>3 æ›¿æ¢ï¼š</p><p>rm -rf /etc/yum.repos.d/epel-testing.repoï¼ˆä¸éœ€è¦è¿™ä¸ªæ–‡ä»¶ï¼ï¼‰</p><blockquote><p>sed -i &quot;s/#baseurl/baseurl/g&quot; /etc/yum.repos.d/epel.repo</p><p>sed -i &quot;s/metalink/#metalink/g&quot; /etc/yum.repos.d/epel.repo</p><p>sed -i &quot;s@https?ğŸ˜•/download.fedoraproject.org/pub@<a href="https://repo.huaweicloud.com@g" target="_blank" rel="noopener noreferrer">https://repo.huaweicloud.com@g<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot; /etc/yum.repos.d/epel.repo</p></blockquote><p>4 æ‰§è¡Œ yum -y clean all &amp;&amp; yum -y makecache &amp;&amp; yum -y update &amp;&amp; yum repolist all</p><h5>epel.repo</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>epel<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span>
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/<span class="token variable">$basearch</span>
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7

<span class="token punctuation">[</span>epel-debuginfo<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span> - Debug
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/<span class="token variable">$basearch</span>/debug
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-debug-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token punctuation">[</span>epel-source<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span> - Source
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/SRPMS
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-source-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>epel.repo.rpmnew è‡ªåŠ¨ç”Ÿæˆ</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>epel<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span>
<span class="token comment"># ä½¿ç”¨metalinkæ›´å®‰å…¨ï¼Œä½†å¦‚æœä½ æƒ³ä½¿ç”¨æœ¬åœ°é•œåƒ</span>
<span class="token comment"># æŠŠå®ƒçš„åœ°å€æ”¾åœ¨è¿™é‡Œã€‚</span>
<span class="token comment">#baseurl=http://download.example/pub/epel/7/$basearch</span>
<span class="token assign-left variable">metalink</span><span class="token operator">=</span>https://mirrors.fedoraproject.org/metalink?repo<span class="token operator">=</span>epel-7<span class="token operator">&amp;</span><span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token variable">$basearch</span><span class="token operator">&amp;</span><span class="token assign-left variable">infra</span><span class="token operator">=</span><span class="token variable">$infra</span><span class="token operator">&amp;</span><span class="token assign-left variable">content</span><span class="token operator">=</span><span class="token variable">$contentdir</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é˜¿é‡Œ" tabindex="-1"><a class="header-anchor" href="#é˜¿é‡Œ" aria-hidden="true">#</a> é˜¿é‡Œ</h4><p><a href="https://developer.aliyun.com/mirror/epel" target="_blank" rel="noopener noreferrer">https://developer.aliyun.com/mirror/epel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>1 æŸ¥çœ‹ï¼šyum list | grep epel-release</p><p>=== epel-release.noarch 7-11 extras</p><p>2 å®‰è£…ï¼šyum install -y epel-release</p><blockquote><p>mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backup</p><p>mv /etc/yum.repos.d/epel-testing.repo /etc/yum.repos.d/epel-testing.repo.backup</p></blockquote><p>3 wget -O /etc/yum.repos.d/epel.repo <a href="http://mirrors.aliyun.com/repo/epel-7.repo" target="_blank" rel="noopener noreferrer">http://mirrors.aliyun.com/repo/epel-7.repo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#_4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" aria-hidden="true">#</a> 4ã€å‡çº§å†…æ ¸ã€å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</h2><p><a href="https://kernel.org/" target="_blank" rel="noopener noreferrer">https://kernel.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><table><thead><tr><th>mainline:</th><th><strong>5.18-rc6</strong></th><th>2022-05-08</th><th>[<a href="https://git.kernel.org/torvalds/t/linux-5.18-rc6.tar.gz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th></th><th>[<a href="https://git.kernel.org/torvalds/p/v5.18-rc6/v5.17" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th>[<a href="https://git.kernel.org/torvalds/p/v5.18-rc6/v5.18-rc5" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th>[<a href="https://git.kernel.org/torvalds/ds/v5.18-rc6/v5.18-rc5" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th>[<a href="https://git.kernel.org/torvalds/h/v5.18-rc6" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th></th></tr></thead><tbody><tr><td>stable:</td><td><strong>5.17.6</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.17.6.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.17.6.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.17.6.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.17.5-6.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.17.6/v5.17.5" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.17.6" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.17.6" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>stable:</td><td><strong>5.16.20 [EOL]</strong></td><td>2022-04-13</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.20.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.20.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.16.20.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.16.19-20.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.16.20/v5.16.19" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.16.20" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.16.20" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>longterm:</td><td><strong>5.15.38</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.38.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.38.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.15.38.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.15.37-38.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.15.38/v5.15.37" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.15.38" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.15.38" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>longterm:</td><td><strong>5.10.114</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.114.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.114.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.10.114.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.10.113-114.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.10.114/v5.10.113" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.10.114" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.10.114" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>longterm:</td><td><strong>5.4.192</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.4.192.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.4.192.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.4.192.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.4.191-192.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.4.192/v5.4.191" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.4.192" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.4.192" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr></tbody></table><h3 id="centos-å†…æ ¸å‡çº§" tabindex="-1"><a class="header-anchor" href="#centos-å†…æ ¸å‡çº§" aria-hidden="true">#</a> centos å†…æ ¸å‡çº§</h3><p><a href="http://www.elrepo.org/" target="_blank" rel="noopener noreferrer">http://www.elrepo.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å¯¼å…¥è¯¥æºçš„ç§˜é’¥</span>
<span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
<span class="token comment"># å¯ç”¨è¯¥æºä»“åº“</span>
<span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> http://www.elrepo.org/elrepo-release-7.0-6.el7.elrepo.noarch.rpm
æˆ–è€…ï¼š
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŸ¥çœ‹å¯å‡çº§çš„å†…æ ¸ç‰ˆæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">--disablerepo</span><span class="token operator">=</span><span class="token string">&quot;*&quot;</span> <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span><span class="token string">&quot;elrepo-kernel&quot;</span> list available
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¯å®‰è£…çš„è½¯ä»¶åŒ…</p><p>kernel-lt.x86_64 5.4.211-1.el7.elrepo elrepo-kernel</p><p>kernel-ml.x86_64 5.19.4-1.el7.elrepo elrepo-kernel</p><p>å®‰è£…å†…æ ¸</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span>elrepo-kernel <span class="token function">install</span> <span class="token parameter variable">-y</span> kernel-lt-5.4.211-1.el7.elrepo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æŸ¥çœ‹å½“å‰ç³»ç»Ÿå†…å¯ç”¨å†…æ ¸</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">awk</span> -F<span class="token punctuation">\</span>&#39; <span class="token string">&#39;$1==&quot;menuentry &quot; {print i++ &quot; : &quot; $2}&#39;</span> /etc/grub2.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è®¾ç½®å¼€æœºä»æ–°å†…æ ¸ç‰ˆæœ¬å¯åŠ¨ï¼ˆå…¶ä¸­ 0 æ˜¯ä¸Šé¢æŸ¥è¯¢å‡ºæ¥çš„å¯ç”¨å†…æ ¸ç¼–å·ï¼‰</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>grub2-set-default <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" tabindex="-1"><a class="header-anchor" href="#å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬" aria-hidden="true">#</a> å¹¶åˆ é™¤å½“å‰æ— ç”¨çš„ç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬</h3><p>æ‰€æœ‰å·²å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep kernel</span>

kernel-tools-libs-3.10.0-1160.76.1.el7.x86_64
kernel-3.10.0-1160.76.1.el7.x86_64
kernel-headers-3.10.0-1160.76.1.el7.x86_64
kernel-devel-3.10.0-1160.el7.x86_64
kernel-tools-3.10.0-1160.76.1.el7.x86_64
kernel-devel-3.10.0-1160.76.1.el7.x86_64
kernel-lt-5.4.211-1.el7.elrepo.x86_64
kernel-3.10.0-1160.el7.x86_64
abrt-addon-kerneloops-2.1.11-60.el7.centos.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“å‰ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">5.4</span>.192-1.el7.elrepo.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ é™¤</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum remove <span class="token parameter variable">-y</span> kernel-3.10.0-1160.el7.x86_64 kernel-3.10.0-1160.76.1.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>æˆ–</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum remove <span class="token variable"><span class="token variable">$(</span><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> kernel <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token punctuation">$(</span>uname -r<span class="token punctuation">)</span><span class="token variable">)</span></span>

<span class="token comment"># å¸è½½åé‡æ–°å®‰è£…</span>
yum <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span>elrepo-kernel <span class="token function">install</span> <span class="token parameter variable">-y</span> kernel-lt-devel-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-doc-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-headers-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-tools-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-tools-libs-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-tools-libs-devel-5.4.211-1.el7.elrepo

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep kernel</span>
kernel-lt-doc-5.4.211-1.el7.elrepo.noarch
kernel-lt-tools-5.4.211-1.el7.elrepo.x86_64
kernel-lt-devel-5.4.211-1.el7.elrepo.x86_64
kernel-lt-5.4.211-1.el7.elrepo.x86_64
kernel-lt-tools-libs-5.4.211-1.el7.elrepo.x86_64
kernel-lt-headers-5.4.211-1.el7.elrepo.x86_64
kernel-lt-tools-libs-devel-5.4.211-1.el7.elrepo.x86_64


yum <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc <span class="token function">make</span> ncurses-devel openssl-devel flex bison  elfutils-libelf-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ " tabindex="-1"><a class="header-anchor" href="#_5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ " aria-hidden="true">#</a> 5ã€å…³é—­é˜²ç«å¢™firewalldã€å…³é—­selinuxã€å…³é—­swapã€ç¡®ä¿ä¸ä¼‘çœ </h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1ã€ å…³é—­é˜²ç«å¢™</span>
<span class="token comment">## centos</span>
systemctl start firewalld		systemctl stop firewalld
systemctl <span class="token builtin class-name">enable</span> firewalld		systemctl disable firewalld
systemctl status firewalld
<span class="token comment">## ubuntu</span>
systemctl disable ufw.service <span class="token operator">&amp;&amp;</span> systemctl stop ufw.service
ufw start		ufw stop 	
ufw <span class="token builtin class-name">enable</span>		ufw disable 	
ufw status

<span class="token comment"># 2ã€ å…³é—­selinux</span>
setenforce <span class="token number">0</span> <span class="token comment"># ä¸´æ—¶å…³é—­ </span>
<span class="token comment"># æ°¸ä¹…å…³é—­/etc/selinux/semanage.conf</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/enforcing/disabled/&#39;</span> /etc/selinux/config
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/^SELINUX=enforcing$/SELINUX=permissive/&#39;</span> /etc/selinux/config
<span class="token comment"># æŸ¥çœ‹SELinuxçš„çŠ¶æ€</span>
getenforce

<span class="token comment"># 3ã€å…³é—­ swap</span>
swapoff <span class="token parameter variable">-a</span>  <span class="token comment">#ä¸´æ—¶å…³é—­</span>
<span class="token comment">#æ°¸ä¹…å…³é—­</span>
<span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&#39;s/.*swap.*/#&amp;/&#39;</span> /etc/fstab

<span class="token comment"># 4ã€ç¡®ä¿ä¸ä¼‘çœ </span>
systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6ã€é…ç½®ç½‘å¡" tabindex="-1"><a class="header-anchor" href="#_6ã€é…ç½®ç½‘å¡" aria-hidden="true">#</a> 6ã€é…ç½®ç½‘å¡</h2><p>vim /etc/sysconfig/network-scripts/ifcfg-ens33</p><p>ç”Ÿäº§ UUIDï¼š uuidgen ens33</p><p>ls -l /dev/disk/by-uuid</p><p>æŸ¥çœ‹ UUIDï¼š nmcli con | sed -n &#39;1,2p&#39;</p><p>BOOTPROTOï¼š</p><blockquote><p>dhcp è¡¨ç¤ºä½¿ç”¨åŠ¨æ€IPï¼Œdhcp åŠ¨æ€IPåœ°å€æ˜¯è‡ªè¡Œç”Ÿæˆã€‚</p><p>none æ— ï¼ˆä¸æŒ‡å®šï¼‰é€šå¸¸æ˜¯DHCP</p><p>static è¦è‡ªå·±è‡ªè¡ŒæŒ‡å®šIPåœ°å€</p><p>bootp</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">&quot;Ethernet&quot;</span>
<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span><span class="token string">&quot;none&quot;</span>
<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">&quot;static&quot;</span>
<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_PRIVACY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span><span class="token string">&quot;stable-privacy&quot;</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;ccb173d2-9470-4fc3-b894-cce7029f0455&quot;</span>
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">ETHTOOL_OPTS</span><span class="token operator">=</span><span class="token string">&quot;autoneg off speed 10000 duplex full&quot;</span>
<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.119&quot;</span>
<span class="token comment"># PREFIX=&quot;24&quot;</span>
<span class="token assign-left variable">NETMASK</span><span class="token operator">=</span><span class="token string">&quot;255.255.255.0&quot;</span>
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.1&quot;</span>
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token string">&quot;192.168.1.1&quot;</span>
<span class="token assign-left variable">DNS2</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">&quot;Ethernet&quot;</span>
<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span><span class="token string">&quot;none&quot;</span>
<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">&quot;dhcp&quot;</span>
<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span><span class="token string">&quot;stable-privacy&quot;</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;5ed15a21-bf0f-4b2a-a40a-33a07afb6560&quot;</span>
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token string">&quot;192.168.100.130&quot;</span>
<span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token string">&quot;24&quot;</span>
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token string">&quot;192.168.100.2&quot;</span>
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token string">&quot;192.168.100.2&quot;</span>
<span class="token assign-left variable">IPV6_PRIVACY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>/etc/hosts</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> <span class="token function">tee</span> /etc/hosts</span>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.100.130 master
192.168.100.131 node1
192.168.100.132 node2
192.168.100.133 node3
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>systemctl start network.service systemctl stop network.service</p><p>systemctl restart network.service systemctl status network.service</p><p>netplan apply</p><h2 id="_7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬-vim-root-first-sh" tabindex="-1"><a class="header-anchor" href="#_7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬-vim-root-first-sh" aria-hidden="true">#</a> 7ã€ç¼–å†™åæœŸéœ€è¦çš„è„šæœ¬ï¼švim /root/first.sh<a name="first.sh"></a></h2><p>å…·ä½“ä½¿ç”¨åœ°å€ï¼š<a href="#%E4%BD%BF%E7%94%A8first.sh">ä½¿ç”¨first.sh</a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># å¤åˆ¶åˆ° vm-centos è™šæ‹Ÿæœº /root/first.sh é‡Œï¼Œé…åˆ auto_VM.sh ä½¿ç”¨</span>

<span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">hostname</span><span class="token operator">=</span><span class="token variable">$2</span>

<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>----------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token builtin class-name">echo</span> <span class="token string">&quot;è¯·æ±‚å‚æ•°ï¼šIPï¼š<span class="token variable">${ip}</span>ï¼ŒHostNameï¼š<span class="token variable">${hostname}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;sh <span class="token variable">$0</span> ip hostname&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token keyword">fi</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;ccb173d2-9470-4fc3-b894-cce7029f0455&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>uuidgen ens33<span class="token variable">)</span></span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;new UUID=<span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${UUID}</span><span class="token entity" title="\&quot;">\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log


<span class="token keyword">function</span> <span class="token function-name function">set_ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment"># è®¾ç½®IP</span>
  <span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&quot;/IPADDR/s#(.*.)\..*#<span class="token entity" title="\1">\1</span>.<span class="token variable">${ip}</span><span class="token entity" title="\&quot;">\&quot;</span>#&quot;</span> /etc/sysconfig/network-scripts/ifcfg-ens33
<span class="token comment"># è®¾ç½®UUID</span>
  <span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&quot;s/UUID=.*/UUID=<span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${UUID}</span><span class="token entity" title="\&quot;">\&quot;</span>/&quot;</span> /etc/sysconfig/network-scripts/ifcfg-ens33
  
<span class="token comment"># è®¾ç½®hosts  </span>
<span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> <span class="token function">tee</span> /etc/hosts <span class="token operator">&gt;&gt;</span> main.log</span>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.100.130 master
192.168.100.131 node1
192.168.100.132 node2
192.168.100.133 node3
EOF</span>
  
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token comment"># ï¼ˆsed -n &#39;3,100pï¼‰è¯»å–æ–‡ä»¶çš„3-100è¡Œ</span>
  <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;cat /etc/hosts<span class="token entity" title="\n">\n</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;3,100p&#39;</span> /etc/hosts<span class="token variable">)</span></span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;wait for systemctl restart network.service ...&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  systemctl restart network.service
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;new IPADDR is : <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span> <span class="token parameter variable">-I</span><span class="token variable">)</span></span><span class="token entity" title="\&quot;">\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function-name function">set_hostname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s#.*#<span class="token variable">${hostname}</span>#&quot;</span> /etc/hostname
  hostnamectl set-hostname <span class="token variable">${hostname}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;new hostname is : <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /etc/hostname<span class="token variable">)</span></span><span class="token entity" title="\&quot;">\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>

<span class="token function-name function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  set_hostname
  <span class="token function">sleep</span> <span class="token number">3</span>
  set_ip
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; set_ip &amp; set_hostnameok OK!!  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>

main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šä¼ åˆ°æ¨¡æ¿é•œåƒçš„<code>/root/</code> ç›®å½•ä¸‹</p><p>èµ‹äºˆæƒé™ï¼š<code>chmod +x /root/first.sh</code></p><h2 id="_8ã€ç¦ç”¨-grub-è§„åˆ™" tabindex="-1"><a class="header-anchor" href="#_8ã€ç¦ç”¨-grub-è§„åˆ™" aria-hidden="true">#</a> 8ã€ç¦ç”¨ grub è§„åˆ™</h2><p>#åœ¨ grub æ–‡ä»¶é‡Œé¢çš„ GRUB_CMDLINE_LINUX å˜é‡æ·»åŠ  net.ifnames=0 biosdevname=0</p><p><strong>åŸæ¥é…ç½®çš„ç½‘å¡ipä¼šç”Ÿæ•ˆï¼š/etc/sysconfig/network-scripts/ifcfg-ens33</strong>ï¼Œæ‰€ä»¥æˆ‘ä¸éœ€è¦è¿™é‡Œ</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/default/grub</span>
<span class="token punctuation">..</span>.
<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet&quot;</span>
<span class="token comment"># æ¢ä¸ºï¼š</span>
<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet net.ifnames=0 biosdevname=0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡æ–°ç”ŸæˆGRUBé…ç½®å¹¶æ›´æ–°å†…æ ¸å‚æ•°</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grub2-mkconfig -o /boot/grub2/grub.cfg</span>
Generating grub configuration <span class="token function">file</span> <span class="token punctuation">..</span>.
Found linux image: /boot/vmlinuz-3.10.0-327.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-327.el7.x86_64.img
ã€‚ã€‚ã€‚ã€‚
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9ã€å®‰è£…å¯¹windowæ ¼å¼çš„-sh-è„šæœ¬è½¬ç -dos2unix" tabindex="-1"><a class="header-anchor" href="#_9ã€å®‰è£…å¯¹windowæ ¼å¼çš„-sh-è„šæœ¬è½¬ç -dos2unix" aria-hidden="true">#</a> 9ã€å®‰è£…å¯¹windowæ ¼å¼çš„ sh è„šæœ¬è½¬ç  dos2unix</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># yum install -y dos2unix</span>
å·²åŠ è½½æ’ä»¶ï¼šfastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * elrepo: hkg.mirror.rackspace.com
 
<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
anaconda-ks.cfg  first.sh  get_UUID.sh

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># dos2unix first.sh</span>
dos2unix: converting <span class="token function">file</span> first.sh to Unix <span class="token function">format</span> <span class="token punctuation">..</span>.

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># sh first.sh 129 master0</span>
new <span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;eddedb45-b871-4eea-8433-4c08103423e1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äºŒã€vagrant" tabindex="-1"><a class="header-anchor" href="#äºŒã€vagrant" aria-hidden="true">#</a> äºŒã€Vagrant</h2><h3 id="_1ã€centos7-9-åŸºæœ¬é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1ã€centos7-9-åŸºæœ¬é…ç½®" aria-hidden="true">#</a> 1ã€centos7.9 åŸºæœ¬é…ç½®</h3><h3 id="_2ã€vagrantfile-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#_2ã€vagrantfile-æ–‡ä»¶" aria-hidden="true">#</a> 2ã€Vagrantfile æ–‡ä»¶</h3><h4 id="vagrant-virtualbox" tabindex="-1"><a class="header-anchor" href="#vagrant-virtualbox" aria-hidden="true">#</a> Vagrant + VirtualBox</h4><p>å®‰è£… VirtualBox ï¼š<a href="https://download.virtualbox.org/virtualbox/6.1.34/VirtualBox-6.1.34-150636-Win.exe" target="_blank" rel="noopener noreferrer">https://download.virtualbox.org/virtualbox/6.1.34/VirtualBox-6.1.34-150636-Win.exe<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¸‹è½½ vagrantfileï¼š<a href="https://releases.hashicorp.com/vagrant/2.2.19/" target="_blank" rel="noopener noreferrer">https://releases.hashicorp.com/vagrant/2.2.19/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>æŸ¥æ‰¾ä¸‹è½½centos7ï¼š<a href="https://app.vagrantup.com/boxes/search?utf8=%E2%9C%93&amp;sort=downloads&amp;provider=&amp;q=centos" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/boxes/search?utf8=âœ“&amp;sort=downloads&amp;provider=&amp;q=centos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>Vagrant ç¯å¢ƒå˜é‡é…ç½®</strong></p><p>æ–°å»ºç”¨æˆ·å˜é‡ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>VAGRANT_HOME D:\rj-win\Vagrant\.vagrant.d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>vagrant box add centos7 D:\iso\Centos7.box</p><p>centos7 æ˜¯ä¸º box å–çš„åå­—ï¼Œä¾›åç»­åˆ›å»ºè™šæ‹Ÿæœºã€‚</p><p>æŸ¥çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸ</p><p>vagrant box list</p><blockquote><p>D:\iso&gt;vagrant box list centos7 (virtualbox, 0)</p></blockquote></blockquote><p>æ–°å»ºç›®å½•ï¼šF:\vb\centos7ï¼Œç„¶åè¿›å…¥cmd</p><blockquote><p>åˆ›å»ºè™šæ‹Ÿæœº</p><blockquote><p>cd F:\vm\masterVagrantfileã€cd F:\vm\nodeVagrantfile</p><p>vagrant init centos7</p><p>ä¼šåœ¨å½“å‰ç›®å½• <code>F:\vb\xxx</code> ç”Ÿæˆ Vagrantfile æ–‡ä»¶</p></blockquote></blockquote><h4 id="vagrantfile-è„šæœ¬" tabindex="-1"><a class="header-anchor" href="#vagrantfile-è„šæœ¬" aria-hidden="true">#</a> Vagrantfile è„šæœ¬<a name="Vagrantfile è„šæœ¬"></a></h4><p><a href="https://www.vagrantup.com/docs/disks" target="_blank" rel="noopener noreferrer">https://www.vagrantup.com/docs/disks<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation</span>
<span class="token comment">## vagrant up --provider virtualbox</span>
<span class="token comment">## vagrant up --provider vmware_desktop</span>
<span class="token comment">## vagrant up --provider vmware_workstation</span>
Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;master&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7w&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token assign-left variable">master.vm.hostname</span><span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># è®¾ç½®è™šæ‹Ÿæœºçš„IP(public_networkï¼šæ¡¥æ¥ private_networkï¼šä»…ä¸»æœº)ã€bridge æ¡¥æ¥é€‚é…å™¨</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.120&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstationï¼Œvmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                <span class="token comment"># è®¾ç½®è™šæ‹Ÿæœºçš„åç§°</span>
                <span class="token assign-left variable">v.gui</span><span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;master&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;log&quot;</span>, type: <span class="token string">&quot;shell&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>s<span class="token operator">|</span>
                s.inline <span class="token operator">=</span> <span class="token string">&quot;echo =================  #{i} =========================&quot;</span>
            end
            <span class="token comment">#master.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL</span>
            <span class="token comment">#    yum install -y net-tools</span>
            <span class="token comment">#SHELL</span>
        end
    end
end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;node#{i}&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7w&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token assign-left variable">master.vm.hostname</span><span class="token operator">=</span><span class="token string">&quot;node#{i}&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># è®¾ç½®è™šæ‹Ÿæœºçš„IP(public_networkï¼šæ¡¥æ¥ private_networkï¼šä»…ä¸»æœº)ã€bridge æ¡¥æ¥é€‚é…å™¨</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.#{120+i}&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstationï¼Œvmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                <span class="token assign-left variable">v.gui</span><span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;node#{i}&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;shell&quot;</span>, inline: <span class="token operator">&lt;&lt;-</span><span class="token environment constant">SHELL</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;=================  #{i} =========================&quot;</span>
            <span class="token environment constant">SHELL</span>
        end
    end
end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®Œæˆé…ç½®åï¼Œä¸‹é¢å®‰è£…è™šæ‹Ÿæœº</p><blockquote><p>cd F:\vm\masterVagrantfileã€cd F:\vm\nodeVagrantfile</p><blockquote><p>vagrant up</p></blockquote></blockquote><blockquote><p>é»˜è®¤ç”¨æˆ·ï¼švagrant å¯†ç ï¼švagrant</p><p>rootç”¨æˆ·ï¼šrootï¼šå¯†ç ï¼švagrant</p></blockquote><h4 id="vagrant-vmware-desktop" tabindex="-1"><a class="header-anchor" href="#vagrant-vmware-desktop" aria-hidden="true">#</a> Vagrant + VMware-desktop</h4><p><strong>1.ä¸‹è½½</strong> <a href="https://releases.hashicorp.com/vagrant/2.2.19/vagrant_2.2.19_x86_64.msi" target="_blank" rel="noopener noreferrer">vagrant<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>ã€ <a href="https://www.vagrantup.com/vmware/downloads" target="_blank" rel="noopener noreferrer">vmware-utility<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>2.ä¸‹è½½ vmware-desktopæ’ä»¶</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vagrant plugin list
vagrant plugin install vagrant-vmware-desktop
vagrant plugin install vagrant-disksize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.ä¸‹è½½</strong> <a href="https://app.vagrantup.com/centos/boxes/7" target="_blank" rel="noopener noreferrer">centos-box<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>vmware_desktopï¼š</p><blockquote><p><a href="https://app.vagrantup.com/generic/boxes/centos7" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/generic/boxes/centos7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (675 MB)</p><p><a href="https://app.vagrantup.com/dds/boxes/vagrant-base-centos7" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/dds/boxes/vagrant-base-centos7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (:995MB)</p></blockquote><p>vmware_workstationï¼š</p><blockquote><p><a href="https://app.vagrantup.com/dds/boxes/vagrant-base-centos7" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/dds/boxes/vagrant-base-centos7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (:995MB)</p></blockquote><p><strong>4.æœ¬åœ°å®‰è£…box</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>vagrant box <span class="token function">add</span> centos70 D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>centos7.generic.desktop.box
vagrant box <span class="token function">add</span> centos7w D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>centos7.dds.workstation.box
vagrant box list
vagrant box remove centos7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> %~dp0centos70
COPY /y /v /d D:<span class="token punctuation">\</span>rj-win<span class="token punctuation">\</span>Vagrant<span class="token punctuation">\</span>.vagrant.d<span class="token punctuation">\</span>boxes<span class="token punctuation">\</span>centos70<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span>vmware_desktop<span class="token punctuation">\</span> %~dp0centos70
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5.ç”ŸæˆVagrantfileæ–‡ä»¶</strong>ï¼Œ[Vagrantfile è„šæœ¬](#Vagrantfile è„šæœ¬)</p><blockquote><p>cd F:\vm\k8s</p><p>vagrant init centos7d</p></blockquote><p><strong>6.å®‰è£…</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>vagrant up <span class="token parameter variable">--provider</span> virtualbox
vagrant up <span class="token parameter variable">--provider</span> vmware_desktop
vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>7.è„šæœ¬</strong></p><p><strong>shè„šæœ¬å‡å·² Git Bash æ‰§è¡Œï¼Œbatä»¥ cmd æ‰§è¡Œ</strong></p><p>1ã€<a href="http://clear.sh" target="_blank" rel="noopener noreferrer">clear.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; ------------- æ¸…é™¤åˆ›å»ºè®°å½• -------------- &quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/nodeVagrantfile&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token variable">${mf}</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${VagrantD}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/master
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${VagrantD}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------- delete old virtual machines [<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/.vagrant]----------&quot;</span>
<span class="token keyword">else</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/master
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable">${mf}</span>/.vagrant !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${nf}</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${VagrantD}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node1
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node2
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node3
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${VagrantD}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------- delete old virtual machines [<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/.vagrant]----------&quot;</span>
<span class="token keyword">else</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node1
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node2
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node3
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable">${nf}</span>/.vagrant !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">types</span><span class="token operator">=</span><span class="token variable">$1</span> <span class="token operator">||</span> <span class="token parameter variable">-1</span>
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>types <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/centos70
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/centos7w
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -rf <span class="token variable">${k8s}</span>/centos70 !!&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -rf <span class="token variable">${k8s}</span>/centos7w !!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2ã€<a href="http://init.sh" target="_blank" rel="noopener noreferrer">init.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box init   ------------------&quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">centos70</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/centos70&quot;</span>
<span class="token assign-left variable">centos7w</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/centos7w&quot;</span>
<span class="token assign-left variable">old_centos70</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/Vagrant/.vagrant.d/boxes/centos70/0/vmware_desktop/&quot;</span>
<span class="token assign-left variable">old_centos7w</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/Vagrant/.vagrant.d/boxes/centos7w/0/vmware_desktop/&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box list   ------------------&quot;</span>
vagrant box list
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box remove centos7[0|w]   ------------------&quot;</span>
vagrant box remove centos70
vagrant box remove centos7w
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box add   ------------------&quot;</span>
vagrant box <span class="token function">add</span> centos70 /d/iso/centos7.generic.desktop.box
vagrant box <span class="token function">add</span> centos7w /d/iso/centos7.dds.workstation.box
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token variable">${centos70}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;------   vagrant box copy to <span class="token variable">${centos70}</span>...  -------&quot;</span>
    <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_centos70}</span><span class="token builtin class-name">.</span> <span class="token variable">${centos70}</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token variable">${centos7w}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;------   vagrant box copy to <span class="token variable">${centos7w}</span>...  -------&quot;</span>
    <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_centos7w}</span><span class="token builtin class-name">.</span> <span class="token variable">${centos7w}</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬ä¸€æ¬¡å¼€å§‹åˆ›å»ºé•œåƒçš„ç›®å½•æ–‡ä»¶æœ‰</p><div class="language-ABAP line-numbers-mode" data-ext="ABAP"><pre class="language-ABAP"><code>39ä¸ª
Vagrantfile		disk1.vmdk		metadata.json		
vagrant-base-centos7.vmxf		vagrant-base-centos7.nvram		vagrant-base-centos7.vmsd
vagrant-base-centos7.vmx		disk1-s001.vmdk---&gt;disk1-s032.vmdk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-ABAP line-numbers-mode" data-ext="ABAP"><pre class="language-ABAP"><code>8ä¸ª
generic-centos7-vmware.nvram		generic-centos7-vmware.vmdkï¼ˆåæœŸï¼švmwareã€000001-000004ã€‘.vmdkï¼‰
generic-centos7-vmware.vmsd			generic-centos7-vmware.vmx
generic-centos7-vmware.vmxf
info.json		metadata.json		Vagrantfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€<a href="http://install.sh" target="_blank" rel="noopener noreferrer">install.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; ------------- åˆ›å»º VMware -------------- &quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/nodeVagrantfile&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token variable">${mf}</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${Vagrantfile}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;==================== <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span> -------------&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------------&gt;  rm &quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span><span class="token string">&quot; ok!!&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up master  -----------------------&quot;</span>
            vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up master -----------------------&quot;</span>
        vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;====&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] master install ok!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/Vagrantfile !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${nf}</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${Vagrantfile}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;==================== <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span> -------------&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------------&gt;  rm <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span> ok!!&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up node -----------------------&quot;</span>
            vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up node -----------------------&quot;</span>
        vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;====&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] node install ok!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/Vagrantfile !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å®‰è£…å®Œæˆåæ‰§è¡Œ<code>kill.bat</code>ç»“æŸVMwareè™šæ‹Ÿæœºçš„ã€vmware-vmx.exeã€‘</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAh4AAAA6CAIAAABwA8cUAAANnklEQVR4Xu1drXojuRI1XJhXGBgYahiYRwhtGDgw1NCwX2GhoeFC04GGfoWBF+a2/kr1J7stOUlbqfPVNyuVSmpJk5zjkjzbqw+DwfCD8ff478ffXZfW+dL+d1iyrfgPmsFg+EnonH+Fsw8zaTEYDItG5/wrnH2YSYvBYFg0Oudf4ezDTFoMBsOi0Tn/CmcfZtJiMBgWjc75Vzj7MJMWg8GwaHTOv8LZh5m0GAyGRaNz/hXOPqxPadluNu+/f8+0KZj3/0E4jevVsOfeJrgh1+OJuw2GOnTOv8LZh/UpLVI/mB0OB/hzMt7/42M/rBjjJsJ0/10p1Ol6KO5PAJsbY/IriX2J0tK0+a6IA3zTjVdo+FJ8H/++ux8eh1/bP7I1Bqw3I3j2ryJ+97x6ej3yjtGaljaNTKd33PxKnohhd6bX856POW6fVtpi/T6kVaQ1epxfmmDz2bZNO/84HmXrbnTzlE2+19PbyVf9bz7MMzqzHd8qpYW7ytCDOb0BBXuWm0DpLXCeQnqfgWlu+UGcbUnjZcyUlothFwOuQdvmY3FpljnD96OJf+vN8WyUDUfHjIgDCz8Pr0haprDXd1f487qOnDuRsmTwbA1Lex+A1pXp+TlI51mdi0t++oXF8gMUC0kLBDiZCUsW1iAtTjnW250r715Wq5e9GvD0GGOSnbaPWEUcE6YAzyhbHsx/0GYgqMXoMRUextPDFtsRt+rSwugtM6cvjYxIJ+d6HK8j9XoQvpzmOQwDzMbP5IpJzJSEi2EXA65C4+an7iYsXaCBfxuMULPjXCUDoDw7UXCKibw/taq9wG60tEnAeKqhPXpaBQ8TAathwzTJ99pkTWJLvr20HN/WWU6cigw7FuOdWxwWnI/j9kWVFickRFqm/KZBWgCgKA8bZ/9snLQACtJC6A0RZyyS5CBUkgs1oTHAGz9jO9DhXXDq6cseGjWi6Thl2TPuTbSbB0FEzZ7FVhYD6RzROPoSaMDlOfi9GGOLtsD6zc9Ol97ogxvuCzfi3ysNUhBvmE+xET90CQU6gmq3WZrMWtTsxOdS23ScpS0nKihf1DQUGhC1FhX3o0VapkwFyYD7zabZCegNadp5UQl/8o5Cn3xYvbTkrMXLSbT3P5Ph1pK0IErDZJnKmfyQxzNZjt4PcHqTG4fEdnQEzrwxiPA0ALz7kK+cUq4S66FE+Vd/Fl5OCleeSXegsIQYgNevz8GVUD+N/2s3H0Cfbbhj3IZ/rzT2eXyWtOR7iInow1FYuq2RRO/tBktz2RXj9wLj+1uW6He9ZAaTOmatQp6vumthGYb7zS5ICzouQ54Zdy2OJne11/i4CooChluL0gK0RagWKokUgdSgkOlu7T5OO+cJn1O59gjJnpF4MRSGjOPBsLGQCZZTLZl2flaoDihHcAgzwP1Zr7NLgGJxDriB7AxCCiZPJqvQNz/AVYdBVy3DneEG/FthFVkL9YeP/4HKteMpZ41L87cgQiHUW5a/PJXRZg6alO6ZoIuetWgJU7JqaZmfteRbGVAUPWuhdzbpwK1eWiAvyaLy+xBMBqsITEZpFdU8neVD/sxugS6RqOyRBABn55HoEzgjq9jHg7AUqdQ5recZMGkpHB35puhHvS4uAYrFOcyRljgMnS6qFTcfVVy4PrjhjtDIv5VGiLiQB+gEDbI09Uq0u3tWwtqkxWUP2oGbPqW/+MsFpTC0TL/8LcSUpEW75gnWJC05yRBnWczpgx0PwLW/Ki3+ciV8owyyonppAYCiOHs7rN7+w61npCVwE/1GEua6vf90j2op0PHlOsaFsmRAT9GCl2NQru4H1ILgtGTw4lWsK2QrnpWqaDZTeYwBEMw5/dwScrE0h1nSUrv5eCVhDH14w72ghX8bjPOsI1ZxjqQRNHwrLI9w+6yllJpIrs9zTrkIcWLDChqO8rI06tLyGVmLUA7+vWGiN+FryikjKUmLPDprkZactSRFAZPBBXieItxEqJlUGGEipkb05hs8/IGN4GUeRf0YnlpRK68n8mXDsGfpZJ17Yo5eha1Ql4AC+KYASjtV4v6azRe7gP8mDHeJev5tNH+N4ZHYUzCykBaa38AIWnrx0SIt/uIEA12iUK4nc4Z/qaNKHZk8uW0q3bUUdOWjSVrCmVWA/ObxgaUy5G6mdNeCT8NSQL20zMRVwQaD4YtRz7+Lt86XxiXh+w2nMjXSYv+jF4OhG3TOv8LZhy1SWvKNy0edtBgMhm7QOf8KZx+2SGkhZtJiMPxodM6/wtmHmbQYDIZFo3P+Fc4+zKTFYDAsGp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx9m0mIwGBaNzvlXOPswkxaDwbBodM6/wtmHmbQYDIZFo3P+Fc4+zKTFYDAsGp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx/Wp7TYq8BmQ7w7uR3khc0GQys651/h7MP6lBapH8wOhwP8+a69wNi9V5kybiLM8A54SZ3+TczS/Qlgc2NMfiWxL1FamjbfFXGAb7rxCg1fiu/jX3iTPLxbPpp7bzxFeKV8em88ikdvlZfWtLRp5Ij8ODIxeLM92J/X9M55viJv4/ZJbfL7kFaR1uhxfmmCzWfbNu18fikkst3o5imbfK+nt5Ov+t98mGd0Zju+VUoLd5WhB3N6Awr2LDeB0lvgPIX0PgPu/c7wIM62pPEyZkrLxbCLAdegbfOxuDTLnOH70cS/9eZ4dr0ZXdmR+POeByRzfO1bp7DA5pMncu5EyuWOTdLyPgCto+lNvB/nrJhTiCCBBcHzS376xUaIcoWkBQKczEgB89YgLU454hvsdy+r1cteDXh6hLfcBzttH7GKOCZMAZ5RtjyY/6DNQFCL0WMqPIynhy22I27VpYXRW2ZOXxoZkU7O9TheR+r1IHw5zXMYBpiNn8kVk5gpCRfDLgZchcbNT91NWLpAA/82GAiGM8e5kZSFTfQamiYKTjGR96GpZDda2qQZMdU490QiJ9OKZHbil7nBC0+Rm9wXS4tTnZtLy/FtneXEqciwYzHeucVhwfk4bl9UaXFCQqRlym8apAUAivKwcfbPxkkLoCAthN4QccYiSQ5CJblQExoDvPEztgMd3gWnnr7soVEjmo5Tlj3j3kS7eRBE1OxZbGUxkM4RjaMvgQZcnoPfizG2aAus3/zsdOmNPrjhvnAj/r3SIAXxVswGMF9Dl1CgI6h2m6XlrCWcaAWIbIlLixSh6CSLDb1QX9SqDhKtXlqmTAXJgPvNptkJ6A1p2nlRCX/yjkKffFi9tOSsxctJtPc/k+HWkrQgSsNkmcqZ/JDHM1mO3g9wepMbh8R2dATOvDGI8DQAvPuQr5xSrhLroUT5V38WXk4KV55Jd6CwhBiA16/PwZVQP43/azcfQJ9tuGPchn+vNPZ5vCAtnFvTPcRE6+EoLN3WKKdPzm6wNH99IvndzZ89FEf6exrRKy2HalX0fNVdC8sw3G92QVrQcRnyzLhrcTS5q73Gx1VQFDDcWpQWoC1CtVBJpAikBoVMd2v3cdo5T/icyrVHSPaMxIuhMGQcD4aNhUywnGrJtPOzQnVAOYJDmAHuz3qdXQIUi3PADWRnEFIweTJZhb75Aa46DLpqGe4MN+DfCpuTtZBDM2LhYAqOp0rnVI1L87cg8lwrWD4ly+YVxeHpdfsqWrNSpnsmUBQ9ayHXPMyqpWV+1pJvZUBR9KyF3tmkA7d6aYG8JIvK70MwGawiMBmlVVTzdJYP+TO7BbpEorJHEgCcnUeiT+CMrGIfD8JSpFLntJ5nwKSlcHTkm6If9bq4BCgW5zBHWuIwdLqoVtx8VHHh+uCGO0Ij/1ba5eOjgt6Evk6Wpl6JdnfPamTL0lz2cO7ATZMW0iolAS3TL38LCyxJS/kpTdKSkwxxlsWcPtjxAFz7q9LiL1fCN8ogK6qXFgAoirO3w+rtP9x6RloCN9FvJGGu2/tP96iWAh1frmNcKEsG9BQteDkG5ep+QC0ITksGL17FukK24lmpimYzlccYAMGc088tIRdLc5glLbWbj1cSxtCHN9wLWvi3wTjPOmJ1aQowaYlVgbXzCLfPWvSEaTym+TjhUeacWzWpwwoajvKyNOrS8hlZi1AO/r1hojfha8opIylJizw6a5GWnLUkRQGTwQV4niLcRKiZVBhhIqZG9OYbPPyBjeBlHkX9GJ5aUSuvJ/Jlw7Bn6WSde2KOXoWtUJeAAvimAEo7VeL+ms0Xu4D/Jgx3iXr+bbT8r0ASe2KaLpA7yW9ghEJ6Ub80ONpKgIOsCEi58pxzq6YrMQAmT26bSnctyg5Ea5CWcGYVIL95fGCpDLmbKd214NOwFFAvLTNxVbDBYPhi1PPv4q3zpXFJ+H7DqUyNtNj/6MVg6Aad869w9mGLlJZ84/JRJy0Gg6EbdM6/wtmHLVJaiJm0GAw/Gp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx9m0mIwGBaNzvlXOPswkxaDwbBodM6/wtmHmbQYDIZFY/kkVW0mLd9oJi0Gw4/G8kmq2kxavtH+D3kj7soe3Zz0AAAAAElFTkSuQmCC" alt="image-20220508160013429"></p><p>4ã€kill.bat</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>@echo off
<span class="token assign-left variable">echo</span><span class="token operator">=</span>
<span class="token keyword">for</span> /f <span class="token string">&quot;tokens=2 delims= &quot;</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">&#39;tasklist  /fi &quot;imagename eq vmware-vmx.exe&quot; /nh&#39;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> taskkill /f /pid %%i
cmd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5ã€<a href="http://cp.sh" target="_blank" rel="noopener noreferrer">cp.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> è™šæ‹Ÿæœºåˆ°æ–°ç›®å½•</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> /f/vm/k8s/masterVagrantfile/.vagrant/machines/master/vmware_workstation/. /f/vm/k8s/master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/nodeVagrantfile&quot;</span>
<span class="token assign-left variable">master</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/master&quot;</span>
<span class="token assign-left variable">node1</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/node1&quot;</span>
<span class="token assign-left variable">node2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/node2&quot;</span>
<span class="token assign-left variable">node3</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/node3&quot;</span>
<span class="token assign-left variable">old_master</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${mf}</span>/.vagrant/machines/master/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node1</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${nf}</span>/.vagrant/machines/node1/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${nf}</span>/.vagrant/machines/node2/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node3</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${nf}</span>/.vagrant/machines/node3/vmware_workstation/&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">${mf}</span>&quot;</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${master}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${master}</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${master}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${master}</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_master}</span>. --&gt; <span class="token variable">${master}</span>]&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_master}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_master}</span><span class="token builtin class-name">.</span> <span class="token variable">${master}</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">${nf}</span>&quot;</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${node1}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${node1}</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${node1}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${node2}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${node2}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${node2}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${node3}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${node3}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${node3}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${node1}</span>&quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${node2}</span>&quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${node3}</span>&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_node1}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_node1}</span><span class="token builtin class-name">.</span> <span class="token variable">${node1}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_node1}</span>. --&gt; <span class="token variable">${node1}</span>]&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_node2}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_node2}</span><span class="token builtin class-name">.</span> <span class="token variable">${node2}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_node2}</span>. --&gt; <span class="token variable">${node2}</span>]&quot;</span>
    <span class="token keyword">fi</span>

  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_node3}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_node3}</span><span class="token builtin class-name">.</span> <span class="token variable">${node3}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_node3}</span>. --&gt; <span class="token variable">${node3}</span>]&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6ã€ä¿®æ”¹è™šæ‹Ÿæœºå¼•ç”¨é•œåƒåœ°å€ boxes</p><p>/f/vm/k8s/ä¸‹çš„ï¼šmasterã€node[1-3]</p><p>æŠŠã€masterã€node[1-3]ã€‘/c2c6ff32-7b85-4fb9-8cdf-48497b898d32ï¼š36ä½åç§°+4</p><p>éå†åæŠŠ <code>c2c6ff32-7b85-4fb9-8cdf-48497b898d32/. ../master</code></p><p><strong>ç›´æ¥æŠŠD:\rj-win\Vagrant.vagrant.d\boxes\centos7w\0\vmware_desktop\å¤åˆ¶åˆ°F:\vm\k8s\vmware_desktopä¸å°±è¡Œäº†ï¼Œç„¶åä¿®æ”¹æ¯ä¸ªèŠ‚ç‚¹çš„ï¼ˆä¸‹é¢æåˆ°çš„3ä¸ªæ–‡ä»¶ï¼‰ï¼ï¼ï¼ï¼</strong></p><p>7ã€æ­£åˆ™å¤åˆ¶</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ls /data/dns_data/ | grep .*20180928.* | xargs -i cp -r /data/dns_data/{} ./

/data/dns_data/  --&gt;  è¡¨ç¤ºè¦cpæ–‡ä»¶æ‰€åœ¨ç›®å½•
| grep  .*20180928.*  ---&gt;è¡¨ç¤ºè¦è¿‡æ»¤çš„ç›®å½•
| args -i cp -r /data/dns_data/{}  ---&gt; æŠŠè¦æ‹·è´æ–‡ä»¶ä¼ å…¥CPå‘½ä»¤å½“ä¸­
./  ---&gt; å½“å‰ç›®å½•
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>disk1-cl1.vmdk ç£ç›˜æè¿°ç¬¦æ–‡ä»¶</p><p>ä¿®æ”¹ï¼š<code>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/disk1-cl1.vmdk</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># çˆ¶æ–‡ä»¶åæç¤º</span>
master:parentFileNameHint<span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1.vmdk&quot;</span>
node1: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1-000001.vmdk&quot;</span>
node2: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1-000002.vmdk&quot;</span>
node3: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1-000003.vmdk&quot;</span>
æ”¹ä¸ºï¼šï¼š
master: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s\master\xxx\server\disk1.vmdk&quot;</span>
node1: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode1\xxx\server\disk1-000001.vmdk&quot;</span>
node2: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode2\xxx\server\disk1-000002.vmdk&quot;</span>
node3: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode3\xxx\server\disk1-000003.vmdk&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¤åˆ¶ï¼š</p><p>æŠŠ <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-s001.vmdk</code>--&gt;<code>disk1-s032.vmdk</code> å¤åˆ¶åˆ°<code>F:\vm\k8s\master\xxx\serve\</code></p><p>æŠŠ <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-000001-s001.vmdk</code>--&gt;<code>disk1-000001-s032.vmdk</code> å¤åˆ¶åˆ°<code>F:\vm\k8s\node1\xxx\serve\</code></p><p>æŠŠ <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-000002-s001.vmdk</code>--&gt;<code>disk1-000002-s032.vmdk</code> å¤åˆ¶åˆ°<code>F:\vm\k8s\node2\xxx\serve\</code></p><p>æŠŠ <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-000003-s001.vmdk</code>--&gt;<code>disk1-000003-s032.vmdk</code> å¤åˆ¶åˆ°<code>F:\vm\k8s\node3\xxx\serve\</code></p><p>vagrant-base-centos7.vmsd</p><p>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/vagrant-base-centos7.vmsd</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>cloneOf0 <span class="token operator">=</span> <span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop<span class="token entity" title="\v">\v</span>agrant-base-centos7.vmx&quot;</span>
æ”¹
cloneOf0 <span class="token operator">=</span> <span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\v">\v</span>agrant-base-centos7.vmx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vagrant-base-centos7.vmx</p><p>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/vagrant-base-centos7.vmx</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>filesearchpath <span class="token operator">=</span> <span class="token string">&quot;.;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop&quot;</span>
æ”¹
filesearchpath <span class="token operator">=</span> &quot;.<span class="token punctuation">;</span>F:<span class="token punctuation">\</span>vm<span class="token punctuation">\</span>k8s<span class="token punctuation">\</span>centos7w<span class="token punctuation">\</span>&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;master&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos70&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token assign-left variable">master.vm.hostname</span><span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># è®¾ç½®è™šæ‹Ÿæœºçš„IP(public_networkï¼šæ¡¥æ¥ private_networkï¼šä»…ä¸»æœº)ã€bridge æ¡¥æ¥é€‚é…å™¨</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.120&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstationï¼Œvmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                <span class="token assign-left variable">v.gui</span><span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;master&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;cpuid.coresPerSocket&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;2&quot;</span>
                <span class="token comment">#cpuæ€»å¤„ç†å™¨å†…æ ¸æ•°ï¼šnumvcpus = &quot;4&quot;ï¼Œ</span>
                <span class="token comment"># numvcpus=å¤„ç†å™¨æ•°é‡*cpuid.coresPerSocket</span>
                <span class="token comment"># å¤„ç†å™¨æ•°é‡=numvcpus/cpuid.coresPerSocketï¼ˆ4/2=2ï¼‰</span>
                <span class="token comment">#cpuæ¯ä¸ªå¤„ç†å™¨å†…æ ¸æ•°ï¼šcpuid.coresPerSocket = &quot;2&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;shell&quot;</span>, inline: <span class="token operator">&lt;&lt;-</span><span class="token environment constant">SHELL</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;=================  #{i} =========================&quot;</span>
            <span class="token environment constant">SHELL</span>
        end
    end
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3ã€" tabindex="-1"><a class="header-anchor" href="#_3ã€" aria-hidden="true">#</a> 3ã€</h3><p>å®‰è£…kernel-devel,éœ€è¦å®‰è£…VBOXçš„å¢å¼ºåŒ…ï¼Œå°±å¿…é¡»å®‰è£…è¿™ä¸ª</p><p>å®‰è£…å¢å¼ºåŒ…ï¼šå°±æ˜¯vm-toolï¼ˆåœ¨vmå®‰è£…ç›®å½•é‡Œçš„ xx.isoï¼‰</p><h3 id="vagrant-box-æ‰“åŒ…" tabindex="-1"><a class="header-anchor" href="#vagrant-box-æ‰“åŒ…" aria-hidden="true">#</a> Vagrant Box æ‰“åŒ…</h3><h3 id="æƒé™é…ç½®å…¬é’¥" tabindex="-1"><a class="header-anchor" href="#æƒé™é…ç½®å…¬é’¥" aria-hidden="true">#</a> æƒé™é…ç½®å…¬é’¥</h3><p>ä¸ºvagrantæ·»åŠ sudoæƒé™</p><h3 id="é…ç½®ç½‘å¡" tabindex="-1"><a class="header-anchor" href="#é…ç½®ç½‘å¡" aria-hidden="true">#</a> é…ç½®ç½‘å¡</h3><p>æ­¤æ­¥éª¤æ—¶å€™æˆ‘å¾ˆéƒé—·çš„ä¸€æ­¥ï¼Œå°±æ˜¯å½“ä½ ç›´æ¥æŠŠè¿™ä¸ªé•œåƒæ‰“åŒ…åï¼Œä»¥åå¦‚æœåœ¨åŒä¸€å°æœºå™¨ä¸Šé¢ä½¿ç”¨åŒä¸€ä¸ªboxè™šæ‹Ÿå¤šå°æœºå™¨ï¼Œé…ç½®å°±ä¼šå‡ºé—®é¢˜ã€‚å› æ­¤è¿™æ­¥éª¤è¿˜æ˜¯æ¯”è¾ƒå…³é”®çš„ã€‚</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#ç¬¬ä¸€æ­¥ï¼šæŠŠç½‘å¡ä¸­çš„MACåœ°å€æ³¨é‡Š</span>
<span class="token comment">#HWADDR=XX:XX------------</span>
<span class="token comment">#ç¬¬äºŒæ­¥ï¼šåˆ é™¤</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/udev/rules.d/70-persistent-ipoib.rules
<span class="token comment">#å®‰è£…æ–°çš„è™šæ‹Ÿæœºåï¼Œå»ºè®®æ”¹ä¸€ä¸‹MACåœ°å€ï¼Œå¦‚æœè¿˜é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œå»ºè®®çœ‹çœ‹è¿™é‡Œ</span>
<span class="token comment">#è™šæ‹Ÿæœºå…‹éš†CentOS7 å‡ºç°çš„ç½‘ç»œé—®é¢˜è§£å†³åŠæ³•http://www.bubuko.com/infodetail-1483490.html</span>
poweroff
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ‰“åŒ…box" tabindex="-1"><a class="header-anchor" href="#æ‰“åŒ…box" aria-hidden="true">#</a> æ‰“åŒ…BOX</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token preprocessor property">#è¿›å…¥vagrantçš„ç›®å½•</span>
<span class="token punctuation">[</span>E<span class="token punctuation">:</span>\vagrant<span class="token punctuation">]</span>$ vagrant package <span class="token operator">--</span>output <span class="token punctuation">.</span><span class="token operator">/</span>tzfcentos73<span class="token punctuation">.</span>box <span class="token operator">--</span><span class="token keyword">base</span> CentOS73
<span class="token operator">==</span><span class="token operator">&gt;</span> CentOS73<span class="token punctuation">:</span> Exporting VM<span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token operator">&gt;</span> CentOS73<span class="token punctuation">:</span> Compressing <span class="token class-name">package</span> to<span class="token punctuation">:</span> E<span class="token punctuation">:</span><span class="token operator">/</span>vagrant<span class="token operator">/</span>tzfcentos73<span class="token punctuation">.</span>box
<span class="token preprocessor property">#è§£é‡Šoutputæ˜¯æŒ‡boxçš„åå­—ï¼Œ--baseæ˜¯æŒ‡åŸºäºVBOXé‡Œé¢çš„å“ªä¸ªè™šæ‹Ÿæœºæ‰“åŒ…ï¼Œè¿™çš„åå­—ä¸€å®šè¦äº‰å–</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="äºŒã€vmrun" tabindex="-1"><a class="header-anchor" href="#äºŒã€vmrun" aria-hidden="true">#</a> äºŒã€vmrun</h2><p><a href="https://docs.vmware.com/cn/" target="_blank" rel="noopener noreferrer">https://docs.vmware.com/cn/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="æ ¼å¼-vmrun-èº«ä»½éªŒè¯æ ‡å¿—-å‘½ä»¤-å‚æ•°" tabindex="-1"><a class="header-anchor" href="#æ ¼å¼-vmrun-èº«ä»½éªŒè¯æ ‡å¿—-å‘½ä»¤-å‚æ•°" aria-hidden="true">#</a> æ ¼å¼ï¼švmrun [èº«ä»½éªŒè¯æ ‡å¿—] å‘½ä»¤ [å‚æ•°]</h3><p><a href="https://www.vmware.com/pdf/vix162_vmrun_command.pdf" target="_blank" rel="noopener noreferrer">https://www.vmware.com/pdf/vix162_vmrun_command.pdf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://docs.vmware.com/cn/search/#/vmrun" target="_blank" rel="noopener noreferrer">https://docs.vmware.com/cn/search/#/vmrun<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>èº«ä»½éªŒè¯æ ‡å¿—
--------------
è¿™äº›å¿…é¡»å‡ºç°åœ¨å‘½ä»¤å’Œä»»ä½•å‘½ä»¤å‚æ•°ä¹‹å‰ã€‚
   <span class="token parameter variable">-T</span> <span class="token operator">&lt;</span>ä¸»æœºç±»å‹<span class="token operator">&gt;</span> <span class="token punctuation">(</span>ws<span class="token operator">|</span>fusion<span class="token operator">||</span>player<span class="token punctuation">)</span>
   <span class="token parameter variable">-vp</span> <span class="token operator">&lt;</span>åŠ å¯†è™šæ‹Ÿæœºçš„å¯†ç <span class="token operator">&gt;</span>
   <span class="token parameter variable">-gu</span> <span class="token operator">&lt;</span>æ¥å®¾æ“ä½œç³»ç»Ÿä¸­çš„ç”¨æˆ·å<span class="token operator">&gt;</span>
   <span class="token parameter variable">-gp</span> <span class="token operator">&lt;</span>guest OS ä¸­çš„å¯†ç <span class="token operator">&gt;</span>

ç”µæºå‘½ä»¤          			å‚æ•°          			æè¿°
--------------           ----------           -----------
start                    .vmx æ–‡ä»¶çš„è·¯å¾„     		å¯åŠ¨è™šæ‹Ÿæœºæˆ–å›¢é˜Ÿ
                         <span class="token punctuation">[</span>gui<span class="token operator">|</span>nogui<span class="token punctuation">]</span>
stop                     .vmx æ–‡ä»¶çš„è·¯å¾„     		åœæ­¢è™šæ‹Ÿæœºæˆ–å›¢é˜Ÿ
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
reset                    .vmx æ–‡ä»¶çš„è·¯å¾„     		é‡ç½® VM æˆ–å›¢é˜Ÿ
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
<span class="token function">suspend</span>                  .vmx æ–‡ä»¶çš„è·¯å¾„     		æš‚åœ VM æˆ–å›¢é˜Ÿ
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
pause                    .vmx æ–‡ä»¶çš„è·¯å¾„     		æš‚åœè™šæ‹Ÿæœº
unpause                  .vmx æ–‡ä»¶çš„è·¯å¾„     		å–æ¶ˆæš‚åœè™šæ‹Ÿæœº

å¿«ç…§å‘½ä»¤		        	å‚æ•°         			  æè¿°
-----------------        ----------           -----------
listSnapshots            .vmx æ–‡ä»¶çš„è·¯å¾„     		åˆ—å‡º VM ä¸­çš„æ‰€æœ‰å¿«ç…§
                         <span class="token punctuation">[</span>showTree<span class="token punctuation">]</span>
snapshot                 .vmx æ–‡ä»¶çš„è·¯å¾„     		åˆ›å»º VM çš„å¿«ç…§
                         Snapshot name
deleteSnapshot           .vmx æ–‡ä»¶çš„è·¯å¾„     		ä» VM ä¸­åˆ é™¤å¿«ç…§
                         Snapshot name
                         <span class="token punctuation">[</span>andDeleteChildren<span class="token punctuation">]</span>
revertToSnapshot         .vmx æ–‡ä»¶çš„è·¯å¾„     		å°† VM çŠ¶æ€è®¾ç½®ä¸ºå¿«ç…§
                         å¿«ç…§åç§°

ä¸»æœºç½‘ç»œå‘½ä»¤   				 å‚æ•°        		  		 æè¿°
---------------------    ----------           -----------
listHostNetworks                              	åˆ—å‡ºä¸»æœºä¸­çš„æ‰€æœ‰ç½‘ç»œ
listPortForwardings      ä¸»æœºç½‘ç»œåç§°    			åˆ—å‡ºä¸»æœºç½‘ç»œä¸Šæ‰€æœ‰å¯ç”¨çš„ç«¯å£è½¬å‘
setPortForwarding        ä¸»æœºç½‘ç»œåç§°    			åœ¨ä¸»æœºç½‘ç»œä¸Šæ·»åŠ æˆ–æ›´æ–°ç«¯å£è½¬å‘
                         Protocol
                         Host port
                         Guest <span class="token function">ip</span>
                         Guest port
                         <span class="token punctuation">[</span>Description<span class="token punctuation">]</span>
deletePortForwarding     Host network name   	åˆ é™¤ä¸»æœºç½‘ç»œä¸Šçš„ç«¯å£è½¬å‘
                         Protocol
                         Host port

å˜‰å®¾å‘½ä»¤   				 å‚æ•°        		  		 æè¿°
-----------------        ----------           -----------
runProgramInGuest        .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­è¿è¡Œç¨‹åº
                         <span class="token punctuation">[</span>-noWait<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-activeWindow<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-interactive<span class="token punctuation">]</span>
                         å®Œæ•´è·¯å¾„åˆ°ç¨‹åº
                         <span class="token punctuation">[</span>ç¨‹åºå‚æ•°<span class="token punctuation">]</span>
runScriptInGuest         .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­è¿è¡Œè„šæœ¬
                         <span class="token punctuation">[</span>-noWait<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-activeWindow<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-interactive<span class="token punctuation">]</span>
                         è§£é‡Šå™¨è·¯å¾„
                         è„šæœ¬æ–‡æœ¬
fileExistsInGuest        .vmx æ–‡ä»¶çš„è·¯å¾„     	æ£€æŸ¥æ¥å®¾æ“ä½œç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨æ–‡ä»¶
                         æ¥å®¾ä¸­çš„æ–‡ä»¶è·¯å¾„
directoryExistsInGuest   .vmx æ–‡ä»¶çš„è·¯å¾„    		æ£€æŸ¥æ¥å®¾æ“ä½œç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨ç›®å½•
                         æ¥å®¾ç›®å½•çš„è·¯å¾„
setSharedFolderState     .vmx æ–‡ä»¶çš„è·¯å¾„     	ä¿®æ”¹ä¸»å®¢å…±äº«æ–‡ä»¶å¤¹
                         å…±äº«åç§°
                         Host path
                         writable <span class="token operator">|</span> <span class="token builtin class-name">readonly</span>
addSharedFolder          .vmx æ–‡ä»¶çš„è·¯å¾„     	æ·»åŠ ä¸»å®¢å…±äº«æ–‡ä»¶å¤¹
                         å…±äº«åç§°
                         æ–°ä¸»æœºè·¯å¾„
removeSharedFolder       .vmx æ–‡ä»¶çš„è·¯å¾„     	åˆ é™¤ä¸»å®¢å…±äº«æ–‡ä»¶å¤¹
                         å…±äº«åç§°
enableSharedFolders      .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾ç³»ç»Ÿä¸­å¯ç”¨å…±äº«æ–‡ä»¶å¤¹
                         <span class="token punctuation">[</span>runtime<span class="token punctuation">]</span>
disableSharedFolders     .vmx æ–‡ä»¶çš„è·¯å¾„     	ç¦ç”¨æ¥å®¾ç³»ç»Ÿä¸­çš„å…±äº«æ–‡ä»¶å¤¹
                         <span class="token punctuation">[</span>runtime<span class="token punctuation">]</span>
listProcessesInGuest     .vmx æ–‡ä»¶çš„è·¯å¾„     	åˆ—å‡ºæ¥å®¾æ“ä½œç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹
killProcessInGuest       .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­ç»ˆæ­¢è¿›ç¨‹
                         è¿›ç¨‹å·
deleteFileInGuest        .vmx æ–‡ä»¶çš„è·¯å¾„     	åˆ é™¤æ¥å®¾æ“ä½œç³»ç»Ÿä¸­çš„æ–‡ä»¶
                         Path <span class="token keyword">in</span> guest
createDirectoryInGuest   .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­åˆ›å»ºç›®å½•
                         Directory path <span class="token keyword">in</span> guest
deleteDirectoryInGuest   .vmx æ–‡ä»¶çš„è·¯å¾„     	åˆ é™¤æ¥å®¾æ“ä½œç³»ç»Ÿä¸­çš„ç›®å½•
                         Directory path <span class="token keyword">in</span> guest
CreateTempfileInGuest    .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶
listDirectoryInGuest     .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­åˆ—å‡ºä¸€ä¸ªç›®å½•
                         Directory path <span class="token keyword">in</span> guest
CopyFileFromHostToGuest  .vmx æ–‡ä»¶çš„è·¯å¾„     	å°†æ–‡ä»¶ä»ä¸»æœºæ“ä½œç³»ç»Ÿå¤åˆ¶åˆ°æ¥å®¾æ“ä½œç³»ç»Ÿ
                         Path on <span class="token function">host</span>
                         Path <span class="token keyword">in</span> guest
CopyFileFromGuestToHost  .vmx æ–‡ä»¶çš„è·¯å¾„     	å°†æ–‡ä»¶ä»æ¥å®¾æ“ä½œç³»ç»Ÿå¤åˆ¶åˆ°ä¸»æœºæ“ä½œç³»ç»Ÿ
                         Path <span class="token keyword">in</span> guest
                         Path on <span class="token function">host</span>
renameFileInGuest        .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­é‡å‘½åæ–‡ä»¶
                         Original name
                         New name
typeKeystrokesInGuest    .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨æ¥å®¾æ“ä½œç³»ç»Ÿä¸­é”®å…¥å‡»é”®
                         keystroke string
connectNamedDevice       .vmx æ–‡ä»¶çš„è·¯å¾„     	è¿æ¥æ¥å®¾æ“ä½œç³»ç»Ÿä¸­çš„å‘½åè®¾å¤‡
                         device name
disconnectNamedDevice    .vmx æ–‡ä»¶çš„è·¯å¾„     	æ–­å¼€æ¥å®¾æ“ä½œç³»ç»Ÿä¸­çš„å‘½åè®¾å¤‡
                         device name
captureScreen            .vmx æ–‡ä»¶çš„è·¯å¾„     	å°†è™šæ‹Ÿæœºçš„å±å¹•æ•è·åˆ°æœ¬åœ°æ–‡ä»¶
                         Path on <span class="token function">host</span>
writeVariable            .vmx æ–‡ä»¶çš„è·¯å¾„     	åœ¨VMçŠ¶æ€ä¸‹å†™å…¥ä¸€ä¸ªå˜é‡
                         <span class="token punctuation">[</span>runtimeConfig<span class="token operator">|</span>guestEnv<span class="token operator">|</span>guestVar<span class="token punctuation">]</span>
                         variable name
                         variable value
readVariable             .vmx æ–‡ä»¶çš„è·¯å¾„     	è¯»å–å¤„äºVMçŠ¶æ€çš„å˜é‡
                         <span class="token punctuation">[</span>runtimeConfig<span class="token operator">|</span>guestEnv<span class="token operator">|</span>guestVar<span class="token punctuation">]</span>
                         variable name
getGuestIPAddress        .vmx æ–‡ä»¶çš„è·¯å¾„     	è·å–æ¥å®¾çš„IPåœ°å€
                         <span class="token punctuation">[</span>-wait<span class="token punctuation">]</span>

å¸¸è§„å‘½ä»¤é€‰é¡¹	   				 å‚æ•°        		  		 æè¿°
----------------         ----------           -----------
list                                          	åˆ—å‡ºæ‰€æœ‰è¿è¡Œçš„è™šæ‹Ÿæœºã€‚ 
upgradevm                .vmx æ–‡ä»¶çš„è·¯å¾„     	å°†è™šæ‹Ÿæœºå‡çº§åˆ°å½“å‰è™šæ‹Ÿç¡¬ä»¶ç‰ˆæœ¬
installTools             .vmx æ–‡ä»¶çš„è·¯å¾„     	å®‰è£… VMware Tools <span class="token keyword">in</span> Guest
checkToolsState          .vmx æ–‡ä»¶çš„è·¯å¾„     	æ£€æŸ¥å®¢æˆ·æœºä¸­çš„ VMware Tools çš„çŠ¶æ€ã€‚
												å¯èƒ½çš„çŠ¶æ€ä¸º unknownã€installedå’Œrunning
deleteVM                 .vmx æ–‡ä»¶çš„è·¯å¾„     	åˆ é™¤è™šæ‹Ÿæœº
clone                    .vmx æ–‡ä»¶çš„è·¯å¾„     	åˆ›å»º VM çš„å‰¯æœ¬
                         ç›®æ ‡ .vmx æ–‡ä»¶çš„è·¯å¾„
                         fullï¼ˆå®Œå…¨å…‹éš†ï¼‰<span class="token operator">|</span>linkedï¼ˆé“¾æ¥å…‹éš†ï¼‰
                         <span class="token punctuation">[</span>-snapshot<span class="token operator">=</span>å…‹éš†çš„å¿«ç…§åç§° <span class="token keyword">if</span> linkedæ—¶<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-cloneName<span class="token operator">=</span>åç§°<span class="token punctuation">]</span>

VMæ¨¡æ¿å‘½ä»¤   				 å‚æ•°        		  		 æè¿°
---------------------    ----------           -----------
downloadPhotonVM         æ–°è™šæ‹Ÿæœºçš„è·¯å¾„     	 ä¸‹è½½å…‰å­è™šæ‹Ÿæœº
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="ç¤ºä¾‹" tabindex="-1"><a class="header-anchor" href="#ç¤ºä¾‹" aria-hidden="true">#</a> ç¤ºä¾‹</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># å¯åŠ¨è™šæ‹Ÿæœº</span>
vmrun <span class="token parameter variable">-T</span> ws start <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>
vmrun <span class="token parameter variable">-T</span> ws stop <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>

<span class="token comment"># å…‹éš†è™šæ‹Ÿæœº</span>
/d/rj-win/vm16/vmrun.exe <span class="token parameter variable">-T</span> ws clone <span class="token string">&quot;/f/vm/k8s/centos7_vmware_workstation/centos7_vmware_workstation.vmx&quot;</span> <span class="token string">&quot;/f/vm/k8s/centos7/master-cluster/master-120/master-120.vmx&quot;</span>  full <span class="token parameter variable">-cloneName</span><span class="token operator">=</span>master-120

<span class="token comment"># åœ¨ Windows ä¸»æœºä¸Šä½¿ç”¨ Workstation åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œç¨‹åº</span>
vmrun <span class="token parameter variable">-T</span> ws <span class="token parameter variable">-gu</span> guestUser <span class="token parameter variable">-gp</span> guestPassword runProgramInGuest <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> <span class="token string">&quot;c:\Program Files\myProgram.exe&quot;</span>

<span class="token comment"># åœ¨Windowsä¸Šç™»å½•è™šæ‹Ÿæœºï¼Œå¹¶æ‰§è¡Œè™šæ‹Ÿæœºè„šæœ¬</span>
D:<span class="token punctuation">\</span>rj-win<span class="token punctuation">\</span>vm16<span class="token punctuation">\</span>vmrun.exe <span class="token parameter variable">-T</span> ws <span class="token parameter variable">-gu</span> root <span class="token parameter variable">-gp</span> 123456a runProgramInGuest <span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode-cluster<span class="token entity" title="\n">\n</span>ode-121<span class="token entity" title="\n">\n</span>ode-121.vmx&quot;</span> /bin/bash /root/first.sh <span class="token number">121</span> node-121


<span class="token comment"># åˆ›å»ºè™šæ‹Ÿæœºçš„å¿«ç…§</span>
vmrun <span class="token parameter variable">-T</span> ws snapshot <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># è·å–å¿«ç…§åˆ—è¡¨</span>
vmrun <span class="token parameter variable">-T</span> ws listSnapshots <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>

<span class="token comment"># è¿˜åŸå¿«ç…§</span>
vmrun <span class="token parameter variable">-T</span> ws revertToSnapshot <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># åˆ é™¤å¿«ç…§</span>
vmrun <span class="token parameter variable">-T</span> ws deleteSnapshot <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># å¯ç”¨å·¥ä½œç«™å…±äº«æ–‡ä»¶å¤¹</span>
vmrun <span class="token parameter variable">-T</span> ws enableSharedFolders <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="æ­¥éª¤-1" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤-1" aria-hidden="true">#</a> æ­¥éª¤</h3><ol><li>cd D:\rj-win\vm16\vmrun.exe ç¨‹åº</li><li>git è½¯ä»¶</li><li>ç¼–å†™è„šæœ¬ <a href="http://auto.sh" target="_blank" rel="noopener noreferrer">auto.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>sh auto_VM.sh create</li><li>sh auto_VM.sh start | sh auto_VM.sh</li><li>è®¾ç½®IPçš„è„šæœ¬ set_ip.bat</li></ol><blockquote><p>æ‰§è¡Œæµç¨‹ï¼šcreateã€‹startã€‹set_ipã€‹windowä¸‹è¿è¡Œset_ip.batè„šæœ¬</p></blockquote><h3 id="è„šæœ¬-auto-vm-sh" tabindex="-1"><a class="header-anchor" href="#è„šæœ¬-auto-vm-sh" aria-hidden="true">#</a> è„šæœ¬ï¼šauto_VM.sh</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">host_master</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span>
<span class="token assign-left variable">host_node</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">121</span> <span class="token number">122</span> <span class="token number">123</span><span class="token punctuation">)</span>
<span class="token assign-left variable">gu</span><span class="token operator">=</span><span class="token string">&quot;root&quot;</span>
<span class="token assign-left variable">gp</span><span class="token operator">=</span><span class="token string">&quot;123456a&quot;</span>

<span class="token comment">#æ¨¡æ¿é•œåƒä½ç½®</span>
<span class="token assign-left variable">VMX_FILE</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/CentOS7/CentOS7.vmx&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token variable">${VMX_FILE}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; æ²¡æœ‰æ¨¡æ¿é•œåƒ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># vmrun.exe ä½ç½®</span>
<span class="token assign-left variable">VMRUN_EXE</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/vm16/vmrun.exe&quot;</span>
<span class="token assign-left variable">PATH_VMRUN_EXE_CMD</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\\">\\</span>rj-win<span class="token entity" title="\\">\\</span>vm16<span class="token entity" title="\\">\\</span>vmrun.exe&quot;</span>
<span class="token comment"># é›†ç¾¤æœºå™¨ä½ç½®</span>
<span class="token assign-left variable">K8S_CENTOS7</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">K8S_CENTOS7_CMD</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\\">\\</span>vm<span class="token entity" title="\\">\\</span>k8s&quot;</span>
<span class="token comment">#é›†ç¾¤åç§°</span>
<span class="token assign-left variable">MASTER_CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;master-cluster&quot;</span>
<span class="token assign-left variable">NODE_CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;node-cluster&quot;</span>
<span class="token comment">#æœåŠ¡å™¨åç§°</span>
<span class="token assign-left variable">MASTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
<span class="token assign-left variable">NODE_NAME</span><span class="token operator">=</span><span class="token string">&quot;node&quot;</span>
<span class="token comment">#åˆ›å»ºå¿«ç…§çš„åç§°</span>
<span class="token assign-left variable">SHOT_NAME</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;=====&gt;  sh å‚æ•°[<span class="token variable">$1</span>,<span class="token variable">$2</span>,<span class="token variable">$3</span>]&quot;</span>
<span class="token assign-left variable">v2</span><span class="token operator">=</span><span class="token number">120</span>

<span class="token function-name function">clone_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">#    for i in $(cat host-node.txt)</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å…‹éš† master-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws clone <span class="token string">&quot;<span class="token variable">${VMX_FILE}</span>&quot;</span> <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> full <span class="token parameter variable">-cloneName</span><span class="token operator">=</span><span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">clone_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">#  for i in $(cat host-node.txt)</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å…‹éš† node-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws clone <span class="token string">&quot;<span class="token variable">${VMX_FILE}</span>&quot;</span> <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> full <span class="token parameter variable">-cloneName</span><span class="token operator">=</span><span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># åˆ›å»ºå…‹éš†é“¾æ¥çš„è™šæ‹Ÿæœº</span>
<span class="token function-name function">VM_create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
clone_master
<span class="token function">sleep</span> <span class="token number">6</span>
clone_node
<span class="token function">sleep</span> <span class="token number">8</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    å…‹éš†è™šæ‹Ÿæœºå®Œæˆ     &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">start_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å¯åŠ¨: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws start <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">start_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å¯åŠ¨: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws start <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># å¯åŠ¨åˆ›å»ºå¥½çš„è™šæ‹Ÿæœº</span>
<span class="token function-name function">VM_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
start_master
<span class="token function">sleep</span> <span class="token number">6</span>
start_node
<span class="token function">sleep</span> <span class="token number">3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    å¯åŠ¨è™šæ‹Ÿæœºå®Œæˆ    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># ä¿®æ”¹IPåœ°å€</span>
<span class="token function-name function">set_ip_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token operator">&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${PATH_VMRUN_EXE_CMD}</span> -T ws -gu <span class="token variable">${gu}</span> -gp <span class="token variable">${gp}</span> runProgramInGuest <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span><span class="token variable">${MASTER_CLUSTER_NAME}</span><span class="token entity" title="\\">\\</span><span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span><span class="token entity" title="\\">\\</span><span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx<span class="token entity" title="\&quot;">\&quot;</span> /bin/bash /root/first.sh <span class="token variable">${i}</span> <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>&quot;</span> <span class="token operator">&gt;&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token comment"># ping -n 5(å‘é€5æ¬¡è¯·æ±‚)|åœ¨Linuxç«¯ä½¿ç”¨ -c</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ping -n 3 192.168.101.<span class="token variable">${i}</span> &gt;<span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>ping<span class="token variable">${i}</span>.log&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
  <span class="token keyword">done</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;ä¿®æ”¹IPè„šæœ¬ç”Ÿæˆè·¯å¾„: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip_<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.bat&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;exit&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
  <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;è¿è¡Œå‘½ä»¤:<span class="token entity" title="\n">\n</span>1.æ‰“å¼€cmd.exe<span class="token entity" title="\n">\n</span>2.è¾“å…¥: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip<span class="token variable">${i}</span>.bat&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">set_ip_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token operator">&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token comment">#ç™»å½•ç³»ç»Ÿ</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${PATH_VMRUN_EXE_CMD}</span> -T ws -gu <span class="token variable">${gu}</span> -gp <span class="token variable">${gp}</span> runProgramInGuest <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span><span class="token variable">${NODE_CLUSTER_NAME}</span><span class="token entity" title="\\">\\</span><span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span><span class="token entity" title="\\">\\</span><span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx<span class="token entity" title="\&quot;">\&quot;</span> /bin/bash /root/first.sh <span class="token variable">${i}</span> <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>&quot;</span> <span class="token operator">&gt;&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token comment"># ping -n 5(å‘é€5æ¬¡è¯·æ±‚)|åœ¨Linuxç«¯ä½¿ç”¨ -c</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ping -n 3 192.168.101.<span class="token variable">${i}</span> &gt;<span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>ping<span class="token variable">${i}</span>.log&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;exit&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
  <span class="token keyword">done</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;ä¿®æ”¹IPè„šæœ¬ç”Ÿæˆè·¯å¾„: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip_<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.bat&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;è¿è¡Œå‘½ä»¤:<span class="token entity" title="\n">\n</span>1.æ‰“å¼€cmd.exe<span class="token entity" title="\n">\n</span>2.è¾“å…¥: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip_<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.bat&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment"># -T ws -gu -gp runProgramInGuest &quot;xxx.vmx&quot; &quot;vm.exe&quot;</span>
<span class="token comment">#ç™»å½•ç³»ç»Ÿå°±è¡Œè®¾ç½®ï¼š</span>
<span class="token comment"># runProgramInGuest xx.vmx [ç¨‹åºå‚æ•°]</span>
<span class="token comment"># runScriptInGuest xx.vmx [è§£é‡Šå™¨è·¯å¾„] [è„šæœ¬æ–‡æœ¬]</span>
<span class="token function-name function">VM_set_IP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  set_ip_master
  set_ip_node
<span class="token punctuation">}</span>

<span class="token function-name function">stop_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å…³é—­: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws stop <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">2</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">stop_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹å…³é—­: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws stop <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">2</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment">#æ‰¹é‡å…³æœº</span>
<span class="token function-name function">VM_stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
stop_master
stop_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    æ‰¹é‡å…³æœºå®Œæˆ    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">snapshot_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹åˆ›å»ºå¿«ç…§: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i ...}</span>&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws snapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">snapshot_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹åˆ›å»ºå¿«ç…§: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws snapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># åˆ›å»ºå¿«ç…§</span>
<span class="token function-name function">VM_snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
snapshot_master
<span class="token function">sleep</span> <span class="token number">6</span>
snapshot_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    åˆ›å»ºå¿«ç…§å®Œæˆ    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">shot_list_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;è·å–å¿«ç…§åˆ—è¡¨: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws listSnapshots <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">shot_list_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;è·å–å¿«ç…§åˆ—è¡¨: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws listSnapshots <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># è·å–å¿«ç…§åˆ—è¡¨</span>
<span class="token function-name function">VM_shot_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_list_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_list_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   è·å–å¿«ç…§åˆ—è¡¨    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">shot_back_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹æ¢å¤å¿«ç…§: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws revertToSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">shot_back_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹æ¢å¤å¿«ç…§: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws revertToSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># æ¢å¤å¿«ç…§</span>
<span class="token function-name function">VM_shot_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_back_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_back_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   æ¢å¤å¿«ç…§å®Œæˆï¼š<span class="token variable">${SHOT_NAME}</span>    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># åˆ é™¤å¿«ç…§</span>
<span class="token function-name function">shot_del_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹åˆ é™¤å¿«ç…§: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws deleteSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># åˆ é™¤å¿«ç…§</span>
<span class="token function-name function">shot_del_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;å¼€å§‹åˆ é™¤å¿«ç…§: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws deleteSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># åˆ é™¤å¿«ç…§</span>
<span class="token function-name function">VM_shot_del</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_del_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_del_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    æ‰¹é‡åˆ é™¤å¿«ç…§å®Œæˆ:<span class="token variable">${SHOT_NAME}</span>    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">clone_del_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    æ‰¹é‡åˆ é™¤å…‹éš†å®Œæˆ   <span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">clone_del_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    æ‰¹é‡åˆ é™¤å…‹éš†å®Œæˆ  <span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">VM_clone_del</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
clone_del_master
clone_del_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    æ‰¹é‡åˆ é™¤å…‹éš†å®Œæˆ    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># è·å–å½“å‰æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº</span>
<span class="token function-name function">VM_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;å½“å‰æ­£åœ¨è¿è¡Œçš„è™šæ‹Ÿæœº:&quot;</span>
  <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws list
<span class="token punctuation">}</span>

<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
    c<span class="token punctuation">)</span>
        VM_create
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    c1<span class="token punctuation">)</span>
        clone_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    c2<span class="token punctuation">)</span>
        clone_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start<span class="token punctuation">)</span>
        VM_start
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start1<span class="token punctuation">)</span>
        start_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start2<span class="token punctuation">)</span>
        start_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop<span class="token punctuation">)</span>
        VM_stop
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop1<span class="token punctuation">)</span>
        stop_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop2<span class="token punctuation">)</span>
        stop_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot<span class="token punctuation">)</span>
        VM_snapshot
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot1<span class="token punctuation">)</span>
        snapshot_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot2<span class="token punctuation">)</span>
        snapshot_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip<span class="token punctuation">)</span>
        VM_set_IP
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip1<span class="token punctuation">)</span>
        set_ip_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip2<span class="token punctuation">)</span>
        set_ip_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back<span class="token punctuation">)</span>
        VM_shot_back
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back1<span class="token punctuation">)</span>
        shot_back_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back2<span class="token punctuation">)</span>
        shot_back_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del<span class="token punctuation">)</span>
        VM_shot_del
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del1<span class="token punctuation">)</span>
        shot_del_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del2<span class="token punctuation">)</span>
        shot_del_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del<span class="token punctuation">)</span>
        VM_clone_del
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del1<span class="token punctuation">)</span>
        clone_del_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del2<span class="token punctuation">)</span>
        clone_del_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list<span class="token punctuation">)</span>
        VM_shot_list
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list1<span class="token punctuation">)</span>
        shot_list_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list2<span class="token punctuation">)</span>
        shot_list_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    list<span class="token punctuation">)</span>
        VM_list
        <span class="token punctuation">;</span><span class="token punctuation">;</span>

    *<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;bash <span class="token variable">$0</span> { c | start | set_ip | stop | shot | shot_list | shot_back | clone_del | shot_del | list }&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;bash <span class="token variable">$0</span> æ¯ä¸ªå‚æ•°åé¢éƒ½å¯ä»¥æ·»åŠ :1(master)|2(node)ï¼Œå¦‚(c1,stop2,shot_list1)&quot;</span>
<span class="token keyword">esac</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è„šæœ¬-first-sh" tabindex="-1"><a class="header-anchor" href="#è„šæœ¬-first-sh" aria-hidden="true">#</a> è„šæœ¬ï¼š<a href="#first.sh">first.sh</a></h3><h3 id="start-å-é€šè¿‡-å˜‰å®¾-set-ip1-bat-çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœº-ipã€hostname" tabindex="-1"><a class="header-anchor" href="#start-å-é€šè¿‡-å˜‰å®¾-set-ip1-bat-çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœº-ipã€hostname" aria-hidden="true">#</a> start åï¼Œé€šè¿‡ å˜‰å®¾ï¼ˆset_ip1.batï¼‰ çš„æ–¹å¼æ¥è®¾ç½®è™šæ‹Ÿæœºï¼ˆipã€hostnameï¼‰<a name="ä½¿ç”¨first.sh"></a></h3><p>è„šæœ¬ï¼š<a href="#first.sh">first.sh</a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>D:<span class="token punctuation">\</span>rj-win<span class="token punctuation">\</span>vm16<span class="token punctuation">\</span>vmrun.exe <span class="token parameter variable">-T</span> ws <span class="token parameter variable">-gu</span> root <span class="token parameter variable">-gp</span> 123456a runProgramInGuest <span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s\master-cluster\master-120\master-120.vmx&quot;</span> /bin/bash /root/first.sh <span class="token number">120</span> master-120
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="ä¸‰ã€" tabindex="-1"><a class="header-anchor" href="#ä¸‰ã€" aria-hidden="true">#</a> ä¸‰ã€</h2><h2 id="å››ã€" tabindex="-1"><a class="header-anchor" href="#å››ã€" aria-hidden="true">#</a> å››ã€</h2><h2 id="äº”ã€" tabindex="-1"><a class="header-anchor" href="#äº”ã€" aria-hidden="true">#</a> äº”ã€</h2><h2 id="å…­ã€" tabindex="-1"><a class="header-anchor" href="#å…­ã€" aria-hidden="true">#</a> å…­ã€</h2></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/topjf/topjf/edit/main/docs/tools/vagrant-vmware.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: topjfk@163.com">jinfang</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/tools/rsync.html" class="nav-link prev" aria-label="Linux æ•°æ®åŒæ­¥å·¥å…·"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-edit" style=""></span>Linux æ•°æ®åŒæ­¥å·¥å…·</div></a><!----></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2023 topjf</div></footer></div><!--]--><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-30d3d221.js" defer></script>
  </body>
</html>
