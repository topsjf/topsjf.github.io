<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://topjf.github.io/tools/vagrant-vmware.html"><meta property="og:site_name" content="topjf"><meta property="og:title" content="虚拟机批量处理vagrant_vmware"><meta property="og:description" content="一、安装 centos7.9 模板 安装：略略略略 步骤： 1. 查看当前系统版本 2. 设置sudo权限 3. 国内yum源 4. 升级内核 5. 关闭防火墙firewalld、关闭selinux 6. 配置网卡 7. 禁用该可预测命名规则 8. 重新生成GRUB配置并更新内核参数 1、查看当前系统版本 2、设置sudo权限 1、su root 2、..."><meta property="og:type" content="article"><meta property="og:image" content="https://topjf.github.io/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2022-12-16T06:02:03.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="虚拟机批量处理vagrant_vmware"><meta property="article:tag" content="vmware"><meta property="article:tag" content="vagrant_vmware"><meta property="article:published_time" content="2020-01-01T00:00:00.000Z"><meta property="article:modified_time" content="2022-12-16T06:02:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"虚拟机批量处理vagrant_vmware","image":["https://topjf.github.io/"],"datePublished":"2020-01-01T00:00:00.000Z","dateModified":"2022-12-16T06:02:03.000Z","author":[]}</script><script type="text/javascript" src="/script/demo.js"></script><link rel="stylesheet" href="/iconfont/iconfont.css"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>虚拟机批量处理vagrant_vmware | topjf</title><meta name="description" content="一、安装 centos7.9 模板 安装：略略略略 步骤： 1. 查看当前系统版本 2. 设置sudo权限 3. 国内yum源 4. 升级内核 5. 关闭防火墙firewalld、关闭selinux 6. 配置网卡 7. 禁用该可预测命名规则 8. 重新生成GRUB配置并更新内核参数 1、查看当前系统版本 2、设置sudo权限 1、su root 2、...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-41a36a5c.css" as="style"><link rel="stylesheet" href="/assets/style-41a36a5c.css">
    <link rel="modulepreload" href="/assets/app-30d3d221.js"><link rel="modulepreload" href="/assets/framework-ed4f969a.js"><link rel="modulepreload" href="/assets/vagrant-vmware.html-24072413.js"><link rel="modulepreload" href="/assets/vagrant-vmware.html-2879de18.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="topjf"><!----><span class="site-name hide-in-pad">topjf</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="首页"><span class="font-icon icon iconfont icon-home" style=""></span>首页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="快速导航"><span class="font-icon icon iconfont icon-arrow" style=""></span>快速导航<!----></a></div><div class="nav-item hide-in-mobile"><a href="/all/all.html" class="nav-link" aria-label="面试宝典"><span class="font-icon icon iconfont icon-overflow" style=""></span>面试宝典<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="个人中心"><span class="title"><span class="font-icon icon iconfont icon-anonymous" style=""></span>个人中心</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article" class="nav-link" aria-label="文章"><span class="font-icon icon iconfont icon-note" style=""></span>文章<!----></a></li><li class="dropdown-item"><a href="/category" class="nav-link" aria-label="分类"><span class="font-icon icon iconfont icon-categoryselected" style=""></span>分类<!----></a></li><li class="dropdown-item"><a href="/tag" class="nav-link" aria-label="标签"><span class="font-icon icon iconfont icon-list" style=""></span>标签<!----></a></li><li class="dropdown-item"><a href="/encrypted" class="nav-link" aria-label="加密文章"><span class="font-icon icon iconfont icon-command" style=""></span>加密文章<!----></a></li><li class="dropdown-item"><a href="/star" class="nav-link" aria-label="收藏文章"><span class="font-icon icon iconfont icon-like" style=""></span>收藏文章<!----></a></li><li class="dropdown-item"><a href="/timeline" class="nav-link" aria-label="时间线"><span class="font-icon icon iconfont icon-time" style=""></span>时间线<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="网站相关"><span class="title"><span class="font-icon icon iconfont icon-info" style=""></span>网站相关</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/about/about-this.html" class="nav-link" aria-label="关于本站"><span class="font-icon icon iconfont icon-people" style=""></span>关于本站<!----></a></li><li class="dropdown-item"><a href="/history/history.html" class="nav-link" aria-label="网站历史"><span class="font-icon icon iconfont icon-time" style=""></span>网站历史<!----></a></li><li class="dropdown-item"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress Theme Hope 文档" class="nav-link"><span class="font-icon icon iconfont icon-creative" style=""></span>VuePress Theme Hope 文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/topjf/topjf" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="搜索"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/tools/java.html" class="nav-link sidebar-link sidebar-page" aria-label="jdk安装与配置"><span class="font-icon icon iconfont icon-edit" style=""></span>jdk安装与配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/maven.html" class="nav-link sidebar-link sidebar-page" aria-label="maven管理"><span class="font-icon icon iconfont icon-edit" style=""></span>maven管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/gradle.html" class="nav-link sidebar-link sidebar-page" aria-label="gradle管理"><span class="font-icon icon iconfont icon-edit" style=""></span>gradle管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/idea.html" class="nav-link sidebar-link sidebar-page" aria-label="idea"><span class="font-icon icon iconfont icon-edit" style=""></span>idea<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/eclipse.html" class="nav-link sidebar-link sidebar-page" aria-label="eclipse"><span class="font-icon icon iconfont icon-edit" style=""></span>eclipse<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/nodejs-setting.html" class="nav-link sidebar-link sidebar-page" aria-label="nodejs配置"><span class="font-icon icon iconfont icon-edit" style=""></span>nodejs配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/rsync.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux 数据同步工具"><span class="font-icon icon iconfont icon-edit" style=""></span>Linux 数据同步工具<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/tools/vagrant-vmware.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="虚拟机批量处理vagrant_vmware"><span class="font-icon icon iconfont icon-edit" style=""></span>虚拟机批量处理vagrant_vmware<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#一、安装-centos7-9-模板" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="一、安装 centos7.9 模板"><!---->一、安装 centos7.9 模板<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#步骤" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="步骤："><!---->步骤：<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_1、查看当前系统版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、查看当前系统版本"><!---->1、查看当前系统版本<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_2、设置sudo权限" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、设置sudo权限"><!---->2、设置sudo权限<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_3、国内yum源-使用华为" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、国内yum源（使用华为）"><!---->3、国内yum源（使用华为）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-base-repo" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="CentOS-Base.repo"><!---->CentOS-Base.repo<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#elrepo-repo" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="elrepo.repo"><!---->elrepo.repo<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_4、升级内核、并删除当前无用的系统内核版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、升级内核、并删除当前无用的系统内核版本"><!---->4、升级内核、并删除当前无用的系统内核版本<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-内核升级" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="centos 内核升级"><!---->centos 内核升级<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#并删除当前无用的系统内核版本" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="并删除当前无用的系统内核版本"><!---->并删除当前无用的系统内核版本<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠"><!---->5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_6、配置网卡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、配置网卡"><!---->6、配置网卡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_7、编写后期需要的脚本-vim-root-first-sh" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、编写后期需要的脚本：vim /root/first.sh"><!---->7、编写后期需要的脚本：vim /root/first.sh<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_8、禁用-grub-规则" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8、禁用 grub 规则"><!---->8、禁用 grub 规则<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_9、安装对window格式的-sh-脚本转码-dos2unix" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9、安装对window格式的 sh 脚本转码 dos2unix"><!---->9、安装对window格式的 sh 脚本转码 dos2unix<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#二、vagrant" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="二、Vagrant"><!---->二、Vagrant<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_1、centos7-9-基本配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、centos7.9 基本配置"><!---->1、centos7.9 基本配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_2、vagrantfile-文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、Vagrantfile 文件"><!---->2、Vagrantfile 文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#_3、" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、"><!---->3、<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#vagrant-box-打包" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Vagrant Box 打包"><!---->Vagrant Box 打包<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#权限配置公钥" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="权限配置公钥"><!---->权限配置公钥<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#配置网卡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="配置网卡"><!---->配置网卡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#打包box" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="打包BOX"><!---->打包BOX<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#二、vmrun" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="二、vmrun"><!---->二、vmrun<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#格式-vmrun-身份验证标志-命令-参数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="格式：vmrun [身份验证标志] 命令 [参数]"><!---->格式：vmrun [身份验证标志] 命令 [参数]<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#示例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="示例"><!---->示例<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#步骤-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="步骤"><!---->步骤<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#脚本-auto-vm-sh" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="脚本：auto_VM.sh"><!---->脚本：auto_VM.sh<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#脚本-first-sh" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="脚本：first.sh"><!---->脚本：first.sh<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#start-后-通过-嘉宾-set-ip1-bat-的方式来设置虚拟机-ip、hostname" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="start 后，通过 嘉宾（set_ip1.bat） 的方式来设置虚拟机（ip、hostname）"><!---->start 后，通过 嘉宾（set_ip1.bat） 的方式来设置虚拟机（ip、hostname）<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#三、" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="三、"><!---->三、<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#四、" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="四、"><!---->四、<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#五、" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="五、"><!---->五、<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/tools/vagrant-vmware.html#六、" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="六、"><!---->六、<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-database" style=""></span><span class="title">数据库管理工具</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/tools/database/CHINER.html" class="nav-link sidebar-link sidebar-page" aria-label="CHINER数据库建模工具"><span class="font-icon icon iconfont icon-edit" style=""></span>CHINER数据库建模工具<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/database/datagrip.html" class="nav-link sidebar-link sidebar-page" aria-label="datagrip数据库管理"><span class="font-icon icon iconfont icon-edit" style=""></span>datagrip数据库管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/database/DBeaver.html" class="nav-link sidebar-link sidebar-page" aria-label="DBeaver数据库管理"><span class="font-icon icon iconfont icon-edit" style=""></span>DBeaver数据库管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/database/screw.html" class="nav-link sidebar-link sidebar-page" aria-label="screw一键生成数据库文档"><span class="font-icon icon iconfont icon-edit" style=""></span>screw一键生成数据库文档<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-git" style=""></span><span class="title">Git</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/tools/git/git-intro.html" class="nav-link sidebar-link sidebar-page" aria-label="Git 入门"><span class="font-icon icon iconfont icon-edit" style=""></span>Git 入门<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/github-tips.html" class="nav-link sidebar-link sidebar-page" aria-label="Github 小技巧"><span class="font-icon icon iconfont icon-edit" style=""></span>Github 小技巧<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/deploy-gh-pages.html" class="nav-link sidebar-link sidebar-page" aria-label="Github 自动部署WEB项目"><span class="font-icon icon iconfont icon-edit" style=""></span>Github 自动部署WEB项目<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/gitlab.html" class="nav-link sidebar-link sidebar-page" aria-label="gitlab仓库管理"><span class="font-icon icon iconfont icon-edit" style=""></span>gitlab仓库管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/tools/git/git-setting.html" class="nav-link sidebar-link sidebar-page" aria-label="git配置"><span class="font-icon icon iconfont icon-edit" style=""></span>git配置<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-edit" style=""></span>虚拟机批量处理vagrant_vmware</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/article" target="_blank" rel="noopener noreferrer">topjf</a></span><span property="author" content="topjf"></span></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category8 clickable" role="navigation">开发工具</span><meta property="articleSection" content="开发工具"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag0 clickable" role="navigation">vmware</span><span class="page-tag-item tag0 clickable" role="navigation">vagrant_vmware</span><meta property="keywords" content="vmware,vagrant_vmware"></span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-01-01T00:00:00.000Z"></span><!----><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 7441 字</span><meta property="wordCount" content="7441"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 25 分钟</span><meta property="timeRequired" content="PT25M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#一、安装-centos7-9-模板" class="router-link-active router-link-exact-active toc-link level2">一、安装 centos7.9 模板</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#步骤" class="router-link-active router-link-exact-active toc-link level2">步骤：</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_1、查看当前系统版本" class="router-link-active router-link-exact-active toc-link level2">1、查看当前系统版本</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_2、设置sudo权限" class="router-link-active router-link-exact-active toc-link level2">2、设置sudo权限</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_3、国内yum源-使用华为" class="router-link-active router-link-exact-active toc-link level2">3、国内yum源（使用华为）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-base-repo" class="router-link-active router-link-exact-active toc-link level3">CentOS-Base.repo</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#elrepo-repo" class="router-link-active router-link-exact-active toc-link level3">elrepo.repo</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_4、升级内核、并删除当前无用的系统内核版本" class="router-link-active router-link-exact-active toc-link level2">4、升级内核、并删除当前无用的系统内核版本</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#centos-内核升级" class="router-link-active router-link-exact-active toc-link level3">centos 内核升级</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#并删除当前无用的系统内核版本" class="router-link-active router-link-exact-active toc-link level3">并删除当前无用的系统内核版本</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠" class="router-link-active router-link-exact-active toc-link level2">5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_6、配置网卡" class="router-link-active router-link-exact-active toc-link level2">6、配置网卡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_7、编写后期需要的脚本-vim-root-first-sh" class="router-link-active router-link-exact-active toc-link level2">7、编写后期需要的脚本：vim /root/first.sh</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_8、禁用-grub-规则" class="router-link-active router-link-exact-active toc-link level2">8、禁用 grub 规则</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_9、安装对window格式的-sh-脚本转码-dos2unix" class="router-link-active router-link-exact-active toc-link level2">9、安装对window格式的 sh 脚本转码 dos2unix</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#二、vagrant" class="router-link-active router-link-exact-active toc-link level2">二、Vagrant</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_1、centos7-9-基本配置" class="router-link-active router-link-exact-active toc-link level3">1、centos7.9 基本配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_2、vagrantfile-文件" class="router-link-active router-link-exact-active toc-link level3">2、Vagrantfile 文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#_3、" class="router-link-active router-link-exact-active toc-link level3">3、</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#vagrant-box-打包" class="router-link-active router-link-exact-active toc-link level3">Vagrant Box 打包</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#权限配置公钥" class="router-link-active router-link-exact-active toc-link level3">权限配置公钥</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#配置网卡" class="router-link-active router-link-exact-active toc-link level3">配置网卡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#打包box" class="router-link-active router-link-exact-active toc-link level3">打包BOX</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#二、vmrun" class="router-link-active router-link-exact-active toc-link level2">二、vmrun</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#格式-vmrun-身份验证标志-命令-参数" class="router-link-active router-link-exact-active toc-link level3">格式：vmrun [身份验证标志] 命令 [参数]</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#示例" class="router-link-active router-link-exact-active toc-link level3">示例</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#步骤-1" class="router-link-active router-link-exact-active toc-link level3">步骤</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#脚本-auto-vm-sh" class="router-link-active router-link-exact-active toc-link level3">脚本：auto_VM.sh</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#脚本-first-sh" class="router-link-active router-link-exact-active toc-link level3">脚本：first.sh</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#start-后-通过-嘉宾-set-ip1-bat-的方式来设置虚拟机-ip、hostname" class="router-link-active router-link-exact-active toc-link level3">start 后，通过 嘉宾（set_ip1.bat） 的方式来设置虚拟机（ip、hostname）</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#三、" class="router-link-active router-link-exact-active toc-link level2">三、</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#四、" class="router-link-active router-link-exact-active toc-link level2">四、</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#五、" class="router-link-active router-link-exact-active toc-link level2">五、</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/tools/vagrant-vmware.html#六、" class="router-link-active router-link-exact-active toc-link level2">六、</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!-- more --><h2 id="一、安装-centos7-9-模板" tabindex="-1"><a class="header-anchor" href="#一、安装-centos7-9-模板" aria-hidden="true">#</a> 一、安装 centos7.9 模板</h2><p><em>安装：略略略略</em></p><h2 id="步骤" tabindex="-1"><a class="header-anchor" href="#步骤" aria-hidden="true">#</a> 步骤：</h2><ol><li>查看当前系统版本</li><li>设置sudo权限</li><li>国内yum源</li><li>升级内核</li><li>关闭防火墙firewalld、关闭selinux</li><li>配置网卡</li><li>禁用该可预测命名规则</li><li>重新生成GRUB配置并更新内核参数</li></ol><h2 id="_1、查看当前系统版本" tabindex="-1"><a class="header-anchor" href="#_1、查看当前系统版本" aria-hidden="true">#</a> 1、查看当前系统版本</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># cat /etc/redhat-release</span>
CentOS Linux release <span class="token number">7.9</span>.2009 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2、设置sudo权限" tabindex="-1"><a class="header-anchor" href="#_2、设置sudo权限" aria-hidden="true">#</a> 2、设置sudo权限</h2><p>1、su root</p><p>2、chmod u+w /etc/sudoers</p><p>3、vim /etc/sudoers</p><blockquote><p>root ALL=(ALL) ALL</p><p>a ALL=(ALL) ALL</p></blockquote><p>4、撤销sudoers文件写权限，命令：</p><p>chmod u-w /etc/sudoers</p><p>5、切换用户 su a</p><h2 id="_3、国内yum源-使用华为" tabindex="-1"><a class="header-anchor" href="#_3、国内yum源-使用华为" aria-hidden="true">#</a> 3、国内yum源（使用华为）</h2><p><a href="https://developer.aliyun.com/mirror/?spm=a2c6h.13651102.0.0.44e61b11ewNwcu&amp;serviceType=mirror&amp;tag=%E7%B3%BB%E7%BB%9F" target="_blank" rel="noopener noreferrer">阿里镜像站<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://mirrors.huaweicloud.com/home" target="_blank" rel="noopener noreferrer">华为镜像站<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="centos-base-repo" tabindex="-1"><a class="header-anchor" href="#centos-base-repo" aria-hidden="true">#</a> CentOS-Base.repo</h3><h4 id="centos7" tabindex="-1"><a class="header-anchor" href="#centos7" aria-hidden="true">#</a> centos7</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 备份</span>
<span class="token function">mv</span> /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
<span class="token comment"># 配置下载</span>
<span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/CentOS-Base-huawei.repo https://repo.huaweicloud.com/repository/conf/CentOS-7-reg.repo

yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum <span class="token parameter variable">-y</span> update <span class="token operator">&amp;&amp;</span> yum repolist all

-----------------------------------CentOS-Base.repo--------------------------------------
<span class="token punctuation">[</span>base<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Base - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/os/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#发布更新</span>
<span class="token punctuation">[</span>updates<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Updates - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/updates/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#可能有用的附加软件包</span>
<span class="token punctuation">[</span>extras<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Extras - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/extras/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

<span class="token comment">#扩展现有软件包功能的附加软件包</span>
<span class="token punctuation">[</span>centosplus<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Plus - repo.huaweicloud.com
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/<span class="token variable">$releasever</span>/centosplus/<span class="token variable">$basearch</span>/
<span class="token comment">#mirrorlist=https://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://repo.huaweicloud.com/centos/RPM-GPG-KEY-CentOS-7

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
<span class="token comment"># 阿里</span>
<span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">curl</span> <span class="token parameter variable">-o</span> /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">wget</span> http://mirrors.aliyun.com/repo/Centos-7.repo
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;/mirrors.cloud.aliyuncs.com/d&#39;</span> <span class="token parameter variable">-e</span> <span class="token string">&#39;/mirrors.aliyuncs.com/d&#39;</span> /etc/yum.repos.d/CentOS-Base.repo

yum clean all <span class="token operator">&amp;&amp;</span> yum makecache <span class="token operator">&amp;&amp;</span> yum <span class="token parameter variable">-y</span> update <span class="token operator">&amp;&amp;</span> yum repolist all
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ubuntu" tabindex="-1"><a class="header-anchor" href="#ubuntu" aria-hidden="true">#</a> ubuntu</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>华为：
<span class="token function">cp</span> <span class="token parameter variable">-a</span> /etc/apt/sources.list /etc/apt/sources.list.bak

将http://archive.ubuntu.com和http://security.ubuntu.com替换成http://repo.huaweicloud.com，可以参考如下命令：
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s@http://.*archive.ubuntu.com@http://repo.huaweicloud.com@g&quot;</span> /etc/apt/sources.list
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s@http://.*security.ubuntu.com@http://repo.huaweicloud.com@g&quot;</span> /etc/apt/sources.list

执行 yum update 更新索引
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
阿里：
替换默认的http://archive.ubuntu.com/为mirrors.aliyun.com

deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse

<span class="token comment"># deb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span>
<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span>

deb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse

执行 yum update 更新索引
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="elrepo-repo" tabindex="-1"><a class="header-anchor" href="#elrepo-repo" aria-hidden="true">#</a> elrepo.repo</h3><h4 id="华为" tabindex="-1"><a class="header-anchor" href="#华为" aria-hidden="true">#</a> 华为</h4><p><a href="https://mirrors.huaweicloud.com/home" target="_blank" rel="noopener noreferrer">https://mirrors.huaweicloud.com/home<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 搜索 epel</p><p>1 查看：yum list | grep epel-release</p><p>=== epel-release.noarch 7-11 extras</p><p>2 安装：yum install -y epel-release yum remove -y epel-release</p><p>3 替换：</p><p>rm -rf /etc/yum.repos.d/epel-testing.repo（不需要这个文件！）</p><blockquote><p>sed -i &quot;s/#baseurl/baseurl/g&quot; /etc/yum.repos.d/epel.repo</p><p>sed -i &quot;s/metalink/#metalink/g&quot; /etc/yum.repos.d/epel.repo</p><p>sed -i &quot;s@https?😕/download.fedoraproject.org/pub@<a href="https://repo.huaweicloud.com@g" target="_blank" rel="noopener noreferrer">https://repo.huaweicloud.com@g<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>&quot; /etc/yum.repos.d/epel.repo</p></blockquote><p>4 执行 yum -y clean all &amp;&amp; yum -y makecache &amp;&amp; yum -y update &amp;&amp; yum repolist all</p><h5>epel.repo</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>epel<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span>
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/<span class="token variable">$basearch</span>
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7

<span class="token punctuation">[</span>epel-debuginfo<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span> - Debug
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/<span class="token variable">$basearch</span>/debug
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-debug-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>

<span class="token punctuation">[</span>epel-source<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span> - Source
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://repo.huaweicloud.com/epel/7/SRPMS
<span class="token comment">#metalink=https://mirrors.fedoraproject.org/#metalink?repo=epel-source-7&amp;arch=$basearch</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5>epel.repo.rpmnew 自动生成</h5><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>epel<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">7</span> - <span class="token variable">$basearch</span>
<span class="token comment"># 使用metalink更安全，但如果你想使用本地镜像</span>
<span class="token comment"># 把它的地址放在这里。</span>
<span class="token comment">#baseurl=http://download.example/pub/epel/7/$basearch</span>
<span class="token assign-left variable">metalink</span><span class="token operator">=</span>https://mirrors.fedoraproject.org/metalink?repo<span class="token operator">=</span>epel-7<span class="token operator">&amp;</span><span class="token assign-left variable">arch</span><span class="token operator">=</span><span class="token variable">$basearch</span><span class="token operator">&amp;</span><span class="token assign-left variable">infra</span><span class="token operator">=</span><span class="token variable">$infra</span><span class="token operator">&amp;</span><span class="token assign-left variable">content</span><span class="token operator">=</span><span class="token variable">$contentdir</span>
<span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="阿里" tabindex="-1"><a class="header-anchor" href="#阿里" aria-hidden="true">#</a> 阿里</h4><p><a href="https://developer.aliyun.com/mirror/epel" target="_blank" rel="noopener noreferrer">https://developer.aliyun.com/mirror/epel<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>1 查看：yum list | grep epel-release</p><p>=== epel-release.noarch 7-11 extras</p><p>2 安装：yum install -y epel-release</p><blockquote><p>mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.backup</p><p>mv /etc/yum.repos.d/epel-testing.repo /etc/yum.repos.d/epel-testing.repo.backup</p></blockquote><p>3 wget -O /etc/yum.repos.d/epel.repo <a href="http://mirrors.aliyun.com/repo/epel-7.repo" target="_blank" rel="noopener noreferrer">http://mirrors.aliyun.com/repo/epel-7.repo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_4、升级内核、并删除当前无用的系统内核版本" tabindex="-1"><a class="header-anchor" href="#_4、升级内核、并删除当前无用的系统内核版本" aria-hidden="true">#</a> 4、升级内核、并删除当前无用的系统内核版本</h2><p><a href="https://kernel.org/" target="_blank" rel="noopener noreferrer">https://kernel.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><table><thead><tr><th>mainline:</th><th><strong>5.18-rc6</strong></th><th>2022-05-08</th><th>[<a href="https://git.kernel.org/torvalds/t/linux-5.18-rc6.tar.gz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th></th><th>[<a href="https://git.kernel.org/torvalds/p/v5.18-rc6/v5.17" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th>[<a href="https://git.kernel.org/torvalds/p/v5.18-rc6/v5.18-rc5" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th>[<a href="https://git.kernel.org/torvalds/ds/v5.18-rc6/v5.18-rc5" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th>[<a href="https://git.kernel.org/torvalds/h/v5.18-rc6" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</th><th></th></tr></thead><tbody><tr><td>stable:</td><td><strong>5.17.6</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.17.6.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.17.6.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.17.6.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.17.5-6.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.17.6/v5.17.5" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.17.6" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.17.6" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>stable:</td><td><strong>5.16.20 [EOL]</strong></td><td>2022-04-13</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.20.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.16.20.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.16.20.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.16.19-20.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.16.20/v5.16.19" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.16.20" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.16.20" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>longterm:</td><td><strong>5.15.38</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.38.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.15.38.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.15.38.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.15.37-38.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.15.38/v5.15.37" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.15.38" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.15.38" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>longterm:</td><td><strong>5.10.114</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.114.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.10.114.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.10.114.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.10.113-114.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.10.114/v5.10.113" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.10.114" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.10.114" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr><tr><td>longterm:</td><td><strong>5.4.192</strong></td><td>2022-05-09</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.4.192.tar.xz" target="_blank" rel="noopener noreferrer">tarball<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/linux-5.4.192.tar.sign" target="_blank" rel="noopener noreferrer">pgp<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/patch-5.4.192.xz" target="_blank" rel="noopener noreferrer">patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/incr/patch-5.4.191-192.xz" target="_blank" rel="noopener noreferrer">inc. patch<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/ds/v5.4.192/v5.4.191" target="_blank" rel="noopener noreferrer">view diff<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://git.kernel.org/stable/h/v5.4.192" target="_blank" rel="noopener noreferrer">browse<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td><td>[<a href="https://cdn.kernel.org/pub/linux/kernel/v5.x/ChangeLog-5.4.192" target="_blank" rel="noopener noreferrer">changelog<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>]</td></tr></tbody></table><h3 id="centos-内核升级" tabindex="-1"><a class="header-anchor" href="#centos-内核升级" aria-hidden="true">#</a> centos 内核升级</h3><p><a href="http://www.elrepo.org/" target="_blank" rel="noopener noreferrer">http://www.elrepo.org/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 导入该源的秘钥</span>
<span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://www.elrepo.org/RPM-GPG-KEY-elrepo.org
<span class="token comment"># 启用该源仓库</span>
<span class="token function">rpm</span> <span class="token parameter variable">-Uvh</span> http://www.elrepo.org/elrepo-release-7.0-6.el7.elrepo.noarch.rpm
或者：
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> https://www.elrepo.org/elrepo-release-7.el7.elrepo.noarch.rpm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看可升级的内核版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">--disablerepo</span><span class="token operator">=</span><span class="token string">&quot;*&quot;</span> <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span><span class="token string">&quot;elrepo-kernel&quot;</span> list available
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可安装的软件包</p><p>kernel-lt.x86_64 5.4.211-1.el7.elrepo elrepo-kernel</p><p>kernel-ml.x86_64 5.19.4-1.el7.elrepo elrepo-kernel</p><p>安装内核</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span>elrepo-kernel <span class="token function">install</span> <span class="token parameter variable">-y</span> kernel-lt-5.4.211-1.el7.elrepo
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看当前系统内可用内核</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">awk</span> -F<span class="token punctuation">\</span>&#39; <span class="token string">&#39;$1==&quot;menuentry &quot; {print i++ &quot; : &quot; $2}&#39;</span> /etc/grub2.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>设置开机从新内核版本启动（其中 0 是上面查询出来的可用内核编号）</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>grub2-set-default <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">reboot</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="并删除当前无用的系统内核版本" tabindex="-1"><a class="header-anchor" href="#并删除当前无用的系统内核版本" aria-hidden="true">#</a> 并删除当前无用的系统内核版本</h3><p>所有已安装的内核版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep kernel</span>

kernel-tools-libs-3.10.0-1160.76.1.el7.x86_64
kernel-3.10.0-1160.76.1.el7.x86_64
kernel-headers-3.10.0-1160.76.1.el7.x86_64
kernel-devel-3.10.0-1160.el7.x86_64
kernel-tools-3.10.0-1160.76.1.el7.x86_64
kernel-devel-3.10.0-1160.76.1.el7.x86_64
kernel-lt-5.4.211-1.el7.elrepo.x86_64
kernel-3.10.0-1160.el7.x86_64
abrt-addon-kerneloops-2.1.11-60.el7.centos.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当前使用的内核版本</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">5.4</span>.192-1.el7.elrepo.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>删除</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum remove <span class="token parameter variable">-y</span> kernel-3.10.0-1160.el7.x86_64 kernel-3.10.0-1160.76.1.el7.x86_64
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum remove <span class="token variable"><span class="token variable">$(</span><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> kernel <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token punctuation">$(</span>uname -r<span class="token punctuation">)</span><span class="token variable">)</span></span>

<span class="token comment"># 卸载后重新安装</span>
yum <span class="token parameter variable">--enablerepo</span><span class="token operator">=</span>elrepo-kernel <span class="token function">install</span> <span class="token parameter variable">-y</span> kernel-lt-devel-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-doc-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-headers-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-tools-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-tools-libs-5.4.211-1.el7.elrepo <span class="token punctuation">\</span>
kernel-lt-tools-libs-devel-5.4.211-1.el7.elrepo

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># rpm -qa | grep kernel</span>
kernel-lt-doc-5.4.211-1.el7.elrepo.noarch
kernel-lt-tools-5.4.211-1.el7.elrepo.x86_64
kernel-lt-devel-5.4.211-1.el7.elrepo.x86_64
kernel-lt-5.4.211-1.el7.elrepo.x86_64
kernel-lt-tools-libs-5.4.211-1.el7.elrepo.x86_64
kernel-lt-headers-5.4.211-1.el7.elrepo.x86_64
kernel-lt-tools-libs-devel-5.4.211-1.el7.elrepo.x86_64


yum <span class="token function">install</span> <span class="token parameter variable">-y</span> gcc <span class="token function">make</span> ncurses-devel openssl-devel flex bison  elfutils-libelf-devel
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠" tabindex="-1"><a class="header-anchor" href="#_5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠" aria-hidden="true">#</a> 5、关闭防火墙firewalld、关闭selinux、关闭swap、确保不休眠</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 1、 关闭防火墙</span>
<span class="token comment">## centos</span>
systemctl start firewalld		systemctl stop firewalld
systemctl <span class="token builtin class-name">enable</span> firewalld		systemctl disable firewalld
systemctl status firewalld
<span class="token comment">## ubuntu</span>
systemctl disable ufw.service <span class="token operator">&amp;&amp;</span> systemctl stop ufw.service
ufw start		ufw stop 	
ufw <span class="token builtin class-name">enable</span>		ufw disable 	
ufw status

<span class="token comment"># 2、 关闭selinux</span>
setenforce <span class="token number">0</span> <span class="token comment"># 临时关闭 </span>
<span class="token comment"># 永久关闭/etc/selinux/semanage.conf</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/enforcing/disabled/&#39;</span> /etc/selinux/config
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&#39;s/^SELINUX=enforcing$/SELINUX=permissive/&#39;</span> /etc/selinux/config
<span class="token comment"># 查看SELinux的状态</span>
getenforce

<span class="token comment"># 3、关闭 swap</span>
swapoff <span class="token parameter variable">-a</span>  <span class="token comment">#临时关闭</span>
<span class="token comment">#永久关闭</span>
<span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&#39;s/.*swap.*/#&amp;/&#39;</span> /etc/fstab

<span class="token comment"># 4、确保不休眠</span>
systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6、配置网卡" tabindex="-1"><a class="header-anchor" href="#_6、配置网卡" aria-hidden="true">#</a> 6、配置网卡</h2><p>vim /etc/sysconfig/network-scripts/ifcfg-ens33</p><p>生产 UUID： uuidgen ens33</p><p>ls -l /dev/disk/by-uuid</p><p>查看 UUID： nmcli con | sed -n &#39;1,2p&#39;</p><p>BOOTPROTO：</p><blockquote><p>dhcp 表示使用动态IP，dhcp 动态IP地址是自行生成。</p><p>none 无（不指定）通常是DHCP</p><p>static 要自己自行指定IP地址</p><p>bootp</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">&quot;Ethernet&quot;</span>
<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span><span class="token string">&quot;none&quot;</span>
<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">&quot;static&quot;</span>
<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_PRIVACY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span><span class="token string">&quot;stable-privacy&quot;</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;ccb173d2-9470-4fc3-b894-cce7029f0455&quot;</span>
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">ETHTOOL_OPTS</span><span class="token operator">=</span><span class="token string">&quot;autoneg off speed 10000 duplex full&quot;</span>
<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.119&quot;</span>
<span class="token comment"># PREFIX=&quot;24&quot;</span>
<span class="token assign-left variable">NETMASK</span><span class="token operator">=</span><span class="token string">&quot;255.255.255.0&quot;</span>
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.1&quot;</span>
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token string">&quot;192.168.1.1&quot;</span>
<span class="token assign-left variable">DNS2</span><span class="token operator">=</span><span class="token string">&quot;192.168.101.1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">&quot;Ethernet&quot;</span>
<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span><span class="token string">&quot;none&quot;</span>
<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">&quot;dhcp&quot;</span>
<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span><span class="token string">&quot;stable-privacy&quot;</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;5ed15a21-bf0f-4b2a-a40a-33a07afb6560&quot;</span>
<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">&quot;ens33&quot;</span>
<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">&quot;yes&quot;</span>
<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token string">&quot;192.168.100.130&quot;</span>
<span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token string">&quot;24&quot;</span>
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token string">&quot;192.168.100.2&quot;</span>
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token string">&quot;192.168.100.2&quot;</span>
<span class="token assign-left variable">IPV6_PRIVACY</span><span class="token operator">=</span><span class="token string">&quot;no&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>/etc/hosts</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> <span class="token function">tee</span> /etc/hosts</span>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.100.130 master
192.168.100.131 node1
192.168.100.132 node2
192.168.100.133 node3
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>systemctl start network.service systemctl stop network.service</p><p>systemctl restart network.service systemctl status network.service</p><p>netplan apply</p><h2 id="_7、编写后期需要的脚本-vim-root-first-sh" tabindex="-1"><a class="header-anchor" href="#_7、编写后期需要的脚本-vim-root-first-sh" aria-hidden="true">#</a> 7、编写后期需要的脚本：vim /root/first.sh<a name="first.sh"></a></h2><p>具体使用地址：<a href="#%E4%BD%BF%E7%94%A8first.sh">使用first.sh</a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 复制到 vm-centos 虚拟机 /root/first.sh 里，配合 auto_VM.sh 使用</span>

<span class="token assign-left variable">ip</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token assign-left variable">hostname</span><span class="token operator">=</span><span class="token variable">$2</span>

<span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token entity" title="\n">\n</span>----------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token builtin class-name">echo</span> <span class="token string">&quot;请求参数：IP：<span class="token variable">${ip}</span>，HostName：<span class="token variable">${hostname}</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-ne</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">then</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;sh <span class="token variable">$0</span> ip hostname&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token keyword">fi</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;ccb173d2-9470-4fc3-b894-cce7029f0455&quot;</span>
<span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span>uuidgen ens33<span class="token variable">)</span></span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;new UUID=<span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${UUID}</span><span class="token entity" title="\&quot;">\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log


<span class="token keyword">function</span> <span class="token function-name function">set_ip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment"># 设置IP</span>
  <span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&quot;/IPADDR/s#(.*.)\..*#<span class="token entity" title="\1">\1</span>.<span class="token variable">${ip}</span><span class="token entity" title="\&quot;">\&quot;</span>#&quot;</span> /etc/sysconfig/network-scripts/ifcfg-ens33
<span class="token comment"># 设置UUID</span>
  <span class="token function">sed</span> <span class="token parameter variable">-ri</span> <span class="token string">&quot;s/UUID=.*/UUID=<span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${UUID}</span><span class="token entity" title="\&quot;">\&quot;</span>/&quot;</span> /etc/sysconfig/network-scripts/ifcfg-ens33
  
<span class="token comment"># 设置hosts  </span>
<span class="token function">cat</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> <span class="token function">tee</span> /etc/hosts <span class="token operator">&gt;&gt;</span> main.log</span>
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.100.130 master
192.168.100.131 node1
192.168.100.132 node2
192.168.100.133 node3
EOF</span>
  
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------------------------------------&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token comment"># （sed -n &#39;3,100p）读取文件的3-100行</span>
  <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;cat /etc/hosts<span class="token entity" title="\n">\n</span><span class="token variable"><span class="token variable">$(</span><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">&#39;3,100p&#39;</span> /etc/hosts<span class="token variable">)</span></span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;wait for systemctl restart network.service ...&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  systemctl restart network.service
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;new IPADDR is : <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span> <span class="token parameter variable">-I</span><span class="token variable">)</span></span><span class="token entity" title="\&quot;">\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function-name function">set_hostname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">&quot;s#.*#<span class="token variable">${hostname}</span>#&quot;</span> /etc/hostname
  hostnamectl set-hostname <span class="token variable">${hostname}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;new hostname is : <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /etc/hostname<span class="token variable">)</span></span><span class="token entity" title="\&quot;">\&quot;</span>&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;==============================================&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>

<span class="token function-name function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  set_hostname
  <span class="token function">sleep</span> <span class="token number">3</span>
  set_ip
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; set_ip &amp; set_hostnameok OK!!  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span> <span class="token operator">&gt;&gt;</span> main.log
<span class="token punctuation">}</span>

main
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上传到模板镜像的<code>/root/</code> 目录下</p><p>赋予权限：<code>chmod +x /root/first.sh</code></p><h2 id="_8、禁用-grub-规则" tabindex="-1"><a class="header-anchor" href="#_8、禁用-grub-规则" aria-hidden="true">#</a> 8、禁用 grub 规则</h2><p>#在 grub 文件里面的 GRUB_CMDLINE_LINUX 变量添加 net.ifnames=0 biosdevname=0</p><p><strong>原来配置的网卡ip会生效：/etc/sysconfig/network-scripts/ifcfg-ens33</strong>，所以我不需要这里</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/default/grub</span>
<span class="token punctuation">..</span>.
<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet&quot;</span>
<span class="token comment"># 换为：</span>
<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">&quot;crashkernel=auto rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet net.ifnames=0 biosdevname=0&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新生成GRUB配置并更新内核参数</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># grub2-mkconfig -o /boot/grub2/grub.cfg</span>
Generating grub configuration <span class="token function">file</span> <span class="token punctuation">..</span>.
Found linux image: /boot/vmlinuz-3.10.0-327.el7.x86_64
Found initrd image: /boot/initramfs-3.10.0-327.el7.x86_64.img
。。。。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9、安装对window格式的-sh-脚本转码-dos2unix" tabindex="-1"><a class="header-anchor" href="#_9、安装对window格式的-sh-脚本转码-dos2unix" aria-hidden="true">#</a> 9、安装对window格式的 sh 脚本转码 dos2unix</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># yum install -y dos2unix</span>
已加载插件：fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * elrepo: hkg.mirror.rackspace.com
 
<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># ls</span>
anaconda-ks.cfg  first.sh  get_UUID.sh

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># dos2unix first.sh</span>
dos2unix: converting <span class="token function">file</span> first.sh to Unix <span class="token function">format</span> <span class="token punctuation">..</span>.

<span class="token punctuation">[</span>root@master ~<span class="token punctuation">]</span><span class="token comment"># sh first.sh 129 master0</span>
new <span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">&quot;eddedb45-b871-4eea-8433-4c08103423e1&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、vagrant" tabindex="-1"><a class="header-anchor" href="#二、vagrant" aria-hidden="true">#</a> 二、Vagrant</h2><h3 id="_1、centos7-9-基本配置" tabindex="-1"><a class="header-anchor" href="#_1、centos7-9-基本配置" aria-hidden="true">#</a> 1、centos7.9 基本配置</h3><h3 id="_2、vagrantfile-文件" tabindex="-1"><a class="header-anchor" href="#_2、vagrantfile-文件" aria-hidden="true">#</a> 2、Vagrantfile 文件</h3><h4 id="vagrant-virtualbox" tabindex="-1"><a class="header-anchor" href="#vagrant-virtualbox" aria-hidden="true">#</a> Vagrant + VirtualBox</h4><p>安装 VirtualBox ：<a href="https://download.virtualbox.org/virtualbox/6.1.34/VirtualBox-6.1.34-150636-Win.exe" target="_blank" rel="noopener noreferrer">https://download.virtualbox.org/virtualbox/6.1.34/VirtualBox-6.1.34-150636-Win.exe<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>下载 vagrantfile：<a href="https://releases.hashicorp.com/vagrant/2.2.19/" target="_blank" rel="noopener noreferrer">https://releases.hashicorp.com/vagrant/2.2.19/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>查找下载centos7：<a href="https://app.vagrantup.com/boxes/search?utf8=%E2%9C%93&amp;sort=downloads&amp;provider=&amp;q=centos" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/boxes/search?utf8=✓&amp;sort=downloads&amp;provider=&amp;q=centos<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>Vagrant 环境变量配置</strong></p><p>新建用户变量：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>VAGRANT_HOME D:\rj-win\Vagrant\.vagrant.d
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>vagrant box add centos7 D:\iso\Centos7.box</p><p>centos7 是为 box 取的名字，供后续创建虚拟机。</p><p>查看是否添加成功</p><p>vagrant box list</p><blockquote><p>D:\iso&gt;vagrant box list centos7 (virtualbox, 0)</p></blockquote></blockquote><p>新建目录：F:\vb\centos7，然后进入cmd</p><blockquote><p>创建虚拟机</p><blockquote><p>cd F:\vm\masterVagrantfile、cd F:\vm\nodeVagrantfile</p><p>vagrant init centos7</p><p>会在当前目录 <code>F:\vb\xxx</code> 生成 Vagrantfile 文件</p></blockquote></blockquote><h4 id="vagrantfile-脚本" tabindex="-1"><a class="header-anchor" href="#vagrantfile-脚本" aria-hidden="true">#</a> Vagrantfile 脚本<a name="Vagrantfile 脚本"></a></h4><p><a href="https://www.vagrantup.com/docs/disks" target="_blank" rel="noopener noreferrer">https://www.vagrantup.com/docs/disks<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation</span>
<span class="token comment">## vagrant up --provider virtualbox</span>
<span class="token comment">## vagrant up --provider vmware_desktop</span>
<span class="token comment">## vagrant up --provider vmware_workstation</span>
Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;master&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7w&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token assign-left variable">master.vm.hostname</span><span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># 设置虚拟机的IP(public_network：桥接 private_network：仅主机)、bridge 桥接适配器</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.120&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation，vmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                <span class="token comment"># 设置虚拟机的名称</span>
                <span class="token assign-left variable">v.gui</span><span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;master&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;log&quot;</span>, type: <span class="token string">&quot;shell&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>s<span class="token operator">|</span>
                s.inline <span class="token operator">=</span> <span class="token string">&quot;echo =================  #{i} =========================&quot;</span>
            end
            <span class="token comment">#master.vm.provision &quot;shell&quot;, inline: &lt;&lt;-SHELL</span>
            <span class="token comment">#    yum install -y net-tools</span>
            <span class="token comment">#SHELL</span>
        end
    end
end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;node#{i}&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos7w&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token assign-left variable">master.vm.hostname</span><span class="token operator">=</span><span class="token string">&quot;node#{i}&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># 设置虚拟机的IP(public_network：桥接 private_network：仅主机)、bridge 桥接适配器</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.#{120+i}&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation，vmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                <span class="token assign-left variable">v.gui</span><span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;node#{i}&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;shell&quot;</span>, inline: <span class="token operator">&lt;&lt;-</span><span class="token environment constant">SHELL</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;=================  #{i} =========================&quot;</span>
            <span class="token environment constant">SHELL</span>
        end
    end
end

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>完成配置后，下面安装虚拟机</p><blockquote><p>cd F:\vm\masterVagrantfile、cd F:\vm\nodeVagrantfile</p><blockquote><p>vagrant up</p></blockquote></blockquote><blockquote><p>默认用户：vagrant 密码：vagrant</p><p>root用户：root：密码：vagrant</p></blockquote><h4 id="vagrant-vmware-desktop" tabindex="-1"><a class="header-anchor" href="#vagrant-vmware-desktop" aria-hidden="true">#</a> Vagrant + VMware-desktop</h4><p><strong>1.下载</strong> <a href="https://releases.hashicorp.com/vagrant/2.2.19/vagrant_2.2.19_x86_64.msi" target="_blank" rel="noopener noreferrer">vagrant<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>、 <a href="https://www.vagrantup.com/vmware/downloads" target="_blank" rel="noopener noreferrer">vmware-utility<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>2.下载 vmware-desktop插件</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>vagrant plugin list
vagrant plugin install vagrant-vmware-desktop
vagrant plugin install vagrant-disksize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3.下载</strong> <a href="https://app.vagrantup.com/centos/boxes/7" target="_blank" rel="noopener noreferrer">centos-box<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>vmware_desktop：</p><blockquote><p><a href="https://app.vagrantup.com/generic/boxes/centos7" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/generic/boxes/centos7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (675 MB)</p><p><a href="https://app.vagrantup.com/dds/boxes/vagrant-base-centos7" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/dds/boxes/vagrant-base-centos7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (:995MB)</p></blockquote><p>vmware_workstation：</p><blockquote><p><a href="https://app.vagrantup.com/dds/boxes/vagrant-base-centos7" target="_blank" rel="noopener noreferrer">https://app.vagrantup.com/dds/boxes/vagrant-base-centos7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> (:995MB)</p></blockquote><p><strong>4.本地安装box</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>vagrant box <span class="token function">add</span> centos70 D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>centos7.generic.desktop.box
vagrant box <span class="token function">add</span> centos7w D:<span class="token punctuation">\</span>iso<span class="token punctuation">\</span>centos7.dds.workstation.box
vagrant box list
vagrant box remove centos7
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">mkdir</span> %~dp0centos70
COPY /y /v /d D:<span class="token punctuation">\</span>rj-win<span class="token punctuation">\</span>Vagrant<span class="token punctuation">\</span>.vagrant.d<span class="token punctuation">\</span>boxes<span class="token punctuation">\</span>centos70<span class="token punctuation">\</span><span class="token number">0</span><span class="token punctuation">\</span>vmware_desktop<span class="token punctuation">\</span> %~dp0centos70
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5.生成Vagrantfile文件</strong>，[Vagrantfile 脚本](#Vagrantfile 脚本)</p><blockquote><p>cd F:\vm\k8s</p><p>vagrant init centos7d</p></blockquote><p><strong>6.安装</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>vagrant up <span class="token parameter variable">--provider</span> virtualbox
vagrant up <span class="token parameter variable">--provider</span> vmware_desktop
vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>7.脚本</strong></p><p><strong>sh脚本均已 Git Bash 执行，bat以 cmd 执行</strong></p><p>1、<a href="http://clear.sh" target="_blank" rel="noopener noreferrer">clear.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; ------------- 清除创建记录 -------------- &quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/nodeVagrantfile&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token variable">${mf}</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${VagrantD}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/master
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${VagrantD}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------- delete old virtual machines [<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/.vagrant]----------&quot;</span>
<span class="token keyword">else</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/master
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable">${mf}</span>/.vagrant !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${nf}</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${VagrantD}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node1
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node2
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node3
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${VagrantD}</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------- delete old virtual machines [<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/.vagrant]----------&quot;</span>
<span class="token keyword">else</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node1
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node2
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/node3
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable">${nf}</span>/.vagrant !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token assign-left variable">types</span><span class="token operator">=</span><span class="token variable">$1</span> <span class="token operator">||</span> <span class="token parameter variable">-1</span>
<span class="token keyword">if</span> <span class="token variable"><span class="token punctuation">((</span>types <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/centos70
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${k8s}</span>/centos7w
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -rf <span class="token variable">${k8s}</span>/centos70 !!&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -rf <span class="token variable">${k8s}</span>/centos7w !!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、<a href="http://init.sh" target="_blank" rel="noopener noreferrer">init.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box init   ------------------&quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">centos70</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/centos70&quot;</span>
<span class="token assign-left variable">centos7w</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/centos7w&quot;</span>
<span class="token assign-left variable">old_centos70</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/Vagrant/.vagrant.d/boxes/centos70/0/vmware_desktop/&quot;</span>
<span class="token assign-left variable">old_centos7w</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/Vagrant/.vagrant.d/boxes/centos7w/0/vmware_desktop/&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box list   ------------------&quot;</span>
vagrant box list
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box remove centos7[0|w]   ------------------&quot;</span>
vagrant box remove centos70
vagrant box remove centos7w
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------   vagrant box add   ------------------&quot;</span>
vagrant box <span class="token function">add</span> centos70 /d/iso/centos7.generic.desktop.box
vagrant box <span class="token function">add</span> centos7w /d/iso/centos7.dds.workstation.box
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token variable">${centos70}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;------   vagrant box copy to <span class="token variable">${centos70}</span>...  -------&quot;</span>
    <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_centos70}</span><span class="token builtin class-name">.</span> <span class="token variable">${centos70}</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token variable">${centos7w}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;------   vagrant box copy to <span class="token variable">${centos7w}</span>...  -------&quot;</span>
    <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_centos7w}</span><span class="token builtin class-name">.</span> <span class="token variable">${centos7w}</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第一次开始创建镜像的目录文件有</p><div class="language-ABAP line-numbers-mode" data-ext="ABAP"><pre class="language-ABAP"><code>39个
Vagrantfile		disk1.vmdk		metadata.json		
vagrant-base-centos7.vmxf		vagrant-base-centos7.nvram		vagrant-base-centos7.vmsd
vagrant-base-centos7.vmx		disk1-s001.vmdk---&gt;disk1-s032.vmdk
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-ABAP line-numbers-mode" data-ext="ABAP"><pre class="language-ABAP"><code>8个
generic-centos7-vmware.nvram		generic-centos7-vmware.vmdk（后期：vmware【000001-000004】.vmdk）
generic-centos7-vmware.vmsd			generic-centos7-vmware.vmx
generic-centos7-vmware.vmxf
info.json		metadata.json		Vagrantfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、<a href="http://install.sh" target="_blank" rel="noopener noreferrer">install.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; ------------- 创建 VMware -------------- &quot;</span>
<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/nodeVagrantfile&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token variable">${mf}</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${Vagrantfile}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;==================== <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span> -------------&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------------&gt;  rm &quot;</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span><span class="token string">&quot; ok!!&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up master  -----------------------&quot;</span>
            vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up master -----------------------&quot;</span>
        vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;====&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] master install ok!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/Vagrantfile !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token builtin class-name">cd</span> <span class="token variable">${nf}</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${Vagrantfile}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;==================== <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span> -------------&quot;</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;---------------&gt;  rm <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span> ok!!&quot;</span>
            <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up node -----------------------&quot;</span>
            vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
        <span class="token keyword">fi</span>
    <span class="token keyword">fi</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;----------------  vagrant up node -----------------------&quot;</span>
        vagrant up <span class="token parameter variable">--provider</span> vmware_workstation
    <span class="token keyword">fi</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;====&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] node install ok!&quot;</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token keyword">else</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;not <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/Vagrantfile !!!&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>安装完成后执行<code>kill.bat</code>结束VMware虚拟机的【vmware-vmx.exe】</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAh4AAAA6CAIAAABwA8cUAAANnklEQVR4Xu1drXojuRI1XJhXGBgYahiYRwhtGDgw1NCwX2GhoeFC04GGfoWBF+a2/kr1J7stOUlbqfPVNyuVSmpJk5zjkjzbqw+DwfCD8ff478ffXZfW+dL+d1iyrfgPmsFg+EnonH+Fsw8zaTEYDItG5/wrnH2YSYvBYFg0Oudf4ezDTFoMBsOi0Tn/CmcfZtJiMBgWjc75Vzj7MJMWg8GwaHTOv8LZh5m0GAyGRaNz/hXOPqxPadluNu+/f8+0KZj3/0E4jevVsOfeJrgh1+OJuw2GOnTOv8LZh/UpLVI/mB0OB/hzMt7/42M/rBjjJsJ0/10p1Ol6KO5PAJsbY/IriX2J0tK0+a6IA3zTjVdo+FJ8H/++ux8eh1/bP7I1Bqw3I3j2ryJ+97x6ej3yjtGaljaNTKd33PxKnohhd6bX856POW6fVtpi/T6kVaQ1epxfmmDz2bZNO/84HmXrbnTzlE2+19PbyVf9bz7MMzqzHd8qpYW7ytCDOb0BBXuWm0DpLXCeQnqfgWlu+UGcbUnjZcyUlothFwOuQdvmY3FpljnD96OJf+vN8WyUDUfHjIgDCz8Pr0haprDXd1f487qOnDuRsmTwbA1Lex+A1pXp+TlI51mdi0t++oXF8gMUC0kLBDiZCUsW1iAtTjnW250r715Wq5e9GvD0GGOSnbaPWEUcE6YAzyhbHsx/0GYgqMXoMRUextPDFtsRt+rSwugtM6cvjYxIJ+d6HK8j9XoQvpzmOQwDzMbP5IpJzJSEi2EXA65C4+an7iYsXaCBfxuMULPjXCUDoDw7UXCKibw/taq9wG60tEnAeKqhPXpaBQ8TAathwzTJ99pkTWJLvr20HN/WWU6cigw7FuOdWxwWnI/j9kWVFickRFqm/KZBWgCgKA8bZ/9snLQACtJC6A0RZyyS5CBUkgs1oTHAGz9jO9DhXXDq6cseGjWi6Thl2TPuTbSbB0FEzZ7FVhYD6RzROPoSaMDlOfi9GGOLtsD6zc9Ol97ogxvuCzfi3ysNUhBvmE+xET90CQU6gmq3WZrMWtTsxOdS23ScpS0nKihf1DQUGhC1FhX3o0VapkwFyYD7zabZCegNadp5UQl/8o5Cn3xYvbTkrMXLSbT3P5Ph1pK0IErDZJnKmfyQxzNZjt4PcHqTG4fEdnQEzrwxiPA0ALz7kK+cUq4S66FE+Vd/Fl5OCleeSXegsIQYgNevz8GVUD+N/2s3H0Cfbbhj3IZ/rzT2eXyWtOR7iInow1FYuq2RRO/tBktz2RXj9wLj+1uW6He9ZAaTOmatQp6vumthGYb7zS5ICzouQ54Zdy2OJne11/i4CooChluL0gK0RagWKokUgdSgkOlu7T5OO+cJn1O59gjJnpF4MRSGjOPBsLGQCZZTLZl2flaoDihHcAgzwP1Zr7NLgGJxDriB7AxCCiZPJqvQNz/AVYdBVy3DneEG/FthFVkL9YeP/4HKteMpZ41L87cgQiHUW5a/PJXRZg6alO6ZoIuetWgJU7JqaZmfteRbGVAUPWuhdzbpwK1eWiAvyaLy+xBMBqsITEZpFdU8neVD/sxugS6RqOyRBABn55HoEzgjq9jHg7AUqdQ5recZMGkpHB35puhHvS4uAYrFOcyRljgMnS6qFTcfVVy4PrjhjtDIv5VGiLiQB+gEDbI09Uq0u3tWwtqkxWUP2oGbPqW/+MsFpTC0TL/8LcSUpEW75gnWJC05yRBnWczpgx0PwLW/Ki3+ciV8owyyonppAYCiOHs7rN7+w61npCVwE/1GEua6vf90j2op0PHlOsaFsmRAT9GCl2NQru4H1ILgtGTw4lWsK2QrnpWqaDZTeYwBEMw5/dwScrE0h1nSUrv5eCVhDH14w72ghX8bjPOsI1ZxjqQRNHwrLI9w+6yllJpIrs9zTrkIcWLDChqO8rI06tLyGVmLUA7+vWGiN+FryikjKUmLPDprkZactSRFAZPBBXieItxEqJlUGGEipkb05hs8/IGN4GUeRf0YnlpRK68n8mXDsGfpZJ17Yo5eha1Ql4AC+KYASjtV4v6azRe7gP8mDHeJev5tNH+N4ZHYUzCykBaa38AIWnrx0SIt/uIEA12iUK4nc4Z/qaNKHZk8uW0q3bUUdOWjSVrCmVWA/ObxgaUy5G6mdNeCT8NSQL20zMRVwQaD4YtRz7+Lt86XxiXh+w2nMjXSYv+jF4OhG3TOv8LZhy1SWvKNy0edtBgMhm7QOf8KZx+2SGkhZtJiMPxodM6/wtmHmbQYDIZFo3P+Fc4+zKTFYDAsGp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx9m0mIwGBaNzvlXOPswkxaDwbBodM6/wtmHmbQYDIZFo3P+Fc4+zKTFYDAsGp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx/Wp7TYq8BmQ7w7uR3khc0GQys651/h7MP6lBapH8wOhwP8+a69wNi9V5kybiLM8A54SZ3+TczS/Qlgc2NMfiWxL1FamjbfFXGAb7rxCg1fiu/jX3iTPLxbPpp7bzxFeKV8em88ikdvlZfWtLRp5Ij8ODIxeLM92J/X9M55viJv4/ZJbfL7kFaR1uhxfmmCzWfbNu18fikkst3o5imbfK+nt5Ov+t98mGd0Zju+VUoLd5WhB3N6Awr2LDeB0lvgPIX0PgPu/c7wIM62pPEyZkrLxbCLAdegbfOxuDTLnOH70cS/9eZ4dr0ZXdmR+POeByRzfO1bp7DA5pMncu5EyuWOTdLyPgCto+lNvB/nrJhTiCCBBcHzS376xUaIcoWkBQKczEgB89YgLU454hvsdy+r1cteDXh6hLfcBzttH7GKOCZMAZ5RtjyY/6DNQFCL0WMqPIynhy22I27VpYXRW2ZOXxoZkU7O9TheR+r1IHw5zXMYBpiNn8kVk5gpCRfDLgZchcbNT91NWLpAA/82GAiGM8e5kZSFTfQamiYKTjGR96GpZDda2qQZMdU490QiJ9OKZHbil7nBC0+Rm9wXS4tTnZtLy/FtneXEqciwYzHeucVhwfk4bl9UaXFCQqRlym8apAUAivKwcfbPxkkLoCAthN4QccYiSQ5CJblQExoDvPEztgMd3gWnnr7soVEjmo5Tlj3j3kS7eRBE1OxZbGUxkM4RjaMvgQZcnoPfizG2aAus3/zsdOmNPrjhvnAj/r3SIAXxVswGMF9Dl1CgI6h2m6XlrCWcaAWIbIlLixSh6CSLDb1QX9SqDhKtXlqmTAXJgPvNptkJ6A1p2nlRCX/yjkKffFi9tOSsxctJtPc/k+HWkrQgSsNkmcqZ/JDHM1mO3g9wepMbh8R2dATOvDGI8DQAvPuQr5xSrhLroUT5V38WXk4KV55Jd6CwhBiA16/PwZVQP43/azcfQJ9tuGPchn+vNPZ5vCAtnFvTPcRE6+EoLN3WKKdPzm6wNH99IvndzZ89FEf6exrRKy2HalX0fNVdC8sw3G92QVrQcRnyzLhrcTS5q73Gx1VQFDDcWpQWoC1CtVBJpAikBoVMd2v3cdo5T/icyrVHSPaMxIuhMGQcD4aNhUywnGrJtPOzQnVAOYJDmAHuz3qdXQIUi3PADWRnEFIweTJZhb75Aa46DLpqGe4MN+DfCpuTtZBDM2LhYAqOp0rnVI1L87cg8lwrWD4ly+YVxeHpdfsqWrNSpnsmUBQ9ayHXPMyqpWV+1pJvZUBR9KyF3tmkA7d6aYG8JIvK70MwGawiMBmlVVTzdJYP+TO7BbpEorJHEgCcnUeiT+CMrGIfD8JSpFLntJ5nwKSlcHTkm6If9bq4BCgW5zBHWuIwdLqoVtx8VHHh+uCGO0Ij/1ba5eOjgt6Evk6Wpl6JdnfPamTL0lz2cO7ATZMW0iolAS3TL38LCyxJS/kpTdKSkwxxlsWcPtjxAFz7q9LiL1fCN8ogK6qXFgAoirO3w+rtP9x6RloCN9FvJGGu2/tP96iWAh1frmNcKEsG9BQteDkG5ep+QC0ITksGL17FukK24lmpimYzlccYAMGc088tIRdLc5glLbWbj1cSxtCHN9wLWvi3wTjPOmJ1aQowaYlVgbXzCLfPWvSEaTym+TjhUeacWzWpwwoajvKyNOrS8hlZi1AO/r1hojfha8opIylJizw6a5GWnLUkRQGTwQV4niLcRKiZVBhhIqZG9OYbPPyBjeBlHkX9GJ5aUSuvJ/Jlw7Bn6WSde2KOXoWtUJeAAvimAEo7VeL+ms0Xu4D/Jgx3iXr+bbT8r0ASe2KaLpA7yW9ghEJ6Ub80ONpKgIOsCEi58pxzq6YrMQAmT26bSnctyg5Ea5CWcGYVIL95fGCpDLmbKd214NOwFFAvLTNxVbDBYPhi1PPv4q3zpXFJ+H7DqUyNtNj/6MVg6Aad869w9mGLlJZ84/JRJy0Gg6EbdM6/wtmHLVJaiJm0GAw/Gp3zr3D2YSYtBoNh0eicf4WzDzNpMRgMi0bn/CucfZhJi8FgWDQ651/h7MNMWgwGw6LROf8KZx9m0mIwGBaNzvlXOPswkxaDwbBodM6/wtmHmbQYDIZFY/kkVW0mLd9oJi0Gw4/G8kmq2kxavtH+D3kj7soe3Zz0AAAAAElFTkSuQmCC" alt="image-20220508160013429"></p><p>4、kill.bat</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>@echo off
<span class="token assign-left variable">echo</span><span class="token operator">=</span>
<span class="token keyword">for</span> /f <span class="token string">&quot;tokens=2 delims= &quot;</span> %%i <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">&#39;tasklist  /fi &quot;imagename eq vmware-vmx.exe&quot; /nh&#39;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> taskkill /f /pid %%i
cmd
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5、<a href="http://cp.sh" target="_blank" rel="noopener noreferrer">cp.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 虚拟机到新目录</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cp</span> <span class="token parameter variable">-r</span> /f/vm/k8s/masterVagrantfile/.vagrant/machines/master/vmware_workstation/. /f/vm/k8s/master
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">k8s</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> <span class="token punctuation">$(</span>dirname <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span><span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">Vagrantfile</span><span class="token operator">=</span><span class="token string">&quot;Vagrantfile&quot;</span>
<span class="token assign-left variable">VagrantD</span><span class="token operator">=</span><span class="token string">&quot;.vagrant&quot;</span>
<span class="token assign-left variable">mf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/masterVagrantfile&quot;</span>
<span class="token assign-left variable">nf</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/nodeVagrantfile&quot;</span>
<span class="token assign-left variable">master</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/master&quot;</span>
<span class="token assign-left variable">node1</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/node1&quot;</span>
<span class="token assign-left variable">node2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/node2&quot;</span>
<span class="token assign-left variable">node3</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${k8s}</span>/node3&quot;</span>
<span class="token assign-left variable">old_master</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${mf}</span>/.vagrant/machines/master/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node1</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${nf}</span>/.vagrant/machines/node1/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node2</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${nf}</span>/.vagrant/machines/node2/vmware_workstation/&quot;</span>
<span class="token assign-left variable">old_node3</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">${nf}</span>/.vagrant/machines/node3/vmware_workstation/&quot;</span>

<span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">${mf}</span>&quot;</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${master}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${master}</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${master}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${master}</span>&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_master}</span>. --&gt; <span class="token variable">${master}</span>]&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_master}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_master}</span><span class="token builtin class-name">.</span> <span class="token variable">${master}</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
<span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable">${nf}</span>&quot;</span> <span class="token operator">||</span> <span class="token builtin class-name">exit</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">${VagrantD}</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${node1}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${node1}</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${node1}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${node2}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${node2}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${node2}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${node3}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${node3}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;rm -f <span class="token variable">${node3}</span> ok&quot;</span>
  <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot; &quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${node1}</span>&quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${node2}</span>&quot;</span>
  <span class="token function">mkdir</span> <span class="token string">&quot;<span class="token variable">${node3}</span>&quot;</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_node1}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_node1}</span><span class="token builtin class-name">.</span> <span class="token variable">${node1}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_node1}</span>. --&gt; <span class="token variable">${node1}</span>]&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_node2}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_node2}</span><span class="token builtin class-name">.</span> <span class="token variable">${node2}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_node2}</span>. --&gt; <span class="token variable">${node2}</span>]&quot;</span>
    <span class="token keyword">fi</span>

  <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-e</span> <span class="token variable">${old_node3}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
      <span class="token function">cp</span> <span class="token parameter variable">-r</span> <span class="token variable">${old_node3}</span><span class="token builtin class-name">.</span> <span class="token variable">${node3}</span>
      <span class="token builtin class-name">echo</span> <span class="token string">&quot;=============&gt; [ <span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +%Y-%m-%d,%H:%M:%S<span class="token variable">)</span></span> ] start of copy VMware [<span class="token variable">${old_node3}</span>. --&gt; <span class="token variable">${node3}</span>]&quot;</span>
    <span class="token keyword">fi</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&quot;</span>
<span class="token keyword">fi</span>
<span class="token builtin class-name">exit</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>6、修改虚拟机引用镜像地址 boxes</p><p>/f/vm/k8s/下的：master、node[1-3]</p><p>把【master、node[1-3]】/c2c6ff32-7b85-4fb9-8cdf-48497b898d32：36位名称+4</p><p>遍历后把 <code>c2c6ff32-7b85-4fb9-8cdf-48497b898d32/. ../master</code></p><p><strong>直接把D:\rj-win\Vagrant.vagrant.d\boxes\centos7w\0\vmware_desktop\复制到F:\vm\k8s\vmware_desktop不就行了，然后修改每个节点的（下面提到的3个文件）！！！！</strong></p><p>7、正则复制</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>ls /data/dns_data/ | grep .*20180928.* | xargs -i cp -r /data/dns_data/{} ./

/data/dns_data/  --&gt;  表示要cp文件所在目录
| grep  .*20180928.*  ---&gt;表示要过滤的目录
| args -i cp -r /data/dns_data/{}  ---&gt; 把要拷贝文件传入CP命令当中
./  ---&gt; 当前目录
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>disk1-cl1.vmdk 磁盘描述符文件</p><p>修改：<code>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/disk1-cl1.vmdk</code></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 父文件名提示</span>
master:parentFileNameHint<span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1.vmdk&quot;</span>
node1: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1-000001.vmdk&quot;</span>
node2: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1-000002.vmdk&quot;</span>
node3: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop\disk1-000003.vmdk&quot;</span>
改为：：
master: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s\master\xxx\server\disk1.vmdk&quot;</span>
node1: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode1\xxx\server\disk1-000001.vmdk&quot;</span>
node2: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode2\xxx\server\disk1-000002.vmdk&quot;</span>
node3: <span class="token assign-left variable">parentFileNameHint</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode3\xxx\server\disk1-000003.vmdk&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>复制：</p><p>把 <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-s001.vmdk</code>--&gt;<code>disk1-s032.vmdk</code> 复制到<code>F:\vm\k8s\master\xxx\serve\</code></p><p>把 <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-000001-s001.vmdk</code>--&gt;<code>disk1-000001-s032.vmdk</code> 复制到<code>F:\vm\k8s\node1\xxx\serve\</code></p><p>把 <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-000002-s001.vmdk</code>--&gt;<code>disk1-000002-s032.vmdk</code> 复制到<code>F:\vm\k8s\node2\xxx\serve\</code></p><p>把 <code>D:\rj-win\Vagrant\.vagrant.d\boxes\centos7w\0\vmware_desktop\disk1-000003-s001.vmdk</code>--&gt;<code>disk1-000003-s032.vmdk</code> 复制到<code>F:\vm\k8s\node3\xxx\serve\</code></p><p>vagrant-base-centos7.vmsd</p><p>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/vagrant-base-centos7.vmsd</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>cloneOf0 <span class="token operator">=</span> <span class="token string">&quot;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop<span class="token entity" title="\v">\v</span>agrant-base-centos7.vmx&quot;</span>
改
cloneOf0 <span class="token operator">=</span> <span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\v">\v</span>agrant-base-centos7.vmx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vagrant-base-centos7.vmx</p><p>[master,node[1-3]]/c2c6ff32-7b85-4fb9-8cdf-48497b898d32/vagrant-base-centos7.vmx</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>filesearchpath <span class="token operator">=</span> <span class="token string">&quot;.;D:<span class="token entity" title="\r">\r</span>j-win\Vagrant\.vagrant.d<span class="token entity" title="\b">\b</span>oxes<span class="token entity" title="\c">\c</span>entos7w<span class="token entity" title="\0">\0</span><span class="token entity" title="\v">\v</span>mware_desktop&quot;</span>
改
filesearchpath <span class="token operator">=</span> &quot;.<span class="token punctuation">;</span>F:<span class="token punctuation">\</span>vm<span class="token punctuation">\</span>k8s<span class="token punctuation">\</span>centos7w<span class="token punctuation">\</span>&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>Vagrant.configure<span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
    <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">1</span><span class="token punctuation">)</span>.each <span class="token keyword">do</span> <span class="token operator">|</span>i<span class="token operator">|</span>
        config.vm.define <span class="token string">&quot;master&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span>master<span class="token operator">|</span>
            master.vm.box <span class="token operator">=</span> <span class="token string">&quot;centos70&quot;</span>
            master.vm.box_check_update <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token assign-left variable">master.vm.hostname</span><span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
            master.vm.disk :disk, size: <span class="token string">&quot;100GB&quot;</span>, primary: <span class="token boolean">true</span>
            <span class="token comment"># 设置虚拟机的IP(public_network：桥接 private_network：仅主机)、bridge 桥接适配器</span>
            master.vm.network <span class="token string">&quot;public_network&quot;</span>, ip: <span class="token string">&quot;192.168.101.120&quot;</span>, netmask: <span class="token string">&quot;255.255.255.0&quot;</span>
            <span class="token comment">#docker, hyperv, virtualbox, vmware_desktop, vmware_workstation，vmware_fusion</span>
            master.vm.provider <span class="token string">&quot;vmware_workstation&quot;</span> <span class="token keyword">do</span> <span class="token operator">|</span><span class="token function">v</span><span class="token operator">|</span>
                <span class="token assign-left variable">v.gui</span><span class="token operator">=</span>false
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;master&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;memsize&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;8192&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;numvcpus&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;4&quot;</span>
                v.vmx<span class="token punctuation">[</span><span class="token string">&quot;cpuid.coresPerSocket&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;2&quot;</span>
                <span class="token comment">#cpu总处理器内核数：numvcpus = &quot;4&quot;，</span>
                <span class="token comment"># numvcpus=处理器数量*cpuid.coresPerSocket</span>
                <span class="token comment"># 处理器数量=numvcpus/cpuid.coresPerSocket（4/2=2）</span>
                <span class="token comment">#cpu每个处理器内核数：cpuid.coresPerSocket = &quot;2&quot;</span>
            end
            master.vm.provision <span class="token string">&quot;shell&quot;</span>, inline: <span class="token operator">&lt;&lt;-</span><span class="token environment constant">SHELL</span>
                <span class="token builtin class-name">echo</span> <span class="token string">&quot;=================  #{i} =========================&quot;</span>
            <span class="token environment constant">SHELL</span>
        end
    end
end
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、" tabindex="-1"><a class="header-anchor" href="#_3、" aria-hidden="true">#</a> 3、</h3><p>安装kernel-devel,需要安装VBOX的增强包，就必须安装这个</p><p>安装增强包：就是vm-tool（在vm安装目录里的 xx.iso）</p><h3 id="vagrant-box-打包" tabindex="-1"><a class="header-anchor" href="#vagrant-box-打包" aria-hidden="true">#</a> Vagrant Box 打包</h3><h3 id="权限配置公钥" tabindex="-1"><a class="header-anchor" href="#权限配置公钥" aria-hidden="true">#</a> 权限配置公钥</h3><p>为vagrant添加sudo权限</p><h3 id="配置网卡" tabindex="-1"><a class="header-anchor" href="#配置网卡" aria-hidden="true">#</a> 配置网卡</h3><p>此步骤时候我很郁闷的一步，就是当你直接把这个镜像打包后，以后如果在同一台机器上面使用同一个box虚拟多台机器，配置就会出问题。因此这步骤还是比较关键的。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#第一步：把网卡中的MAC地址注释</span>
<span class="token comment">#HWADDR=XX:XX------------</span>
<span class="token comment">#第二步：删除</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /etc/udev/rules.d/70-persistent-ipoib.rules
<span class="token comment">#安装新的虚拟机后，建议改一下MAC地址，如果还遇到其他问题，建议看看这里</span>
<span class="token comment">#虚拟机克隆CentOS7 出现的网络问题解决办法http://www.bubuko.com/infodetail-1483490.html</span>
poweroff
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="打包box" tabindex="-1"><a class="header-anchor" href="#打包box" aria-hidden="true">#</a> 打包BOX</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token preprocessor property">#进入vagrant的目录</span>
<span class="token punctuation">[</span>E<span class="token punctuation">:</span>\vagrant<span class="token punctuation">]</span>$ vagrant package <span class="token operator">--</span>output <span class="token punctuation">.</span><span class="token operator">/</span>tzfcentos73<span class="token punctuation">.</span>box <span class="token operator">--</span><span class="token keyword">base</span> CentOS73
<span class="token operator">==</span><span class="token operator">&gt;</span> CentOS73<span class="token punctuation">:</span> Exporting VM<span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token operator">==</span><span class="token operator">&gt;</span> CentOS73<span class="token punctuation">:</span> Compressing <span class="token class-name">package</span> to<span class="token punctuation">:</span> E<span class="token punctuation">:</span><span class="token operator">/</span>vagrant<span class="token operator">/</span>tzfcentos73<span class="token punctuation">.</span>box
<span class="token preprocessor property">#解释output是指box的名字，--base是指基于VBOX里面的哪个虚拟机打包，这的名字一定要争取</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="二、vmrun" tabindex="-1"><a class="header-anchor" href="#二、vmrun" aria-hidden="true">#</a> 二、vmrun</h2><p><a href="https://docs.vmware.com/cn/" target="_blank" rel="noopener noreferrer">https://docs.vmware.com/cn/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="格式-vmrun-身份验证标志-命令-参数" tabindex="-1"><a class="header-anchor" href="#格式-vmrun-身份验证标志-命令-参数" aria-hidden="true">#</a> 格式：vmrun [身份验证标志] 命令 [参数]</h3><p><a href="https://www.vmware.com/pdf/vix162_vmrun_command.pdf" target="_blank" rel="noopener noreferrer">https://www.vmware.com/pdf/vix162_vmrun_command.pdf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><a href="https://docs.vmware.com/cn/search/#/vmrun" target="_blank" rel="noopener noreferrer">https://docs.vmware.com/cn/search/#/vmrun<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>身份验证标志
--------------
这些必须出现在命令和任何命令参数之前。
   <span class="token parameter variable">-T</span> <span class="token operator">&lt;</span>主机类型<span class="token operator">&gt;</span> <span class="token punctuation">(</span>ws<span class="token operator">|</span>fusion<span class="token operator">||</span>player<span class="token punctuation">)</span>
   <span class="token parameter variable">-vp</span> <span class="token operator">&lt;</span>加密虚拟机的密码<span class="token operator">&gt;</span>
   <span class="token parameter variable">-gu</span> <span class="token operator">&lt;</span>来宾操作系统中的用户名<span class="token operator">&gt;</span>
   <span class="token parameter variable">-gp</span> <span class="token operator">&lt;</span>guest OS 中的密码<span class="token operator">&gt;</span>

电源命令          			参数          			描述
--------------           ----------           -----------
start                    .vmx 文件的路径     		启动虚拟机或团队
                         <span class="token punctuation">[</span>gui<span class="token operator">|</span>nogui<span class="token punctuation">]</span>
stop                     .vmx 文件的路径     		停止虚拟机或团队
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
reset                    .vmx 文件的路径     		重置 VM 或团队
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
<span class="token function">suspend</span>                  .vmx 文件的路径     		暂停 VM 或团队
                         <span class="token punctuation">[</span>hard<span class="token operator">|</span>soft<span class="token punctuation">]</span>
pause                    .vmx 文件的路径     		暂停虚拟机
unpause                  .vmx 文件的路径     		取消暂停虚拟机

快照命令		        	参数         			  描述
-----------------        ----------           -----------
listSnapshots            .vmx 文件的路径     		列出 VM 中的所有快照
                         <span class="token punctuation">[</span>showTree<span class="token punctuation">]</span>
snapshot                 .vmx 文件的路径     		创建 VM 的快照
                         Snapshot name
deleteSnapshot           .vmx 文件的路径     		从 VM 中删除快照
                         Snapshot name
                         <span class="token punctuation">[</span>andDeleteChildren<span class="token punctuation">]</span>
revertToSnapshot         .vmx 文件的路径     		将 VM 状态设置为快照
                         快照名称

主机网络命令   				 参数        		  		 描述
---------------------    ----------           -----------
listHostNetworks                              	列出主机中的所有网络
listPortForwardings      主机网络名称    			列出主机网络上所有可用的端口转发
setPortForwarding        主机网络名称    			在主机网络上添加或更新端口转发
                         Protocol
                         Host port
                         Guest <span class="token function">ip</span>
                         Guest port
                         <span class="token punctuation">[</span>Description<span class="token punctuation">]</span>
deletePortForwarding     Host network name   	删除主机网络上的端口转发
                         Protocol
                         Host port

嘉宾命令   				 参数        		  		 描述
-----------------        ----------           -----------
runProgramInGuest        .vmx 文件的路径     	在来宾操作系统中运行程序
                         <span class="token punctuation">[</span>-noWait<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-activeWindow<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-interactive<span class="token punctuation">]</span>
                         完整路径到程序
                         <span class="token punctuation">[</span>程序参数<span class="token punctuation">]</span>
runScriptInGuest         .vmx 文件的路径     	在来宾操作系统中运行脚本
                         <span class="token punctuation">[</span>-noWait<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-activeWindow<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-interactive<span class="token punctuation">]</span>
                         解释器路径
                         脚本文本
fileExistsInGuest        .vmx 文件的路径     	检查来宾操作系统中是否存在文件
                         来宾中的文件路径
directoryExistsInGuest   .vmx 文件的路径    		检查来宾操作系统中是否存在目录
                         来宾目录的路径
setSharedFolderState     .vmx 文件的路径     	修改主客共享文件夹
                         共享名称
                         Host path
                         writable <span class="token operator">|</span> <span class="token builtin class-name">readonly</span>
addSharedFolder          .vmx 文件的路径     	添加主客共享文件夹
                         共享名称
                         新主机路径
removeSharedFolder       .vmx 文件的路径     	删除主客共享文件夹
                         共享名称
enableSharedFolders      .vmx 文件的路径     	在来宾系统中启用共享文件夹
                         <span class="token punctuation">[</span>runtime<span class="token punctuation">]</span>
disableSharedFolders     .vmx 文件的路径     	禁用来宾系统中的共享文件夹
                         <span class="token punctuation">[</span>runtime<span class="token punctuation">]</span>
listProcessesInGuest     .vmx 文件的路径     	列出来宾操作系统中正在运行的进程
killProcessInGuest       .vmx 文件的路径     	在来宾操作系统中终止进程
                         进程号
deleteFileInGuest        .vmx 文件的路径     	删除来宾操作系统中的文件
                         Path <span class="token keyword">in</span> guest
createDirectoryInGuest   .vmx 文件的路径     	在来宾操作系统中创建目录
                         Directory path <span class="token keyword">in</span> guest
deleteDirectoryInGuest   .vmx 文件的路径     	删除来宾操作系统中的目录
                         Directory path <span class="token keyword">in</span> guest
CreateTempfileInGuest    .vmx 文件的路径     	在来宾操作系统中创建临时文件
listDirectoryInGuest     .vmx 文件的路径     	在来宾操作系统中列出一个目录
                         Directory path <span class="token keyword">in</span> guest
CopyFileFromHostToGuest  .vmx 文件的路径     	将文件从主机操作系统复制到来宾操作系统
                         Path on <span class="token function">host</span>
                         Path <span class="token keyword">in</span> guest
CopyFileFromGuestToHost  .vmx 文件的路径     	将文件从来宾操作系统复制到主机操作系统
                         Path <span class="token keyword">in</span> guest
                         Path on <span class="token function">host</span>
renameFileInGuest        .vmx 文件的路径     	在来宾操作系统中重命名文件
                         Original name
                         New name
typeKeystrokesInGuest    .vmx 文件的路径     	在来宾操作系统中键入击键
                         keystroke string
connectNamedDevice       .vmx 文件的路径     	连接来宾操作系统中的命名设备
                         device name
disconnectNamedDevice    .vmx 文件的路径     	断开来宾操作系统中的命名设备
                         device name
captureScreen            .vmx 文件的路径     	将虚拟机的屏幕捕获到本地文件
                         Path on <span class="token function">host</span>
writeVariable            .vmx 文件的路径     	在VM状态下写入一个变量
                         <span class="token punctuation">[</span>runtimeConfig<span class="token operator">|</span>guestEnv<span class="token operator">|</span>guestVar<span class="token punctuation">]</span>
                         variable name
                         variable value
readVariable             .vmx 文件的路径     	读取处于VM状态的变量
                         <span class="token punctuation">[</span>runtimeConfig<span class="token operator">|</span>guestEnv<span class="token operator">|</span>guestVar<span class="token punctuation">]</span>
                         variable name
getGuestIPAddress        .vmx 文件的路径     	获取来宾的IP地址
                         <span class="token punctuation">[</span>-wait<span class="token punctuation">]</span>

常规命令选项	   				 参数        		  		 描述
----------------         ----------           -----------
list                                          	列出所有运行的虚拟机。 
upgradevm                .vmx 文件的路径     	将虚拟机升级到当前虚拟硬件版本
installTools             .vmx 文件的路径     	安装 VMware Tools <span class="token keyword">in</span> Guest
checkToolsState          .vmx 文件的路径     	检查客户机中的 VMware Tools 的状态。
												可能的状态为 unknown、installed和running
deleteVM                 .vmx 文件的路径     	删除虚拟机
clone                    .vmx 文件的路径     	创建 VM 的副本
                         目标 .vmx 文件的路径
                         full（完全克隆）<span class="token operator">|</span>linked（链接克隆）
                         <span class="token punctuation">[</span>-snapshot<span class="token operator">=</span>克隆的快照名称 <span class="token keyword">if</span> linked时<span class="token punctuation">]</span>
                         <span class="token punctuation">[</span>-cloneName<span class="token operator">=</span>名称<span class="token punctuation">]</span>

VM模板命令   				 参数        		  		 描述
---------------------    ----------           -----------
downloadPhotonVM         新虚拟机的路径     	 下载光子虚拟机
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="示例" tabindex="-1"><a class="header-anchor" href="#示例" aria-hidden="true">#</a> 示例</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 启动虚拟机</span>
vmrun <span class="token parameter variable">-T</span> ws start <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>
vmrun <span class="token parameter variable">-T</span> ws stop <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>

<span class="token comment"># 克隆虚拟机</span>
/d/rj-win/vm16/vmrun.exe <span class="token parameter variable">-T</span> ws clone <span class="token string">&quot;/f/vm/k8s/centos7_vmware_workstation/centos7_vmware_workstation.vmx&quot;</span> <span class="token string">&quot;/f/vm/k8s/centos7/master-cluster/master-120/master-120.vmx&quot;</span>  full <span class="token parameter variable">-cloneName</span><span class="token operator">=</span>master-120

<span class="token comment"># 在 Windows 主机上使用 Workstation 在虚拟机中运行程序</span>
vmrun <span class="token parameter variable">-T</span> ws <span class="token parameter variable">-gu</span> guestUser <span class="token parameter variable">-gp</span> guestPassword runProgramInGuest <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> <span class="token string">&quot;c:\Program Files\myProgram.exe&quot;</span>

<span class="token comment"># 在Windows上登录虚拟机，并执行虚拟机脚本</span>
D:<span class="token punctuation">\</span>rj-win<span class="token punctuation">\</span>vm16<span class="token punctuation">\</span>vmrun.exe <span class="token parameter variable">-T</span> ws <span class="token parameter variable">-gu</span> root <span class="token parameter variable">-gp</span> 123456a runProgramInGuest <span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s<span class="token entity" title="\n">\n</span>ode-cluster<span class="token entity" title="\n">\n</span>ode-121<span class="token entity" title="\n">\n</span>ode-121.vmx&quot;</span> /bin/bash /root/first.sh <span class="token number">121</span> node-121


<span class="token comment"># 创建虚拟机的快照</span>
vmrun <span class="token parameter variable">-T</span> ws snapshot <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># 获取快照列表</span>
vmrun <span class="token parameter variable">-T</span> ws listSnapshots <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>

<span class="token comment"># 还原快照</span>
vmrun <span class="token parameter variable">-T</span> ws revertToSnapshot <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># 删除快照</span>
vmrun <span class="token parameter variable">-T</span> ws deleteSnapshot <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span> mySnapshot

<span class="token comment"># 启用工作站共享文件夹</span>
vmrun <span class="token parameter variable">-T</span> ws enableSharedFolders <span class="token string">&quot;c:\myVMs\myVM.vmx&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="步骤-1" tabindex="-1"><a class="header-anchor" href="#步骤-1" aria-hidden="true">#</a> 步骤</h3><ol><li>cd D:\rj-win\vm16\vmrun.exe 程序</li><li>git 软件</li><li>编写脚本 <a href="http://auto.sh" target="_blank" rel="noopener noreferrer">auto.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>sh auto_VM.sh create</li><li>sh auto_VM.sh start | sh auto_VM.sh</li><li>设置IP的脚本 set_ip.bat</li></ol><blockquote><p>执行流程：create》start》set_ip》window下运行set_ip.bat脚本</p></blockquote><h3 id="脚本-auto-vm-sh" tabindex="-1"><a class="header-anchor" href="#脚本-auto-vm-sh" aria-hidden="true">#</a> 脚本：auto_VM.sh</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">host_master</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span>
<span class="token assign-left variable">host_node</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">121</span> <span class="token number">122</span> <span class="token number">123</span><span class="token punctuation">)</span>
<span class="token assign-left variable">gu</span><span class="token operator">=</span><span class="token string">&quot;root&quot;</span>
<span class="token assign-left variable">gp</span><span class="token operator">=</span><span class="token string">&quot;123456a&quot;</span>

<span class="token comment">#模板镜像位置</span>
<span class="token assign-left variable">VMX_FILE</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/CentOS7/CentOS7.vmx&quot;</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token operator">!</span> <span class="token parameter variable">-e</span> <span class="token variable">${VMX_FILE}</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
   <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; 没有模板镜像 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token keyword">fi</span>
<span class="token comment"># vmrun.exe 位置</span>
<span class="token assign-left variable">VMRUN_EXE</span><span class="token operator">=</span><span class="token string">&quot;/d/rj-win/vm16/vmrun.exe&quot;</span>
<span class="token assign-left variable">PATH_VMRUN_EXE_CMD</span><span class="token operator">=</span><span class="token string">&quot;D:<span class="token entity" title="\\">\\</span>rj-win<span class="token entity" title="\\">\\</span>vm16<span class="token entity" title="\\">\\</span>vmrun.exe&quot;</span>
<span class="token comment"># 集群机器位置</span>
<span class="token assign-left variable">K8S_CENTOS7</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>&quot;</span>
<span class="token assign-left variable">K8S_CENTOS7_CMD</span><span class="token operator">=</span><span class="token string">&quot;F:<span class="token entity" title="\\">\\</span>vm<span class="token entity" title="\\">\\</span>k8s&quot;</span>
<span class="token comment">#集群名称</span>
<span class="token assign-left variable">MASTER_CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;master-cluster&quot;</span>
<span class="token assign-left variable">NODE_CLUSTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;node-cluster&quot;</span>
<span class="token comment">#服务器名称</span>
<span class="token assign-left variable">MASTER_NAME</span><span class="token operator">=</span><span class="token string">&quot;master&quot;</span>
<span class="token assign-left variable">NODE_NAME</span><span class="token operator">=</span><span class="token string">&quot;node&quot;</span>
<span class="token comment">#创建快照的名称</span>
<span class="token assign-left variable">SHOT_NAME</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$2</span>&quot;</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;=====&gt;  sh 参数[<span class="token variable">$1</span>,<span class="token variable">$2</span>,<span class="token variable">$3</span>]&quot;</span>
<span class="token assign-left variable">v2</span><span class="token operator">=</span><span class="token number">120</span>

<span class="token function-name function">clone_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">#    for i in $(cat host-node.txt)</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始克隆 master-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws clone <span class="token string">&quot;<span class="token variable">${VMX_FILE}</span>&quot;</span> <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> full <span class="token parameter variable">-cloneName</span><span class="token operator">=</span><span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">clone_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">#  for i in $(cat host-node.txt)</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始克隆 node-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws clone <span class="token string">&quot;<span class="token variable">${VMX_FILE}</span>&quot;</span> <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> full <span class="token parameter variable">-cloneName</span><span class="token operator">=</span><span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># 创建克隆链接的虚拟机</span>
<span class="token function-name function">VM_create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
clone_master
<span class="token function">sleep</span> <span class="token number">6</span>
clone_node
<span class="token function">sleep</span> <span class="token number">8</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    克隆虚拟机完成     &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">start_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始启动: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws start <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">start_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始启动: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws start <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># 启动创建好的虚拟机</span>
<span class="token function-name function">VM_start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
start_master
<span class="token function">sleep</span> <span class="token number">6</span>
start_node
<span class="token function">sleep</span> <span class="token number">3</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    启动虚拟机完成    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 修改IP地址</span>
<span class="token function-name function">set_ip_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token operator">&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${PATH_VMRUN_EXE_CMD}</span> -T ws -gu <span class="token variable">${gu}</span> -gp <span class="token variable">${gp}</span> runProgramInGuest <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span><span class="token variable">${MASTER_CLUSTER_NAME}</span><span class="token entity" title="\\">\\</span><span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span><span class="token entity" title="\\">\\</span><span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx<span class="token entity" title="\&quot;">\&quot;</span> /bin/bash /root/first.sh <span class="token variable">${i}</span> <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>&quot;</span> <span class="token operator">&gt;&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token comment"># ping -n 5(发送5次请求)|在Linux端使用 -c</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ping -n 3 192.168.101.<span class="token variable">${i}</span> &gt;<span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>ping<span class="token variable">${i}</span>.log&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
  <span class="token keyword">done</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;修改IP脚本生成路径: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip_<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.bat&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;exit&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
  <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;运行命令:<span class="token entity" title="\n">\n</span>1.打开cmd.exe<span class="token entity" title="\n">\n</span>2.输入: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip<span class="token variable">${i}</span>.bat&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">set_ip_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token operator">&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token comment">#登录系统</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;<span class="token variable">${PATH_VMRUN_EXE_CMD}</span> -T ws -gu <span class="token variable">${gu}</span> -gp <span class="token variable">${gp}</span> runProgramInGuest <span class="token entity" title="\&quot;">\&quot;</span><span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span><span class="token variable">${NODE_CLUSTER_NAME}</span><span class="token entity" title="\\">\\</span><span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span><span class="token entity" title="\\">\\</span><span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx<span class="token entity" title="\&quot;">\&quot;</span> /bin/bash /root/first.sh <span class="token variable">${i}</span> <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>&quot;</span> <span class="token operator">&gt;&gt;</span>  <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token comment"># ping -n 5(发送5次请求)|在Linux端使用 -c</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;ping -n 3 192.168.101.<span class="token variable">${i}</span> &gt;<span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>ping<span class="token variable">${i}</span>.log&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;exit&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token punctuation">\</span><span class="token punctuation">\</span>set_ip<span class="token variable">${i}</span>.bat
  <span class="token keyword">done</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;修改IP脚本生成路径: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip_<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.bat&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token parameter variable">-e</span> <span class="token string">&quot;运行命令:<span class="token entity" title="\n">\n</span>1.打开cmd.exe<span class="token entity" title="\n">\n</span>2.输入: <span class="token variable">${K8S_CENTOS7_CMD}</span><span class="token entity" title="\\">\\</span>set_ip_<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.bat&quot;</span>
<span class="token punctuation">}</span>
<span class="token comment"># -T ws -gu -gp runProgramInGuest &quot;xxx.vmx&quot; &quot;vm.exe&quot;</span>
<span class="token comment">#登录系统就行设置：</span>
<span class="token comment"># runProgramInGuest xx.vmx [程序参数]</span>
<span class="token comment"># runScriptInGuest xx.vmx [解释器路径] [脚本文本]</span>
<span class="token function-name function">VM_set_IP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  set_ip_master
  set_ip_node
<span class="token punctuation">}</span>

<span class="token function-name function">stop_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始关闭: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws stop <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">2</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">stop_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始关闭: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws stop <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">2</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment">#批量关机</span>
<span class="token function-name function">VM_stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
stop_master
stop_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    批量关机完成    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">snapshot_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始创建快照: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i ...}</span>&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws snapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">snapshot_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始创建快照: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws snapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># 创建快照</span>
<span class="token function-name function">VM_snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
snapshot_master
<span class="token function">sleep</span> <span class="token number">6</span>
snapshot_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    创建快照完成    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">shot_list_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;获取快照列表: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws listSnapshots <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">shot_list_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;获取快照列表: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws listSnapshots <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># 获取快照列表</span>
<span class="token function-name function">VM_shot_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_list_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_list_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   获取快照列表    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">shot_back_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始恢复快照: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws revertToSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token function-name function">shot_back_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始恢复快照: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws revertToSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># 恢复快照</span>
<span class="token function-name function">VM_shot_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_back_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_back_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;   恢复快照完成：<span class="token variable">${SHOT_NAME}</span>    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 删除快照</span>
<span class="token function-name function">shot_del_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_master<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始删除快照: <span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws deleteSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${MASTER_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># 删除快照</span>
<span class="token function-name function">shot_del_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable">${host_node<span class="token punctuation">[</span>@<span class="token punctuation">]</span>}</span><span class="token punctuation">;</span>
  <span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">&quot;开始删除快照: <span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span> <span class="token variable">${SHOT_NAME}</span> ...&quot;</span>
    <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws deleteSnapshot <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>/<span class="token variable">${NODE_NAME}</span>-<span class="token variable">${i}</span>.vmx&quot;</span> <span class="token variable">${SHOT_NAME}</span>
    <span class="token function">sleep</span> <span class="token number">6</span>
  <span class="token keyword">done</span>
<span class="token punctuation">}</span>
<span class="token comment"># 删除快照</span>
<span class="token function-name function">VM_shot_del</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
shot_del_master
<span class="token function">sleep</span> <span class="token number">6</span>
shot_del_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    批量删除快照完成:<span class="token variable">${SHOT_NAME}</span>    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">clone_del_master</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token string">&quot;<span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/&quot;</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    批量删除克隆完成   <span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${MASTER_CLUSTER_NAME}</span>/ &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>
<span class="token function-name function">clone_del_node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">rm</span> <span class="token parameter variable">-rf</span> <span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    批量删除克隆完成  <span class="token variable">${K8S_CENTOS7}</span>/<span class="token variable">${NODE_CLUSTER_NAME}</span>/  &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token function-name function">VM_clone_del</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
clone_del_master
clone_del_node
<span class="token function">sleep</span> <span class="token number">6</span>
<span class="token builtin class-name">echo</span> <span class="token string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;    批量删除克隆完成    &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>
<span class="token punctuation">}</span>

<span class="token comment"># 获取当前正在运行的虚拟机</span>
<span class="token function-name function">VM_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token builtin class-name">echo</span> <span class="token string">&quot;当前正在运行的虚拟机:&quot;</span>
  <span class="token variable">${VMRUN_EXE}</span> <span class="token parameter variable">-T</span> ws list
<span class="token punctuation">}</span>

<span class="token keyword">case</span> <span class="token variable">$1</span> <span class="token keyword">in</span>
    c<span class="token punctuation">)</span>
        VM_create
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    c1<span class="token punctuation">)</span>
        clone_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    c2<span class="token punctuation">)</span>
        clone_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start<span class="token punctuation">)</span>
        VM_start
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start1<span class="token punctuation">)</span>
        start_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    start2<span class="token punctuation">)</span>
        start_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop<span class="token punctuation">)</span>
        VM_stop
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop1<span class="token punctuation">)</span>
        stop_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    stop2<span class="token punctuation">)</span>
        stop_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot<span class="token punctuation">)</span>
        VM_snapshot
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot1<span class="token punctuation">)</span>
        snapshot_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot2<span class="token punctuation">)</span>
        snapshot_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip<span class="token punctuation">)</span>
        VM_set_IP
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip1<span class="token punctuation">)</span>
        set_ip_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    set_ip2<span class="token punctuation">)</span>
        set_ip_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back<span class="token punctuation">)</span>
        VM_shot_back
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back1<span class="token punctuation">)</span>
        shot_back_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_back2<span class="token punctuation">)</span>
        shot_back_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del<span class="token punctuation">)</span>
        VM_shot_del
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del1<span class="token punctuation">)</span>
        shot_del_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_del2<span class="token punctuation">)</span>
        shot_del_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del<span class="token punctuation">)</span>
        VM_clone_del
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del1<span class="token punctuation">)</span>
        clone_del_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    clone_del2<span class="token punctuation">)</span>
        clone_del_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list<span class="token punctuation">)</span>
        VM_shot_list
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list1<span class="token punctuation">)</span>
        shot_list_node
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    shot_list2<span class="token punctuation">)</span>
        shot_list_master
        <span class="token punctuation">;</span><span class="token punctuation">;</span>
    list<span class="token punctuation">)</span>
        VM_list
        <span class="token punctuation">;</span><span class="token punctuation">;</span>

    *<span class="token punctuation">)</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;bash <span class="token variable">$0</span> { c | start | set_ip | stop | shot | shot_list | shot_back | clone_del | shot_del | list }&quot;</span>
        <span class="token builtin class-name">echo</span> <span class="token string">&quot;bash <span class="token variable">$0</span> 每个参数后面都可以添加:1(master)|2(node)，如(c1,stop2,shot_list1)&quot;</span>
<span class="token keyword">esac</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="脚本-first-sh" tabindex="-1"><a class="header-anchor" href="#脚本-first-sh" aria-hidden="true">#</a> 脚本：<a href="#first.sh">first.sh</a></h3><h3 id="start-后-通过-嘉宾-set-ip1-bat-的方式来设置虚拟机-ip、hostname" tabindex="-1"><a class="header-anchor" href="#start-后-通过-嘉宾-set-ip1-bat-的方式来设置虚拟机-ip、hostname" aria-hidden="true">#</a> start 后，通过 嘉宾（set_ip1.bat） 的方式来设置虚拟机（ip、hostname）<a name="使用first.sh"></a></h3><p>脚本：<a href="#first.sh">first.sh</a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>D:<span class="token punctuation">\</span>rj-win<span class="token punctuation">\</span>vm16<span class="token punctuation">\</span>vmrun.exe <span class="token parameter variable">-T</span> ws <span class="token parameter variable">-gu</span> root <span class="token parameter variable">-gp</span> 123456a runProgramInGuest <span class="token string">&quot;F:<span class="token entity" title="\v">\v</span>m\k8s\master-cluster\master-120\master-120.vmx&quot;</span> /bin/bash /root/first.sh <span class="token number">120</span> master-120
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="三、" tabindex="-1"><a class="header-anchor" href="#三、" aria-hidden="true">#</a> 三、</h2><h2 id="四、" tabindex="-1"><a class="header-anchor" href="#四、" aria-hidden="true">#</a> 四、</h2><h2 id="五、" tabindex="-1"><a class="header-anchor" href="#五、" aria-hidden="true">#</a> 五、</h2><h2 id="六、" tabindex="-1"><a class="header-anchor" href="#六、" aria-hidden="true">#</a> 六、</h2></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/topjf/topjf/edit/main/docs/tools/vagrant-vmware.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: topjfk@163.com">jinfang</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/tools/rsync.html" class="nav-link prev" aria-label="Linux 数据同步工具"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><span class="font-icon icon iconfont icon-edit" style=""></span>Linux 数据同步工具</div></a><!----></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright © 2023 topjf</div></footer></div><!--]--><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-30d3d221.js" defer></script>
  </body>
</html>
