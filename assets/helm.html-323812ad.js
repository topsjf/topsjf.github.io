import{_ as l,V as d,W as r,a0 as i,X as t,Y as e,Z as a,$ as n,G as p}from"./framework-ed4f969a.js";const o="data:image/png;base64,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",c={},m=n('<h1>k8s-软件管理工具-Helm</h1><p><strong>Helm 是 Kubernetes 的包管理器</strong></p><h2 id="helm-版本选择" tabindex="-1"><a class="header-anchor" href="#helm-版本选择" aria-hidden="true">#</a> Helm 版本选择</h2><table><thead><tr><th style="text-align:center;">Helm 版本</th><th style="text-align:center;">支持的 Kubernetes 版本</th></tr></thead><tbody><tr><td style="text-align:center;">3.9.x</td><td style="text-align:center;">1.24.x - 1.21.x</td></tr><tr><td style="text-align:center;">3.8.x</td><td style="text-align:center;">1.23.x - 1.20.x</td></tr><tr><td style="text-align:center;">3.7.x</td><td style="text-align:center;">1.22.x - 1.19.x</td></tr><tr><td style="text-align:center;">3.6.x</td><td style="text-align:center;">1.21.x - 1.18.x</td></tr><tr><td style="text-align:center;">3.5.x</td><td style="text-align:center;">1.20.x - 1.17.x</td></tr><tr><td style="text-align:center;">3.4.x</td><td style="text-align:center;">1.19.x - 1.16.x</td></tr></tbody></table><h2 id="安装-helm3-9" tabindex="-1"><a class="header-anchor" href="#安装-helm3-9" aria-hidden="true">#</a> 安装 Helm3.9</h2>',5),u={href:"https://devopscube.com/install-configure-helm-kubernetes/",target:"_blank",rel:"noopener noreferrer"},h=t("p",null,"说明文档：",-1),v={href:"https://docs.helm.sh/zh/",target:"_blank",rel:"noopener noreferrer"},b={href:"https://v3.helm.sh/zh/docs/",target:"_blank",rel:"noopener noreferrer"},k=t("p",null,"下载：",-1),g={href:"https://github.com/helm/helm",target:"_blank",rel:"noopener noreferrer"},x={href:"https://gitee.com/k8s_s/helm",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/helm/helm/releases/v3.9.4",target:"_blank",rel:"noopener noreferrer"},y={href:"https://pan.baidu.com/s/1mBoQNysvt2Jps49YV4y5yg",target:"_blank",rel:"noopener noreferrer"},P=n(`<h3 id="a、从sh文件安装-helm-3" tabindex="-1"><a class="header-anchor" href="#a、从sh文件安装-helm-3" aria-hidden="true">#</a> a、从sh文件安装 helm 3</h3><p><strong>第一步：</strong> 下载最新的 helm 安装脚本。 get_helm.sh可以修改：downloadFile()方法的 <mark>DOWNLOAD_URL</mark> ：指定可以下载的helm文件地址</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-fsSL</span> <span class="token parameter variable">-o</span> get_helm3.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>checkDesiredVersion方法返回：TAG<span class="token operator">=</span><span class="token string">&quot;v3.9.4&quot;</span>
helm-<span class="token variable">\${TAG}</span>-<span class="token variable">\${OS}</span>-<span class="token variable">\${ARCH}</span>.换成 helm-v3.9.4-linux-amd64.
<span class="token assign-left variable">HELM_TMP_ROOT</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>mktemp <span class="token parameter variable">-dt</span> helm-installer-XXXXXX<span class="token variable">)</span></span>&quot;</span> 换成 <span class="token assign-left variable">HELM_TMP_ROOT</span><span class="token operator">=</span><span class="token string">&quot;helm-installer-T53LxQ&quot;</span>
<span class="token builtin class-name">local</span> <span class="token assign-left variable">github_release_url</span><span class="token operator">=</span><span class="token string">&quot;https://github.com/helm/helm/releases/download/<span class="token variable">\${TAG}</span>&quot;</span> 换成 https://github.com/helm/
手动下载：
<span class="token function">curl</span> <span class="token parameter variable">-SsL</span> https://github.com/helm/helm-v3.9.4-linux-amd64.tar.gz.sha256 <span class="token parameter variable">-o</span> /tmp/helm-installer-T53LxQ/helm-v3.9.4-linux-amd64.tar.gz.sha256
<span class="token function">curl</span> <span class="token parameter variable">-SsL</span> https://github.com/helm/helm-v3.9.4-linux-amd64.tar.gz <span class="token parameter variable">-o</span> /tmp/helm-installer-T53LxQ/helm-v3.9.4-linux-amd64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>chmod 777 get_helm3.sh	&amp;&amp; chmod +x get_helm3.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>./get_helm3.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>helm |  helm version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="b、从二进制安装-helm3" tabindex="-1"><a class="header-anchor" href="#b、从二进制安装-helm3" aria-hidden="true">#</a> b、从二进制安装 Helm3</h3>`,8),H=t("strong",null,"第 1 步：",-1),D={href:"https://github.com/helm/helm/releases/v3.9.4",target:"_blank",rel:"noopener noreferrer"},w=n(`<p><strong>第 2 步：</strong> 使用 wget 下载二进制文件。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> <span class="token parameter variable">-O</span> https://get.helm.sh/helm-v3.9.4-linux-amd64.tar.gz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>第 3 步：</strong> 解压下载的文件。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>  <span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> helm-v3.9.4-linux-amd64.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> helm-v3.9.4-linux-amd64.tar.gz <span class="token operator">&amp;&amp;</span>   <span class="token function">chmod</span> +x /root/linux-amd64/helm <span class="token operator">&amp;&amp;</span> <span class="token function">cp</span> /root/linux-amd64/helm /usr/bin/ <span class="token operator">&amp;&amp;</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/bin/helm /usr/local/bin/ <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /root/linux-amd64 <span class="token operator">&amp;&amp;</span> <span class="token function">ls</span> <span class="token parameter variable">-all</span> /usr/local/bin/helm <span class="token operator">&amp;&amp;</span> helm version
  
  <span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> helm-v3.8.2-linux-amd64.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> helm-v3.8.2-linux-amd64.tar.gz <span class="token operator">&amp;&amp;</span>   <span class="token function">chmod</span> +x /root/linux-amd64/helm <span class="token operator">&amp;&amp;</span> <span class="token function">cp</span> /root/linux-amd64/helm /usr/bin/ <span class="token operator">&amp;&amp;</span> <span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/bin/helm /usr/local/bin/ <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> <span class="token parameter variable">-rf</span> /root/linux-amd64 <span class="token operator">&amp;&amp;</span> <span class="token function">ls</span> <span class="token parameter variable">-all</span> /usr/local/bin/helm <span class="token operator">&amp;&amp;</span> helm version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第 6 步：</strong> 添加repo</p><p><a href="#Repo">添加稳定的 repo</a></p><p><strong>第 7 步：</strong> 查看存储类型</p><p>kg sc --all-namespaces</p><p>helm3 变化:</p><ol><li><p>去除Tiller 和 helm serve</p></li><li><p>预定义仓库被移除，添加helm hub</p></li></ol><p>helm search 现在区分 repo 和hub</p><p>repo 是自己手动添加的源</p><p>比如官方的有稳定版和在建设的</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>helm repo <span class="token function">add</span> stable https://kubernetes-charts.storage.googleapis.com
helm repo <span class="token function">add</span> incubator https://kubernetes-charts-incubator.storage.googleapis.com/
helm repo <span class="token function">add</span> ibmstable https://raw.githubusercontent.com/IBM/charts/master/repo/stable
<span class="token comment"># 此处 repo add 的时候，如果名称已存在了也不提醒，居然直接覆盖了，是bug吧</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以把 hub 和 google repo 配合起来食用，效果更佳</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>helm search hub mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li><p>Values 支持 JSON Schema 校验器</p></li><li><p>代码复用 - Library Chart 支持</p></li></ol><p>当一个 Chart 想要使用该 Library Chart内的一些模板时，可以在 Chart.yaml 的 dependencies 依赖项中指定</p><ol start="5"><li>requirements.yaml 被整合到了 Chart.yaml 中，但格式保持不变</li></ol><p>helm2/3 命令差异</p><h5>常用命令一览</h5><table><thead><tr><th>命令</th><th>Helm2</th><th>Helm3</th><th>对应h3增强、区别</th><th>命令说明</th></tr></thead><tbody><tr><td>create</td><td>有</td><td>有</td><td>无</td><td>创建具有给定名称的新图表</td></tr><tr><td><em>delete</em></td><td>有</td><td>无</td><td>-</td><td>给定发布名称，从Kubernetes中删除该发布</td></tr><tr><td>dependency</td><td>有</td><td>有</td><td>无</td><td>管理图表的依赖项</td></tr><tr><td><em>fetch</em></td><td>有</td><td>无</td><td>- <strong>pull</strong></td><td>从存储库下载图表，并（可选）将其解压缩到本地目录中</td></tr><tr><td>get</td><td>有</td><td>有</td><td>有</td><td>下载命名版本</td></tr><tr><td>history</td><td>有</td><td>有</td><td>无</td><td>获取发布历史记录</td></tr><tr><td><em>home</em></td><td>有</td><td>无</td><td>- <strong>env</strong></td><td>显示HELM_HOME的位置</td></tr><tr><td><em>init</em></td><td>有</td><td>无</td><td>-</td><td>在客户端和服务器上初始化Helm</td></tr><tr><td><em>inspect</em></td><td>有</td><td>无</td><td>- <strong>show</strong></td><td>查阅图表</td></tr><tr><td>install</td><td>有</td><td>有</td><td>有</td><td>安装图表存档</td></tr><tr><td>lint</td><td>有</td><td>有</td><td>无</td><td>检查图表中可能出现的问题</td></tr><tr><td>list</td><td>有</td><td>有</td><td>无</td><td>列表发布</td></tr><tr><td>package</td><td>有</td><td>有</td><td>无</td><td>将图表目录打包到图表存档中</td></tr><tr><td>plugin</td><td>有</td><td>有</td><td>有</td><td>添加、列出或删除头盔插件</td></tr><tr><td>repo</td><td>有</td><td>有</td><td>无</td><td>添加、列出、删除、更新和索引图表存储库</td></tr><tr><td><em>reset</em></td><td>有</td><td>无</td><td>-</td><td>从集群卸载Tiller</td></tr><tr><td>rollback</td><td>有</td><td>有</td><td>无</td><td>将发布回滚到以前的版本</td></tr><tr><td>search</td><td>有</td><td>有</td><td>无</td><td>在图表中搜索关键字</td></tr><tr><td><em>serve</em></td><td>有</td><td>无</td><td>-</td><td>启动本地http web服务器</td></tr><tr><td>status</td><td>有</td><td>有</td><td>无</td><td>显示命名版本的状态</td></tr><tr><td>template</td><td>有</td><td>有</td><td>无</td><td>本地渲染模板</td></tr><tr><td>test</td><td>有</td><td>有</td><td>有</td><td>测试发布</td></tr><tr><td>upgrade</td><td>有</td><td>有</td><td>无</td><td>升级发行版</td></tr><tr><td>verify</td><td>有</td><td>有</td><td>无</td><td>验证给定路径上的图表是否已签名且有效</td></tr><tr><td>version</td><td>有</td><td>有</td><td>有</td><td>打印客户端/服务器版本信息</td></tr><tr><td><strong>env</strong></td><td>无</td><td>有</td><td>-</td><td>Helm客户端环境信息</td></tr><tr><td><strong>help</strong></td><td>无</td><td>有</td><td>-</td><td>关于任何命令的帮助</td></tr><tr><td><strong>pull</strong></td><td>无</td><td>有</td><td>-</td><td>从存储库下载图表，并（可选）将其解压缩到本地目录中</td></tr><tr><td><strong>show</strong></td><td>无</td><td>有</td><td>-</td><td>显示图表的信息</td></tr><tr><td><strong>uninstall</strong></td><td>无</td><td>有</td><td>-</td><td>卸载发行版</td></tr><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><ul><li>env是对被删除的命令home的强化</li><li>pull是对被删除的命令fetch的替换</li><li>show是对被删除的命令inspect的替换</li><li>help命令本身在Helm 2时代就可以使用，只是helm --help里面没有显示，算是文档自包含的强化</li><li>uninstall是功能特性的增强</li></ul><p>Helm 3: 命令发生的变化</p><table><thead><tr><th>命令</th><th>Helm 2</th><th>Helm 3</th><th>命令说明区别</th><th>Helm 2 命令说明</th><th>Helm 3命令说明</th></tr></thead><tbody><tr><td>get</td><td>有</td><td>有</td><td>有</td><td>下载命名版本</td><td>下载命名版本的扩展信息</td></tr><tr><td>install</td><td>有</td><td>有</td><td>有</td><td>安装图表存档</td><td>安装图表</td></tr><tr><td>plugin</td><td>有</td><td>有</td><td>有</td><td>添加、列出或删除头盔插件</td><td>安装、列出或卸载Helm插件</td></tr><tr><td>test</td><td>有</td><td>有</td><td>有</td><td>测试发布</td><td>为发布运行测试</td></tr><tr><td>version</td><td>有</td><td>有</td><td>有</td><td>打印客户端/服务器版本信息</td><td>打印客户端版本信息</td></tr></tbody></table><h5>安装 helm2</h5><p>a、安装方法与 [helm3](#从二进制安装 Helm3) 相同</p><p>b、helm2 初始化安装(tiller服务) helm_rbac.yaml</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tiller
  <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
<span class="token punctuation">---</span>
<span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> rbac.authorization.k8s.io/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRoleBinding
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> tiller
<span class="token key atrule">roleRef</span><span class="token punctuation">:</span>
  <span class="token key atrule">apiGroup</span><span class="token punctuation">:</span> rbac.authorization.k8s.io
  <span class="token key atrule">kind</span><span class="token punctuation">:</span> ClusterRole
  <span class="token key atrule">name</span><span class="token punctuation">:</span> cluster<span class="token punctuation">-</span>admin
<span class="token key atrule">subjects</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">kind</span><span class="token punctuation">:</span> ServiceAccount
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tiller
    <span class="token key atrule">namespace</span><span class="token punctuation">:</span> kube<span class="token punctuation">-</span>system
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>kubectl apply -f helm_rbac.yaml</p><p><img src="`+o+`" alt=""></p><h3 id="c、初始化-helm2-部署-tiller" tabindex="-1"><a class="header-anchor" href="#c、初始化-helm2-部署-tiller" aria-hidden="true">#</a> c、初始化 Helm2：部署 Tiller</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>helm init --service-account<span class="token operator">=</span>tiller --tiller-image<span class="token operator">=</span>registry.aliyuncs.com/google_containers/tiller:v2.16.12 --history-max <span class="token number">300</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>helm init <span class="token parameter variable">-i</span> registry.aliyuncs.com/google_containers/tiller:v2.16.12 --stable-repo-url http://mirror.azure.cn/kubernetes/charts/ --service-account tiller <span class="token parameter variable">--override</span> spec.selector.matchLabels.<span class="token string">&#39;name&#39;</span><span class="token operator">=</span><span class="token string">&#39;tiller&#39;</span>,spec.selector.matchLabels.<span class="token string">&#39;app&#39;</span><span class="token operator">=</span><span class="token string">&#39;helm&#39;</span> <span class="token parameter variable">--output</span> yaml <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">&#39;s@apiVersion: extensions/v1beta1@apiVersion: apps/v1@&#39;</span> <span class="token operator">|</span> kubectl apply <span class="token parameter variable">-f</span> -
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="添加稳定的-helm-repo" tabindex="-1"><a class="header-anchor" href="#添加稳定的-helm-repo" aria-hidden="true">#</a> 添加稳定的 Helm Repo <a name="Repo"></a></h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 添加阿里云的 chart 仓库</span>
helm repo <span class="token function">add</span> aliyun https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts
helm repo <span class="token function">add</span> stable http://mirror.azure.cn/kubernetes/charts   推荐
helm repo <span class="token function">add</span> bitnami https://charts.bitnami.com/bitnami
删除：helm repo remove bitnami
<span class="token comment"># 更新chart仓库</span>
a@node1:~$ helm repo update

<span class="token comment"># 查看配置的 chart 仓库有哪些</span>
a@node1:~$ helm repo list
NAME    URL
aliyun  https://kubernetes.oss-cn-hangzhou.aliyuncs.com/charts
stable  http://mirror.azure.cn/kubernetes/charts

<span class="token comment"># 从指定 chart 仓库地址搜索 chart</span>
a@node1:~$ helm search repo aliyun <span class="token operator">|</span> <span class="token function">grep</span> redis
aliyun/redis                    <span class="token number">1.1</span>.15          <span class="token number">4.0</span>.8           Open source, advanced key-value store. It is of<span class="token punctuation">..</span>.
aliyun/redis-ha                 <span class="token number">2.0</span>.1                           Highly available Redis cluster with multiple se<span class="token punctuation">..</span>.

a@node1:~$ helm search repo stable <span class="token operator">|</span> <span class="token function">grep</span> redis
stable/prometheus-redis-exporter        <span class="token number">3.5</span>.1           <span class="token number">1.3</span>.4                   DEPRECATED Prometheus exporter <span class="token keyword">for</span> Redis metrics
stable/redis                            <span class="token number">10.5</span>.7          <span class="token number">5.0</span>.7                   DEPRECATED Open source, advanced key-value stor<span class="token punctuation">..</span>.
stable/redis-ha                         <span class="token number">4.4</span>.6           <span class="token number">5.0</span>.6                   DEPRECATED - Highly available Kubernetes implem<span class="token punctuation">..</span>.

a@node1:~$ helm search repo bitnami <span class="token operator">|</span> <span class="token function">grep</span> redis
bitnami/redis                                   <span class="token number">15.6</span>.4          <span class="token number">6.2</span>.6           Open source, advanced key-value store. It is of<span class="token punctuation">..</span>.
bitnami/redis-cluster                           <span class="token number">7.0</span>.13          <span class="token number">6.2</span>.6           Open source, advanced key-value store. It is of<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,36);function L(z,X){const s=p("ExternalLinkIcon");return d(),r("div",null,[i(" more "),m,t("p",null,[t("a",u,[e("安装 Helm3.9"),a(s)])]),h,t("p",null,[t("a",v,[e("https://docs.helm.sh/zh/"),a(s)])]),t("p",null,[t("a",b,[e("https://v3.helm.sh/zh/docs/"),a(s)])]),k,t("p",null,[t("a",g,[e("https://github.com/helm/helm"),a(s)])]),t("p",null,[t("a",x,[e("https://gitee.com/k8s_s/helm"),a(s)])]),t("p",null,[t("a",f,[e("https://github.com/helm/helm/releases/v3.9.4"),a(s)])]),t("p",null,[t("a",y,[e("Helm 下载提取码：1234"),a(s)])]),P,t("p",null,[H,e(" 前往："),t("a",D,[e("https://github.com/helm/helm/releases/v3.9.4"),a(s)]),e(" 或者上面的地址")]),w])}const I=l(c,[["render",L],["__file","helm.html.vue"]]);export{I as default};
