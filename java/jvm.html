<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://topjf.github.io/java/jvm.html"><meta property="og:site_name" content="topjf"><meta property="og:title" content="jvm"><meta property="og:description" content="1.1 åŠ è½½è¿‡ç¨‹ä»‹ç» å¦‚æœ JVM æƒ³è¦æ‰§è¡Œè¿™ä¸ª .class æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è£…è¿›ä¸€ä¸ªç±»åŠ è½½å™¨ä¸­ï¼Œå®ƒå°±åƒä¸€ä¸ªæ¬è¿å·¥ä¸€æ ·ï¼Œä¼šæŠŠæ‰€æœ‰çš„ .class æ–‡ä»¶å…¨éƒ¨æ¬è¿› JVM é‡Œé¢æ¥ã€‚ é‡ç‚¹çŸ¥è¯†ï¼š Java æ–‡ä»¶ç»è¿‡ç¼–è¯‘åå˜æˆ .class å­—èŠ‚ç æ–‡ä»¶ï¼›; å­—èŠ‚ç æ–‡ä»¶é€šè¿‡ç±»åŠ è½½å™¨è¢«æ¬è¿åˆ° JVM è™šæ‹Ÿæœºä¸­ï¼›; è™šæ‹Ÿæœºä¸»è¦çš„ 5 å¤§å—ï¼šæ–¹æ³•åŒºï¼Œå †éƒ½ä¸ºçº¿ç¨‹å…±äº«..."><meta property="og:type" content="article"><meta property="og:image" content="https://topjf.github.io/"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2022-12-16T06:02:03.000Z"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image:alt" content="jvm"><meta property="article:tag" content="jvm"><meta property="article:published_time" content="2020-08-22T00:00:00.000Z"><meta property="article:modified_time" content="2022-12-16T06:02:03.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"jvm","image":["https://topjf.github.io/"],"datePublished":"2020-08-22T00:00:00.000Z","dateModified":"2022-12-16T06:02:03.000Z","author":[]}</script><script type="text/javascript" src="/script/demo.js"></script><link rel="stylesheet" href="/iconfont/iconfont.css"><link rel="icon" href="/assets/icon/chrome-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-512.png" type="image/png" sizes="512x512"><link rel="icon" href="/assets/icon/chrome-mask-192.png" type="image/png" sizes="192x192"><link rel="icon" href="/assets/icon/chrome-mask-512.png" type="image/png" sizes="512x512"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><link rel="apple-touch-icon" href="/assets/icon/apple-icon-152.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileImage" content="/assets/icon/ms-icon-144.png"><meta name="msapplication-TileColor" content="#ffffff"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>jvm | topjf</title><meta name="description" content="1.1 åŠ è½½è¿‡ç¨‹ä»‹ç» å¦‚æœ JVM æƒ³è¦æ‰§è¡Œè¿™ä¸ª .class æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è£…è¿›ä¸€ä¸ªç±»åŠ è½½å™¨ä¸­ï¼Œå®ƒå°±åƒä¸€ä¸ªæ¬è¿å·¥ä¸€æ ·ï¼Œä¼šæŠŠæ‰€æœ‰çš„ .class æ–‡ä»¶å…¨éƒ¨æ¬è¿› JVM é‡Œé¢æ¥ã€‚ é‡ç‚¹çŸ¥è¯†ï¼š Java æ–‡ä»¶ç»è¿‡ç¼–è¯‘åå˜æˆ .class å­—èŠ‚ç æ–‡ä»¶ï¼›; å­—èŠ‚ç æ–‡ä»¶é€šè¿‡ç±»åŠ è½½å™¨è¢«æ¬è¿åˆ° JVM è™šæ‹Ÿæœºä¸­ï¼›; è™šæ‹Ÿæœºä¸»è¦çš„ 5 å¤§å—ï¼šæ–¹æ³•åŒºï¼Œå †éƒ½ä¸ºçº¿ç¨‹å…±äº«...">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-41a36a5c.css" as="style"><link rel="stylesheet" href="/assets/style-41a36a5c.css">
    <link rel="modulepreload" href="/assets/app-30d3d221.js"><link rel="modulepreload" href="/assets/framework-ed4f969a.js"><link rel="modulepreload" href="/assets/jvm.html-87c7b8c4.js"><link rel="modulepreload" href="/assets/jvm.html-a6d07842.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="topjf"><!----><span class="site-name hide-in-pad">topjf</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="é¦–é¡µ"><span class="font-icon icon iconfont icon-home" style=""></span>é¦–é¡µ<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="å¿«é€Ÿå¯¼èˆª"><span class="font-icon icon iconfont icon-arrow" style=""></span>å¿«é€Ÿå¯¼èˆª<!----></a></div><div class="nav-item hide-in-mobile"><a href="/all/all.html" class="nav-link" aria-label="é¢è¯•å®å…¸"><span class="font-icon icon iconfont icon-overflow" style=""></span>é¢è¯•å®å…¸<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ä¸ªäººä¸­å¿ƒ"><span class="title"><span class="font-icon icon iconfont icon-anonymous" style=""></span>ä¸ªäººä¸­å¿ƒ</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/article" class="nav-link" aria-label="æ–‡ç« "><span class="font-icon icon iconfont icon-note" style=""></span>æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/category" class="nav-link" aria-label="åˆ†ç±»"><span class="font-icon icon iconfont icon-categoryselected" style=""></span>åˆ†ç±»<!----></a></li><li class="dropdown-item"><a href="/tag" class="nav-link" aria-label="æ ‡ç­¾"><span class="font-icon icon iconfont icon-list" style=""></span>æ ‡ç­¾<!----></a></li><li class="dropdown-item"><a href="/encrypted" class="nav-link" aria-label="åŠ å¯†æ–‡ç« "><span class="font-icon icon iconfont icon-command" style=""></span>åŠ å¯†æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/star" class="nav-link" aria-label="æ”¶è—æ–‡ç« "><span class="font-icon icon iconfont icon-like" style=""></span>æ”¶è—æ–‡ç« <!----></a></li><li class="dropdown-item"><a href="/timeline" class="nav-link" aria-label="æ—¶é—´çº¿"><span class="font-icon icon iconfont icon-time" style=""></span>æ—¶é—´çº¿<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="ç½‘ç«™ç›¸å…³"><span class="title"><span class="font-icon icon iconfont icon-info" style=""></span>ç½‘ç«™ç›¸å…³</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a href="/about/about-this.html" class="nav-link" aria-label="å…³äºæœ¬ç«™"><span class="font-icon icon iconfont icon-people" style=""></span>å…³äºæœ¬ç«™<!----></a></li><li class="dropdown-item"><a href="/history/history.html" class="nav-link" aria-label="ç½‘ç«™å†å²"><span class="font-icon icon iconfont icon-time" style=""></span>ç½‘ç«™å†å²<!----></a></li><li class="dropdown-item"><a href="https://theme-hope.vuejs.press/zh/" rel="noopener noreferrer" target="_blank" aria-label="VuePress Theme Hope æ–‡æ¡£" class="nav-link"><span class="font-icon icon iconfont icon-creative" style=""></span>VuePress Theme Hope æ–‡æ¡£<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></li></ul></button></div></div></nav><!--[--><!----><!--]--></div><div class="navbar-right"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/topjf/topjf" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">åŸºç¡€</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/java/basis/arraylist.html" class="nav-link sidebar-link sidebar-page" aria-label="ArrayListé›†åˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>ArrayListé›†åˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/basic-grammar.html" class="nav-link sidebar-link sidebar-page" aria-label="é¢å‘å¯¹è±¡åŸºç¡€"><span class="font-icon icon iconfont icon-edit" style=""></span>é¢å‘å¯¹è±¡åŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/data-structure.html" class="nav-link sidebar-link sidebar-page" aria-label="æ•°æ®ç»“æ„"><span class="font-icon icon iconfont icon-edit" style=""></span>æ•°æ®ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/exception.html" class="nav-link sidebar-link sidebar-page" aria-label="å¼‚å¸¸"><span class="font-icon icon iconfont icon-edit" style=""></span>å¼‚å¸¸<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/io-note.html" class="nav-link sidebar-link sidebar-page" aria-label="IOæ–‡ä»¶æµ"><span class="font-icon icon iconfont icon-edit" style=""></span>IOæ–‡ä»¶æµ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/mysql-setting.html" class="nav-link sidebar-link sidebar-page" aria-label="æ•°æ®åº“è®¾è®¡éœ€è¦æ³¨æ„ä»€ä¹ˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>æ•°æ®åº“è®¾è®¡éœ€è¦æ³¨æ„ä»€ä¹ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/oop.html" class="nav-link sidebar-link sidebar-page" aria-label="OOPæ ¸å¿ƒ"><span class="font-icon icon iconfont icon-edit" style=""></span>OOPæ ¸å¿ƒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/string.html" class="nav-link sidebar-link sidebar-page" aria-label="å­—ç¬¦ä¸²ç»ƒä¹ "><span class="font-icon icon iconfont icon-edit" style=""></span>å­—ç¬¦ä¸²ç»ƒä¹ <!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/basis/web-servlet-jsp.html" class="nav-link sidebar-link sidebar-page" aria-label="servletåŸºç¡€"><span class="font-icon icon iconfont icon-edit" style=""></span>servletåŸºç¡€<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li><li><!--[--><a href="/java/test.html" class="nav-link sidebar-link sidebar-page" aria-label="æµ‹è¯•md"><span class="font-icon icon iconfont icon-edit" style=""></span>æµ‹è¯•md<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-log.html" class="nav-link sidebar-link sidebar-page" aria-label="Javaæ—¥å¿—æ¡†æ¶"><span class="font-icon icon iconfont icon-edit" style=""></span>Javaæ—¥å¿—æ¡†æ¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-jsr303.html" class="nav-link sidebar-link sidebar-page" aria-label="JSR303æ ¡éªŒ"><span class="font-icon icon iconfont icon-edit" style=""></span>JSR303æ ¡éªŒ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/java-exception.html" class="nav-link sidebar-link sidebar-page" aria-label="å¼‚å¸¸å¤„ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>å¼‚å¸¸å¤„ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/PreventDuplicateSubmissions.html" class="nav-link sidebar-link sidebar-page" aria-label="session+redisé˜²æ­¢é‡å¤æäº¤"><span class="font-icon icon iconfont icon-edit" style=""></span>session+redisé˜²æ­¢é‡å¤æäº¤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/23-design-patterns.html" class="nav-link sidebar-link sidebar-page" aria-label="23ç§è®¾è®¡æ¨¡å¼æ•´ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>23ç§è®¾è®¡æ¨¡å¼æ•´ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/java/jvm.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="jvm"><span class="font-icon icon iconfont icon-edit" style=""></span>jvm<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_1-1-åŠ è½½è¿‡ç¨‹ä»‹ç»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 åŠ è½½è¿‡ç¨‹ä»‹ç»"><!---->1.1 åŠ è½½è¿‡ç¨‹ä»‹ç»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_1-2-ç±»åŠ è½½æµç¨‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 ç±»åŠ è½½æµç¨‹"><!---->1.2 ç±»åŠ è½½æµç¨‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_1-3-ç±»åŠ è½½å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 ç±»åŠ è½½å™¨"><!---->1.3 ç±»åŠ è½½å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-1-å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»"><!---->2.1 å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-2-åƒåœ¾å›æ”¶ç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 åƒåœ¾å›æ”¶ç®—æ³•"><!---->2.2 åƒåœ¾å›æ”¶ç®—æ³•<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-2-1-æ ‡è®°-æ¸…é™¤ç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.1 æ ‡è®°--æ¸…é™¤ç®—æ³•"><!---->2.2.1 æ ‡è®°--æ¸…é™¤ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-2-2-å¤åˆ¶ç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.2 å¤åˆ¶ç®—æ³•"><!---->2.2.2 å¤åˆ¶ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-2-3-æ ‡è®°-æ•´ç†ç®—æ³•" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2.3 æ ‡è®°--æ•´ç†ç®—æ³•"><!---->2.2.3 æ ‡è®°--æ•´ç†ç®—æ³•<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-åƒåœ¾æ”¶é›†å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 åƒåœ¾æ”¶é›†å™¨"><!---->2.3 åƒåœ¾æ”¶é›†å™¨<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-1-serial-æ”¶é›†å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.1 Serial æ”¶é›†å™¨"><!---->2.3.1 Serial æ”¶é›†å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-2-parnew-æ”¶é›†å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.2 ParNew æ”¶é›†å™¨"><!---->2.3.2 ParNew æ”¶é›†å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-3-parallel-scavenge-æ”¶é›†å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.3 Parallel Scavenge æ”¶é›†å™¨"><!---->2.3.3 Parallel Scavenge æ”¶é›†å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-4-serial-old-æ”¶é›†å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.4 Serial Old æ”¶é›†å™¨"><!---->2.3.4 Serial Old æ”¶é›†å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-5-parallel-old-æ”¶é›†å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.5 Parallel Old æ”¶é›†å™¨"><!---->2.3.5 Parallel Old æ”¶é›†å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-6-cmsæ”¶é›†å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.6 CMSæ”¶é›†å™¨"><!---->2.3.6 CMSæ”¶é›†å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_2-3-7-åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3.7 åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”"><!---->2.3.7 åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_3-1-java-å †-heap" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 Java å †ï¼ˆHeapï¼‰"><!---->3.1 Java å †ï¼ˆHeapï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_3-2-è™šæ‹Ÿæœºæ ˆ-jvm-stacks" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 è™šæ‹Ÿæœºæ ˆï¼ˆJVM Stacksï¼‰"><!---->3.2 è™šæ‹Ÿæœºæ ˆï¼ˆJVM Stacksï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_3-3-æœ¬åœ°æ–¹æ³•æ ˆ-native-method-stacks" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰"><!---->3.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_3-4-æ–¹æ³•åŒº-method-area" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰"><!---->3.4 æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_3-5-ç¨‹åºè®¡æ•°å™¨-program-counter-register" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.5 ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰"><!---->3.5 ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_4-1-å †å†…å­˜ç»“æ„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 å †å†…å­˜ç»“æ„"><!---->4.1 å †å†…å­˜ç»“æ„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_4-2-gcç±»å‹" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 GCç±»å‹"><!---->4.2 GCç±»å‹<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_4-3-minor-gc-å·¥ä½œåŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 Minor GC å·¥ä½œåŸç†"><!---->4.3 Minor GC å·¥ä½œåŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_4-4-full-gc-å·¥ä½œåŸç†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.4 Full GC å·¥ä½œåŸç†"><!---->4.4 Full GC å·¥ä½œåŸç†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_5-1-gc-æ—¥å¿—å¼€å¯" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 GC æ—¥å¿—å¼€å¯"><!---->5.1 GC æ—¥å¿—å¼€å¯<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_5-2-ç†è§£-gc-æ—¥å¿—" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 ç†è§£ GC æ—¥å¿—"><!---->5.2 ç†è§£ GC æ—¥å¿—<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_6-1-jps" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 jps"><!---->6.1 jps<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_6-2-jstat" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 jstat"><!---->6.2 jstat<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_6-3-jmap" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 jmap"><!---->6.3 jmap<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_6-4-jhat" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.4 jhat"><!---->6.4 jhat<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_6-5-jstack" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.5 jstack"><!---->6.5 jstack<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_7-1-jconsole" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 jconsole"><!---->7.1 jconsole<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_7-2-visualvm" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 VisualVM"><!---->7.2 VisualVM<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-1-é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨"><!---->8.1 é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-2-è°ƒæ•´å†…å­˜å¤§å°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 è°ƒæ•´å†…å­˜å¤§å°"><!---->8.2 è°ƒæ•´å†…å­˜å¤§å°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-3-è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.3 è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´"><!---->8.3 è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-4-è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.4 è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡"><!---->8.4 è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-5-è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.5 è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„"><!---->8.5 è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-6-è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.6 è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†"><!---->8.6 è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-7-è°ƒæ•´gcçš„è§¦å‘æ—¶æœº" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.7 è°ƒæ•´GCçš„è§¦å‘æ—¶æœº"><!---->8.7 è°ƒæ•´GCçš„è§¦å‘æ—¶æœº<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_8-8-è°ƒæ•´-jvmæœ¬åœ°å†…å­˜å¤§å°" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.8 è°ƒæ•´ JVMæœ¬åœ°å†…å­˜å¤§å°"><!---->8.8 è°ƒæ•´ JVMæœ¬åœ°å†…å­˜å¤§å°<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_9-1-ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢å-ç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.1 ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢åï¼Œç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢"><!---->9.1 ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢åï¼Œç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#_9-2-åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„-oom" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.2 åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„ OOM"><!---->9.2 åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„ OOM<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/java/jvm.html#jvmå‚æ•°çš„å«ä¹‰" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="JVMå‚æ•°çš„å«ä¹‰"><!---->JVMå‚æ•°çš„å«ä¹‰<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/java/nacos-gateway-sentinel-sleuth.html" class="nav-link sidebar-link sidebar-page" aria-label="nacos-gateway-sentinel-sleuth"><span class="font-icon icon iconfont icon-edit" style=""></span>nacos-gateway-sentinel-sleuth<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/nacos-note.html" class="nav-link sidebar-link sidebar-page" aria-label="Nacosç¬”è®°"><span class="font-icon icon iconfont icon-edit" style=""></span>Nacosç¬”è®°<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/oss.html" class="nav-link sidebar-link sidebar-page" aria-label="OSS"><span class="font-icon icon iconfont icon-edit" style=""></span>OSS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/spring-cloud-alibaba-note-basis.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloud-Alibabaé¡¹ç›®ç¬”è®°-åŸºç¡€ç¯‡"><span class="font-icon icon iconfont icon-edit" style=""></span>SpringCloud-Alibabaé¡¹ç›®ç¬”è®°-åŸºç¡€ç¯‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/spring-cloud-alibaba-note-high-level.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloud-Alibabaé¡¹ç›®ç¬”è®°-é«˜çº§ç¯‡"><span class="font-icon icon iconfont icon-edit" style=""></span>SpringCloud-Alibabaé¡¹ç›®ç¬”è®°-é«˜çº§ç¯‡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/swagger.html" class="nav-link sidebar-link sidebar-page" aria-label="swagger"><span class="font-icon icon iconfont icon-edit" style=""></span>swagger<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/spring-cloud-core-components.html" class="nav-link sidebar-link sidebar-page" aria-label="spring cloud çš„å‡ å¤§ç»„ä»¶"><span class="font-icon icon iconfont icon-edit" style=""></span>spring cloud çš„å‡ å¤§ç»„ä»¶<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/cloud-session.html" class="nav-link sidebar-link sidebar-page" aria-label="åˆ†å¸ƒå¼session"><span class="font-icon icon iconfont icon-edit" style=""></span>åˆ†å¸ƒå¼session<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/cloud-lock-cache.html" class="nav-link sidebar-link sidebar-page" aria-label="åˆ†å¸ƒå¼é”ã€ç¼“å­˜"><span class="font-icon icon iconfont icon-edit" style=""></span>åˆ†å¸ƒå¼é”ã€ç¼“å­˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/local-cloud-affairs-seata.html" class="nav-link sidebar-link sidebar-page" aria-label="æœ¬åœ°äº‹åŠ¡ã€åˆ†å¸ƒå¼äº‹åŠ¡åŠseata"><span class="font-icon icon iconfont icon-edit" style=""></span>æœ¬åœ°äº‹åŠ¡ã€åˆ†å¸ƒå¼äº‹åŠ¡åŠseata<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/single-sign-on.html" class="nav-link sidebar-link sidebar-page" aria-label="å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰"><span class="font-icon icon iconfont icon-edit" style=""></span>å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/timed-task.html" class="nav-link sidebar-link sidebar-page" aria-label="å®šæ—¶ä»»åŠ¡"><span class="font-icon icon iconfont icon-edit" style=""></span>å®šæ—¶ä»»åŠ¡<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/asynchronous.html" class="nav-link sidebar-link sidebar-page" aria-label="å¼‚æ­¥"><span class="font-icon icon iconfont icon-edit" style=""></span>å¼‚æ­¥<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/mybatis-plus.html" class="nav-link sidebar-link sidebar-page" aria-label="æ•´åˆmybatis-plus"><span class="font-icon icon iconfont icon-edit" style=""></span>æ•´åˆmybatis-plus<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/permission-management.html" class="nav-link sidebar-link sidebar-page" aria-label="æƒé™ç®¡ç†"><span class="font-icon icon iconfont icon-edit" style=""></span>æƒé™ç®¡ç†<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/jmeter.html" class="nav-link sidebar-link sidebar-page" aria-label="jmeteræ€§èƒ½å‹æµ‹"><span class="font-icon icon iconfont icon-edit" style=""></span>jmeteræ€§èƒ½å‹æµ‹<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/template-engine-thymeleaf.html" class="nav-link sidebar-link sidebar-page" aria-label="æ¨¡æ¿å¼•æ“-Thymeleaf"><span class="font-icon icon iconfont icon-edit" style=""></span>æ¨¡æ¿å¼•æ“-Thymeleaf<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><p class="sidebar-heading"><span class="font-icon icon iconfont icon-featured" style=""></span><span class="title">æ–°ç‰¹æ€§</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/java/new-features/java8-common-new-features.html" class="nav-link sidebar-link sidebar-page" aria-label="Java8 æ–°ç‰¹æ€§å®æˆ˜"><span class="font-icon icon iconfont icon-edit" style=""></span>Java8 æ–°ç‰¹æ€§å®æˆ˜<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/new-features/java8-tutorial-translate.html" class="nav-link sidebar-link sidebar-page" aria-label="Java8 æŒ‡å—ä¸­æ–‡ç¿»è¯‘"><span class="font-icon icon iconfont icon-edit" style=""></span>Java8 æŒ‡å—ä¸­æ–‡ç¿»è¯‘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/new-features/java9.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 9 æ–°ç‰¹æ€§æ¦‚è§ˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>Java 9 æ–°ç‰¹æ€§æ¦‚è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/new-features/java10.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 10 æ–°ç‰¹æ€§æ¦‚è§ˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>Java 10 æ–°ç‰¹æ€§æ¦‚è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/new-features/java11.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 11 æ–°ç‰¹æ€§æ¦‚è§ˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>Java 11 æ–°ç‰¹æ€§æ¦‚è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/new-features/java12-13.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 12 ~ 13 æ–°ç‰¹æ€§æ¦‚è§ˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>Java 12 ~ 13 æ–°ç‰¹æ€§æ¦‚è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/new-features/java14-15.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 14 ~ 15 æ–°ç‰¹æ€§æ¦‚è§ˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>Java 14 ~ 15 æ–°ç‰¹æ€§æ¦‚è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/java/new-features/java16.html" class="nav-link sidebar-link sidebar-page" aria-label="Java 16 æ–°ç‰¹æ€§æ¦‚è§ˆ"><span class="font-icon icon iconfont icon-edit" style=""></span>Java 16 æ–°ç‰¹æ€§æ¦‚è§ˆ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="font-icon icon iconfont icon-edit" style=""></span>jvm</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="/article" target="_blank" rel="noopener noreferrer">topjf</a></span><span property="author" content="topjf"></span></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category4 clickable" role="navigation">Java</span><meta property="articleSection" content="Java"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag2 clickable" role="navigation">jvm</span><meta property="keywords" content="jvm"></span><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2020-08-22T00:00:00.000Z"></span><!----><span class="page-word-info" aria-label="å­—æ•°ğŸ” " data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>çº¦ 8697 å­—</span><meta property="wordCount" content="8697"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 29 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT29M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">æ­¤é¡µå†…å®¹<!----></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_1-1-åŠ è½½è¿‡ç¨‹ä»‹ç»" class="router-link-active router-link-exact-active toc-link level2">1.1 åŠ è½½è¿‡ç¨‹ä»‹ç»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_1-2-ç±»åŠ è½½æµç¨‹" class="router-link-active router-link-exact-active toc-link level2">1.2 ç±»åŠ è½½æµç¨‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_1-3-ç±»åŠ è½½å™¨" class="router-link-active router-link-exact-active toc-link level2">1.3 ç±»åŠ è½½å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-1-å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»" class="router-link-active router-link-exact-active toc-link level2">2.1 å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-2-åƒåœ¾å›æ”¶ç®—æ³•" class="router-link-active router-link-exact-active toc-link level2">2.2 åƒåœ¾å›æ”¶ç®—æ³•</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-2-1-æ ‡è®°-æ¸…é™¤ç®—æ³•" class="router-link-active router-link-exact-active toc-link level4">2.2.1 æ ‡è®°--æ¸…é™¤ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-2-2-å¤åˆ¶ç®—æ³•" class="router-link-active router-link-exact-active toc-link level4">2.2.2 å¤åˆ¶ç®—æ³•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-2-3-æ ‡è®°-æ•´ç†ç®—æ³•" class="router-link-active router-link-exact-active toc-link level4">2.2.3 æ ‡è®°--æ•´ç†ç®—æ³•</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-åƒåœ¾æ”¶é›†å™¨" class="router-link-active router-link-exact-active toc-link level2">2.3 åƒåœ¾æ”¶é›†å™¨</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-1-serial-æ”¶é›†å™¨" class="router-link-active router-link-exact-active toc-link level4">2.3.1 Serial æ”¶é›†å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-2-parnew-æ”¶é›†å™¨" class="router-link-active router-link-exact-active toc-link level4">2.3.2 ParNew æ”¶é›†å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-3-parallel-scavenge-æ”¶é›†å™¨" class="router-link-active router-link-exact-active toc-link level4">2.3.3 Parallel Scavenge æ”¶é›†å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-4-serial-old-æ”¶é›†å™¨" class="router-link-active router-link-exact-active toc-link level4">2.3.4 Serial Old æ”¶é›†å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-5-parallel-old-æ”¶é›†å™¨" class="router-link-active router-link-exact-active toc-link level4">2.3.5 Parallel Old æ”¶é›†å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-6-cmsæ”¶é›†å™¨" class="router-link-active router-link-exact-active toc-link level4">2.3.6 CMSæ”¶é›†å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_2-3-7-åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”" class="router-link-active router-link-exact-active toc-link level4">2.3.7 åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_3-1-java-å †-heap" class="router-link-active router-link-exact-active toc-link level2">3.1 Java å †ï¼ˆHeapï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_3-2-è™šæ‹Ÿæœºæ ˆ-jvm-stacks" class="router-link-active router-link-exact-active toc-link level2">3.2 è™šæ‹Ÿæœºæ ˆï¼ˆJVM Stacksï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_3-3-æœ¬åœ°æ–¹æ³•æ ˆ-native-method-stacks" class="router-link-active router-link-exact-active toc-link level2">3.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_3-4-æ–¹æ³•åŒº-method-area" class="router-link-active router-link-exact-active toc-link level2">3.4 æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_3-5-ç¨‹åºè®¡æ•°å™¨-program-counter-register" class="router-link-active router-link-exact-active toc-link level2">3.5 ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_4-1-å †å†…å­˜ç»“æ„" class="router-link-active router-link-exact-active toc-link level2">4.1 å †å†…å­˜ç»“æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_4-2-gcç±»å‹" class="router-link-active router-link-exact-active toc-link level2">4.2 GCç±»å‹</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_4-3-minor-gc-å·¥ä½œåŸç†" class="router-link-active router-link-exact-active toc-link level2">4.3 Minor GC å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_4-4-full-gc-å·¥ä½œåŸç†" class="router-link-active router-link-exact-active toc-link level2">4.4 Full GC å·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_5-1-gc-æ—¥å¿—å¼€å¯" class="router-link-active router-link-exact-active toc-link level2">5.1 GC æ—¥å¿—å¼€å¯</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_5-2-ç†è§£-gc-æ—¥å¿—" class="router-link-active router-link-exact-active toc-link level2">5.2 ç†è§£ GC æ—¥å¿—</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_6-1-jps" class="router-link-active router-link-exact-active toc-link level2">6.1 jps</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_6-2-jstat" class="router-link-active router-link-exact-active toc-link level2">6.2 jstat</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_6-3-jmap" class="router-link-active router-link-exact-active toc-link level2">6.3 jmap</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_6-4-jhat" class="router-link-active router-link-exact-active toc-link level2">6.4 jhat</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_6-5-jstack" class="router-link-active router-link-exact-active toc-link level2">6.5 jstack</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_7-1-jconsole" class="router-link-active router-link-exact-active toc-link level2">7.1 jconsole</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_7-2-visualvm" class="router-link-active router-link-exact-active toc-link level2">7.2 VisualVM</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-1-é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨" class="router-link-active router-link-exact-active toc-link level2">8.1 é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-2-è°ƒæ•´å†…å­˜å¤§å°" class="router-link-active router-link-exact-active toc-link level2">8.2 è°ƒæ•´å†…å­˜å¤§å°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-3-è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´" class="router-link-active router-link-exact-active toc-link level2">8.3 è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-4-è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡" class="router-link-active router-link-exact-active toc-link level2">8.4 è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-5-è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„" class="router-link-active router-link-exact-active toc-link level2">8.5 è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-6-è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†" class="router-link-active router-link-exact-active toc-link level2">8.6 è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-7-è°ƒæ•´gcçš„è§¦å‘æ—¶æœº" class="router-link-active router-link-exact-active toc-link level2">8.7 è°ƒæ•´GCçš„è§¦å‘æ—¶æœº</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_8-8-è°ƒæ•´-jvmæœ¬åœ°å†…å­˜å¤§å°" class="router-link-active router-link-exact-active toc-link level2">8.8 è°ƒæ•´ JVMæœ¬åœ°å†…å­˜å¤§å°</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_9-1-ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢å-ç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢" class="router-link-active router-link-exact-active toc-link level2">9.1 ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢åï¼Œç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#_9-2-åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„-oom" class="router-link-active router-link-exact-active toc-link level2">9.2 åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„ OOM</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/java/jvm.html#jvmå‚æ•°çš„å«ä¹‰" class="router-link-active router-link-exact-active toc-link level2">JVMå‚æ•°çš„å«ä¹‰</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><!-- more --><p><img src="/assets/true-640-eac86991.png" alt=""></p><h1>1. ç±»çš„åŠ è½½è¿‡ç¨‹</h1><h2 id="_1-1-åŠ è½½è¿‡ç¨‹ä»‹ç»" tabindex="-1"><a class="header-anchor" href="#_1-1-åŠ è½½è¿‡ç¨‹ä»‹ç»" aria-hidden="true">#</a> 1.1 åŠ è½½è¿‡ç¨‹ä»‹ç»</h2><p>å¦‚æœ JVM æƒ³è¦æ‰§è¡Œè¿™ä¸ª .class æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è£…è¿›ä¸€ä¸ªç±»åŠ è½½å™¨ä¸­ï¼Œå®ƒå°±åƒä¸€ä¸ªæ¬è¿å·¥ä¸€æ ·ï¼Œä¼šæŠŠæ‰€æœ‰çš„ .class æ–‡ä»¶å…¨éƒ¨æ¬è¿› JVM é‡Œé¢æ¥ã€‚</p><p><img src="/assets/true-640-16558637842152-9e30a9c8.png" alt=""></p><p>é‡ç‚¹çŸ¥è¯†ï¼š</p><ul><li>Java æ–‡ä»¶ç»è¿‡ç¼–è¯‘åå˜æˆ .class å­—èŠ‚ç æ–‡ä»¶ï¼›</li><li>å­—èŠ‚ç æ–‡ä»¶é€šè¿‡ç±»åŠ è½½å™¨è¢«æ¬è¿åˆ° JVM è™šæ‹Ÿæœºä¸­ï¼›</li><li>è™šæ‹Ÿæœºä¸»è¦çš„ 5 å¤§å—ï¼šæ–¹æ³•åŒºï¼Œå †éƒ½ä¸ºçº¿ç¨‹å…±äº«åŒºåŸŸï¼Œæœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆå’Œè®¡æ•°å™¨éƒ½æ˜¯ç‹¬äº«åŒºåŸŸï¼Œä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè€Œ JVM çš„è°ƒä¼˜ä¸»è¦å°±æ˜¯å›´ç»•å †ï¼Œæ ˆä¸¤å¤§å—è¿›è¡Œã€‚</li></ul><p><img src="/assets/true-640-16558637842153-afbc860e.png" alt=""></p><h2 id="_1-2-ç±»åŠ è½½æµç¨‹" tabindex="-1"><a class="header-anchor" href="#_1-2-ç±»åŠ è½½æµç¨‹" aria-hidden="true">#</a> 1.2 ç±»åŠ è½½æµç¨‹</h2><p>ç±»åŠ è½½çš„è¿‡ç¨‹åŒ…æ‹¬äº†<strong>åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ã€è§£æã€åˆå§‹åŒ–</strong>äº”ä¸ªé˜¶æ®µã€‚</p><p>åœ¨è¿™äº”ä¸ªé˜¶æ®µä¸­ï¼ŒåŠ è½½ã€éªŒè¯ã€å‡†å¤‡å’Œåˆå§‹åŒ–è¿™å››ä¸ªé˜¶æ®µå‘ç”Ÿçš„é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œè€Œè§£æé˜¶æ®µåˆ™ä¸ä¸€å®šï¼Œå®ƒåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥åœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åå¼€å§‹ï¼Œè¿™æ˜¯ä¸ºäº†æ”¯æŒ Java è¯­è¨€çš„è¿è¡Œæ—¶ç»‘å®šï¼ˆä¹Ÿæˆä¸ºåŠ¨æ€ç»‘å®šæˆ–æ™šæœŸç»‘å®šï¼‰ã€‚</p><p>å¦å¤–æ³¨æ„è¿™é‡Œçš„å‡ ä¸ªé˜¶æ®µæ˜¯æŒ‰é¡ºåºå¼€å§‹ï¼Œè€Œä¸æ˜¯æŒ‰é¡ºåºè¿›è¡Œæˆ–å®Œæˆï¼Œå› ä¸ºè¿™äº›é˜¶æ®µé€šå¸¸éƒ½æ˜¯äº’ç›¸äº¤å‰åœ°æ··åˆè¿›è¡Œçš„ï¼Œé€šå¸¸åœ¨ä¸€ä¸ªé˜¶æ®µæ‰§è¡Œçš„è¿‡ç¨‹ä¸­è°ƒç”¨æˆ–æ¿€æ´»å¦ä¸€ä¸ªé˜¶æ®µã€‚</p><p><img src="/assets/true-640-16558637842154-90cc84f6.png" alt=""></p><ul><li><p><strong>åŠ è½½</strong>ï¼šæŸ¥æ‰¾å¹¶åŠ è½½ç±»çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œåœ¨ Java å †ä¸­ä¹Ÿåˆ›å»ºä¸€ä¸ª java.lang.Class ç±»çš„å¯¹è±¡ï¼›</p></li><li><p><strong>è¿æ¥</strong>ï¼šè¿æ¥åˆåŒ…å«ä¸‰å—å†…å®¹ï¼šéªŒè¯ã€å‡†å¤‡ã€åˆå§‹åŒ–ï¼›</p></li><li><ul><li>1ï¼‰éªŒè¯ï¼šæ–‡ä»¶æ ¼å¼ã€å…ƒæ•°æ®ã€å­—èŠ‚ç ã€ç¬¦å·å¼•ç”¨éªŒè¯ï¼›</li><li>2ï¼‰å‡†å¤‡ï¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶å°†å…¶åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ï¼›</li><li>3ï¼‰è§£æï¼šæŠŠç±»ä¸­çš„ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨ã€‚</li></ul></li><li><p><strong>åˆå§‹åŒ–</strong>ï¼šä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆæ­£ç¡®çš„åˆå§‹å€¼ï¼›</p></li><li><p><strong>ä½¿ç”¨</strong>ï¼šnewå‡ºå¯¹è±¡ç¨‹åºä¸­ä½¿ç”¨ï¼›</p></li><li><p><strong>å¸è½½</strong>ï¼šæ‰§è¡Œåƒåœ¾å›æ”¶ã€‚</p></li></ul><h2 id="_1-3-ç±»åŠ è½½å™¨" tabindex="-1"><a class="header-anchor" href="#_1-3-ç±»åŠ è½½å™¨" aria-hidden="true">#</a> 1.3 ç±»åŠ è½½å™¨</h2><p>åŠ è½½ä¸€ä¸ª Class ç±»çš„é¡ºåºä¹Ÿæ˜¯æœ‰ä¼˜å…ˆçº§çš„ï¼Œç±»åŠ è½½å™¨ä»æœ€åº•å±‚å¼€å§‹å¾€ä¸Šçš„é¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p><ul><li>BootStrap ClassLoaderï¼šrt.jar</li><li>Extention ClassLoaderï¼šåŠ è½½æ‰©å±•çš„ jar åŒ…</li><li>App ClassLoaderï¼šæŒ‡å®šçš„ classpath ä¸‹é¢çš„ jar åŒ…</li><li>Custom ClassLoaderï¼šè‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨</li></ul><p><img src="/assets/true-640-16558637842165-de3d878e.png" alt=""></p><h1>2. åƒåœ¾å›æ”¶</h1><h2 id="_2-1-å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»" tabindex="-1"><a class="header-anchor" href="#_2-1-å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»" aria-hidden="true">#</a> 2.1 å¦‚ä½•ç¡®å®šå¯¹è±¡å·²æ­»</h2><p>é€šå¸¸ï¼Œåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦è¢«é”€æ¯æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ul><li><strong>å¼•ç”¨è®¡æ•°ç®—æ³•</strong>ï¼šä¸ºå¯¹è±¡æ·»åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“å¯¹è±¡åœ¨ä¸€ä¸ªåœ°æ–¹è¢«å¼•ç”¨ï¼Œåˆ™è¯¥è®¡æ•°å™¨åŠ  1ï¼Œæ¯å½“å¯¹è±¡å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å‡ 1ï¼Œä½†è®¡æ•°å™¨ä¸º 0 çš„æ—¶å€™ï¼Œå°±è¡¨æ˜è¯¥å¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨ã€‚</li><li><strong>å¯è¾¾æ€§åˆ†æç®—æ³•</strong>ï¼šé€šè¿‡ä¸€ç³»åˆ—è¢«ç§°ä¹‹ä¸º â€œGC Rootsâ€ çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œæ²¿ç€å¼•ç”¨é“¾è¿›è¡Œæœç´¢ï¼Œå‡¡æ˜¯åœ¨å¼•ç”¨é“¾ä¸Šçš„å¯¹è±¡éƒ½ä¸ä¼šè¢«å›æ”¶ã€‚</li></ul><p><img src="/assets/true-640-16558637842166-603b5fad.png" alt=""></p><p>å°±åƒä¸Šå›¾çš„é‚£æ ·ï¼Œç»¿è‰²éƒ¨åˆ†çš„å¯¹è±¡éƒ½åœ¨ GC Roots çš„å¼•ç”¨é“¾ä¸Šï¼Œå°±ä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œç°è‰²éƒ¨åˆ†çš„å¯¹è±¡æ²¡æœ‰åœ¨å¼•ç”¨é“¾ä¸Šï¼Œè‡ªç„¶å°±è¢«åˆ¤å®šä¸ºå¯å›æ”¶å¯¹è±¡ã€‚</p><h2 id="_2-2-åƒåœ¾å›æ”¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_2-2-åƒåœ¾å›æ”¶ç®—æ³•" aria-hidden="true">#</a> 2.2 åƒåœ¾å›æ”¶ç®—æ³•</h2><h4 id="_2-2-1-æ ‡è®°-æ¸…é™¤ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_2-2-1-æ ‡è®°-æ¸…é™¤ç®—æ³•" aria-hidden="true">#</a> 2.2.1 æ ‡è®°--æ¸…é™¤ç®—æ³•</h4><p>è§åçŸ¥ä¹‰ï¼Œâ€œæ ‡è®°--æ¸…é™¤ç®—æ³•â€ å°±æ˜¯å¯¹æ— æ•ˆçš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œç„¶åæ¸…é™¤ã€‚</p><p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt=""></p><h4 id="_2-2-2-å¤åˆ¶ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_2-2-2-å¤åˆ¶ç®—æ³•" aria-hidden="true">#</a> 2.2.2 å¤åˆ¶ç®—æ³•</h4><p>æ ‡è®°--å¤åˆ¶ç®—æ³•å°±æ˜¯æŠŠ Java å †åˆ†æˆä¸¤å—ï¼Œæ¯æ¬¡åƒåœ¾å›æ”¶æ—¶åªä½¿ç”¨å…¶ä¸­ä¸€å—ï¼Œç„¶åæŠŠå­˜æ´»çš„å¯¹è±¡å…¨éƒ¨ç§»åŠ¨åˆ°å¦ä¸€å—åŒºåŸŸã€‚</p><p><img src="/assets/true-640-16558637842167-ad950ca9.png" alt=""></p><h4 id="_2-2-3-æ ‡è®°-æ•´ç†ç®—æ³•" tabindex="-1"><a class="header-anchor" href="#_2-2-3-æ ‡è®°-æ•´ç†ç®—æ³•" aria-hidden="true">#</a> 2.2.3 æ ‡è®°--æ•´ç†ç®—æ³•</h4><p><strong>â€œæ ‡è®°--æ•´ç†ç®—æ³•â€ ç®—æ˜¯ä¸€ç§æŠ˜ä¸­çš„åƒåœ¾æ”¶é›†ç®—æ³•</strong>ï¼Œåœ¨å¯¹è±¡æ ‡è®°çš„è¿‡ç¨‹ï¼Œå’Œå‰é¢ä¸¤ä¸ªæ‰§è¡Œçš„æ˜¯ä¸€æ ·æ­¥éª¤ã€‚</p><p>è¿›è¡Œæ ‡è®°ä¹‹åï¼Œå­˜æ´»çš„å¯¹è±¡ä¼šç§»åŠ¨åˆ°å †çš„ä¸€ç«¯ï¼Œç„¶åç›´æ¥æ¸…ç†å­˜æ´»å¯¹è±¡ä»¥å¤–çš„åŒºåŸŸå°±å¯ä»¥äº†ã€‚è¿™æ ·ï¼Œæ—¢é¿å…äº†å†…å­˜ç¢ç‰‡ï¼Œä¹Ÿä¸å­˜åœ¨å †ç©ºé—´æµªè´¹çš„è¯´æ³•äº†ã€‚</p><p>ä½†æ˜¯ï¼Œæ¯æ¬¡è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ï¼Œéƒ½è¦æš‚åœæ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹ï¼Œç‰¹åˆ«æ˜¯å¯¹è€å¹´ä»£çš„å¯¹è±¡å›æ”¶ï¼Œåˆ™éœ€è¦æ›´é•¿çš„å›æ”¶æ—¶é—´ï¼Œè¿™å¯¹ç”¨æˆ·ä½“éªŒæ˜¯éå¸¸ä¸å¥½çš„ã€‚</p><p><img src="/assets/true-640-16558637842168-88f994a3.png" alt=""></p><h2 id="_2-3-åƒåœ¾æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-åƒåœ¾æ”¶é›†å™¨" aria-hidden="true">#</a> 2.3 åƒåœ¾æ”¶é›†å™¨</h2><h4 id="_2-3-1-serial-æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-1-serial-æ”¶é›†å™¨" aria-hidden="true">#</a> 2.3.1 Serial æ”¶é›†å™¨</h4><p><strong>Serial æ”¶é›†å™¨æ˜¯æœ€åŸºç¡€ã€å†å²æœ€æ‚ ä¹…çš„æ”¶é›†å™¨ï¼Œæ˜¯ä¸€ä¸ªå•çº¿ç¨‹å·¥ä½œçš„æ”¶é›†å™¨ã€‚</strong></p><p>ä½¿ç”¨ Serialæ”¶é›†å™¨ï¼Œæ— è®ºæ˜¯è¿›è¡Œ Minor gc è¿˜æ˜¯ Full GC ï¼Œæ¸…ç†å †ç©ºé—´æ—¶ï¼Œæ‰€æœ‰çš„åº”ç”¨çº¿ç¨‹éƒ½ä¼šè¢«æš‚åœã€‚</p><p><img src="/assets/true-640-16558637842169-6124e6b1.png" alt=""></p><h4 id="_2-3-2-parnew-æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-2-parnew-æ”¶é›†å™¨" aria-hidden="true">#</a> 2.3.2 ParNew æ”¶é›†å™¨</h4><p><strong>ParNew æ”¶é›†å™¨å®è´¨ä¸Šæ˜¯ Serial æ”¶é›†å™¨çš„å¤šçº¿ç¨‹å¹¶è¡Œç‰ˆæœ¬ã€‚</strong></p><p>é™¤äº†åŒæ—¶ä½¿ç”¨å¤šæ¡çº¿ç¨‹è¿›è¡Œåƒåœ¾æ”¶é›†ä¹‹å¤–ï¼Œå…¶ä½™çš„è¡Œä¸ºåŒ…æ‹¬ Serial æ”¶é›†å™¨å¯ç”¨çš„æ‰€æœ‰æ§åˆ¶å‚æ•°ã€æ”¶é›†ç®—æ³•ã€Stop The Worldã€å¯¹è±¡åˆ†é…è§„åˆ™ã€å›æ”¶ç­–ç•¥ç­‰éƒ½ä¸ Serial æ”¶é›†å™¨å®Œå…¨ä¸€è‡´ã€‚</p><p><img src="/assets/true-640-165586378421610-e87dab32.png" alt=""></p><h4 id="_2-3-3-parallel-scavenge-æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-3-parallel-scavenge-æ”¶é›†å™¨" aria-hidden="true">#</a> 2.3.3 Parallel Scavenge æ”¶é›†å™¨</h4><p><strong>Parallel Scavenge æ”¶é›†å™¨ä¹Ÿæ˜¯ä¸€æ¬¾æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼ŒåŸºäºæ ‡è®°â€”â€”å¤åˆ¶ç®—æ³•å®ç°</strong>ï¼Œèƒ½å¤Ÿå¹¶è¡Œæ”¶é›†çš„å¤šçº¿ç¨‹æ”¶é›†å™¨å’Œ ParNew éå¸¸ç›¸ä¼¼ã€‚</p><p>Parallel Scavenge æ”¶é›†å™¨çš„ç›®æ ‡åˆ™æ˜¯è¾¾åˆ°ä¸€ä¸ªå¯æ§åˆ¶çš„ååé‡ï¼ˆThroughputï¼‰ã€‚</p><p>æ‰€è°“ååé‡å°±æ˜¯å¤„ç†å™¨ç”¨äºè¿è¡Œç”¨æˆ·ä»£ç çš„æ—¶é—´ä¸å¤„ç†å™¨æ€»æ¶ˆè€—æ—¶é—´çš„æ¯”å€¼ã€‚å¦‚æœè™šæ‹Ÿæœºå®ŒæˆæŸä¸ªä»»åŠ¡ï¼Œç”¨æˆ·ä»£ç åŠ ä¸Šåƒåœ¾æ”¶é›†æ€»å…±è€—è´¹äº† 100 åˆ†é’Ÿï¼Œå…¶ä¸­åƒåœ¾æ”¶é›†èŠ±æ‰ 1 åˆ†é’Ÿï¼Œé‚£ååé‡å°±æ˜¯ 99%ã€‚</p><h4 id="_2-3-4-serial-old-æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-4-serial-old-æ”¶é›†å™¨" aria-hidden="true">#</a> 2.3.4 Serial Old æ”¶é›†å™¨</h4><p><strong>Serial Old æ˜¯ Serial æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬</strong>ï¼Œå®ƒåŒæ ·æ˜¯ä¸€ä¸ªå•çº¿ç¨‹æ”¶é›†å™¨ï¼Œä½¿ç”¨ â€œæ ‡è®°-æ•´ç†ç®—æ³•â€ã€‚</p><p><img src="/assets/true-640-16558637842169-6124e6b1.png" alt=""></p><h4 id="_2-3-5-parallel-old-æ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-5-parallel-old-æ”¶é›†å™¨" aria-hidden="true">#</a> 2.3.5 Parallel Old æ”¶é›†å™¨</h4><p><strong>Parallel Old æ˜¯ Parallel Scavenge æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬</strong>ï¼Œæ”¯æŒå¤šçº¿ç¨‹å¹¶å‘æ”¶é›†ï¼ŒåŸºäºæ ‡è®°-æ•´ç†ç®—æ³•å®ç°ã€‚</p><p><img src="/assets/true-640-165586378421611-9769f0e1.png" alt=""></p><h4 id="_2-3-6-cmsæ”¶é›†å™¨" tabindex="-1"><a class="header-anchor" href="#_2-3-6-cmsæ”¶é›†å™¨" aria-hidden="true">#</a> 2.3.6 CMSæ”¶é›†å™¨</h4><p><strong>CMS æ”¶é›†å™¨è®¾è®¡çš„åˆè¡·æ˜¯ä¸ºäº†æ¶ˆé™¤ Parallel æ”¶é›†å™¨å’Œ Serial æ”¶é›†å™¨ Full gc å‘¨æœŸä¸­çš„é•¿æ—¶é—´åœé¡¿ã€‚</strong></p><p>CMSæ”¶é›†å™¨åœ¨ Minor gc æ—¶ä¼šæš‚åœæ‰€æœ‰çš„åº”ç”¨çº¿ç¨‹ï¼Œå¹¶ä»¥å¤šçº¿ç¨‹çš„æ–¹å¼è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p><p><img src="/assets/true-640-165586378421612-386816d2.png" alt=""></p><h4 id="_2-3-7-åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”" tabindex="-1"><a class="header-anchor" href="#_2-3-7-åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”" aria-hidden="true">#</a> 2.3.7 åƒåœ¾æ”¶é›†å™¨å¯¹æ¯”</h4><p><img src="/assets/true-640-165586378421613-1dfa7d7b.png" alt=""></p><h1>3. è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h1><p>ä»€ä¹ˆæ˜¯è¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼Ÿ</p><p>Java ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œä¼šä¸º JVM å•ç‹¬åˆ’å‡ºä¸€å—å†…å­˜åŒºåŸŸï¼Œè€Œè¿™å—å†…å­˜åŒºåŸŸåˆå¯ä»¥å†æ¬¡åˆ’åˆ†å‡ºä¸€å—è¿è¡Œæ—¶æ•°æ®åŒºï¼Œ<strong>è¿è¡Œæ—¶æ•°æ®åŒºåŸŸå¤§è‡´å¯ä»¥åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†</strong>ï¼š</p><p><img src="/assets/true-640-165586378421714-5664f7b2.png" alt=""></p><h2 id="_3-1-java-å †-heap" tabindex="-1"><a class="header-anchor" href="#_3-1-java-å †-heap" aria-hidden="true">#</a> 3.1 Java å †ï¼ˆHeapï¼‰</h2><p>æ ˆç®¡è¿è¡Œï¼Œå †ç®¡å­˜å‚¨ï¼Œ<strong>è™šæ‹Ÿæœºæ ˆè´Ÿè´£è¿è¡Œä»£ç ï¼Œè€Œè™šæ‹Ÿæœºå †è´Ÿè´£å­˜å‚¨æ•°æ®ã€‚</strong></p><p>Java å †åŒºå…·æœ‰ä¸‹é¢å‡ ä¸ªç‰¹ç‚¹ï¼š</p><ul><li>å­˜å‚¨çš„æ˜¯æˆ‘ä»¬ new æ¥çš„å¯¹è±¡ï¼Œä¸å­˜æ”¾åŸºæœ¬ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ï¼›</li><li>ç”±äºåˆ›å»ºäº†å¤§é‡çš„å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶å™¨ä¸»è¦å·¥ä½œåœ¨è¿™å—åŒºåŸŸï¼›</li><li>çº¿ç¨‹å…±äº«åŒºåŸŸï¼Œå› æ­¤æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼›</li><li>èƒ½å¤Ÿå‘ç”Ÿ OutOfMemoryErrorã€‚</li></ul><p>å…¶å®ï¼ŒJava å †åŒºè¿˜å¯ä»¥åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£åˆå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ä¸º Eden åŒºã€Survivor 1 åŒºã€Survivor 2 åŒºã€‚</p><h2 id="_3-2-è™šæ‹Ÿæœºæ ˆ-jvm-stacks" tabindex="-1"><a class="header-anchor" href="#_3-2-è™šæ‹Ÿæœºæ ˆ-jvm-stacks" aria-hidden="true">#</a> 3.2 è™šæ‹Ÿæœºæ ˆï¼ˆJVM Stacksï¼‰</h2><p>Java è™šæ‹Ÿæœºæ ˆä¹Ÿæ˜¯ä¸€å—è¢«å¼€å‘è€…é‡ç‚¹å…³æ³¨çš„åœ°æ–¹ï¼ŒåŒæ ·ï¼Œå…ˆæŠŠå¹²è´§æ”¾ä¸Šæ¥ï¼š</p><ul><li>Java è™šæ‹Ÿæœºæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ç‹¬äº«ä¸€ä¸ªè™šæ‹Ÿæœºæ ˆï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚</li><li>è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåŒæ—¶åˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæˆçš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</li><li>å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ä»¥åŠå¯¹è±¡çš„å¼•ç”¨ï¼ˆreference ç±»å‹ï¼Œå®ƒä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œæ ¹æ®ä¸åŒçš„è™šæ‹Ÿæœºå®ç°ï¼Œå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–è€…å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®ï¼‰å’Œ returnAddress ç±»å‹ï¼ˆæŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰ã€‚</li><li>è¿™ä¸ªåŒºåŸŸå¯èƒ½æœ‰ä¸¤ç§å¼‚å¸¸ï¼šå¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡º StackOverflowError å¼‚å¸¸ï¼›å¦‚æœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©ï¼Œå½“æ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜æ—¶ä¼šæŠ›å‡º OutOfMemoryErrorå¼‚å¸¸ã€‚</li></ul><h2 id="_3-3-æœ¬åœ°æ–¹æ³•æ ˆ-native-method-stacks" tabindex="-1"><a class="header-anchor" href="#_3-3-æœ¬åœ°æ–¹æ³•æ ˆ-native-method-stacks" aria-hidden="true">#</a> 3.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stacksï¼‰</h2><p>æœ¬åœ°æ–¹æ³•æ ˆä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«ä¸è¿‡æ˜¯<strong>è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡Œ Java æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„ Native æ–¹æ³•æœåŠ¡ã€‚</strong></p><p>è™šæ‹Ÿæœºè§„èŒƒä¸­å¯¹æœ¬åœ°æ–¹æ³•æ ˆä¸­çš„æ–¹æ³•ä½¿ç”¨çš„è¯­è¨€ã€ä½¿ç”¨æ–¹å¼ä¸æ•°æ®ç»“æ„å¹¶æ²¡æœ‰å¼ºåˆ¶è§„å®šï¼Œå› æ­¤å…·ä½“çš„è™šæ‹Ÿæœºå¯ä»¥è‡ªç”±å®ç°å®ƒã€‚ç”šè‡³æœ‰çš„è™šæ‹Ÿæœºï¼ˆè­¬å¦‚ Sun HotSpot è™šæ‹Ÿæœºï¼‰ç›´æ¥å°±æŠŠæœ¬åœ°æ–¹æ³•æ ˆå’Œè™šæ‹Ÿæœºæ ˆåˆäºŒä¸ºä¸€ã€‚</p><p>ä¸è™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œæœ¬åœ°æ–¹æ³•æ ˆåŒºåŸŸä¹Ÿä¼šæŠ›å‡º StackOverflowError å’Œ OutOfMemoryError å¼‚å¸¸ã€‚</p><h2 id="_3-4-æ–¹æ³•åŒº-method-area" tabindex="-1"><a class="header-anchor" href="#_3-4-æ–¹æ³•åŒº-method-area" aria-hidden="true">#</a> 3.4 æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</h2><p>æ–¹æ³•åŒºä¹Ÿæ˜¯ä¸€å—è¢«é‡ç‚¹å…³æ³¨çš„åŒºåŸŸï¼Œä¸»è¦ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>çº¿ç¨‹å…±äº«åŒºåŸŸï¼Œå› æ­¤è¿™æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„åŒºåŸŸã€‚</li><li>å®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚</li><li>å½“æ–¹æ³•åŒºæ— æ³•æ»¡è¶³å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</li></ul><h2 id="_3-5-ç¨‹åºè®¡æ•°å™¨-program-counter-register" tabindex="-1"><a class="header-anchor" href="#_3-5-ç¨‹åºè®¡æ•°å™¨-program-counter-register" aria-hidden="true">#</a> 3.5 ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰</h2><p>å®ƒçš„ä½œç”¨å°±æ˜¯è®°å½•å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„ä½ç½®ã€‚è¿™æ ·ï¼Œå½“çº¿ç¨‹é‡æ–°è·å¾— CPU çš„æ‰§è¡Œæƒçš„æ—¶å€™ï¼Œå°±ç›´æ¥ä»è®°å½•çš„ä½ç½®å¼€å§‹æ‰§è¡Œï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ä¹Ÿéƒ½ä¾èµ–è¿™ä¸ªç¨‹åºè®¡æ•°å™¨æ¥å®Œæˆã€‚</p><h1>4. JVMå †å†…å­˜</h1><h2 id="_4-1-å †å†…å­˜ç»“æ„" tabindex="-1"><a class="header-anchor" href="#_4-1-å †å†…å­˜ç»“æ„" aria-hidden="true">#</a> 4.1 å †å†…å­˜ç»“æ„</h2><p><strong>Java å †åŒºå¯ä»¥åˆ’åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£åˆå¯ä»¥è¿›ä¸€æ­¥åˆ’åˆ†ä¸º Eden åŒºã€Survivor 1 åŒºã€Survivor 2 åŒº</strong>ã€‚å…·ä½“æ¯”ä¾‹å‚æ•°çš„è¯ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™å¼ å›¾ã€‚</p><p><img src="/assets/true-640-165586378421715-d4efbca0.png" alt=""></p><h2 id="_4-2-gcç±»å‹" tabindex="-1"><a class="header-anchor" href="#_4-2-gcç±»å‹" aria-hidden="true">#</a> 4.2 GCç±»å‹</h2><ul><li>Minor GC/Young GCï¼šé’ˆå¯¹æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†ï¼›</li><li>Major GC/Old GCï¼šé’ˆå¯¹è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚</li><li>Full GCï¼šé’ˆå¯¹æ•´ä¸ª Java å †ä»¥åŠæ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ã€‚</li></ul><p><img src="/assets/true-640-165586378421716-19cb9236.png" alt=""></p><h2 id="_4-3-minor-gc-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_4-3-minor-gc-å·¥ä½œåŸç†" aria-hidden="true">#</a> 4.3 Minor GC å·¥ä½œåŸç†</h2><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåˆæ¬¡è¢«åˆ›å»ºçš„å¯¹è±¡å­˜æ”¾åœ¨æ–°ç”Ÿä»£çš„ Eden åŒºï¼Œå½“ç¬¬ä¸€æ¬¡è§¦å‘ Minor GCï¼ŒEden åŒºå­˜æ´»çš„å¯¹è±¡è¢«è½¬ç§»åˆ° SurvivoråŒº çš„æŸä¸€å—åŒºåŸŸã€‚</p><p>ä»¥åå†æ¬¡è§¦å‘ Minor GC çš„æ—¶å€™ï¼ŒEdenåŒºçš„å¯¹è±¡è¿åŒä¸€å— Survivor åŒºçš„å¯¹è±¡ä¸€èµ·ï¼Œè¢«è½¬ç§»åˆ°äº†å¦ä¸€å— Survivor åŒºã€‚</p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤å— Survivor åŒºæˆ‘ä»¬æ¯ä¸€æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ï¼Œè¿™æ ·ä¹Ÿä»…ä»…æ˜¯æµªè´¹äº†ä¸€å— Survivor åŒºã€‚</p><p><img src="/assets/true-640-165586378421717-d7df277f.png" alt=""></p><h2 id="_4-4-full-gc-å·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#_4-4-full-gc-å·¥ä½œåŸç†" aria-hidden="true">#</a> 4.4 Full GC å·¥ä½œåŸç†</h2><p>è€å¹´ä»£æ˜¯å­˜å‚¨é•¿æœŸå­˜æ´»çš„å¯¹è±¡çš„ï¼Œå æ»¡æ—¶å°±ä¼šè§¦å‘æˆ‘ä»¬æœ€å¸¸å¬è¯´çš„ Full GCï¼ŒæœŸé—´ä¼šåœæ­¢æ‰€æœ‰çº¿ç¨‹ç­‰å¾… GC çš„å®Œæˆã€‚</p><p>æ‰€ä»¥å¯¹äºå“åº”è¦æ±‚é«˜çš„åº”ç”¨åº”è¯¥å°½é‡å»å‡å°‘å‘ç”Ÿ Full GC ä»è€Œé¿å…å“åº”è¶…æ—¶çš„é—®é¢˜ã€‚</p><p><img src="/assets/true-640-165586378421718-fc2d413a.png" alt=""></p><h1>5. GC æ—¥å¿—</h1><h2 id="_5-1-gc-æ—¥å¿—å¼€å¯" tabindex="-1"><a class="header-anchor" href="#_5-1-gc-æ—¥å¿—å¼€å¯" aria-hidden="true">#</a> 5.1 GC æ—¥å¿—å¼€å¯</h2><p>å·ä¸ªæ‡’ï¼Œç›´æ¥è´´ç½‘ä¸Šçš„å†…å®¹ï¼š</p><p><img src="/assets/true-640-165586378421719-3ca61946.png" alt=""></p><p><img src="/assets/true-640-165586378421720-8ae25dd2.png" alt=""></p><h2 id="_5-2-ç†è§£-gc-æ—¥å¿—" tabindex="-1"><a class="header-anchor" href="#_5-2-ç†è§£-gc-æ—¥å¿—" aria-hidden="true">#</a> 5.2 ç†è§£ GC æ—¥å¿—</h2><p>Minor GC æ—¥å¿—ï¼š<img src="/assets/true-640-165586378421721-499cc87b.png" alt=""></p><p>Full GC æ—¥å¿—ï¼š<img src="/assets/true-640-165586378421722-fe9053bc.png" alt=""></p><h1>6. JVM å¸¸ç”¨å‘½ä»¤</h1><p>Sun JDKç›‘æ§å’Œæ•…éšœå¤„ç†å‘½ä»¤æœ‰ jpsã€jstatã€jmapã€jhatã€jstackã€jinfoã€‚</p><h2 id="_6-1-jps" tabindex="-1"><a class="header-anchor" href="#_6-1-jps" aria-hidden="true">#</a> 6.1 jps</h2><p>JVM Process Status Toolï¼Œ<strong>æ˜¾ç¤ºæŒ‡å®šç³»ç»Ÿå†…æ‰€æœ‰çš„ HotSpot è™šæ‹Ÿæœºè¿›ç¨‹ã€‚</strong></p><h2 id="_6-2-jstat" tabindex="-1"><a class="header-anchor" href="#_6-2-jstat" aria-hidden="true">#</a> 6.2 jstat</h2><p>jstat(JVM statistics Monitoring)æ˜¯ç”¨äº<strong>ç›‘è§†è™šæ‹Ÿæœºè¿è¡Œæ—¶çŠ¶æ€</strong>ä¿¡æ¯çš„å‘½ä»¤ï¼Œå®ƒå¯ä»¥æ˜¾ç¤ºå‡ºè™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»è£…è½½ã€å†…å­˜ã€åƒåœ¾æ”¶é›†ã€JIT ç¼–è¯‘ç­‰è¿è¡Œæ•°æ®ã€‚</p><h2 id="_6-3-jmap" tabindex="-1"><a class="header-anchor" href="#_6-3-jmap" aria-hidden="true">#</a> 6.3 jmap</h2><p><strong>dump å †åˆ°æ–‡ä»¶</strong>ï¼Œå¯ç”¨äºå¯¹æ–‡ä»¶çš„åˆ†æã€‚</p><h2 id="_6-4-jhat" tabindex="-1"><a class="header-anchor" href="#_6-4-jhat" aria-hidden="true">#</a> 6.4 jhat</h2><p>jhat(JVM Heap Analysis Tool)å‘½ä»¤æ˜¯ä¸ jmap æ­é…ä½¿ç”¨ï¼Œ<strong>ç”¨æ¥åˆ†æ jmap ç”Ÿæˆçš„ dump</strong>ï¼Œjhat å†…ç½®äº†ä¸€ä¸ªå¾®å‹çš„ HTTP/HTML æœåŠ¡å™¨ï¼Œç”Ÿæˆ dump çš„åˆ†æç»“æœåï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ã€‚</p><p>åœ¨æ­¤è¦æ³¨æ„ï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œåˆ†æï¼Œå› ä¸º jhat æ˜¯ä¸€ä¸ªè€—æ—¶å¹¶ä¸”è€—è´¹ç¡¬ä»¶èµ„æºçš„è¿‡ç¨‹ï¼Œä¸€èˆ¬æŠŠæœåŠ¡å™¨ç”Ÿæˆçš„ dump æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°æˆ–å…¶ä»–æœºå™¨ä¸Šè¿›è¡Œåˆ†æã€‚</p><h2 id="_6-5-jstack" tabindex="-1"><a class="header-anchor" href="#_6-5-jstack" aria-hidden="true">#</a> 6.5 jstack</h2><p><strong>jstack ç”¨äºç”Ÿæˆ java è™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ã€‚</strong></p><p>çº¿ç¨‹å¿«ç…§æ˜¯å½“å‰ java è™šæ‹Ÿæœºå†…æ¯ä¸€æ¡çº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å †æ ˆçš„é›†åˆï¼Œç”Ÿæˆçº¿ç¨‹å¿«ç…§çš„ä¸»è¦ç›®çš„æ˜¯å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ï¼Œå¦‚çº¿ç¨‹é—´æ­»é”ã€æ­»å¾ªç¯ã€è¯·æ±‚å¤–éƒ¨èµ„æºå¯¼è‡´çš„é•¿æ—¶é—´ç­‰å¾…ç­‰ã€‚</p><p>çº¿ç¨‹å‡ºç°åœé¡¿çš„æ—¶å€™é€šè¿‡ jstack æ¥æŸ¥çœ‹å„ä¸ªçº¿ç¨‹çš„è°ƒç”¨å †æ ˆï¼Œå°±å¯ä»¥çŸ¥é“æ²¡æœ‰å“åº”çš„çº¿ç¨‹åˆ°åº•åœ¨åå°åšä»€ä¹ˆäº‹æƒ…ï¼Œæˆ–è€…ç­‰å¾…ä»€ä¹ˆèµ„æºã€‚</p><h1>7. æ€§èƒ½æ£€æµ‹å·¥å…·</h1><h2 id="_7-1-jconsole" tabindex="-1"><a class="header-anchor" href="#_7-1-jconsole" aria-hidden="true">#</a> 7.1 jconsole</h2><p>Jconsoleï¼ˆJava Monitoring and Management Consoleï¼‰æ˜¯ä» java5 å¼€å§‹ï¼Œåœ¨ JD Kä¸­è‡ªå¸¦çš„ java ç›‘æ§å’Œç®¡ç†æ§åˆ¶å°ï¼Œ<strong>ç”¨äºå¯¹ JVM ä¸­å†…å­˜ï¼Œçº¿ç¨‹å’Œç±»ç­‰çš„ç›‘æ§</strong>ï¼Œæ˜¯ä¸€ä¸ªåŸºäº JMXï¼ˆjava management extensionsï¼‰çš„ GUI æ€§èƒ½ç›‘æµ‹å·¥å…·ã€‚</p><p>jconsole ä½¿ç”¨ jvm çš„æ‰©å±•æœºåˆ¶è·å–å¹¶å±•ç¤ºè™šæ‹Ÿæœºä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½å’Œèµ„æºæ¶ˆè€—ç­‰ä¿¡æ¯ã€‚</p><p>æ¦‚è§ˆï¼šåŒ…æ‹¬å †å†…å­˜ä½¿ç”¨æƒ…å†µã€çº¿ç¨‹ã€ç±»ã€CPU ä½¿ç”¨æƒ…å†µå››é¡¹ä¿¡æ¯çš„æ›²çº¿å›¾ã€‚</p><p><img src="/assets/true-640-165586378421723-4e2e7b6a.png" alt=""></p><p>çº¿ç¨‹ï¼šç›¸å½“äºå¯è§†åŒ–çš„ jstack å‘½ä»¤ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç‚¹å‡» â€œæ£€æµ‹æ­»é”â€ æ¥æ£€æŸ¥çº¿ç¨‹ä¹‹é—´æ˜¯å¦æœ‰æ­»é”çš„æƒ…å†µã€‚</p><p><img src="/assets/true-640-165586378421724-a70a1cae.png" alt=""></p><h2 id="_7-2-visualvm" tabindex="-1"><a class="header-anchor" href="#_7-2-visualvm" aria-hidden="true">#</a> 7.2 VisualVM</h2><p><strong>VisualVMï¼ˆAll-in-One Java Troubleshooting Toolï¼‰æ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„è¿è¡Œç›‘è§†å’Œæ•…éšœå¤„ç†ç¨‹åºä¹‹ä¸€</strong>ï¼Œæ›¾ç»åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æ˜¯ Oracle å®˜æ–¹ä¸»åŠ›å‘å±•çš„è™šæ‹Ÿæœºæ•…éšœå¤„ç†å·¥å…·ã€‚</p><p>ç›¸æ¯”ä¸€äº›ç¬¬ä¸‰æ–¹å·¥å…·ï¼ŒVisualVM æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ä¼˜ç‚¹ï¼šä¸éœ€è¦è¢«ç›‘è§†çš„ç¨‹åºåŸºäºç‰¹æ®Š Agent å»è¿è¡Œï¼Œå› æ­¤å®ƒçš„é€šç”¨æ€§å¾ˆå¼ºï¼Œå¯¹åº”ç”¨ç¨‹åºå®é™…æ€§èƒ½çš„å½±å“ä¹Ÿè¾ƒå°ï¼Œä½¿å¾—å®ƒå¯ä»¥ç›´æ¥åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p><p>Visual GC æ˜¯å¸¸å¸¸ä½¿ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œéœ€è¦é€šè¿‡æ’ä»¶ï¼Œå¯ä»¥æ˜æ˜¾çš„çœ‹åˆ°å¹´è½»ä»£ã€è€å¹´ä»£çš„å†…å­˜å˜åŒ–ï¼Œä»¥åŠ gc é¢‘ç‡ã€gc çš„æ—¶é—´ç­‰ï¼Œæ„Ÿè§‰è¿™ä¸ªæ’ä»¶å¾ˆé…·ï¼</p><p><img src="/assets/true-640-165586378421725-c73724f8.png" alt=""></p><p>ç›‘æ§çš„ä¸»é¡µå…¶å®ä¹Ÿå°±æ˜¯ï¼Œcpuã€å†…å­˜ã€ç±»ã€çº¿ç¨‹çš„å›¾è¡¨ï¼Œè¿™é‡Œé¢å¯ä»¥æ‰§è¡Œå † dumpã€‚</p><p><img src="/assets/true-640-165586378421726-45559426.png" alt=""></p><p>æœ€åå°±æ˜¯å † dumpï¼š</p><p><img src="/assets/true-640-165586378421727-09e38c47.png" alt=""></p><h1>8. JVM è°ƒä¼˜</h1><h2 id="_8-1-é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨" tabindex="-1"><a class="header-anchor" href="#_8-1-é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨" aria-hidden="true">#</a> 8.1 é€‰æ‹©åˆé€‚çš„åƒåœ¾å›æ”¶å™¨</h2><ul><li><strong>CPU å•æ ¸</strong>ï¼šé‚£ä¹ˆæ¯«æ— ç–‘é—® Serial åƒåœ¾æ”¶é›†å™¨æ˜¯ä½ å”¯ä¸€çš„é€‰æ‹©ï¼›</li><li><strong>CPU å¤šæ ¸</strong>ï¼šå…³æ³¨ååé‡ ï¼Œé‚£ä¹ˆé€‰æ‹© PS+PO ç»„åˆï¼›</li><li><strong>CPU å¤šæ ¸</strong>ï¼šå…³æ³¨ç”¨æˆ·åœé¡¿æ—¶é—´ï¼ŒJDK ç‰ˆæœ¬ 1.6 æˆ–è€… 1.7ï¼Œé‚£ä¹ˆé€‰æ‹© CMSï¼›</li><li><strong>CPU å¤šæ ¸</strong>ï¼šå…³æ³¨ç”¨æˆ·åœé¡¿æ—¶é—´ï¼ŒJDK1.8 åŠä»¥ä¸Šï¼ŒJVM å¯ç”¨å†…å­˜ 6G ä»¥ä¸Šï¼Œé‚£ä¹ˆé€‰æ‹© G1ã€‚</li></ul><p>å‚æ•°é…ç½®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> //è®¾ç½®Serialåƒåœ¾æ”¶é›†å™¨ï¼ˆæ–°ç”Ÿä»£ï¼‰
 å¼€å¯ï¼š-XX:+UseSerialGC
 
 //è®¾ç½®PS+PO,æ–°ç”Ÿä»£ä½¿ç”¨åŠŸèƒ½Parallel Scavenge è€å¹´ä»£å°†ä¼šä½¿ç”¨Parallel Oldæ”¶é›†å™¨
 å¼€å¯ -XX:+UseParallelOldGC
 
 //CMSåƒåœ¾æ”¶é›†å™¨ï¼ˆè€å¹´ä»£ï¼‰
 å¼€å¯ -XX:+UseConcMarkSweepGC
 
 //è®¾ç½®G1åƒåœ¾æ”¶é›†å™¨
 å¼€å¯ -XX:+UseG1GC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-2-è°ƒæ•´å†…å­˜å¤§å°" tabindex="-1"><a class="header-anchor" href="#_8-2-è°ƒæ•´å†…å­˜å¤§å°" aria-hidden="true">#</a> 8.2 è°ƒæ•´å†…å­˜å¤§å°</h2><p><strong>ç°è±¡</strong>ï¼šåƒåœ¾æ”¶é›†é¢‘ç‡éå¸¸é¢‘ç¹ã€‚</p><p><strong>åŸå› </strong>ï¼šå¦‚æœå†…å­˜å¤ªå°ï¼Œå°±ä¼šå¯¼è‡´é¢‘ç¹çš„éœ€è¦è¿›è¡Œåƒåœ¾æ”¶é›†æ‰èƒ½é‡Šæ”¾å‡ºè¶³å¤Ÿçš„ç©ºé—´æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¢åŠ å †å†…å­˜å¤§å°çš„æ•ˆæœæ˜¯éå¸¸æ˜¾è€Œæ˜“è§çš„ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœåƒåœ¾æ”¶é›†æ¬¡æ•°éå¸¸é¢‘ç¹ï¼Œä½†æ˜¯æ¯æ¬¡èƒ½å›æ”¶çš„å¯¹è±¡éå¸¸å°‘ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¹¶éå†…å­˜å¤ªå°ï¼Œè€Œå¯èƒ½æ˜¯å†…å­˜æ³„éœ²å¯¼è‡´å¯¹è±¡æ— æ³•å›æ”¶ï¼Œä»è€Œé€ æˆé¢‘ç¹ GCã€‚</p><p>å‚æ•°é…ç½®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> //è®¾ç½®å †åˆå§‹å€¼
 æŒ‡ä»¤1ï¼š-Xms2g
 æŒ‡ä»¤2ï¼š-XX:InitialHeapSize=2048m
 
 //è®¾ç½®å †åŒºæœ€å¤§å€¼
 æŒ‡ä»¤1ï¼š`-Xmx2g` 
 æŒ‡ä»¤2ï¼š -XX:MaxHeapSize=2048m
 
 //æ–°ç”Ÿä»£å†…å­˜é…ç½®
 æŒ‡ä»¤1ï¼š-Xmn512m
 æŒ‡ä»¤2ï¼š-XX:MaxNewSize=512m
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-3-è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´" tabindex="-1"><a class="header-anchor" href="#_8-3-è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´" aria-hidden="true">#</a> 8.3 è®¾ç½®ç¬¦åˆé¢„æœŸçš„åœé¡¿æ—¶é—´</h2><p><strong>ç°è±¡</strong>ï¼šç¨‹åºé—´æ¥æ€§çš„å¡é¡¿</p><p><strong>åŸå› </strong>ï¼šå¦‚æœæ²¡æœ‰ç¡®åˆ‡çš„åœé¡¿æ—¶é—´è®¾å®šï¼Œåƒåœ¾æ”¶é›†å™¨ä»¥ååé‡ä¸ºä¸»ï¼Œé‚£ä¹ˆåƒåœ¾æ”¶é›†æ—¶é—´å°±ä¼šä¸ç¨³å®šã€‚</p><p><strong>æ³¨æ„</strong>ï¼šä¸è¦è®¾ç½®ä¸åˆ‡å®é™…çš„åœé¡¿æ—¶é—´ï¼Œå•æ¬¡æ—¶é—´è¶ŠçŸ­ä¹Ÿæ„å‘³ç€éœ€è¦æ›´å¤šçš„ GC æ¬¡æ•°æ‰èƒ½å›æ”¶å®ŒåŸæœ‰æ•°é‡çš„åƒåœ¾.</p><p>å‚æ•°é…ç½®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> //GCåœé¡¿æ—¶é—´ï¼Œåƒåœ¾æ”¶é›†å™¨ä¼šå°è¯•ç”¨å„ç§æ‰‹æ®µè¾¾åˆ°è¿™ä¸ªæ—¶é—´
 -XX:MaxGCPauseMillis 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-4-è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡" tabindex="-1"><a class="header-anchor" href="#_8-4-è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡" aria-hidden="true">#</a> 8.4 è°ƒæ•´å†…å­˜åŒºåŸŸå¤§å°æ¯”ç‡</h2><p><strong>ç°è±¡</strong>ï¼šæŸä¸€ä¸ªåŒºåŸŸçš„GCé¢‘ç¹ï¼Œå…¶ä»–éƒ½æ­£å¸¸ã€‚</p><p><strong>åŸå› </strong>ï¼šå¦‚æœå¯¹åº”åŒºåŸŸç©ºé—´ä¸è¶³ï¼Œå¯¼è‡´éœ€è¦é¢‘ç¹GCæ¥é‡Šæ”¾ç©ºé—´ï¼Œåœ¨JVMå †å†…å­˜æ— æ³•å¢åŠ çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è°ƒæ•´å¯¹åº”åŒºåŸŸçš„å¤§å°æ¯”ç‡ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šä¹Ÿè®¸å¹¶éç©ºé—´ä¸è¶³ï¼Œè€Œæ˜¯å› ä¸ºå†…å­˜æ³„é€ æˆå†…å­˜æ— æ³•å›æ”¶ï¼Œä»è€Œå¯¼è‡´ GC é¢‘ç¹ã€‚</p><p>å‚æ•°é…ç½®ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> //survivoråŒºå’ŒEdenåŒºå¤§å°æ¯”ç‡
 æŒ‡ä»¤ï¼š-XX:SurvivorRatio=6  //SåŒºå’ŒEdenåŒºå æ–°ç”Ÿä»£æ¯”ç‡ä¸º1:6,ä¸¤ä¸ªSåŒº2:6
 
 //æ–°ç”Ÿä»£å’Œè€å¹´ä»£çš„å æ¯”
 -XX:NewRatio=4  //è¡¨ç¤ºæ–°ç”Ÿä»£:è€å¹´ä»£ = 1:4 å³è€å¹´ä»£å æ•´ä¸ªå †çš„4/5ï¼›é»˜è®¤å€¼=2
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-5-è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„" tabindex="-1"><a class="header-anchor" href="#_8-5-è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„" aria-hidden="true">#</a> 8.5 è°ƒæ•´å¯¹è±¡å‡è€å¹´ä»£çš„å¹´é¾„</h2><p><strong>ç°è±¡</strong>ï¼šè€å¹´ä»£é¢‘ç¹ GCï¼Œæ¯æ¬¡å›æ”¶çš„å¯¹è±¡å¾ˆå¤šã€‚</p><p><strong>åŸå› </strong>ï¼šå¦‚æœå‡ä»£å¹´é¾„å°ï¼Œæ–°ç”Ÿä»£çš„å¯¹è±¡å¾ˆå¿«å°±è¿›å…¥è€å¹´ä»£äº†ï¼Œå¯¼è‡´è€å¹´ä»£å¯¹è±¡å˜å¤šï¼Œè€Œè¿™äº›å¯¹è±¡å…¶å®åœ¨éšåçš„å¾ˆçŸ­æ—¶é—´å†…å°±å¯ä»¥å›æ”¶ï¼Œè¿™æ—¶å€™å¯ä»¥è°ƒæ•´å¯¹è±¡çš„å‡çº§ä»£å¹´é¾„ï¼Œè®©å¯¹è±¡ä¸é‚£ä¹ˆå®¹æ˜“è¿›å…¥è€å¹´ä»£è§£å†³è€å¹´ä»£ç©ºé—´ä¸è¶³é¢‘ç¹ GC é—®é¢˜ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šå¢åŠ äº†å¹´é¾„ä¹‹åï¼Œè¿™äº›å¯¹è±¡åœ¨æ–°ç”Ÿä»£çš„æ—¶é—´ä¼šå˜é•¿å¯èƒ½å¯¼è‡´æ–°ç”Ÿä»£çš„ GC é¢‘ç‡å¢åŠ ï¼Œå¹¶ä¸”é¢‘ç¹å¤åˆ¶è¿™äº›å¯¹è±¡æ–°ç”Ÿçš„ GC æ—¶é—´ä¹Ÿå¯èƒ½å˜é•¿ã€‚</p><p>é…ç½®å‚æ•°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//è¿›å…¥è€å¹´ä»£æœ€å°çš„GCå¹´é¾„,å¹´è½»ä»£å¯¹è±¡è½¬æ¢ä¸ºè€å¹´ä»£å¯¹è±¡æœ€å°å¹´é¾„å€¼ï¼Œé»˜è®¤å€¼7
 -XX:InitialTenuringThreshol=7 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-6-è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†" tabindex="-1"><a class="header-anchor" href="#_8-6-è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†" aria-hidden="true">#</a> 8.6 è°ƒæ•´å¤§å¯¹è±¡çš„æ ‡å‡†</h2><p><strong>ç°è±¡</strong>ï¼šè€å¹´ä»£é¢‘ç¹ GCï¼Œæ¯æ¬¡å›æ”¶çš„å¯¹è±¡å¾ˆå¤š,è€Œä¸”å•ä¸ªå¯¹è±¡çš„ä½“ç§¯éƒ½æ¯”è¾ƒå¤§ã€‚</p><p><strong>åŸå› </strong>ï¼šå¦‚æœå¤§é‡çš„å¤§å¯¹è±¡ç›´æ¥åˆ†é…åˆ°è€å¹´ä»£ï¼Œå¯¼è‡´è€å¹´ä»£å®¹æ˜“è¢«å¡«æ»¡è€Œé€ æˆé¢‘ç¹ GCï¼Œå¯è®¾ç½®å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£çš„æ ‡å‡†ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šè¿™äº›å¤§å¯¹è±¡è¿›å…¥æ–°ç”Ÿä»£åå¯èƒ½ä¼šä½¿æ–°ç”Ÿä»£çš„ GC é¢‘ç‡å’Œæ—¶é—´å¢åŠ ã€‚</p><p>é…ç½®å‚æ•°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> //æ–°ç”Ÿä»£å¯å®¹çº³çš„æœ€å¤§å¯¹è±¡,å¤§äºåˆ™ç›´æ¥ä¼šåˆ†é…åˆ°è€å¹´ä»£ï¼Œ0ä»£è¡¨æ²¡æœ‰é™åˆ¶ã€‚
  -XX:PretenureSizeThreshold=1000000 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-7-è°ƒæ•´gcçš„è§¦å‘æ—¶æœº" tabindex="-1"><a class="header-anchor" href="#_8-7-è°ƒæ•´gcçš„è§¦å‘æ—¶æœº" aria-hidden="true">#</a> 8.7 è°ƒæ•´GCçš„è§¦å‘æ—¶æœº</h2><p><strong>ç°è±¡</strong>ï¼šCMSï¼ŒG1 ç»å¸¸ Full GCï¼Œç¨‹åºå¡é¡¿ä¸¥é‡ã€‚</p><p><strong>åŸå› </strong>ï¼šG1 å’Œ CMS éƒ¨åˆ† GC é˜¶æ®µæ˜¯å¹¶å‘è¿›è¡Œçš„ï¼Œä¸šåŠ¡çº¿ç¨‹å’Œåƒåœ¾æ”¶é›†çº¿ç¨‹ä¸€èµ·å·¥ä½œï¼Œä¹Ÿå°±è¯´æ˜åƒåœ¾æ”¶é›†çš„è¿‡ç¨‹ä¸­ä¸šåŠ¡çº¿ç¨‹ä¼šç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨ GC çš„æ—¶å€™éœ€è¦é¢„ç•™ä¸€éƒ¨åˆ†å†…å­˜ç©ºé—´æ¥å®¹çº³æ–°äº§ç”Ÿçš„å¯¹è±¡ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™å†…å­˜ç©ºé—´ä¸è¶³ä»¥å®¹çº³æ–°äº§ç”Ÿçš„å¯¹è±¡ï¼Œé‚£ä¹ˆJVMå°±ä¼šåœæ­¢å¹¶å‘æ”¶é›†æš‚åœæ‰€æœ‰ä¸šåŠ¡çº¿ç¨‹ï¼ˆSTWï¼‰æ¥ä¿è¯åƒåœ¾æ”¶é›†çš„æ­£å¸¸è¿è¡Œã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥è°ƒæ•´GCè§¦å‘çš„æ—¶æœºï¼ˆæ¯”å¦‚åœ¨è€å¹´ä»£å ç”¨ 60% å°±è§¦å‘ GCï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´æ¥è®©ä¸šåŠ¡çº¿ç¨‹åˆ›å»ºçš„å¯¹è±¡æœ‰è¶³å¤Ÿçš„ç©ºé—´åˆ†é…ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šææ—©è§¦å‘ GC ä¼šå¢åŠ è€å¹´ä»£ GC çš„é¢‘ç‡ã€‚</p><p>é…ç½®å‚æ•°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> //ä½¿ç”¨å¤šå°‘æ¯”ä¾‹çš„è€å¹´ä»£åå¼€å§‹CMSæ”¶é›†ï¼Œé»˜è®¤æ˜¯68%ï¼Œå¦‚æœé¢‘ç¹å‘ç”ŸSerialOldå¡é¡¿ï¼Œåº”è¯¥è°ƒå°
 -XX:CMSInitiatingOccupancyFraction
 
 //G1æ··åˆåƒåœ¾å›æ”¶å‘¨æœŸä¸­è¦åŒ…æ‹¬çš„æ—§åŒºåŸŸè®¾ç½®å ç”¨ç‡é˜ˆå€¼ã€‚é»˜è®¤å ç”¨ç‡ä¸º 65%
 -XX:G1MixedGCLiveThresholdPercent=65 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-8-è°ƒæ•´-jvmæœ¬åœ°å†…å­˜å¤§å°" tabindex="-1"><a class="header-anchor" href="#_8-8-è°ƒæ•´-jvmæœ¬åœ°å†…å­˜å¤§å°" aria-hidden="true">#</a> 8.8 è°ƒæ•´ JVMæœ¬åœ°å†…å­˜å¤§å°</h2><p><strong>ç°è±¡</strong>ï¼šGC çš„æ¬¡æ•°ã€æ—¶é—´å’Œå›æ”¶çš„å¯¹è±¡éƒ½æ­£å¸¸ï¼Œå †å†…å­˜ç©ºé—´å……è¶³ï¼Œä½†æ˜¯æŠ¥ OOM</p><p><strong>åŸå› </strong>ï¼šJVM é™¤äº†å †å†…å­˜ä¹‹å¤–è¿˜æœ‰ä¸€å—å †å¤–å†…å­˜ï¼Œè¿™ç‰‡å†…å­˜ä¹Ÿå«æœ¬åœ°å†…å­˜ï¼Œå¯æ˜¯è¿™å—å†…å­˜åŒºåŸŸä¸è¶³äº†å¹¶ä¸ä¼šä¸»åŠ¨è§¦å‘ GCï¼Œåªæœ‰åœ¨å †å†…å­˜åŒºåŸŸè§¦å‘çš„æ—¶å€™é¡ºå¸¦ä¼šæŠŠæœ¬åœ°å†…å­˜å›æ”¶äº†ï¼Œè€Œä¸€æ—¦æœ¬åœ°å†…å­˜åˆ†é…ä¸è¶³å°±ä¼šç›´æ¥æŠ¥ OOM å¼‚å¸¸ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šæœ¬åœ°å†…å­˜å¼‚å¸¸çš„æ—¶å€™é™¤äº†ä¸Šé¢çš„ç°è±¡ä¹‹å¤–ï¼Œå¼‚å¸¸ä¿¡æ¯å¯èƒ½æ˜¯ OutOfMemoryErrorï¼šDirect buffer memoryã€‚è§£å†³æ–¹å¼é™¤äº†è°ƒæ•´æœ¬åœ°å†…å­˜å¤§å°ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨å‡ºç°æ­¤å¼‚å¸¸æ—¶è¿›è¡Œæ•è·ï¼Œæ‰‹åŠ¨è§¦å‘ GCï¼ˆSystem.gc()ï¼‰ã€‚</p><p>é…ç½®å‚æ•°ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code> XX:MaxDirectMemorySize
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1>9. JVM è°ƒè¯•å®æˆ˜</h1><h2 id="_9-1-ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢å-ç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢" tabindex="-1"><a class="header-anchor" href="#_9-1-ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢å-ç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢" aria-hidden="true">#</a> 9.1 ç½‘ç«™æµé‡æµè§ˆé‡æš´å¢åï¼Œç½‘ç«™ååº”é¡µé¢å“å¾ˆæ…¢</h2><p>1ã€é—®é¢˜æ¨æµ‹ï¼šåœ¨æµ‹è¯•ç¯å¢ƒæµ‹é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä½†æ˜¯ä¸€åˆ°ç”Ÿäº§å°±å˜æ…¢ï¼Œæ‰€ä»¥æ¨æµ‹å¯èƒ½æ˜¯å› ä¸ºåƒåœ¾æ”¶é›†å¯¼è‡´çš„ä¸šåŠ¡çº¿ç¨‹åœé¡¿ã€‚</p><p>2ã€å®šä½ï¼šä¸ºäº†ç¡®è®¤æ¨æµ‹çš„æ­£ç¡®æ€§ï¼Œåœ¨çº¿ä¸Šé€šè¿‡ jstat -gc æŒ‡ä»¤ çœ‹åˆ° JVM è¿›è¡Œ GC æ¬¡æ•°é¢‘ç‡éå¸¸é«˜ï¼ŒGC æ‰€å ç”¨çš„æ—¶é—´éå¸¸é•¿ï¼Œæ‰€ä»¥åŸºæœ¬æ¨æ–­å°±æ˜¯å› ä¸º GC é¢‘ç‡éå¸¸é«˜ï¼Œæ‰€ä»¥å¯¼è‡´ä¸šåŠ¡çº¿ç¨‹ç»å¸¸åœé¡¿ï¼Œä»è€Œé€ æˆç½‘é¡µååº”å¾ˆæ…¢ã€‚</p><p>3ã€è§£å†³æ–¹æ¡ˆï¼šå› ä¸ºç½‘é¡µè®¿é—®é‡å¾ˆé«˜ï¼Œæ‰€ä»¥å¯¹è±¡åˆ›å»ºé€Ÿåº¦éå¸¸å¿«ï¼Œå¯¼è‡´å †å†…å­˜å®¹æ˜“å¡«æ»¡ä»è€Œé¢‘ç¹ GCï¼Œæ‰€ä»¥è¿™é‡Œé—®é¢˜åœ¨äºæ–°ç”Ÿä»£å†…å­˜å¤ªå°ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥å¢åŠ  JVM å†…å­˜å°±è¡Œäº†ï¼Œæ‰€ä»¥åˆæ­¥ä»åŸæ¥çš„ 2G å†…å­˜å¢åŠ åˆ° 16G å†…å­˜ã€‚</p><p>4ã€ç¬¬äºŒä¸ªé—®é¢˜ï¼šå¢åŠ å†…å­˜åçš„ç¡®å¹³å¸¸çš„è¯·æ±‚æ¯”è¾ƒå¿«äº†ï¼Œä½†æ˜¯åˆå‡ºç°äº†å¦å¤–ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä¸å®šæœŸçš„ä¼šé—´æ–­æ€§çš„å¡é¡¿ï¼Œè€Œä¸”å•æ¬¡å¡é¡¿çš„æ—¶é—´è¦æ¯”ä¹‹å‰è¦é•¿å¾ˆå¤šã€‚</p><p>5ã€é—®é¢˜æ¨æµ‹ï¼šä¹‹å‰çš„ä¼˜åŒ–åŠ å¤§äº†å†…å­˜ï¼Œæ‰€ä»¥æ¨æµ‹å¯èƒ½æ˜¯å› ä¸ºå†…å­˜åŠ å¤§äº†ï¼Œä»è€Œå¯¼è‡´å•æ¬¡ GC çš„æ—¶é—´å˜é•¿ä»è€Œå¯¼è‡´é—´æ¥æ€§çš„å¡é¡¿ã€‚</p><p>6ã€å®šä½ï¼šè¿˜æ˜¯é€šè¿‡ jstat -gc æŒ‡ä»¤ æŸ¥çœ‹åˆ° çš„ç¡® FGC æ¬¡æ•°å¹¶ä¸æ˜¯å¾ˆé«˜ï¼Œä½†æ˜¯èŠ±è´¹åœ¨ FGC ä¸Šçš„æ—¶é—´æ˜¯éå¸¸é«˜çš„ï¼Œæ ¹æ® GC æ—¥å¿— æŸ¥çœ‹åˆ°å•æ¬¡ FGC çš„æ—¶é—´æœ‰è¾¾åˆ°å‡ åç§’çš„ã€‚</p><p>7ã€è§£å†³æ–¹æ¡ˆï¼šå› ä¸º JVM é»˜è®¤ä½¿ç”¨çš„æ˜¯ PS+PO çš„ç»„åˆï¼ŒPS+PO åƒåœ¾æ ‡è®°å’Œæ”¶é›†é˜¶æ®µéƒ½æ˜¯ STWï¼Œæ‰€ä»¥å†…å­˜åŠ å¤§äº†ä¹‹åï¼Œéœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶é—´å°±å˜é•¿äº†ï¼Œæ‰€ä»¥è¿™é‡Œè¦æƒ³é¿å…å•æ¬¡ GC æ—¶é—´è¿‡é•¿ï¼Œæ‰€ä»¥éœ€è¦æ›´æ¢å¹¶å‘ç±»çš„æ”¶é›†å™¨ï¼Œå› ä¸ºå½“å‰çš„ JDK ç‰ˆæœ¬ä¸º 1.7ï¼Œæ‰€ä»¥æœ€åé€‰æ‹© CMS åƒåœ¾æ”¶é›†å™¨ï¼Œæ ¹æ®ä¹‹å‰åƒåœ¾æ”¶é›†æƒ…å†µè®¾ç½®äº†ä¸€ä¸ªé¢„æœŸçš„åœé¡¿çš„æ—¶é—´ï¼Œä¸Šçº¿åç½‘ç«™å†ä¹Ÿæ²¡æœ‰äº†å¡é¡¿é—®é¢˜ã€‚</p><h2 id="_9-2-åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„-oom" tabindex="-1"><a class="header-anchor" href="#_9-2-åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„-oom" aria-hidden="true">#</a> 9.2 åå°å¯¼å‡ºæ•°æ®å¼•å‘çš„ OOM</h2><p><strong>é—®é¢˜æè¿°</strong>ï¼šå…¬å¸çš„åå°ç³»ç»Ÿï¼Œå¶å‘æ€§çš„å¼•å‘ OOM å¼‚å¸¸ï¼Œå †å†…å­˜æº¢å‡ºã€‚</p><p>1ã€å› ä¸ºæ˜¯å¶å‘æ€§çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡ç®€å•çš„è®¤ä¸ºå°±æ˜¯å †å†…å­˜ä¸è¶³å¯¼è‡´ï¼Œæ‰€ä»¥å•æ–¹é¢çš„åŠ å¤§äº†å †å†…å­˜ä» 4G è°ƒæ•´åˆ° 8Gã€‚</p><p>2ã€ä½†æ˜¯é—®é¢˜ä¾ç„¶æ²¡æœ‰è§£å†³ï¼Œåªèƒ½ä»å †å†…å­˜ä¿¡æ¯ä¸‹æ‰‹ï¼Œé€šè¿‡å¼€å¯äº† -XX:+HeapDumpOnOutOfMemoryError å‚æ•° è·å¾—å †å†…å­˜çš„ dump æ–‡ä»¶ã€‚</p><p>3ã€VisualVM å¯¹å † dump æ–‡ä»¶è¿›è¡Œåˆ†æï¼Œé€šè¿‡ VisualVM æŸ¥çœ‹åˆ°å ç”¨å†…å­˜æœ€å¤§çš„å¯¹è±¡æ˜¯ String å¯¹è±¡ï¼Œæœ¬æ¥æƒ³è·Ÿè¸ªç€ String å¯¹è±¡æ‰¾åˆ°å…¶å¼•ç”¨çš„åœ°æ–¹ï¼Œä½† dump æ–‡ä»¶å¤ªå¤§ï¼Œè·Ÿè¸ªè¿›å»çš„æ—¶å€™æ€»æ˜¯å¡æ­»ï¼Œè€Œ String å¯¹è±¡å ç”¨æ¯”è¾ƒå¤šä¹Ÿæ¯”è¾ƒæ­£å¸¸ï¼Œæœ€å¼€å§‹ä¹Ÿæ²¡æœ‰è®¤å®šå°±æ˜¯è¿™é‡Œçš„é—®é¢˜ï¼Œäºæ˜¯å°±ä»çº¿ç¨‹ä¿¡æ¯é‡Œé¢æ‰¾çªç ´ç‚¹ã€‚</p><p>4ã€é€šè¿‡çº¿ç¨‹è¿›è¡Œåˆ†æï¼Œå…ˆæ‰¾åˆ°äº†å‡ ä¸ªæ­£åœ¨è¿è¡Œçš„ä¸šåŠ¡çº¿ç¨‹ï¼Œç„¶åé€ä¸€è·Ÿè¿›ä¸šåŠ¡çº¿ç¨‹çœ‹äº†ä¸‹ä»£ç ï¼Œå‘ç°æœ‰ä¸ªå¼•èµ·æˆ‘æ³¨æ„çš„æ–¹æ³•ï¼Œå¯¼å‡ºè®¢å•ä¿¡æ¯ã€‚</p><p>5ã€å› ä¸ºè®¢å•ä¿¡æ¯å¯¼å‡ºè¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šæœ‰å‡ ä¸‡çš„æ•°æ®é‡ï¼Œé¦–å…ˆè¦ä»æ•°æ®åº“é‡Œé¢æŸ¥è¯¢å‡ºæ¥è®¢å•ä¿¡æ¯ï¼Œç„¶åæŠŠè®¢å•ä¿¡æ¯ç”Ÿæˆ excelï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šäº§ç”Ÿå¤§é‡çš„ String å¯¹è±¡ã€‚</p><p>6ã€ä¸ºäº†éªŒè¯è‡ªå·±çš„çŒœæƒ³ï¼Œäºæ˜¯å‡†å¤‡ç™»å½•åå°å»æµ‹è¯•ä¸‹ï¼Œç»“æœåœ¨æµ‹è¯•çš„è¿‡ç¨‹ä¸­å‘ç°åˆ°å¤„è®¢å•çš„æŒ‰é’®å‰ç«¯å±…ç„¶æ²¡æœ‰åšç‚¹å‡»åæŒ‰é’®ç½®ç°äº¤äº’äº‹ä»¶ï¼Œç»“æœæŒ‰é’®å¯ä»¥ä¸€ç›´ç‚¹ï¼Œå› ä¸ºå¯¼å‡ºè®¢å•æ•°æ®æœ¬æ¥å°±éå¸¸æ…¢ï¼Œä½¿ç”¨çš„äººå‘˜å¯èƒ½å‘ç°ç‚¹å‡»åå¾ˆä¹…åé¡µé¢éƒ½æ²¡ååº”ï¼Œç»“æœå°±ä¸€ç›´ç‚¹ï¼Œç»“æœå°±å¤§é‡çš„è¯·æ±‚è¿›å…¥åˆ°åå°ï¼Œå †å†…å­˜äº§ç”Ÿäº†å¤§é‡çš„è®¢å•å¯¹è±¡å’Œ EXCEL å¯¹è±¡ï¼Œè€Œä¸”æ–¹æ³•æ‰§è¡Œéå¸¸æ…¢ï¼Œå¯¼è‡´è¿™ä¸€æ®µæ—¶é—´å†…è¿™äº›å¯¹è±¡éƒ½æ— æ³•è¢«å›æ”¶ï¼Œæ‰€ä»¥æœ€ç»ˆå¯¼è‡´å†…å­˜æº¢å‡ºã€‚</p><p>7ã€çŸ¥é“äº†é—®é¢˜å°±å®¹æ˜“è§£å†³äº†ï¼Œæœ€ç»ˆæ²¡æœ‰è°ƒæ•´ä»»ä½• JVM å‚æ•°ï¼Œåªæ˜¯åœ¨å‰ç«¯çš„å¯¼å‡ºè®¢å•æŒ‰é’®ä¸ŠåŠ ä¸Šäº†ç½®ç°çŠ¶æ€ï¼Œç­‰åç«¯å“åº”ä¹‹åæŒ‰é’®æ‰å¯ä»¥è¿›è¡Œç‚¹å‡»ï¼Œç„¶åå‡å°‘äº†æŸ¥è¯¢è®¢å•ä¿¡æ¯çš„éå¿…è¦å­—æ®µæ¥å‡å°‘ç”Ÿæˆå¯¹è±¡çš„ä½“ç§¯ï¼Œç„¶åé—®é¢˜å°±è§£å†³äº†ã€‚</p><h1>10. JVMå‚æ•°è®¾ç½®ä¼˜åŒ–</h1><p>ä¸ç®¡æ˜¯YGCè¿˜æ˜¯Full GC,GCè¿‡ç¨‹ä¸­éƒ½ä¼šå¯¹å¯¼è‡´ç¨‹åºè¿è¡Œä¸­ä¸­æ–­,æ­£ç¡®çš„é€‰æ‹©<a href="http://www.cnblogs.com/redcreen/archive/2011/05/04/2037029.html" target="_blank" rel="noopener noreferrer">ä¸åŒçš„GCç­–ç•¥<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,è°ƒæ•´JVMã€GCçš„å‚æ•°ï¼Œå¯ä»¥æå¤§çš„å‡å°‘ç”±äºGCå·¥ä½œï¼Œè€Œå¯¼è‡´çš„ç¨‹åºè¿è¡Œä¸­æ–­æ–¹é¢çš„é—®é¢˜ï¼Œè¿›è€Œé€‚å½“çš„æé«˜Javaç¨‹åºçš„å·¥ä½œæ•ˆç‡ã€‚</p><h2 id="jvmå‚æ•°çš„å«ä¹‰" tabindex="-1"><a class="header-anchor" href="#jvmå‚æ•°çš„å«ä¹‰" aria-hidden="true">#</a> JVMå‚æ•°çš„å«ä¹‰</h2><table><thead><tr><th>å‚æ•°åç§°</th><th>å«ä¹‰</th><th>é»˜è®¤å€¼</th><th></th></tr></thead><tbody><tr><td>-Xms</td><td>åˆå§‹å †å¤§å°</td><td>ç‰©ç†å†…å­˜çš„1/64(&lt;1GB)</td><td>é»˜è®¤(MinHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´)ç©ºä½™å †å†…å­˜å°äº40%æ—¶ï¼ŒJVMå°±ä¼šå¢å¤§å †ç›´åˆ°-Xmxçš„æœ€å¤§é™åˆ¶.</td></tr><tr><td>-Xmx</td><td>æœ€å¤§å †å¤§å°</td><td>ç‰©ç†å†…å­˜çš„1/4(&lt;1GB)</td><td>é»˜è®¤(MaxHeapFreeRatioå‚æ•°å¯ä»¥è°ƒæ•´)ç©ºä½™å †å†…å­˜å¤§äº70%æ—¶ï¼ŒJVMä¼šå‡å°‘å †ç›´åˆ° -Xmsçš„æœ€å°é™åˆ¶</td></tr><tr><td>-Xmn</td><td>å¹´è½»ä»£å¤§å°(1.4or lator)</td><td></td><td><strong>æ³¨æ„</strong>ï¼šæ­¤å¤„çš„å¤§å°æ˜¯ï¼ˆeden+ 2 survivor space).ä¸jmap -heapä¸­æ˜¾ç¤ºçš„New genæ˜¯ä¸åŒçš„ã€‚ æ•´ä¸ªå †å¤§å°=å¹´è½»ä»£å¤§å° + å¹´è€ä»£å¤§å° + æŒä¹…ä»£å¤§å°. å¢å¤§å¹´è½»ä»£å,å°†ä¼šå‡å°å¹´è€ä»£å¤§å°.æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§,Sunå®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„3/8</td></tr><tr><td>-XX:NewSize</td><td>è®¾ç½®å¹´è½»ä»£å¤§å°(for 1.3/1.4)</td><td></td><td></td></tr><tr><td>-XX:MaxNewSize</td><td>å¹´è½»ä»£æœ€å¤§å€¼(for 1.3/1.4)</td><td></td><td></td></tr><tr><td>-XX:PermSize</td><td>è®¾ç½®æŒä¹…ä»£(perm gen)åˆå§‹å€¼</td><td>ç‰©ç†å†…å­˜çš„1/64</td><td></td></tr><tr><td>-XX:MaxPermSize</td><td>è®¾ç½®æŒä¹…ä»£æœ€å¤§å€¼</td><td>ç‰©ç†å†…å­˜çš„1/4</td><td></td></tr><tr><td>-Xss</td><td>æ¯ä¸ªçº¿ç¨‹çš„å †æ ˆå¤§å°</td><td></td><td>JDK5.0ä»¥åæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º1M,ä»¥å‰æ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º256K.æ›´å…·åº”ç”¨çš„çº¿ç¨‹æ‰€éœ€å†…å­˜å¤§å°è¿›è¡Œ è°ƒæ•´.åœ¨ç›¸åŒç‰©ç†å†…å­˜ä¸‹,å‡å°è¿™ä¸ªå€¼èƒ½ç”Ÿæˆæ›´å¤šçš„çº¿ç¨‹.ä½†æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªè¿›ç¨‹å†…çš„çº¿ç¨‹æ•°è¿˜æ˜¯æœ‰é™åˆ¶çš„,ä¸èƒ½æ— é™ç”Ÿæˆ,ç»éªŒå€¼åœ¨3000~5000å·¦å³ ä¸€èˆ¬å°çš„åº”ç”¨ï¼Œ å¦‚æœæ ˆä¸æ˜¯å¾ˆæ·±ï¼Œ åº”è¯¥æ˜¯128kå¤Ÿç”¨çš„ å¤§çš„åº”ç”¨å»ºè®®ä½¿ç”¨256kã€‚è¿™ä¸ªé€‰é¡¹å¯¹æ€§èƒ½å½±å“æ¯”è¾ƒå¤§ï¼Œéœ€è¦ä¸¥æ ¼çš„æµ‹è¯•ã€‚ï¼ˆæ ¡é•¿ï¼‰ å’Œthreadstacksizeé€‰é¡¹è§£é‡Šå¾ˆç±»ä¼¼,å®˜æ–¹æ–‡æ¡£ä¼¼ä¹æ²¡æœ‰è§£é‡Š,åœ¨è®ºå›ä¸­æœ‰è¿™æ ·ä¸€å¥è¯:&quot;â€ -Xss is translated in a VM flag named ThreadStackSizeâ€ ä¸€èˆ¬è®¾ç½®è¿™ä¸ªå€¼å°±å¯ä»¥äº†ã€‚</td></tr><tr><td>-<em>XX:ThreadStackSize</em></td><td>Thread Stack Size</td><td></td><td>(0 means use default stack size) [Sparc: 512; Solaris x86: 320 (was 256 prior in 5.0 and earlier); Sparc 64 bit: 1024; Linux amd64: 1024 (was 0 in 5.0 and earlier); all others 0.]</td></tr><tr><td>-XX:NewRatio</td><td>å¹´è½»ä»£(åŒ…æ‹¬Edenå’Œä¸¤ä¸ªSurvivoråŒº)ä¸å¹´è€ä»£çš„æ¯”å€¼(é™¤å»æŒä¹…ä»£)</td><td></td><td>-XX:NewRatio=4è¡¨ç¤ºå¹´è½»ä»£ä¸å¹´è€ä»£æ‰€å æ¯”å€¼ä¸º1:4,å¹´è½»ä»£å æ•´ä¸ªå †æ ˆçš„1/5 Xms=Xmxå¹¶ä¸”è®¾ç½®äº†Xmnçš„æƒ…å†µä¸‹ï¼Œè¯¥å‚æ•°ä¸éœ€è¦è¿›è¡Œè®¾ç½®ã€‚</td></tr><tr><td>-XX:SurvivorRatio</td><td>EdenåŒºä¸SurvivoråŒºçš„å¤§å°æ¯”å€¼</td><td></td><td>è®¾ç½®ä¸º8,åˆ™ä¸¤ä¸ªSurvivoråŒºä¸ä¸€ä¸ªEdenåŒºçš„æ¯”å€¼ä¸º2:8,ä¸€ä¸ªSurvivoråŒºå æ•´ä¸ªå¹´è½»ä»£çš„1/10</td></tr><tr><td>-XX:LargePageSizeInBytes</td><td>å†…å­˜é¡µçš„å¤§å°ä¸å¯è®¾ç½®è¿‡å¤§ï¼Œ ä¼šå½±å“Permçš„å¤§å°</td><td></td><td>=128m</td></tr><tr><td>-XX:+UseFastAccessorMethods</td><td>åŸå§‹ç±»å‹çš„å¿«é€Ÿä¼˜åŒ–</td><td></td><td></td></tr><tr><td>-XX:+DisableExplicitGC</td><td>å…³é—­System.gc()</td><td></td><td>è¿™ä¸ªå‚æ•°éœ€è¦ä¸¥æ ¼çš„æµ‹è¯•</td></tr><tr><td>-XX:MaxTenuringThreshold</td><td>åƒåœ¾æœ€å¤§å¹´é¾„</td><td></td><td>å¦‚æœè®¾ç½®ä¸º0çš„è¯,åˆ™å¹´è½»ä»£å¯¹è±¡ä¸ç»è¿‡SurvivoråŒº,ç›´æ¥è¿›å…¥å¹´è€ä»£. å¯¹äºå¹´è€ä»£æ¯”è¾ƒå¤šçš„åº”ç”¨,å¯ä»¥æé«˜æ•ˆç‡.å¦‚æœå°†æ­¤å€¼è®¾ç½®ä¸ºä¸€ä¸ªè¾ƒå¤§å€¼,åˆ™å¹´è½»ä»£å¯¹è±¡ä¼šåœ¨SurvivoråŒºè¿›è¡Œå¤šæ¬¡å¤åˆ¶,è¿™æ ·å¯ä»¥å¢åŠ å¯¹è±¡å†å¹´è½»ä»£çš„å­˜æ´» æ—¶é—´,å¢åŠ åœ¨å¹´è½»ä»£å³è¢«å›æ”¶çš„æ¦‚ç‡ è¯¥å‚æ•°åªæœ‰åœ¨ä¸²è¡ŒGCæ—¶æ‰æœ‰æ•ˆ.</td></tr><tr><td>-XX:+AggressiveOpts</td><td>åŠ å¿«ç¼–è¯‘</td><td></td><td></td></tr><tr><td>-XX:+UseBiasedLocking</td><td>é”æœºåˆ¶çš„æ€§èƒ½æ”¹å–„</td><td></td><td></td></tr><tr><td>-Xnoclassgc</td><td>ç¦ç”¨åƒåœ¾å›æ”¶</td><td></td><td></td></tr><tr><td>-XX:SoftRefLRUPolicyMSPerMB</td><td>æ¯å…†å †ç©ºé—²ç©ºé—´ä¸­SoftReferenceçš„å­˜æ´»æ—¶é—´</td><td>1s</td><td>softly reachable objects will remain alive for some amount of time after the last time they were referenced. The default value is one second of lifetime per free megabyte in the heap</td></tr><tr><td>-XX:PretenureSizeThreshold</td><td>å¯¹è±¡è¶…è¿‡å¤šå¤§æ˜¯ç›´æ¥åœ¨æ—§ç”Ÿä»£åˆ†é…</td><td>0</td><td>å•ä½å­—èŠ‚ æ–°ç”Ÿä»£é‡‡ç”¨Parallel Scavenge GCæ—¶æ— æ•ˆ å¦ä¸€ç§ç›´æ¥åœ¨æ—§ç”Ÿä»£åˆ†é…çš„æƒ…å†µæ˜¯å¤§çš„æ•°ç»„å¯¹è±¡,ä¸”æ•°ç»„ä¸­æ— å¤–éƒ¨å¼•ç”¨å¯¹è±¡.</td></tr><tr><td>-XX:TLABWasteTargetPercent</td><td>TLABå edenåŒºçš„ç™¾åˆ†æ¯”</td><td>1%</td><td></td></tr><tr><td>-XX:+<em>CollectGen0First</em></td><td>FullGCæ—¶æ˜¯å¦å…ˆYGC</td><td>false</td><td></td></tr></tbody></table><p><strong>å¹¶è¡Œæ”¶é›†å™¨ç›¸å…³å‚æ•°</strong></p><table><thead><tr><th>-XX:+UseParallelGC</th><th>Full GCé‡‡ç”¨parallel MSC (æ­¤é¡¹å¾…éªŒè¯)</th><th></th><th>é€‰æ‹©åƒåœ¾æ”¶é›†å™¨ä¸ºå¹¶è¡Œæ”¶é›†å™¨.æ­¤é…ç½®ä»…å¯¹å¹´è½»ä»£æœ‰æ•ˆ.å³ä¸Šè¿°é…ç½®ä¸‹,å¹´è½»ä»£ä½¿ç”¨å¹¶å‘æ”¶é›†,è€Œå¹´è€ä»£ä»æ—§ä½¿ç”¨ä¸²è¡Œæ”¶é›†.(æ­¤é¡¹å¾…éªŒè¯)</th></tr></thead><tbody><tr><td>-XX:+UseParNewGC</td><td>è®¾ç½®å¹´è½»ä»£ä¸ºå¹¶è¡Œæ”¶é›†</td><td></td><td>å¯ä¸CMSæ”¶é›†åŒæ—¶ä½¿ç”¨ JDK5.0ä»¥ä¸Š,JVMä¼šæ ¹æ®ç³»ç»Ÿé…ç½®è‡ªè¡Œè®¾ç½®,æ‰€ä»¥æ— éœ€å†è®¾ç½®æ­¤å€¼</td></tr><tr><td>-XX:ParallelGCThreads</td><td>å¹¶è¡Œæ”¶é›†å™¨çš„çº¿ç¨‹æ•°</td><td></td><td>æ­¤å€¼æœ€å¥½é…ç½®ä¸å¤„ç†å™¨æ•°ç›®ç›¸ç­‰ åŒæ ·é€‚ç”¨äºCMS</td></tr><tr><td>-XX:+UseParallelOldGC</td><td>å¹´è€ä»£åƒåœ¾æ”¶é›†æ–¹å¼ä¸ºå¹¶è¡Œæ”¶é›†(Parallel Compacting)</td><td></td><td>è¿™ä¸ªæ˜¯JAVA 6å‡ºç°çš„å‚æ•°é€‰é¡¹</td></tr><tr><td>-XX:MaxGCPauseMillis</td><td>æ¯æ¬¡å¹´è½»ä»£åƒåœ¾å›æ”¶çš„æœ€é•¿æ—¶é—´(æœ€å¤§æš‚åœæ—¶é—´)</td><td></td><td>å¦‚æœæ— æ³•æ»¡è¶³æ­¤æ—¶é—´,JVMä¼šè‡ªåŠ¨è°ƒæ•´å¹´è½»ä»£å¤§å°,ä»¥æ»¡è¶³æ­¤å€¼.</td></tr><tr><td>-XX:+UseAdaptiveSizePolicy</td><td>è‡ªåŠ¨é€‰æ‹©å¹´è½»ä»£åŒºå¤§å°å’Œç›¸åº”çš„SurvivoråŒºæ¯”ä¾‹</td><td></td><td>è®¾ç½®æ­¤é€‰é¡¹å,å¹¶è¡Œæ”¶é›†å™¨ä¼šè‡ªåŠ¨é€‰æ‹©å¹´è½»ä»£åŒºå¤§å°å’Œç›¸åº”çš„SurvivoråŒºæ¯”ä¾‹,ä»¥è¾¾åˆ°ç›®æ ‡ç³»ç»Ÿè§„å®šçš„æœ€ä½ç›¸åº”æ—¶é—´æˆ–è€…æ”¶é›†é¢‘ç‡ç­‰,æ­¤å€¼å»ºè®®ä½¿ç”¨å¹¶è¡Œæ”¶é›†å™¨æ—¶,ä¸€ç›´æ‰“å¼€.</td></tr><tr><td>-XX:GCTimeRatio</td><td>è®¾ç½®åƒåœ¾å›æ”¶æ—¶é—´å ç¨‹åºè¿è¡Œæ—¶é—´çš„ç™¾åˆ†æ¯”</td><td></td><td>å…¬å¼ä¸º1/(1+n)</td></tr><tr><td>-XX:+<em>ScavengeBeforeFullGC</em></td><td>Full GCå‰è°ƒç”¨YGC</td><td>true</td><td>Do young generation GC prior to a full GC. (Introduced in 1.4.1.)</td></tr></tbody></table><p><strong>CMS****ç›¸å…³å‚æ•°</strong></p><table><thead><tr><th>-XX:+UseConcMarkSweepGC</th><th>ä½¿ç”¨CMSå†…å­˜æ”¶é›†</th><th></th><th>æµ‹è¯•ä¸­é…ç½®è¿™ä¸ªä»¥å,-XX:NewRatio=4çš„é…ç½®å¤±æ•ˆäº†,åŸå› ä¸æ˜.æ‰€ä»¥,æ­¤æ—¶å¹´è½»ä»£å¤§å°æœ€å¥½ç”¨-Xmnè®¾ç½®.???</th></tr></thead><tbody><tr><td>-XX:+AggressiveHeap</td><td></td><td></td><td>è¯•å›¾æ˜¯ä½¿ç”¨å¤§é‡çš„ç‰©ç†å†…å­˜ é•¿æ—¶é—´å¤§å†…å­˜ä½¿ç”¨çš„ä¼˜åŒ–ï¼Œèƒ½æ£€æŸ¥è®¡ç®—èµ„æºï¼ˆå†…å­˜ï¼Œ å¤„ç†å™¨æ•°é‡ï¼‰ è‡³å°‘éœ€è¦256MBå†…å­˜ å¤§é‡çš„CPUï¼å†…å­˜ï¼Œ ï¼ˆåœ¨1.4.1åœ¨4CPUçš„æœºå™¨ä¸Šå·²ç»æ˜¾ç¤ºæœ‰æå‡ï¼‰</td></tr><tr><td>-XX:CMSFullGCsBeforeCompaction</td><td>å¤šå°‘æ¬¡åè¿›è¡Œå†…å­˜å‹ç¼©</td><td></td><td>ç”±äºå¹¶å‘æ”¶é›†å™¨ä¸å¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©,æ•´ç†,æ‰€ä»¥è¿è¡Œä¸€æ®µæ—¶é—´ä»¥åä¼šäº§ç”Ÿ&quot;ç¢ç‰‡&quot;,ä½¿å¾—è¿è¡Œæ•ˆç‡é™ä½.æ­¤å€¼è®¾ç½®è¿è¡Œå¤šå°‘æ¬¡GCä»¥åå¯¹å†…å­˜ç©ºé—´è¿›è¡Œå‹ç¼©,æ•´ç†.</td></tr><tr><td>-XX:+CMSParallelRemarkEnabled</td><td>é™ä½æ ‡è®°åœé¡¿</td><td></td><td></td></tr><tr><td>-XX+UseCMSCompactAtFullCollection</td><td>åœ¨FULL GCçš„æ—¶å€™ï¼Œ å¯¹å¹´è€ä»£çš„å‹ç¼©</td><td></td><td>CMSæ˜¯ä¸ä¼šç§»åŠ¨å†…å­˜çš„ï¼Œ å› æ­¤ï¼Œ è¿™ä¸ªéå¸¸å®¹æ˜“äº§ç”Ÿç¢ç‰‡ï¼Œ å¯¼è‡´å†…å­˜ä¸å¤Ÿç”¨ï¼Œ å› æ­¤ï¼Œ å†…å­˜çš„å‹ç¼©è¿™ä¸ªæ—¶å€™å°±ä¼šè¢«å¯ç”¨ã€‚ å¢åŠ è¿™ä¸ªå‚æ•°æ˜¯ä¸ªå¥½ä¹ æƒ¯ã€‚ å¯èƒ½ä¼šå½±å“æ€§èƒ½,ä½†æ˜¯å¯ä»¥æ¶ˆé™¤ç¢ç‰‡</td></tr><tr><td>-XX:+UseCMSInitiatingOccupancyOnly</td><td>ä½¿ç”¨æ‰‹åŠ¨å®šä¹‰åˆå§‹åŒ–å®šä¹‰å¼€å§‹CMSæ”¶é›†</td><td></td><td>ç¦æ­¢hostspotè‡ªè¡Œè§¦å‘CMS GC</td></tr><tr><td>-XX:CMSInitiatingOccupancyFraction=70</td><td>ä½¿ç”¨cmsä½œä¸ºåƒåœ¾å›æ”¶ ä½¿ç”¨70ï¼…åå¼€å§‹CMSæ”¶é›†</td><td>92</td><td>ä¸ºäº†ä¿è¯ä¸å‡ºç°promotion failed(è§ä¸‹é¢ä»‹ç»)é”™è¯¯,è¯¥å€¼çš„è®¾ç½®éœ€è¦æ»¡è¶³ä»¥ä¸‹å…¬å¼**<a href="http://www.cnblogs.com/redcreen/archive/2011/05/04/2037057.html#CMSInitiatingOccupancyFraction_value" target="_blank" rel="noopener noreferrer">CMSInitiatingOccupancyFractionè®¡ç®—å…¬å¼<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>**</td></tr><tr><td>-XX:CMSInitiatingPermOccupancyFraction</td><td>è®¾ç½®Perm Genä½¿ç”¨åˆ°è¾¾å¤šå°‘æ¯”ç‡æ—¶è§¦å‘</td><td>92</td><td></td></tr><tr><td>-XX:+CMSIncrementalMode</td><td>è®¾ç½®ä¸ºå¢é‡æ¨¡å¼</td><td></td><td>ç”¨äºå•CPUæƒ…å†µ</td></tr><tr><td>-XX:+CMSClassUnloadingEnabled</td><td></td><td></td><td></td></tr></tbody></table><p><strong>è¾…åŠ©ä¿¡æ¯</strong></p><table><thead><tr><th>-XX:+PrintGC</th><th></th><th></th><th>è¾“å‡ºå½¢å¼: [GC 118250K-&gt;113543K(130112K), 0.0094143 secs] [Full GC 121376K-&gt;10414K(130112K), 0.0650971 secs]</th></tr></thead><tbody><tr><td>-XX:+PrintGCDetails</td><td></td><td></td><td>è¾“å‡ºå½¢å¼:[GC [DefNew: 8614K-&gt;781K(9088K), 0.0123035 secs] 118250K-&gt;113543K(130112K), 0.0124633 secs] [GC [DefNew: 8614K-&gt;8614K(9088K), 0.0000665 secs][Tenured: 112761K-&gt;10414K(121024K), 0.0433488 secs] 121376K-&gt;10414K(130112K), 0.0436268 secs]</td></tr><tr><td>-XX:+PrintGCTimeStamps</td><td></td><td></td><td></td></tr><tr><td>-XX:+PrintGC:PrintGCTimeStamps</td><td></td><td></td><td>å¯ä¸-XX:+PrintGC -XX:+PrintGCDetailsæ··åˆä½¿ç”¨ è¾“å‡ºå½¢å¼:11.851: [GC 98328K-&gt;93620K(130112K), 0.0082960 secs]</td></tr><tr><td>-XX:+PrintGCApplicationStoppedTime</td><td>æ‰“å°åƒåœ¾å›æ”¶æœŸé—´ç¨‹åºæš‚åœçš„æ—¶é—´.å¯ä¸ä¸Šé¢æ··åˆä½¿ç”¨</td><td></td><td>è¾“å‡ºå½¢å¼:Total time for which application threads were stopped: 0.0468229 seconds</td></tr><tr><td>-XX:+PrintGCApplicationConcurrentTime</td><td>æ‰“å°æ¯æ¬¡åƒåœ¾å›æ”¶å‰,ç¨‹åºæœªä¸­æ–­çš„æ‰§è¡Œæ—¶é—´.å¯ä¸ä¸Šé¢æ··åˆä½¿ç”¨</td><td></td><td>è¾“å‡ºå½¢å¼:Application time: 0.5291524 seconds</td></tr><tr><td>-XX:+PrintHeapAtGC</td><td>æ‰“å°GCå‰åçš„è¯¦ç»†å †æ ˆä¿¡æ¯</td><td></td><td></td></tr><tr><td>-Xloggc:filename</td><td>æŠŠç›¸å…³æ—¥å¿—ä¿¡æ¯è®°å½•åˆ°æ–‡ä»¶ä»¥ä¾¿åˆ†æ. ä¸ä¸Šé¢å‡ ä¸ªé…åˆä½¿ç”¨</td><td></td><td></td></tr><tr><td>-XX:+PrintClassHistogram</td><td>garbage collects before printing the histogram.</td><td></td><td></td></tr><tr><td>-XX:+PrintTLAB</td><td>æŸ¥çœ‹TLABç©ºé—´çš„ä½¿ç”¨æƒ…å†µ</td><td></td><td></td></tr><tr><td>XX:+PrintTenuringDistribution</td><td>æŸ¥çœ‹æ¯æ¬¡minor GCåæ–°çš„å­˜æ´»å‘¨æœŸçš„é˜ˆå€¼</td><td></td><td>Desired survivor size 1048576 bytes, new threshold 7 (max 15) new threshold 7å³æ ‡è¯†æ–°çš„å­˜æ´»å‘¨æœŸçš„é˜ˆå€¼ä¸º7ã€‚</td></tr></tbody></table></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/topjf/topjf/edit/main/docs/java/jvm.md" rel="noopener noreferrer" target="_blank" aria-label="ç¼–è¾‘æ­¤é¡µ" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: topjfk@163.com">jinfang</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/java/23-design-patterns.html" class="nav-link prev" aria-label="23ç§è®¾è®¡æ¨¡å¼æ•´ç†"><div class="hint"><span class="arrow left"></span>ä¸Šä¸€é¡µ</div><div class="link"><span class="font-icon icon iconfont icon-edit" style=""></span>23ç§è®¾è®¡æ¨¡å¼æ•´ç†</div></a><a href="/java/nacos-gateway-sentinel-sleuth.html" class="nav-link next" aria-label="nacos-gateway-sentinel-sleuth"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow right"></span></div><div class="link">nacos-gateway-sentinel-sleuth<span class="font-icon icon iconfont icon-edit" style=""></span></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"></div><div class="copyright">Copyright Â© 2023 topjf</div></footer></div><!--]--><!--]--><!----><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-30d3d221.js" defer></script>
  </body>
</html>
